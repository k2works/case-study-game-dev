
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Site Description">
      
      
        <meta name="author" content="Project Team">
      
      
      
      
      
      <link rel="icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.22">
    
    
      
        <title>ã‚²ãƒ¼ãƒ ã§å­¦ã¶Python! Pyxelã§ã¯ã˜ã‚ã‚‹ãƒ¬ãƒˆãƒ­ã‚²ãƒ¼ãƒ ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚° with TDD - Site Name</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.84d31ad4.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../docs/mkdocs/assets/css/extra.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#python-pyxel-with-tdd" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="Site Name" class="md-header__button md-logo" aria-label="Site Name" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Site Name
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              ã‚²ãƒ¼ãƒ ã§å­¦ã¶Python! Pyxelã§ã¯ã˜ã‚ã‚‹ãƒ¬ãƒˆãƒ­ã‚²ãƒ¼ãƒ ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚° with TDD
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/k2works/claude-code-booster" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    claude-code-booster
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../.." class="md-tabs__link">
        
  
  
    
  
  Home

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


  

<nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="Site Name" class="md-nav__button md-logo" aria-label="Site Name" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Site Name
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/k2works/claude-code-booster" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    claude-code-booster
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="python-pyxel-with-tdd">ã‚²ãƒ¼ãƒ ã§å­¦ã¶Python! Pyxelã§ã¯ã˜ã‚ã‚‹ãƒ¬ãƒˆãƒ­ã‚²ãƒ¼ãƒ ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚° with TDD<a class="headerlink" href="#python-pyxel-with-tdd" title="Permanent link">&para;</a></h1>
<h2 id="_1">ã¯ã˜ã‚ã«<a class="headerlink" href="#_1" title="Permanent link">&para;</a></h2>
<p>æœ¬è¨˜äº‹ã¯ã€ãƒ†ã‚¹ãƒˆé§†å‹•é–‹ç™ºï¼ˆTDDï¼‰ã‚’å®Ÿè·µã—ãªãŒã‚‰Pyxelã§ãƒ¬ãƒˆãƒ­ã‚¹ã‚¿ã‚¤ãƒ«ã®ã‚²ãƒ¼ãƒ é–‹ç™ºã‚’å­¦ã¶ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®å®Œå…¨ã‚¬ã‚¤ãƒ‰ã§ã™ã€‚Chapter 3ã‹ã‚‰Chapter 7ã¾ã§ã®5ã¤ã®æ®µéšã‚’é€šã˜ã¦ã€åŸºç¤çš„ãªæç”»ã‚·ã‚¹ãƒ†ãƒ ã‹ã‚‰æœ¬æ ¼çš„ãªã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚²ãƒ¼ãƒ ã¾ã§ã€æ®µéšçš„ã«ã‚¹ã‚­ãƒ«ã‚¢ãƒƒãƒ—ã§ãã‚‹æ§‹æˆã«ãªã£ã¦ã„ã¾ã™ã€‚</p>
<h3 id="_2">ğŸ¯ æœ¬è¨˜äº‹ã§å­¦ã¹ã‚‹ã“ã¨<a class="headerlink" href="#_2" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>ãƒ†ã‚¹ãƒˆé§†å‹•é–‹ç™ºï¼ˆTDDï¼‰ã®å®Ÿè·µ</strong>: Red-Green-Refactorã‚µã‚¤ã‚¯ãƒ«ã‚’å®Ÿã‚²ãƒ¼ãƒ é–‹ç™ºã§ä½“é¨“</li>
<li><strong>Pyxelã‚²ãƒ¼ãƒ é–‹ç™º</strong>: ãƒ¬ãƒˆãƒ­ã‚¹ã‚¿ã‚¤ãƒ«ã‚²ãƒ¼ãƒ ã‚¨ãƒ³ã‚¸ãƒ³ã®å®Œå…¨æ´»ç”¨</li>
<li><strong>ç¾ä»£çš„Pythoné–‹ç™º</strong>: uvã€Ruffã€mypyç­‰ã®æœ€æ–°ãƒ„ãƒ¼ãƒ«ãƒã‚§ãƒ¼ãƒ³</li>
<li><strong>æ®µéšçš„ã‚¹ã‚­ãƒ«ã‚¢ãƒƒãƒ—</strong>: ç„¡ç†ã®ãªã„å­¦ç¿’æ›²ç·šã§ç¢ºå®Ÿã«ãƒ¬ãƒ™ãƒ«ã‚¢ãƒƒãƒ—</li>
</ul>
<h2 id="1-pyxel">ï¼‘ç«  Pyxelã¨ã¯<a class="headerlink" href="#1-pyxel" title="Permanent link">&para;</a></h2>
<h3 id="pyxel">Pyxelã®ç‰¹å¾´<a class="headerlink" href="#pyxel" title="Permanent link">&para;</a></h3>
<p>Pyxelã¯æ—¥æœ¬ã§é–‹ç™ºã•ã‚ŒãŸãƒ¬ãƒˆãƒ­ã‚²ãƒ¼ãƒ é–‹ç™ºã‚¨ãƒ³ã‚¸ãƒ³ã§ã™ã€‚8bitã‚¹ã‚¿ã‚¤ãƒ«ã®ã‚²ãƒ¼ãƒ ä½œæˆã«ç‰¹åŒ–ã—ã¦ãŠã‚Šã€ä»¥ä¸‹ã®ç‰¹å¾´ãŒã‚ã‚Šã¾ã™ï¼š</p>
<ul>
<li><strong>ã‚·ãƒ³ãƒ—ãƒ«ãªAPI</strong>: åˆå¿ƒè€…ã«ã‚‚åˆ†ã‹ã‚Šã‚„ã™ã„ç›´æ„Ÿçš„ãªã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹</li>
<li><strong>ãƒ¬ãƒˆãƒ­ã‚¹ã‚¿ã‚¤ãƒ«</strong>: 16è‰²ãƒ‘ãƒ¬ãƒƒãƒˆã€8bitéŸ³æºã«ã‚ˆã‚‹ãƒã‚¹ã‚¿ãƒ«ã‚¸ãƒƒã‚¯ãªã‚²ãƒ¼ãƒ ä½“é¨“</li>
<li><strong>é«˜ã„ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹</strong>: Rustãƒ™ãƒ¼ã‚¹ã§å‹•ä½œãŒè»½å¿«</li>
<li><strong>æ—¥æœ¬èªã‚µãƒãƒ¼ãƒˆ</strong>: æ—¥æœ¬èªãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã¨ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£</li>
<li><strong>æ•™è‚²ç›®çš„ã«æœ€é©</strong>: ã‚²ãƒ¼ãƒ é–‹ç™ºã®åŸºç¤ã‚’å­¦ã¶ã®ã«ç†æƒ³çš„</li>
</ul>
<h3 id="pyxel_1">Pyxelã§ä½œã‚Œã‚‹ã‚²ãƒ¼ãƒ <a class="headerlink" href="#pyxel_1" title="Permanent link">&para;</a></h3>
<ul>
<li>ã‚¢ãƒ¼ã‚±ãƒ¼ãƒ‰ç³»ã‚²ãƒ¼ãƒ ï¼ˆãƒ‘ãƒƒã‚¯ãƒãƒ³ã€ãƒ†ãƒˆãƒªã‚¹é¢¨ï¼‰</li>
<li>ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã‚²ãƒ¼ãƒ </li>
<li>ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒãƒ¼ï¼ˆã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚²ãƒ¼ãƒ ï¼‰</li>
<li>ãƒ‘ã‚ºãƒ«ã‚²ãƒ¼ãƒ </li>
<li>RPGã®åŸºæœ¬ã‚·ã‚¹ãƒ†ãƒ </li>
</ul>
<h2 id="2">ï¼’ç«  é–‹ç™ºç’°å¢ƒã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—<a class="headerlink" href="#2" title="Permanent link">&para;</a></h2>
<h3 id="python">ç¾ä»£çš„Pythoné–‹ç™ºç’°å¢ƒã®æ§‹ç¯‰<a class="headerlink" href="#python" title="Permanent link">&para;</a></h3>
<p>æœ¬ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã¯ã€2024å¹´æœ€æ–°ã®Pythoné–‹ç™ºãƒ„ãƒ¼ãƒ«ãƒã‚§ãƒ¼ãƒ³ã‚’æ¡ç”¨ã—ã¦ã„ã¾ã™ï¼š</p>
<h4 id="_3">å¿…è¦ãªãƒ„ãƒ¼ãƒ«<a class="headerlink" href="#_3" title="Permanent link">&para;</a></h4>
<ul>
<li><strong>Python 3.10+</strong>: æœ€æ–°ã®å‹ãƒ’ãƒ³ãƒˆæ©Ÿèƒ½ã‚’æ´»ç”¨</li>
<li><strong>uv</strong>: æ¬¡ä¸–ä»£é«˜é€Ÿãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼ï¼ˆpipã¨venvã®ä»£æ›¿ï¼‰</li>
<li><strong>Ruff</strong>: ã‚ªãƒ¼ãƒ«ã‚¤ãƒ³ãƒ¯ãƒ³å“è³ªç®¡ç†ãƒ„ãƒ¼ãƒ«ï¼ˆflake8ã€blackã€isortã®ä»£æ›¿ï¼‰</li>
<li><strong>mypy</strong>: é™çš„å‹ãƒã‚§ãƒƒã‚«ãƒ¼</li>
<li><strong>pytest</strong>: ãƒ†ã‚¹ãƒ†ã‚£ãƒ³ã‚°ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯</li>
<li><strong>tox</strong>: ã‚¿ã‚¹ã‚¯ãƒ©ãƒ³ãƒŠãƒ¼ãƒ»è¤‡æ•°ç’°å¢ƒç®¡ç†</li>
</ul>
<h4 id="_4">ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—æ‰‹é †<a class="headerlink" href="#_4" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="c1"># ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªä½œæˆ</span>
mkdir<span class="w"> </span>chapter_x<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nb">cd</span><span class="w"> </span>chapter_x

<span class="c1"># uvã«ã‚ˆã‚‹åˆæœŸåŒ–</span>
uv<span class="w"> </span>init

<span class="c1"># ä¾å­˜é–¢ä¿‚ã®è¿½åŠ </span>
uv<span class="w"> </span>add<span class="w"> </span>pyxel
uv<span class="w"> </span>add<span class="w"> </span>--dev<span class="w"> </span>pytest<span class="w"> </span>pytest-cov<span class="w"> </span>ruff<span class="w"> </span>mypy<span class="w"> </span>tox

<span class="c1"># pyproject.tomlã®è¨­å®š</span>
</code></pre></div>
<h4 id="_5">å“è³ªç®¡ç†è¨­å®š<a class="headerlink" href="#_5" title="Permanent link">&para;</a></h4>
<p><strong>pyproject.toml</strong>ã§ã®çµ±åˆè¨­å®šï¼š</p>
<div class="highlight"><pre><span></span><code><span class="k">[tool.ruff]</span>
<span class="n">line-length</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">88</span>
<span class="n">target-version</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;py310&quot;</span>

<span class="k">[tool.ruff.lint.mccabe]</span>
<span class="n">max-complexity</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">7</span><span class="w">  </span><span class="c1"># å¾ªç’°çš„è¤‡é›‘åº¦ã®åˆ¶é™</span>

<span class="k">[tool.mypy]</span>
<span class="n">python_version</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;3.10&quot;</span>
<span class="n">warn_return_any</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span>
<span class="n">warn_unused_configs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span>
<span class="n">disallow_untyped_defs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span>

<span class="k">[tool.pytest.ini_options]</span>
<span class="n">testpaths</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;test&quot;</span><span class="p">]</span>
<span class="n">addopts</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;--cov=lib --cov-report=html --cov-report=term-missing&quot;</span>
</code></pre></div>
<p><strong>tox.ini</strong>ã«ã‚ˆã‚‹ã‚¿ã‚¹ã‚¯è‡ªå‹•åŒ–ï¼š</p>
<div class="highlight"><pre><span></span><code><span class="k">[testenv:test]</span>
<span class="na">deps</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">pytest pytest-cov</span>
<span class="na">commands</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">pytest --cov=lib --cov-report=html --cov-report=term-missing --verbose</span>

<span class="k">[testenv:lint]</span>
<span class="na">deps</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">ruff</span>
<span class="na">commands</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>
<span class="w">    </span><span class="na">ruff check .</span>
<span class="w">    </span><span class="na">ruff format --check .</span>

<span class="k">[testenv:type]</span>
<span class="na">deps</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">mypy pytest</span>
<span class="na">commands</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">mypy lib test</span>
</code></pre></div>
<p>ã“ã‚Œã«ã‚ˆã‚Šã€<code>uv run tox</code>ä¸€ç™ºã§å…¨å“è³ªãƒã‚§ãƒƒã‚¯ãŒå®Œäº†ã—ã¾ã™ã€‚</p>
<p>å„ç« ã§ã¯å…±é€šã—ã¦ã“ã®ç’°å¢ƒã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã‚’ä½¿ç”¨ã™ã‚‹ãŸã‚ã€æœ€åˆã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ä»¥é™ã¯çœç•¥ã—ã¾ã™ã€‚</p>
<h2 id="3">ï¼“ç«  ãŠçµµã‹ãã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³<a class="headerlink" href="#3" title="Permanent link">&para;</a></h2>
<h3 id="_6">å­¦ç¿’ç›®æ¨™<a class="headerlink" href="#_6" title="Permanent link">&para;</a></h3>
<ul>
<li>åŸºæœ¬çš„ãªæç”»ã‚·ã‚¹ãƒ†ãƒ ã®æ§‹ç¯‰</li>
<li>ãƒ†ã‚¹ãƒˆé§†å‹•é–‹ç™ºã®åŸºç¤ç¿’å¾—</li>
<li>Pyxelã®åŸºæœ¬APIç†è§£</li>
</ul>
<h3 id="_7">å®Ÿè£…ã—ãŸæ©Ÿèƒ½<a class="headerlink" href="#_7" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">DrawingApp</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;ãŠçµµã‹ãã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ãƒ¡ã‚¤ãƒ³ã‚¯ãƒ©ã‚¹&quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">width</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">height</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">title</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">drawing_commands</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">tuple</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>  <span class="c1"># ã‚³ãƒãƒ³ãƒ‰ãƒ‘ã‚¿ãƒ¼ãƒ³å®Ÿè£…</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">draw_pixel</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">color</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;ãƒ”ã‚¯ã‚»ãƒ«æç”»&quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">draw_line</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x1</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">y1</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">x2</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">y2</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">color</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;ç›´ç·šæç”»&quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">draw_circle</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">radius</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">color</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">filled</span><span class="p">:</span> <span class="nb">bool</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;å††æç”»ï¼ˆå¡—ã‚Šã¤ã¶ã—ãƒ»è¼ªéƒ­ç·šå¯¾å¿œï¼‰&quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">draw_rectangle</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">width</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">height</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">color</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">filled</span><span class="p">:</span> <span class="nb">bool</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;å››è§’å½¢æç”»ï¼ˆå¡—ã‚Šã¤ã¶ã—ãƒ»è¼ªéƒ­ç·šå¯¾å¿œï¼‰&quot;&quot;&quot;</span>
</code></pre></div>
<h3 id="_8">ä¸»è¦ãªå­¦ç¿’ãƒã‚¤ãƒ³ãƒˆ<a class="headerlink" href="#_8" title="Permanent link">&para;</a></h3>
<h4 id="1">1. ã‚³ãƒãƒ³ãƒ‰ãƒ‘ã‚¿ãƒ¼ãƒ³ã®å®Ÿè£…<a class="headerlink" href="#1" title="Permanent link">&para;</a></h4>
<p>æç”»æ“ä½œã‚’ã‚³ãƒãƒ³ãƒ‰ã¨ã—ã¦è“„ç©ã—ã€å¾Œã§ã¾ã¨ã‚ã¦å®Ÿè¡Œã™ã‚‹è¨­è¨ˆï¼š</p>
<div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">draw_pixel</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">color</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_validate_position</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span> <span class="ow">or</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_validate_color</span><span class="p">(</span><span class="n">color</span><span class="p">):</span>
        <span class="k">return</span> <span class="kc">False</span>

    <span class="c1"># ã‚³ãƒãƒ³ãƒ‰ã‚’è“„ç©</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">drawing_commands</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="s1">&#39;pixel&#39;</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">color</span><span class="p">))</span>
    <span class="k">return</span> <span class="kc">True</span>

<span class="k">def</span><span class="w"> </span><span class="nf">show</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;è“„ç©ã•ã‚ŒãŸã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¦Pyxelã§è¡¨ç¤º&quot;&quot;&quot;</span>
    <span class="n">pyxel</span><span class="o">.</span><span class="n">init</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">width</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">height</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">title</span><span class="p">)</span>
    <span class="n">pyxel</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">draw</span><span class="p">)</span>
</code></pre></div>
<h4 id="2-tdd">2. TDDå®Ÿè·µä¾‹<a class="headerlink" href="#2-tdd" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="c1"># ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ãƒ¼ã‚¹ãƒˆ - å¤±æ•—ã™ã‚‹ãƒ†ã‚¹ãƒˆã‚’å…ˆã«æ›¸ãï¼ˆRedï¼‰</span>
<span class="k">def</span><span class="w"> </span><span class="nf">test_ç‚¹ã‚’æç”»ã™ã‚‹</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="n">app</span> <span class="o">=</span> <span class="n">DrawingApp</span><span class="p">(</span><span class="mi">160</span><span class="p">,</span> <span class="mi">120</span><span class="p">,</span> <span class="s2">&quot;Test&quot;</span><span class="p">)</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">app</span><span class="o">.</span><span class="n">draw_pixel</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">7</span><span class="p">)</span>
    <span class="k">assert</span> <span class="n">result</span> <span class="ow">is</span> <span class="kc">True</span>
    <span class="k">assert</span> <span class="n">app</span><span class="o">.</span><span class="n">drawing_commands</span> <span class="o">==</span> <span class="p">[(</span><span class="s1">&#39;pixel&#39;</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">7</span><span class="p">)]</span>

<span class="c1"># æœ€å°å®Ÿè£…ã§ãƒ†ã‚¹ãƒˆã‚’é€šã™ï¼ˆGreenï¼‰</span>
<span class="k">def</span><span class="w"> </span><span class="nf">draw_pixel</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">color</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">drawing_commands</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="s1">&#39;pixel&#39;</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">color</span><span class="p">))</span>
    <span class="k">return</span> <span class="kc">True</span>

<span class="c1"># ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°ã§å“è³ªå‘ä¸Šï¼ˆRefactorï¼‰</span>
<span class="k">def</span><span class="w"> </span><span class="nf">draw_pixel</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">color</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_validate_position</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
        <span class="k">return</span> <span class="kc">False</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">drawing_commands</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="s1">&#39;pixel&#39;</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">color</span><span class="p">))</span>
    <span class="k">return</span> <span class="kc">True</span>
</code></pre></div>
<h3 id="_9">æŠ€è¡“çš„æˆæœ<a class="headerlink" href="#_9" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹</strong>: 11å€‹</li>
<li><strong>ã‚³ãƒ¼ãƒ‰ã‚«ãƒãƒ¬ãƒƒã‚¸</strong>: 47%</li>
<li><strong>ç¿’å¾—ãƒ‘ã‚¿ãƒ¼ãƒ³</strong>: ã‚³ãƒãƒ³ãƒ‰ãƒ‘ã‚¿ãƒ¼ãƒ³ã€å…¥åŠ›å€¤æ¤œè¨¼</li>
<li><strong>Pyxelã‚¹ã‚­ãƒ«</strong>: åŸºæœ¬æç”»APIã€ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦åˆ¶å¾¡</li>
</ul>
<h2 id="4">ï¼”ç«  ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³<a class="headerlink" href="#4" title="Permanent link">&para;</a></h2>
<h3 id="_10">å­¦ç¿’ç›®æ¨™<a class="headerlink" href="#_10" title="Permanent link">&para;</a></h3>
<ul>
<li>ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®çŠ¶æ…‹ç®¡ç†ã¨ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³</li>
<li>ã‚²ãƒ¼ãƒ ãƒ«ãƒ¼ãƒ—ã®ç†è§£</li>
<li>æ™‚é–“ãƒ™ãƒ¼ã‚¹ã®å‡¦ç†å®Ÿè£…</li>
</ul>
<h3 id="_11">å®Ÿè£…ã—ãŸæ©Ÿèƒ½<a class="headerlink" href="#_11" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">AnimationObject</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ&quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">color</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">visible</span><span class="p">:</span> <span class="nb">bool</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">x</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">y</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">color</span> <span class="o">=</span> <span class="n">color</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">visible</span> <span class="o">=</span> <span class="n">visible</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">move_right</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">speed</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;å³æ–¹å‘ç§»å‹•&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">+=</span> <span class="n">speed</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">check_screen_bounds</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">screen_width</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;ç”»é¢å¢ƒç•Œãƒã‚§ãƒƒã‚¯ï¼ˆå³ç«¯ã§å·¦ç«¯ã«ãƒ«ãƒ¼ãƒ—ï¼‰&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">&gt;=</span> <span class="n">screen_width</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="o">-</span><span class="mi">16</span>  <span class="c1"># ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼å¹…åˆ†å·¦ã«ã‚ªãƒ•ã‚»ãƒƒãƒˆ</span>

<span class="k">class</span><span class="w"> </span><span class="nc">AnimationApp</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ç®¡ç†&quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">width</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">height</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">title</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">objects</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">AnimationObject</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">add_object</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">:</span> <span class="n">AnimationObject</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’è¿½åŠ &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>
</code></pre></div>
<h3 id="3_1">ãƒ‡ãƒ¢ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ï¼š3åŒ¹ã®ã‚¦ã‚µã‚®ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³<a class="headerlink" href="#3_1" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1"># 3åŒ¹ã®ã‚¦ã‚µã‚®ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ã‚’ä½œæˆ</span>
<span class="n">rabbits</span> <span class="o">=</span> <span class="p">[</span>
    <span class="n">AnimationObject</span><span class="p">(</span><span class="n">x</span><span class="o">=-</span><span class="mi">16</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="mi">7</span><span class="p">,</span> <span class="n">visible</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span>    <span class="c1"># ç™½ã‚¦ã‚µã‚®</span>
    <span class="n">AnimationObject</span><span class="p">(</span><span class="n">x</span><span class="o">=-</span><span class="mi">32</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mi">25</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="mi">11</span><span class="p">,</span> <span class="n">visible</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span>   <span class="c1"># ç·‘ã‚¦ã‚µã‚®  </span>
    <span class="n">AnimationObject</span><span class="p">(</span><span class="n">x</span><span class="o">=-</span><span class="mi">48</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mi">40</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="mi">12</span><span class="p">,</span> <span class="n">visible</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>    <span class="c1"># é’ã‚¦ã‚µã‚®</span>
<span class="p">]</span>

<span class="c1"># ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ãƒ«ãƒ¼ãƒ—</span>
<span class="k">def</span><span class="w"> </span><span class="nf">update</span><span class="p">():</span>
    <span class="k">for</span> <span class="n">rabbit</span> <span class="ow">in</span> <span class="n">rabbits</span><span class="p">:</span>
        <span class="n">rabbit</span><span class="o">.</span><span class="n">move_right</span><span class="p">(</span><span class="n">speed</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">rabbit</span><span class="o">.</span><span class="n">check_screen_bounds</span><span class="p">(</span><span class="mi">80</span><span class="p">)</span>  <span class="c1"># ç”»é¢å¹…80ã§ã®å¢ƒç•Œãƒã‚§ãƒƒã‚¯</span>
</code></pre></div>
<h3 id="_12">ä¸»è¦ãªå­¦ç¿’ãƒã‚¤ãƒ³ãƒˆ<a class="headerlink" href="#_12" title="Permanent link">&para;</a></h3>
<h4 id="1_1">1. ã‚²ãƒ¼ãƒ ãƒ«ãƒ¼ãƒ—ã®ç†è§£<a class="headerlink" href="#1_1" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;60FPSã§ã®ã‚²ãƒ¼ãƒ ãƒ«ãƒ¼ãƒ—&quot;&quot;&quot;</span>
    <span class="n">pyxel</span><span class="o">.</span><span class="n">init</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">width</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">height</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">title</span><span class="p">)</span>
    <span class="n">pyxel</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">draw</span><span class="p">)</span>

<span class="k">def</span><span class="w"> </span><span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;æ¯ãƒ•ãƒ¬ãƒ¼ãƒ å‘¼ã³å‡ºã•ã‚Œã‚‹æ›´æ–°å‡¦ç†&quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">obj</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">objects</span><span class="p">:</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">move_right</span><span class="p">()</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">check_screen_bounds</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">width</span><span class="p">)</span>

<span class="k">def</span><span class="w"> </span><span class="nf">draw</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;æ¯ãƒ•ãƒ¬ãƒ¼ãƒ å‘¼ã³å‡ºã•ã‚Œã‚‹æç”»å‡¦ç†&quot;&quot;&quot;</span>
    <span class="n">pyxel</span><span class="o">.</span><span class="n">cls</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>  <span class="c1"># ç”»é¢ã‚¯ãƒªã‚¢</span>
    <span class="k">for</span> <span class="n">obj</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">objects</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">obj</span><span class="o">.</span><span class="n">visible</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_draw_rabbit</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">obj</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="n">obj</span><span class="o">.</span><span class="n">color</span><span class="p">)</span>
</code></pre></div>
<h4 id="2_1">2. ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆçŠ¶æ…‹ç®¡ç†<a class="headerlink" href="#2_1" title="Permanent link">&para;</a></h4>
<p>ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®ä½ç½®ã€è‰²ã€è¡¨ç¤ºçŠ¶æ…‹ã‚’é©åˆ‡ã«ç®¡ç†ï¼š</p>
<div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">test_å³æ–¹å‘ã¸ã®ç­‰é€Ÿç§»å‹•</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="n">obj</span> <span class="o">=</span> <span class="n">AnimationObject</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
    <span class="n">obj</span><span class="o">.</span><span class="n">move_right</span><span class="p">(</span><span class="n">speed</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
    <span class="k">assert</span> <span class="n">obj</span><span class="o">.</span><span class="n">x</span> <span class="o">==</span> <span class="mi">12</span>  <span class="c1"># 2ãƒ”ã‚¯ã‚»ãƒ«å³ã«ç§»å‹•</span>
    <span class="k">assert</span> <span class="n">obj</span><span class="o">.</span><span class="n">y</span> <span class="o">==</span> <span class="mi">20</span>  <span class="c1"># Yåº§æ¨™ã¯å¤‰åŒ–ã—ãªã„</span>

<span class="k">def</span><span class="w"> </span><span class="nf">test_ç”»é¢ç«¯ã§ã®ä½ç½®ãƒªã‚»ãƒƒãƒˆ</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="n">obj</span> <span class="o">=</span> <span class="n">AnimationObject</span><span class="p">(</span><span class="mi">79</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>  <span class="c1"># å³ç«¯è¿‘ã</span>
    <span class="n">obj</span><span class="o">.</span><span class="n">check_screen_bounds</span><span class="p">(</span><span class="mi">80</span><span class="p">)</span>
    <span class="k">assert</span> <span class="n">obj</span><span class="o">.</span><span class="n">x</span> <span class="o">==</span> <span class="o">-</span><span class="mi">16</span>  <span class="c1"># å·¦ç«¯ã«ãƒªã‚»ãƒƒãƒˆï¼ˆã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼å¹…è€ƒæ…®ï¼‰</span>
</code></pre></div>
<h3 id="_13">æŠ€è¡“çš„æˆæœ<a class="headerlink" href="#_13" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹</strong>: 7å€‹</li>
<li><strong>ã‚³ãƒ¼ãƒ‰ã‚«ãƒãƒ¬ãƒƒã‚¸</strong>: 100%ï¼ˆå®Œå…¨ã‚«ãƒãƒ¬ãƒƒã‚¸é”æˆï¼‰</li>
<li><strong>ç¿’å¾—ãƒ‘ã‚¿ãƒ¼ãƒ³</strong>: ã‚¹ãƒ†ãƒ¼ãƒˆãƒ‘ã‚¿ãƒ¼ãƒ³ã€ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãƒ¡ã‚½ãƒƒãƒ‰</li>
<li><strong>Pyxelã‚¹ã‚­ãƒ«</strong>: ã‚²ãƒ¼ãƒ ãƒ«ãƒ¼ãƒ—ã€ã‚¹ãƒ—ãƒ©ã‚¤ãƒˆæç”»ã€ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³</li>
</ul>
<h2 id="5">ï¼•ç«  ãƒ¯ãƒ³ã‚­ãƒ¼ã‚²ãƒ¼ãƒ ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³<a class="headerlink" href="#5" title="Permanent link">&para;</a></h2>
<h3 id="_14">å­¦ç¿’ç›®æ¨™<a class="headerlink" href="#_14" title="Permanent link">&para;</a></h3>
<ul>
<li>ã‚²ãƒ¼ãƒ çŠ¶æ…‹ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ </li>
<li>ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰å…¥åŠ›å‡¦ç†</li>
<li>ç‰©ç†æ¼”ç®—ã®åŸºç¤</li>
</ul>
<h3 id="space-rescue">å®Ÿè£…ã—ãŸã‚²ãƒ¼ãƒ ï¼šSpace Rescueï¼ˆå®‡å®™èˆ¹æ•‘åŠ©ã‚²ãƒ¼ãƒ ï¼‰<a class="headerlink" href="#space-rescue" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">OneKeyGame</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;ãƒ¯ãƒ³ã‚­ãƒ¼ã‚²ãƒ¼ãƒ ã®ãƒ¡ã‚¤ãƒ³ã‚¯ãƒ©ã‚¹&quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">width</span> <span class="o">=</span> <span class="mi">160</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">height</span> <span class="o">=</span> <span class="mi">120</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">title</span> <span class="o">=</span> <span class="s2">&quot;Space Rescue&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">is_title</span> <span class="o">=</span> <span class="kc">True</span>  <span class="c1"># ã‚²ãƒ¼ãƒ çŠ¶æ…‹ç®¡ç†</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;ã‚²ãƒ¼ãƒ çŠ¶æ…‹ã«å¿œã˜ãŸæ›´æ–°å‡¦ç†&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_title</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">pyxel</span><span class="o">.</span><span class="n">btnp</span><span class="p">(</span><span class="n">pyxel</span><span class="o">.</span><span class="n">KEY_ENTER</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">start_game</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># ã‚²ãƒ¼ãƒ ãƒ—ãƒ¬ã‚¤ä¸­ã®å‡¦ç†</span>
            <span class="k">pass</span>

<span class="k">class</span><span class="w"> </span><span class="nc">Spaceship</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;å®‡å®™èˆ¹ã‚¯ãƒ©ã‚¹&quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">x</span>      <span class="c1"># Xåº§æ¨™</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">y</span>      <span class="c1"># Yåº§æ¨™  </span>
        <span class="bp">self</span><span class="o">.</span><span class="n">vx</span> <span class="o">=</span> <span class="mf">0.0</span>   <span class="c1"># Xæ–¹å‘ã®é€Ÿåº¦</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">vy</span> <span class="o">=</span> <span class="mf">0.0</span>   <span class="c1"># Yæ–¹å‘ã®é€Ÿåº¦</span>
</code></pre></div>
<h3 id="_15">ä¸»è¦ãªå­¦ç¿’ãƒã‚¤ãƒ³ãƒˆ<a class="headerlink" href="#_15" title="Permanent link">&para;</a></h3>
<h4 id="1_2">1. ã‚²ãƒ¼ãƒ çŠ¶æ…‹ç®¡ç†<a class="headerlink" href="#1_2" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_title</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_update_title</span><span class="p">()</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_update_play</span><span class="p">()</span>

<span class="k">def</span><span class="w"> </span><span class="nf">_update_title</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;ã‚¿ã‚¤ãƒˆãƒ«ç”»é¢ã®æ›´æ–°&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">pyxel</span><span class="o">.</span><span class="n">btnp</span><span class="p">(</span><span class="n">pyxel</span><span class="o">.</span><span class="n">KEY_ENTER</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">start_game</span><span class="p">()</span>

<span class="k">def</span><span class="w"> </span><span class="nf">_update_play</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;ã‚²ãƒ¼ãƒ ãƒ—ãƒ¬ã‚¤ä¸­ã®æ›´æ–°&quot;&quot;&quot;</span>
    <span class="c1"># ã‚¹ãƒšãƒ¼ã‚¹ã‚­ãƒ¼ã«ã‚ˆã‚‹å®‡å®™èˆ¹åˆ¶å¾¡</span>
    <span class="k">if</span> <span class="n">pyxel</span><span class="o">.</span><span class="n">btn</span><span class="p">(</span><span class="n">pyxel</span><span class="o">.</span><span class="n">KEY_SPACE</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ship</span><span class="o">.</span><span class="n">vy</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ship</span><span class="o">.</span><span class="n">vy</span> <span class="o">-</span> <span class="mf">0.04</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.8</span><span class="p">)</span>  <span class="c1"># ä¸Šæ˜‡</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ship</span><span class="o">.</span><span class="n">vx</span> <span class="o">+=</span> <span class="mf">0.06</span>  <span class="c1"># å³ç§»å‹•</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ship</span><span class="o">.</span><span class="n">vy</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ship</span><span class="o">.</span><span class="n">vy</span> <span class="o">+</span> <span class="mf">0.02</span><span class="p">,</span> <span class="mf">0.8</span><span class="p">)</span>   <span class="c1"># ä¸‹é™</span>
</code></pre></div>
<h4 id="2_2">2. ãƒ¯ãƒ³ã‚­ãƒ¼æ“ä½œã‚·ã‚¹ãƒ†ãƒ <a class="headerlink" href="#2_2" title="Permanent link">&para;</a></h4>
<p>ã‚¹ãƒšãƒ¼ã‚¹ã‚­ãƒ¼ä¸€ã¤ã§ç›´æ„Ÿçš„ãªæ“ä½œã‚’å®Ÿç¾ï¼š</p>
<div class="highlight"><pre><span></span><code><span class="c1"># ã‚¹ãƒšãƒ¼ã‚¹ã‚­ãƒ¼æŠ¼ä¸‹æ™‚</span>
<span class="k">if</span> <span class="n">pyxel</span><span class="o">.</span><span class="n">btn</span><span class="p">(</span><span class="n">pyxel</span><span class="o">.</span><span class="n">KEY_SPACE</span><span class="p">):</span>
    <span class="n">ship</span><span class="o">.</span><span class="n">vy</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">ship</span><span class="o">.</span><span class="n">vy</span> <span class="o">-</span> <span class="mf">0.04</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.8</span><span class="p">)</span>  <span class="c1"># ä¸Šæ˜‡åŠ›</span>
    <span class="n">ship</span><span class="o">.</span><span class="n">vx</span> <span class="o">+=</span> <span class="mf">0.06</span>                      <span class="c1"># å³æ–¹å‘åŠ é€Ÿ</span>

<span class="c1"># ã‚¹ãƒšãƒ¼ã‚¹ã‚­ãƒ¼é›¢ã—æ™‚  </span>
<span class="k">else</span><span class="p">:</span>
    <span class="n">ship</span><span class="o">.</span><span class="n">vy</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">ship</span><span class="o">.</span><span class="n">vy</span> <span class="o">+</span> <span class="mf">0.02</span><span class="p">,</span> <span class="mf">0.8</span><span class="p">)</span>   <span class="c1"># é‡åŠ›ã«ã‚ˆã‚‹ä¸‹é™</span>

<span class="c1"># ä½ç½®æ›´æ–°</span>
<span class="n">ship</span><span class="o">.</span><span class="n">x</span> <span class="o">+=</span> <span class="n">ship</span><span class="o">.</span><span class="n">vx</span>
<span class="n">ship</span><span class="o">.</span><span class="n">y</span> <span class="o">+=</span> <span class="n">ship</span><span class="o">.</span><span class="n">vy</span>
</code></pre></div>
<h4 id="3_2">3. ç‰©ç†æ¼”ç®—ã®åŸºç¤<a class="headerlink" href="#3_2" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">test_å®‡å®™èˆ¹ã®ä½ç½®ç®¡ç†</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="n">ship</span> <span class="o">=</span> <span class="n">Spaceship</span><span class="p">(</span><span class="mf">10.0</span><span class="p">,</span> <span class="mf">20.0</span><span class="p">)</span>
    <span class="k">assert</span> <span class="n">ship</span><span class="o">.</span><span class="n">x</span> <span class="o">==</span> <span class="mf">10.0</span>
    <span class="k">assert</span> <span class="n">ship</span><span class="o">.</span><span class="n">y</span> <span class="o">==</span> <span class="mf">20.0</span>

<span class="k">def</span><span class="w"> </span><span class="nf">test_å®‡å®™èˆ¹ã®é€Ÿåº¦ç®¡ç†</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="n">ship</span> <span class="o">=</span> <span class="n">Spaceship</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)</span>
    <span class="n">ship</span><span class="o">.</span><span class="n">vx</span> <span class="o">=</span> <span class="mf">2.5</span>
    <span class="n">ship</span><span class="o">.</span><span class="n">vy</span> <span class="o">=</span> <span class="o">-</span><span class="mf">1.8</span>
    <span class="k">assert</span> <span class="n">ship</span><span class="o">.</span><span class="n">vx</span> <span class="o">==</span> <span class="mf">2.5</span>
    <span class="k">assert</span> <span class="n">ship</span><span class="o">.</span><span class="n">vy</span> <span class="o">==</span> <span class="o">-</span><span class="mf">1.8</span>
</code></pre></div>
<h3 id="_16">æŠ€è¡“çš„æˆæœ<a class="headerlink" href="#_16" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹</strong>: 5å€‹</li>
<li><strong>ã‚³ãƒ¼ãƒ‰ã‚«ãƒãƒ¬ãƒƒã‚¸</strong>: 91%</li>
<li><strong>ç¿’å¾—ãƒ‘ã‚¿ãƒ¼ãƒ³</strong>: ã‚¹ãƒ†ãƒ¼ãƒˆãƒ‘ã‚¿ãƒ¼ãƒ³ã€ã‚³ãƒãƒ³ãƒ‰ãƒ‘ã‚¿ãƒ¼ãƒ³</li>
<li><strong>ã‚²ãƒ¼ãƒ æ©Ÿèƒ½</strong>: ã‚·ãƒ¼ãƒ³ç®¡ç†ã€ç‰©ç†åˆ¶å¾¡ã€ãƒ¯ãƒ³ã‚­ãƒ¼æ“ä½œ</li>
</ul>
<h2 id="6">ï¼–ç«  ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã‚²ãƒ¼ãƒ ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³<a class="headerlink" href="#6" title="Permanent link">&para;</a></h2>
<h3 id="_17">å­¦ç¿’ç›®æ¨™<a class="headerlink" href="#_17" title="Permanent link">&para;</a></h3>
<ul>
<li>è¤‡é›‘ãªã‚²ãƒ¼ãƒ ã‚·ã‚¹ãƒ†ãƒ ã®è¨­è¨ˆ</li>
<li>è¡çªåˆ¤å®šã‚·ã‚¹ãƒ†ãƒ </li>
<li>AIå®Ÿè£…ã®åŸºç¤</li>
</ul>
<h3 id="mega-wing">å®Ÿè£…ã—ãŸã‚²ãƒ¼ãƒ ï¼šMega Wingï¼ˆã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã‚²ãƒ¼ãƒ ï¼‰<a class="headerlink" href="#mega-wing" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">ShootingGame</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã‚²ãƒ¼ãƒ ãƒ¡ã‚¤ãƒ³ã‚¯ãƒ©ã‚¹&quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">scene</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">SCENE_TITLE</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">player</span> <span class="o">=</span> <span class="n">Player</span><span class="p">(</span><span class="mi">56</span><span class="p">,</span> <span class="mi">144</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">enemies</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Enemy</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">player_bullets</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Bullet</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">enemy_bullets</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Bullet</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">background</span> <span class="o">=</span> <span class="n">Background</span><span class="p">(</span><span class="mi">120</span><span class="p">,</span> <span class="mi">160</span><span class="p">)</span>

<span class="k">class</span><span class="w"> </span><span class="nc">Player</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼æ©Ÿä½“&quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">x</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">y</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">hit_area</span> <span class="o">=</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">6</span><span class="p">)</span>  <span class="c1"># å½“ãŸã‚Šåˆ¤å®šé ˜åŸŸ</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">shot_timer</span> <span class="o">=</span> <span class="mi">0</span>

<span class="k">class</span><span class="w"> </span><span class="nc">Enemy</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;æ•µã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ï¼ˆ3ã‚¿ã‚¤ãƒ—ï¼‰&quot;&quot;&quot;</span>

    <span class="n">TYPE_A</span> <span class="o">=</span> <span class="mi">0</span>  <span class="c1"># HP:1, åŸºæœ¬æ•µ</span>
    <span class="n">TYPE_B</span> <span class="o">=</span> <span class="mi">1</span>  <span class="c1"># HP:2, é«˜é€Ÿç§»å‹•  </span>
    <span class="n">TYPE_C</span> <span class="o">=</span> <span class="mi">2</span>  <span class="c1"># HP:3, é€£å°„æ”»æ’ƒ</span>
</code></pre></div>
<h3 id="_18">ä¸»è¦ãªå­¦ç¿’ãƒã‚¤ãƒ³ãƒˆ<a class="headerlink" href="#_18" title="Permanent link">&para;</a></h3>
<h4 id="1_3">1. è¡çªåˆ¤å®šã‚·ã‚¹ãƒ†ãƒ <a class="headerlink" href="#1_3" title="Permanent link">&para;</a></h4>
<p>AABBï¼ˆè»¸å¹³è¡Œå¢ƒç•Œãƒœãƒƒã‚¯ã‚¹ï¼‰ã«ã‚ˆã‚‹é«˜é€Ÿè¡çªåˆ¤å®šï¼š</p>
<div class="highlight"><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">CollisionDetector</span><span class="p">:</span>
    <span class="nd">@staticmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">check_aabb_collision</span><span class="p">(</span>
        <span class="n">area1</span><span class="p">:</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">],</span> 
        <span class="n">area2</span><span class="p">:</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">]</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;AABBè¡çªåˆ¤å®š&quot;&quot;&quot;</span>
        <span class="n">x1</span><span class="p">,</span> <span class="n">y1</span><span class="p">,</span> <span class="n">w1</span><span class="p">,</span> <span class="n">h1</span> <span class="o">=</span> <span class="n">area1</span>
        <span class="n">x2</span><span class="p">,</span> <span class="n">y2</span><span class="p">,</span> <span class="n">w2</span><span class="p">,</span> <span class="n">h2</span> <span class="o">=</span> <span class="n">area2</span>

        <span class="k">return</span> <span class="ow">not</span> <span class="p">(</span><span class="n">x1</span> <span class="o">+</span> <span class="n">w1</span> <span class="o">&lt;=</span> <span class="n">x2</span> <span class="ow">or</span> <span class="n">x2</span> <span class="o">+</span> <span class="n">w2</span> <span class="o">&lt;=</span> <span class="n">x1</span> <span class="ow">or</span> 
                   <span class="n">y1</span> <span class="o">+</span> <span class="n">h1</span> <span class="o">&lt;=</span> <span class="n">y2</span> <span class="ow">or</span> <span class="n">y2</span> <span class="o">+</span> <span class="n">h2</span> <span class="o">&lt;=</span> <span class="n">y1</span><span class="p">)</span>

<span class="k">def</span><span class="w"> </span><span class="nf">test_AABBè¡çªåˆ¤å®š_è¡çªã™ã‚‹å ´åˆ</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="n">area1</span> <span class="o">=</span> <span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">20</span><span class="p">)</span>  <span class="c1"># (x, y, width, height)</span>
    <span class="n">area2</span> <span class="o">=</span> <span class="p">(</span><span class="mi">20</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">20</span><span class="p">)</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">CollisionDetector</span><span class="o">.</span><span class="n">check_aabb_collision</span><span class="p">(</span><span class="n">area1</span><span class="p">,</span> <span class="n">area2</span><span class="p">)</span>
    <span class="k">assert</span> <span class="n">result</span> <span class="ow">is</span> <span class="kc">True</span>  <span class="c1"># é‡è¤‡éƒ¨åˆ†ãŒã‚ã‚‹ãŸã‚è¡çª</span>
</code></pre></div>
<h4 id="2-ai">2. æ•µAIã‚·ã‚¹ãƒ†ãƒ <a class="headerlink" href="#2-ai" title="Permanent link">&para;</a></h4>
<p>ã‚¿ã‚¤ãƒ—åˆ¥ã®è¡Œå‹•ãƒ‘ã‚¿ãƒ¼ãƒ³å®Ÿè£…ï¼š</p>
<div class="highlight"><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">Enemy</span><span class="p">:</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">enemy_type</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">enemy_type</span> <span class="o">=</span> <span class="n">enemy_type</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">hp</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">][</span><span class="n">enemy_type</span><span class="p">]</span>  <span class="c1"># ã‚¿ã‚¤ãƒ—åˆ¥HP</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">shot_interval</span> <span class="o">=</span> <span class="p">[</span><span class="mi">60</span><span class="p">,</span> <span class="mi">45</span><span class="p">,</span> <span class="mi">30</span><span class="p">][</span><span class="n">enemy_type</span><span class="p">]</span>  <span class="c1"># ã‚¿ã‚¤ãƒ—åˆ¥ç™ºå°„é–“éš”</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;ã‚¿ã‚¤ãƒ—åˆ¥æ›´æ–°å‡¦ç†&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">enemy_type</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">TYPE_A</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">+=</span> <span class="mf">1.0</span>  <span class="c1"># ä½é€Ÿç›´é€²</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">enemy_type</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">TYPE_B</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">+=</span> <span class="mf">2.0</span>  <span class="c1"># é«˜é€Ÿç§»å‹•</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">enemy_type</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">TYPE_C</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">+=</span> <span class="mf">0.8</span>  <span class="c1"># ä½é€Ÿã ãŒé€£å°„</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">can_shoot</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;ç™ºå°„å¯èƒ½åˆ¤å®š&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">shot_timer</span> <span class="o">&lt;=</span> <span class="mi">0</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">shoot</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">Bullet</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;å¼¾ä¸¸ç™ºå°„&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">can_shoot</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">shot_timer</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">shot_interval</span>
            <span class="k">return</span> <span class="p">[</span><span class="n">Bullet</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">Bullet</span><span class="o">.</span><span class="n">TYPE_ENEMY</span><span class="p">)]</span>
        <span class="k">return</span> <span class="p">[]</span>
</code></pre></div>
<h4 id="3_3">3. èƒŒæ™¯ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã‚·ã‚¹ãƒ†ãƒ <a class="headerlink" href="#3_3" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">Background</span><span class="p">:</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">width</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">height</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">star_count</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">20</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stars</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">star_count</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">stars</span><span class="o">.</span><span class="n">append</span><span class="p">({</span>
                <span class="s1">&#39;x&#39;</span><span class="p">:</span> <span class="n">pyxel</span><span class="o">.</span><span class="n">rndi</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">width</span><span class="p">),</span>
                <span class="s1">&#39;y&#39;</span><span class="p">:</span> <span class="n">pyxel</span><span class="o">.</span><span class="n">rndi</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">height</span><span class="p">),</span>
                <span class="s1">&#39;speed&#39;</span><span class="p">:</span> <span class="n">pyxel</span><span class="o">.</span><span class="n">rndf</span><span class="p">(</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">),</span>
                <span class="s1">&#39;size&#39;</span><span class="p">:</span> <span class="n">pyxel</span><span class="o">.</span><span class="n">rndi</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
            <span class="p">})</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;æ˜Ÿã®ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«æ›´æ–°&quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">star</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">stars</span><span class="p">:</span>
            <span class="n">star</span><span class="p">[</span><span class="s1">&#39;y&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="n">star</span><span class="p">[</span><span class="s1">&#39;speed&#39;</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">star</span><span class="p">[</span><span class="s1">&#39;y&#39;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">height</span><span class="p">:</span>
                <span class="n">star</span><span class="p">[</span><span class="s1">&#39;y&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
                <span class="n">star</span><span class="p">[</span><span class="s1">&#39;x&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pyxel</span><span class="o">.</span><span class="n">rndi</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">width</span><span class="p">)</span>
</code></pre></div>
<h3 id="_19">å¾ªç’°çš„è¤‡é›‘åº¦å¯¾ç­–<a class="headerlink" href="#_19" title="Permanent link">&para;</a></h3>
<p>è¤‡é›‘åº¦7ã‚’è¶…ãˆãŸé–¢æ•°ã‚’ãƒ˜ãƒ«ãƒ‘ãƒ¼ãƒ¡ã‚½ãƒƒãƒ‰ã§åˆ†å‰²ï¼š</p>
<div class="highlight"><pre><span></span><code><span class="c1"># Before: è¤‡é›‘åº¦9</span>
<span class="k">def</span><span class="w"> </span><span class="nf">update_collisions</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="c1"># ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼å¼¾ã¨æ•µã®è¡çª</span>
    <span class="k">for</span> <span class="n">bullet</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">player_bullets</span><span class="p">[:]:</span>
        <span class="k">for</span> <span class="n">enemy</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">enemies</span><span class="p">[:]:</span>
            <span class="k">if</span> <span class="n">CollisionDetector</span><span class="o">.</span><span class="n">check_point_in_rect</span><span class="p">(</span><span class="o">...</span><span class="p">):</span>
                <span class="c1"># è¤‡é›‘ãªå‡¦ç†...</span>

<span class="c1"># After: è¤‡é›‘åº¦åˆ¶å¾¡</span>
<span class="k">def</span><span class="w"> </span><span class="nf">update_collisions</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_check_player_bullets_vs_enemies</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_check_enemy_bullets_vs_player</span><span class="p">()</span>

<span class="k">def</span><span class="w"> </span><span class="nf">_check_player_bullets_vs_enemies</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="c1"># åˆ†å‰²ã•ã‚ŒãŸå‡¦ç†</span>
</code></pre></div>
<h3 id="_20">æŠ€è¡“çš„æˆæœ<a class="headerlink" href="#_20" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹</strong>: 32å€‹</li>
<li><strong>ã‚³ãƒ¼ãƒ‰ã‚«ãƒãƒ¬ãƒƒã‚¸</strong>: 98%ï¼ˆæœ€é«˜æ°´æº–ï¼‰</li>
<li><strong>ç¿’å¾—ãƒ‘ã‚¿ãƒ¼ãƒ³</strong>: ã‚¹ãƒˆãƒ©ãƒ†ã‚¸ãƒ¼ãƒ‘ã‚¿ãƒ¼ãƒ³ã€ã‚ªãƒ–ã‚¶ãƒ¼ãƒãƒ¼ãƒ‘ã‚¿ãƒ¼ãƒ³</li>
<li><strong>ã‚²ãƒ¼ãƒ æ©Ÿèƒ½</strong>: æœ¬æ ¼çš„ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã€ãƒãƒ«ãƒæ•µAIã€ã‚¹ã‚³ã‚¢ã‚·ã‚¹ãƒ†ãƒ </li>
</ul>
<h2 id="7">ï¼—ç«  ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚²ãƒ¼ãƒ ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³<a class="headerlink" href="#7" title="Permanent link">&para;</a></h2>
<h3 id="_21">å­¦ç¿’ç›®æ¨™<a class="headerlink" href="#_21" title="Permanent link">&para;</a></h3>
<ul>
<li>çµ±åˆã‚·ã‚¹ãƒ†ãƒ é–‹ç™ºã®å®Ÿè·µ</li>
<li>2Dãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒãƒ¼ã®å®Ÿè£…</li>
<li>é«˜åº¦ãªã‚²ãƒ¼ãƒ ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆç®¡ç†</li>
</ul>
<h3 id="cursed-caverns">å®Ÿè£…ã—ãŸã‚²ãƒ¼ãƒ ï¼šCursed Cavernsï¼ˆæ´çªŸæ¢ç´¢ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ï¼‰<a class="headerlink" href="#cursed-caverns" title="Permanent link">&para;</a></h3>
<p>æœ€ã‚‚å®Œæˆåº¦ã®é«˜ã„ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã€æœ¬æ ¼çš„ãª2Dã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚²ãƒ¼ãƒ ã‚’å®Ÿè£…ï¼š</p>
<div class="highlight"><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">CursedCaverns</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;å‘ªã‚ã‚ŒãŸæ´çªŸ - ãƒ¡ã‚¤ãƒ³ã‚²ãƒ¼ãƒ ã‚¯ãƒ©ã‚¹&quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="c1"># ã‚²ãƒ¼ãƒ çŠ¶æ…‹ç®¡ç†</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">scene</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">SCENE_TITLE</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">score</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">lives</span> <span class="o">=</span> <span class="mi">3</span>

        <span class="c1"># ã‚²ãƒ¼ãƒ ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tilemap</span> <span class="o">=</span> <span class="n">TileMap</span><span class="p">(</span><span class="s2">&quot;assets/tilemap.tmx&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">player</span> <span class="o">=</span> <span class="n">Player</span><span class="p">(</span><span class="mi">80</span><span class="p">,</span> <span class="mi">128</span><span class="p">)</span>  
        <span class="bp">self</span><span class="o">.</span><span class="n">enemies</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Enemy</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">game_objects</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">GameObject</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="c1"># ã‚·ã‚¹ãƒ†ãƒ </span>
        <span class="bp">self</span><span class="o">.</span><span class="n">collision_detector</span> <span class="o">=</span> <span class="n">CollisionDetector</span><span class="p">()</span>
</code></pre></div>
<h3 id="_22">ä¸»è¦ãªå­¦ç¿’ãƒã‚¤ãƒ³ãƒˆ<a class="headerlink" href="#_22" title="Permanent link">&para;</a></h3>
<h4 id="1_4">1. ã‚¿ã‚¤ãƒ«ãƒ™ãƒ¼ã‚¹è¡çªåˆ¤å®šã‚·ã‚¹ãƒ†ãƒ <a class="headerlink" href="#1_4" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">TileMap</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;ã‚¿ã‚¤ãƒ«ãƒãƒƒãƒ—ç®¡ç†&quot;&quot;&quot;</span>

    <span class="n">TILE_WALL</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="n">TILE_FLOOR</span> <span class="o">=</span> <span class="mi">2</span>
    <span class="n">TILE_EMPTY</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">width</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">height</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">width</span> <span class="o">=</span> <span class="n">width</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">height</span> <span class="o">=</span> <span class="n">height</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tiles</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">int</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_tile</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tile_x</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">tile_y</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;æŒ‡å®šã‚¿ã‚¤ãƒ«åº§æ¨™ã®ã‚¿ã‚¤ãƒ«ç¨®åˆ¥ã‚’å–å¾—&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_valid_tile</span><span class="p">(</span><span class="n">tile_x</span><span class="p">,</span> <span class="n">tile_y</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">TILE_WALL</span>  <span class="c1"># ç¯„å›²å¤–ã¯å£æ‰±ã„</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">tiles</span><span class="p">[</span><span class="n">tile_y</span><span class="p">][</span><span class="n">tile_x</span><span class="p">]</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">is_wall</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tile_x</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">tile_y</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;å£ã‚¿ã‚¤ãƒ«åˆ¤å®š&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_tile</span><span class="p">(</span><span class="n">tile_x</span><span class="p">,</span> <span class="n">tile_y</span><span class="p">)</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">TILE_WALL</span>

<span class="k">class</span><span class="w"> </span><span class="nc">CollisionDetector</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;é«˜ç²¾åº¦è¡çªåˆ¤å®šã‚·ã‚¹ãƒ†ãƒ &quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">check_tile_collision</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">player</span><span class="p">:</span> <span class="n">Player</span><span class="p">,</span> <span class="n">tilemap</span><span class="p">:</span> <span class="n">TileMap</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">bool</span><span class="p">,</span> <span class="nb">bool</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã¨ã‚¿ã‚¤ãƒ«ãƒãƒƒãƒ—ã®è¡çªåˆ¤å®š&quot;&quot;&quot;</span>
        <span class="n">hit_area</span> <span class="o">=</span> <span class="n">player</span><span class="o">.</span><span class="n">get_hit_area</span><span class="p">()</span>

        <span class="c1"># æ°´å¹³æ–¹å‘è¡çªåˆ¤å®š</span>
        <span class="n">horizontal_collision</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_check_horizontal_collision</span><span class="p">(</span><span class="n">hit_area</span><span class="p">,</span> <span class="n">tilemap</span><span class="p">)</span>

        <span class="c1"># å‚ç›´æ–¹å‘è¡çªåˆ¤å®š  </span>
        <span class="n">vertical_collision</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_check_vertical_collision</span><span class="p">(</span><span class="n">hit_area</span><span class="p">,</span> <span class="n">tilemap</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">horizontal_collision</span><span class="p">,</span> <span class="n">vertical_collision</span>
</code></pre></div>
<h4 id="2-ai_1">2. è¤‡æ•°æ•µAIå®Ÿè£…<a class="headerlink" href="#2-ai_1" title="Permanent link">&para;</a></h4>
<p>4ç¨®é¡ã®æ•µã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ã«ã‚ˆã‚‹å¤šæ§˜ãªæˆ¦ç•¥æ€§ï¼š</p>
<div class="highlight"><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">Enemy</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;æ•µã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ãƒ™ãƒ¼ã‚¹ã‚¯ãƒ©ã‚¹&quot;&quot;&quot;</span>

    <span class="n">TYPE_SLIME</span> <span class="o">=</span> <span class="mi">0</span>    <span class="c1"># ã‚¹ãƒ©ã‚¤ãƒ ï¼šå·¦å³ç§»å‹•</span>
    <span class="n">TYPE_MUMMY</span> <span class="o">=</span> <span class="mi">1</span>    <span class="c1"># ãƒãƒŸãƒ¼ï¼šè¿½è·¡AI</span>
    <span class="n">TYPE_FLOWER</span> <span class="o">=</span> <span class="mi">2</span>   <span class="c1"># ãƒ•ãƒ©ãƒ¯ãƒ¼ï¼šå°„æ’ƒAI</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">enemy_type</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">enemy_type</span> <span class="o">=</span> <span class="n">enemy_type</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">hp</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">][</span><span class="n">enemy_type</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">speed</span> <span class="o">=</span> <span class="p">[</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.8</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">][</span><span class="n">enemy_type</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ai_state</span> <span class="o">=</span> <span class="s2">&quot;patrol&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">player</span><span class="p">:</span> <span class="n">Player</span><span class="p">,</span> <span class="n">tilemap</span><span class="p">:</span> <span class="n">TileMap</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;ã‚¿ã‚¤ãƒ—åˆ¥AIæ›´æ–°&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">enemy_type</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">TYPE_SLIME</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_update_slime_ai</span><span class="p">(</span><span class="n">tilemap</span><span class="p">)</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">enemy_type</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">TYPE_MUMMY</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_update_mummy_ai</span><span class="p">(</span><span class="n">player</span><span class="p">,</span> <span class="n">tilemap</span><span class="p">)</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">enemy_type</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">TYPE_FLOWER</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_update_flower_ai</span><span class="p">(</span><span class="n">player</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_update_mummy_ai</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">player</span><span class="p">:</span> <span class="n">Player</span><span class="p">,</span> <span class="n">tilemap</span><span class="p">:</span> <span class="n">TileMap</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;ãƒãƒŸãƒ¼ã®è¿½è·¡AI&quot;&quot;&quot;</span>
        <span class="c1"># ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã¨ã®è·é›¢è¨ˆç®—</span>
        <span class="n">dx</span> <span class="o">=</span> <span class="n">player</span><span class="o">.</span><span class="n">x</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span>
        <span class="n">dy</span> <span class="o">=</span> <span class="n">player</span><span class="o">.</span><span class="n">y</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span>
        <span class="n">distance</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">dx</span><span class="o">*</span><span class="n">dx</span> <span class="o">+</span> <span class="n">dy</span><span class="o">*</span><span class="n">dy</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">distance</span> <span class="o">&lt;</span> <span class="mi">64</span><span class="p">:</span>  <span class="c1"># æ„ŸçŸ¥ç¯„å›²å†…</span>
            <span class="c1"># ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼æ–¹å‘ã«ç§»å‹•</span>
            <span class="k">if</span> <span class="nb">abs</span><span class="p">(</span><span class="n">dx</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">2</span><span class="p">:</span>
                <span class="n">direction</span> <span class="o">=</span> <span class="mi">1</span> <span class="k">if</span> <span class="n">dx</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="k">else</span> <span class="o">-</span><span class="mi">1</span>
                <span class="n">next_x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">+</span> <span class="n">direction</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">speed</span>

                <span class="c1"># ã‚¿ã‚¤ãƒ«è¡çªåˆ¤å®š</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">tilemap</span><span class="o">.</span><span class="n">is_wall</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">next_x</span> <span class="o">//</span> <span class="mi">8</span><span class="p">),</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">//</span> <span class="mi">8</span><span class="p">)):</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">next_x</span>
</code></pre></div>
<h4 id="3_4">3. ã‚²ãƒ¼ãƒ ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚·ã‚¹ãƒ†ãƒ <a class="headerlink" href="#3_4" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">GameObject</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;ã‚²ãƒ¼ãƒ ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆåŸºåº•ã‚¯ãƒ©ã‚¹&quot;&quot;&quot;</span>

    <span class="n">TYPE_GEM</span> <span class="o">=</span> <span class="mi">0</span>      <span class="c1"># å®çŸ³ï¼šå¾—ç‚¹ã‚¢ã‚¤ãƒ†ãƒ </span>
    <span class="n">TYPE_MUSHROOM</span> <span class="o">=</span> <span class="mi">1</span> <span class="c1"># ã‚­ãƒã‚³ï¼šå›å¾©ã‚¢ã‚¤ãƒ†ãƒ   </span>
    <span class="n">TYPE_SPIKE</span> <span class="o">=</span> <span class="mi">2</span>    <span class="c1"># ãƒˆã‚²ï¼šãƒ€ãƒ¡ãƒ¼ã‚¸ãƒˆãƒ©ãƒƒãƒ—</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">obj_type</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">x</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">y</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">obj_type</span> <span class="o">=</span> <span class="n">obj_type</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">collected</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">score_value</span> <span class="o">=</span> <span class="p">[</span><span class="mi">100</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">][</span><span class="n">obj_type</span><span class="p">]</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">on_collect</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">player</span><span class="p">:</span> <span class="n">Player</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;ã‚¢ã‚¤ãƒ†ãƒ å–å¾—æ™‚ã®å‡¦ç†&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj_type</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">TYPE_GEM</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;score&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">score_value</span><span class="p">,</span> <span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;Gem collected!&quot;</span><span class="p">}</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj_type</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">TYPE_MUSHROOM</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;heal&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;HP recovered!&quot;</span><span class="p">}</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj_type</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">TYPE_SPIKE</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;damage&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;Ouch!&quot;</span><span class="p">}</span>
        <span class="k">return</span> <span class="p">{}</span>

<span class="k">def</span><span class="w"> </span><span class="nf">test_å®çŸ³ã‚¢ã‚¤ãƒ†ãƒ ã®å–å¾—å‡¦ç†</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="n">gem</span> <span class="o">=</span> <span class="n">GameObject</span><span class="p">(</span><span class="mi">50</span><span class="p">,</span> <span class="mi">60</span><span class="p">,</span> <span class="n">GameObject</span><span class="o">.</span><span class="n">TYPE_GEM</span><span class="p">)</span>
    <span class="n">player</span> <span class="o">=</span> <span class="n">Player</span><span class="p">(</span><span class="mi">48</span><span class="p">,</span> <span class="mi">64</span><span class="p">)</span>  <span class="c1"># å®çŸ³ã®è¿‘ã</span>

    <span class="n">result</span> <span class="o">=</span> <span class="n">gem</span><span class="o">.</span><span class="n">on_collect</span><span class="p">(</span><span class="n">player</span><span class="p">)</span>

    <span class="k">assert</span> <span class="n">result</span><span class="p">[</span><span class="s2">&quot;score&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="mi">100</span>
    <span class="k">assert</span> <span class="n">result</span><span class="p">[</span><span class="s2">&quot;message&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;Gem collected!&quot;</span>
</code></pre></div>
<h4 id="4_1">4. è¤‡é›‘ãªã‚²ãƒ¼ãƒ ãƒ«ãƒ¼ãƒ—çµ±åˆ<a class="headerlink" href="#4_1" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;çµ±åˆã‚²ãƒ¼ãƒ ãƒ«ãƒ¼ãƒ—&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">scene</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">SCENE_TITLE</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_update_title</span><span class="p">()</span>
    <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">scene</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">SCENE_PLAY</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_update_play</span><span class="p">()</span>
    <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">scene</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">SCENE_GAME_OVER</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_update_game_over</span><span class="p">()</span>

<span class="k">def</span><span class="w"> </span><span class="nf">_update_play</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;ãƒ—ãƒ¬ã‚¤ä¸­ã®æ›´æ–°ï¼ˆè¤‡é›‘åº¦åˆ¶å¾¡æ¸ˆã¿ï¼‰&quot;&quot;&quot;</span>
    <span class="c1"># ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼æ›´æ–°</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">player</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_apply_player_physics</span><span class="p">()</span>

    <span class="c1"># æ•µæ›´æ–°</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_update_enemies</span><span class="p">()</span>

    <span class="c1"># ã‚²ãƒ¼ãƒ ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆæ›´æ–°  </span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_update_game_objects</span><span class="p">()</span>

    <span class="c1"># è¡çªåˆ¤å®š</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_check_all_collisions</span><span class="p">()</span>

    <span class="c1"># ã‚²ãƒ¼ãƒ çŠ¶æ…‹ç¢ºèª</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_check_game_state</span><span class="p">()</span>

<span class="k">def</span><span class="w"> </span><span class="nf">_check_all_collisions</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;å…¨è¡çªåˆ¤å®šã®çµ±åˆå‡¦ç†&quot;&quot;&quot;</span>
    <span class="c1"># ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ vs ã‚¿ã‚¤ãƒ«</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_check_player_tile_collision</span><span class="p">()</span>

    <span class="c1"># ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ vs æ•µ</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_check_player_enemy_collision</span><span class="p">()</span> 

    <span class="c1"># ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ vs ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_check_player_object_collision</span><span class="p">()</span>
</code></pre></div>
<h4 id="5_1">5. ã‚¸ãƒ£ãƒ³ãƒ—æ©Ÿèƒ½ã®å®Ÿè£…<a class="headerlink" href="#5_1" title="Permanent link">&para;</a></h4>
<p>ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã€Œã‚­ãƒ£ãƒ©ãŒã‚¸ãƒ£ãƒ³ãƒ—ã—ãªã„ã€ã‚’å—ã‘ã¦è¿½åŠ å®Ÿè£…ï¼š</p>
<div class="highlight"><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">Player</span><span class="p">:</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">x</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">y</span>  
        <span class="bp">self</span><span class="o">.</span><span class="n">dy</span> <span class="o">=</span> <span class="mi">0</span>         <span class="c1"># Yæ–¹å‘é€Ÿåº¦</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">jump_counter</span> <span class="o">=</span> <span class="mi">0</span>  <span class="c1"># ã‚¸ãƒ£ãƒ³ãƒ—åˆ¶å¾¡</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_handle_movement</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;ç§»å‹•ã¨ã‚¸ãƒ£ãƒ³ãƒ—ã®å‡¦ç†&quot;&quot;&quot;</span>
        <span class="c1"># æ°´å¹³ç§»å‹•</span>
        <span class="k">if</span> <span class="n">pyxel</span><span class="o">.</span><span class="n">btn</span><span class="p">(</span><span class="n">pyxel</span><span class="o">.</span><span class="n">KEY_LEFT</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">-=</span> <span class="mi">2</span>
        <span class="k">if</span> <span class="n">pyxel</span><span class="o">.</span><span class="n">btn</span><span class="p">(</span><span class="n">pyxel</span><span class="o">.</span><span class="n">KEY_RIGHT</span><span class="p">):</span>  
            <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">+=</span> <span class="mi">2</span>

        <span class="c1"># ã‚¸ãƒ£ãƒ³ãƒ—å‡¦ç†</span>
        <span class="k">if</span> <span class="n">pyxel</span><span class="o">.</span><span class="n">btnp</span><span class="p">(</span><span class="n">pyxel</span><span class="o">.</span><span class="n">KEY_SPACE</span><span class="p">)</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">jump_counter</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">dy</span> <span class="o">=</span> <span class="o">-</span><span class="mi">8</span>  <span class="c1"># ä¸Šæ–¹å‘ã«åˆæœŸé€Ÿåº¦ã‚’è¨­å®š</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">jump_counter</span> <span class="o">=</span> <span class="mi">16</span>  <span class="c1"># ã‚¸ãƒ£ãƒ³ãƒ—æ™‚é–“ã‚’è¨­å®š</span>

<span class="k">def</span><span class="w"> </span><span class="nf">test_ã‚¹ãƒšãƒ¼ã‚¹ã‚­ãƒ¼ã§ã‚¸ãƒ£ãƒ³ãƒ—ã™ã‚‹</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="n">player</span> <span class="o">=</span> <span class="n">Player</span><span class="p">(</span><span class="mi">50</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>

    <span class="c1"># ã‚¸ãƒ£ãƒ³ãƒ—å‰</span>
    <span class="k">assert</span> <span class="n">player</span><span class="o">.</span><span class="n">dy</span> <span class="o">==</span> <span class="mi">0</span>
    <span class="k">assert</span> <span class="n">player</span><span class="o">.</span><span class="n">jump_counter</span> <span class="o">==</span> <span class="mi">0</span>

    <span class="c1"># ã‚¸ãƒ£ãƒ³ãƒ—å®Ÿè¡Œã‚’ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ãƒˆ</span>
    <span class="n">player</span><span class="o">.</span><span class="n">dy</span> <span class="o">=</span> <span class="o">-</span><span class="mi">8</span>
    <span class="n">player</span><span class="o">.</span><span class="n">jump_counter</span> <span class="o">=</span> <span class="mi">16</span>

    <span class="c1"># ã‚¸ãƒ£ãƒ³ãƒ—å¾Œ</span>
    <span class="k">assert</span> <span class="n">player</span><span class="o">.</span><span class="n">dy</span> <span class="o">==</span> <span class="o">-</span><span class="mi">8</span>
    <span class="k">assert</span> <span class="n">player</span><span class="o">.</span><span class="n">jump_counter</span> <span class="o">==</span> <span class="mi">16</span>

<span class="k">def</span><span class="w"> </span><span class="nf">test_ã‚¸ãƒ£ãƒ³ãƒ—ä¸­ã¯é€£ç¶šã‚¸ãƒ£ãƒ³ãƒ—ã§ããªã„</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="n">player</span> <span class="o">=</span> <span class="n">Player</span><span class="p">(</span><span class="mi">50</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>

    <span class="c1"># æ—¢ã«ã‚¸ãƒ£ãƒ³ãƒ—ä¸­ã®çŠ¶æ…‹</span>
    <span class="n">player</span><span class="o">.</span><span class="n">jump_counter</span> <span class="o">=</span> <span class="mi">10</span>
    <span class="n">original_dy</span> <span class="o">=</span> <span class="n">player</span><span class="o">.</span><span class="n">dy</span>

    <span class="c1"># å†ã‚¸ãƒ£ãƒ³ãƒ—è©¦è¡Œï¼ˆå®Ÿè¡Œã•ã‚Œãªã„æƒ³å®šï¼‰</span>
    <span class="c1"># å®Ÿéš›ã®ã‚­ãƒ¼å…¥åŠ›å‡¦ç†ã§ã¯ jump_counter &gt; 0 ãªã®ã§å®Ÿè¡Œã•ã‚Œãªã„</span>

    <span class="k">assert</span> <span class="n">player</span><span class="o">.</span><span class="n">dy</span> <span class="o">==</span> <span class="n">original_dy</span>  <span class="c1"># é€Ÿåº¦å¤‰æ›´ãªã—</span>
    <span class="k">assert</span> <span class="n">player</span><span class="o">.</span><span class="n">jump_counter</span> <span class="o">==</span> <span class="mi">10</span>  <span class="c1"># ã‚«ã‚¦ãƒ³ã‚¿å¤‰æ›´ãªã—</span>
</code></pre></div>
<h3 id="_23">æŠ€è¡“çš„æˆæœ<a class="headerlink" href="#_23" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹</strong>: 74å€‹ï¼ˆæœ€å¤§è¦æ¨¡ï¼‰</li>
<li><strong>ã‚³ãƒ¼ãƒ‰ã‚«ãƒãƒ¬ãƒƒã‚¸</strong>: 83%ï¼ˆçµ±åˆã‚·ã‚¹ãƒ†ãƒ ã§é«˜æ°´æº–ç¶­æŒï¼‰</li>
<li><strong>å¾ªç’°çš„è¤‡é›‘åº¦</strong>: å…¨é–¢æ•°7ä»¥ä¸‹ï¼ˆå“è³ªç®¡ç†å¾¹åº•ï¼‰</li>
<li><strong>ã‚²ãƒ¼ãƒ æ©Ÿèƒ½</strong>: å®Œå…¨ãª2Dã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚²ãƒ¼ãƒ </li>
</ul>
<h2 id="8">ï¼˜ç«  ã¾ã¨ã‚<a class="headerlink" href="#8" title="Permanent link">&para;</a></h2>
<h3 id="_24">ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå…¨ä½“ã®æˆæœ<a class="headerlink" href="#_24" title="Permanent link">&para;</a></h3>
<p>æœ¬ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’é€šã˜ã¦ã€ä»¥ä¸‹ã®åŒ…æ‹¬çš„ãªã‚¹ã‚­ãƒ«ã‚»ãƒƒãƒˆã‚’ç¿’å¾—ã§ãã¾ã—ãŸï¼š</p>
<h4 id="_25">ğŸ“Š å®šé‡çš„æˆæœ<a class="headerlink" href="#_25" title="Permanent link">&para;</a></h4>
<table>
<thead>
<tr>
<th>æŒ‡æ¨™</th>
<th>æ•°å€¤</th>
<th>è©³ç´°</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>ç·ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹</strong></td>
<td>129å€‹</td>
<td>å…¨ç« åˆè¨ˆã§ã®å“è³ªä¿è¨¼ä½“åˆ¶</td>
</tr>
<tr>
<td><strong>å¹³å‡ã‚«ãƒãƒ¬ãƒƒã‚¸</strong></td>
<td>83.8%</td>
<td>é«˜ã„å“è³ªåŸºæº–ã®ç¶­æŒ</td>
</tr>
<tr>
<td><strong>å®Œæˆã‚²ãƒ¼ãƒ æ•°</strong></td>
<td>5æœ¬</td>
<td>å®Ÿéš›ã«ãƒ—ãƒ¬ã‚¤å¯èƒ½ãªã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³</td>
</tr>
<tr>
<td><strong>é–‹ç™ºæœŸé–“</strong></td>
<td>1æ—¥</td>
<td>åŠ¹ç‡çš„ãªé–‹ç™ºãƒ—ãƒ­ã‚»ã‚¹</td>
</tr>
<tr>
<td><strong>å¾ªç’°çš„è¤‡é›‘åº¦</strong></td>
<td>7ä»¥ä¸‹</td>
<td>å…¨é–¢æ•°ã§ä¿å®ˆæ€§ç¢ºä¿</td>
</tr>
</tbody>
</table>
<h4 id="_26">ğŸš€ æŠ€è¡“ã‚¹ã‚­ãƒ«ç¿’å¾—<a class="headerlink" href="#_26" title="Permanent link">&para;</a></h4>
<p><strong>1. ãƒ†ã‚¹ãƒˆé§†å‹•é–‹ç™ºï¼ˆTDDï¼‰ãƒã‚¹ã‚¿ãƒªãƒ¼</strong>
- Red-Green-Refactorã‚µã‚¤ã‚¯ãƒ«ç´„150å›å®Ÿè·µ
- ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ãƒ¼ã‚¹ãƒˆæ€è€ƒã®ç¿’æ…£åŒ–
- ç¶™ç¶šçš„ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°ã«ã‚ˆã‚‹å“è³ªå‘ä¸Š</p>
<p><strong>2. ãƒ¢ãƒ€ãƒ³Pythoné–‹ç™ºã®å®Œå…¨ç¿’å¾—</strong>
- å‹ãƒ’ãƒ³ãƒˆå®Œå…¨æ´»ç”¨ã«ã‚ˆã‚‹å‹å®‰å…¨æ€§ç¢ºä¿
- uvã€Ruffã€mypyã«ã‚ˆã‚‹ç¾ä»£çš„ãƒ„ãƒ¼ãƒ«ãƒã‚§ãƒ¼ãƒ³
- toxçµ±åˆã«ã‚ˆã‚‹è‡ªå‹•åŒ–ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼</p>
<p><strong>3. ã‚²ãƒ¼ãƒ é–‹ç™ºåŸºç¤ã®ç¢ºç«‹</strong>
- 2Dç‰©ç†æ¼”ç®—ã‚·ã‚¹ãƒ†ãƒ ï¼ˆé‡åŠ›ã€è¡çªã€ç§»å‹•åˆ¶å¾¡ï¼‰
- AIå®Ÿè£…ï¼ˆè¤‡æ•°ãƒ‘ã‚¿ãƒ¼ãƒ³ã®æ•µè¡Œå‹•ã‚·ã‚¹ãƒ†ãƒ ï¼‰
- ã‚²ãƒ¼ãƒ çŠ¶æ…‹ç®¡ç†ï¼ˆè¤‡é›‘ãªã‚·ãƒ¼ãƒ³é·ç§»åˆ¶å¾¡ï¼‰</p>
<p><strong>4. ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢å·¥å­¦å®Ÿè·µ</strong>
- ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£è¨­è¨ˆï¼ˆæ‹¡å¼µæ€§ãƒ»ä¿å®ˆæ€§é‡è¦–ï¼‰
- å“è³ªç®¡ç†ï¼ˆå®šé‡çš„å“è³ªæŒ‡æ¨™ã«ã‚ˆã‚‹ç®¡ç†ï¼‰
- ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆç®¡ç†ï¼ˆæ®µéšçš„é–‹ç™ºã¨ãƒã‚¤ãƒ«ã‚¹ãƒˆãƒ¼ãƒ³ï¼‰</p>
<h4 id="_27">ğŸ—ï¸ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£é€²åŒ–ã®è»Œè·¡<a class="headerlink" href="#_27" title="Permanent link">&para;</a></h4>
<p><strong>Phase 1ï¼ˆChapter 3-4ï¼‰: åŸºç¤æ§‹é€ ç¢ºç«‹</strong>
<div class="highlight"><pre><span></span><code><span class="c1"># ã‚·ãƒ³ãƒ—ãƒ«ãªã‚¯ãƒ©ã‚¹è¨­è¨ˆ</span>
<span class="k">class</span><span class="w"> </span><span class="nc">DrawingApp</span><span class="p">:</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">draw_pixel</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">color</span><span class="p">):</span> <span class="k">pass</span>

<span class="k">class</span><span class="w"> </span><span class="nc">AnimationObject</span><span class="p">:</span>  
    <span class="k">def</span><span class="w"> </span><span class="nf">move_right</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> <span class="k">pass</span>
</code></pre></div></p>
<p><strong>Phase 2ï¼ˆChapter 5ï¼‰: ã‚²ãƒ¼ãƒ åŒ–</strong>
<div class="highlight"><pre><span></span><code><span class="c1"># ã‚²ãƒ¼ãƒ çŠ¶æ…‹ç®¡ç†å°å…¥</span>
<span class="k">class</span><span class="w"> </span><span class="nc">OneKeyGame</span><span class="p">:</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_title</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_update_title</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_update_play</span><span class="p">()</span>
</code></pre></div></p>
<p><strong>Phase 3ï¼ˆChapter 6-7ï¼‰: çµ±åˆã‚·ã‚¹ãƒ†ãƒ </strong>
<div class="highlight"><pre><span></span><code><span class="c1"># è¤‡é›‘ãªã‚·ã‚¹ãƒ†ãƒ çµ±åˆ</span>
<span class="k">class</span><span class="w"> </span><span class="nc">CursedCaverns</span><span class="p">:</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tilemap</span> <span class="o">=</span> <span class="n">TileMap</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">player</span> <span class="o">=</span> <span class="n">Player</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">enemies</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">collision_detector</span> <span class="o">=</span> <span class="n">CollisionDetector</span><span class="p">()</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># çµ±åˆã‚·ã‚¹ãƒ†ãƒ ç®¡ç†</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_update_all_systems</span><span class="p">()</span>
</code></pre></div></p>
<h4 id="_28">ğŸ§ª ãƒ†ã‚¹ãƒˆæˆ¦ç•¥ã®é€²åŒ–<a class="headerlink" href="#_28" title="Permanent link">&para;</a></h4>
<p><strong>åŸºç¤ãƒ¬ãƒ™ãƒ«ï¼ˆChapter 3-4ï¼‰</strong>
- ã‚·ãƒ³ãƒ—ãƒ«ãªãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆ
- åŸºæœ¬çš„ãªMockä½¿ç”¨</p>
<p><strong>ä¸­ç´šãƒ¬ãƒ™ãƒ«ï¼ˆChapter 5-6ï¼‰</strong><br />
- çµ±åˆãƒ†ã‚¹ãƒˆã®å°å…¥
- è¤‡é›‘ãªMockæˆ¦ç•¥</p>
<p><strong>ä¸Šç´šãƒ¬ãƒ™ãƒ«ï¼ˆChapter 7ï¼‰</strong>
- åŒ…æ‹¬çš„ãƒ†ã‚¹ãƒˆã‚¹ã‚¤ãƒ¼ãƒˆï¼ˆ74ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ï¼‰
- é«˜ç²¾åº¦ã‚«ãƒãƒ¬ãƒƒã‚¸ï¼ˆ83%ã®å“è³ªç¢ºä¿ï¼‰
- å¾ªç’°çš„è¤‡é›‘åº¦åˆ¶å¾¡ï¼ˆå…¨é–¢æ•°7ä»¥ä¸‹ï¼‰</p>
<h3 id="_29">å®Ÿè·µçš„ãªå­¦ç¿’ä¾¡å€¤<a class="headerlink" href="#_29" title="Permanent link">&para;</a></h3>
<h4 id="1_5">1. <strong>æ¥­å‹™é©ç”¨å¯èƒ½ãªã‚¹ã‚­ãƒ«</strong><a class="headerlink" href="#1_5" title="Permanent link">&para;</a></h4>
<p><strong>ãƒ†ã‚¹ãƒˆé§†å‹•é–‹ç™º</strong>
- ä¼æ¥­é–‹ç™ºã§æ±‚ã‚ã‚‰ã‚Œã‚‹å“è³ªç®¡ç†æ‰‹æ³•
- å®‰å…¨ãªãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°æŠ€è¡“
- ç¶™ç¶šçš„ã‚¤ãƒ³ãƒ†ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³å¯¾å¿œ</p>
<p><strong>ç¾ä»£çš„Pythoné–‹ç™º</strong>
- å‹å®‰å…¨æ€§ã‚’é‡è¦–ã—ãŸé–‹ç™ºã‚¹ã‚¿ã‚¤ãƒ«
- è‡ªå‹•åŒ–ã•ã‚ŒãŸå“è³ªãƒã‚§ãƒƒã‚¯ã‚·ã‚¹ãƒ†ãƒ 
- ä¿å®ˆæ€§ã®é«˜ã„ã‚³ãƒ¼ãƒ‰æ§‹é€ è¨­è¨ˆ</p>
<h4 id="2_3">2. <strong>ã‚²ãƒ¼ãƒ é–‹ç™ºã®å®Ÿç”¨åŸºç¤</strong><a class="headerlink" href="#2_3" title="Permanent link">&para;</a></h4>
<p><strong>2Dç‰©ç†æ¼”ç®—</strong>
- é‡åŠ›ãƒ»è¡çªãƒ»ç§»å‹•åˆ¶å¾¡ã®å®Œå…¨å®Ÿè£…
- ã‚¿ã‚¤ãƒ«ãƒ™ãƒ¼ã‚¹è¡çªåˆ¤å®šã‚·ã‚¹ãƒ†ãƒ 
- è¤‡æ•°ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®çµ±åˆç®¡ç†</p>
<p><strong>AIå®Ÿè£…</strong>
- ãƒ‘ã‚¿ãƒ¼ãƒ³ãƒ™ãƒ¼ã‚¹AIè¨­è¨ˆ
- çŠ¶æ…‹ç®¡ç†ã«ã‚ˆã‚‹è¡Œå‹•åˆ¶å¾¡
- ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼è¿½è·¡ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ </p>
<h4 id="3_5">3. <strong>ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆç®¡ç†</strong><a class="headerlink" href="#3_5" title="Permanent link">&para;</a></h4>
<p><strong>æ®µéšçš„é–‹ç™º</strong>
- ç„¡ç†ã®ãªã„å­¦ç¿’æ›²ç·šè¨­è¨ˆ<br />
- ãƒã‚¤ãƒ«ã‚¹ãƒˆãƒ¼ãƒ³ãƒ™ãƒ¼ã‚¹ã®é€²æ—ç®¡ç†
- ç¶™ç¶šçš„ãªå“è³ªæ”¹å–„ãƒ—ãƒ­ã‚»ã‚¹</p>
<h3 id="_30">ä»Šå¾Œã®ç™ºå±•å¯èƒ½æ€§<a class="headerlink" href="#_30" title="Permanent link">&para;</a></h3>
<h4 id="_31">æŠ€è¡“çš„æ‹¡å¼µæ–¹å‘<a class="headerlink" href="#_31" title="Permanent link">&para;</a></h4>
<p><strong>1. é«˜åº¦ãªã‚²ãƒ¼ãƒ æ©Ÿèƒ½</strong>
- ã‚µã‚¦ãƒ³ãƒ‰ã‚·ã‚¹ãƒ†ãƒ çµ±åˆï¼ˆBGMãƒ»åŠ¹æœéŸ³ï¼‰
- ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯æ©Ÿèƒ½ï¼ˆãƒãƒ«ãƒãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼å¯¾å¿œï¼‰
- ã‚»ãƒ¼ãƒ–ãƒ»ãƒ­ãƒ¼ãƒ‰ã‚·ã‚¹ãƒ†ãƒ </p>
<p><strong>2. AIãƒ»æ©Ÿæ¢°å­¦ç¿’çµ±åˆ</strong>
- å¼·åŒ–å­¦ç¿’ã«ã‚ˆã‚‹æ•µAIé«˜åº¦åŒ–
- ãƒ—ãƒ­ã‚·ãƒ¼ã‚¸ãƒ£ãƒ«ç”Ÿæˆã‚·ã‚¹ãƒ†ãƒ 
- ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼è¡Œå‹•åˆ†æ</p>
<p><strong>3. ã‚¯ãƒ­ã‚¹ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ å±•é–‹</strong>
- Webå±•é–‹ï¼ˆPyodideæ´»ç”¨ï¼‰
- ãƒ¢ãƒã‚¤ãƒ«å¯¾å¿œï¼ˆKivyçµ±åˆï¼‰
- ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—ã‚¢ãƒ—ãƒªåŒ–</p>
<h4 id="_32">æ•™è‚²ãƒ»ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£æ´»ç”¨<a class="headerlink" href="#_32" title="Permanent link">&para;</a></h4>
<p><strong>1. æ•™è‚²æ•™æã¨ã—ã¦ã®ç™ºå±•</strong>
- å¤§å­¦ãƒ»å°‚é–€å­¦æ ¡ã‚«ãƒªã‚­ãƒ¥ãƒ©ãƒ çµ„ã¿è¾¼ã¿
- ã‚ªãƒ³ãƒ©ã‚¤ãƒ³å­¦ç¿’ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ å±•é–‹<br />
- ä¼æ¥­ç ”ä¿®ãƒ—ãƒ­ã‚°ãƒ©ãƒ æä¾›</p>
<p><strong>2. ã‚ªãƒ¼ãƒ—ãƒ³ã‚½ãƒ¼ã‚¹ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£</strong>
- GitHubä¸Šã§ã®ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£å½¢æˆ
- ã‚³ãƒ³ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ã«ã‚ˆã‚‹æ©Ÿèƒ½æ‹¡å¼µ
- å¤šè¨€èªåŒ–ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ</p>
<h3 id="_33">æœ€çµ‚è©•ä¾¡<a class="headerlink" href="#_33" title="Permanent link">&para;</a></h3>
<p><strong>ğŸ† ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯ã€ãƒ†ã‚¹ãƒˆé§†å‹•é–‹ç™ºã®å®Ÿè·µçš„ç¿’å¾—ã¨Pythonã‚²ãƒ¼ãƒ é–‹ç™ºã®åŒ…æ‹¬çš„å­¦ç¿’ã‚’åŒæ™‚ã«å®Ÿç¾ã™ã‚‹ã€æ¥µã‚ã¦æ•™è‚²ä¾¡å€¤ã®é«˜ã„ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¨ã—ã¦å®Œæˆã—ã¾ã—ãŸã€‚</strong></p>
<h4 id="_34">æˆåŠŸè¦å› <a class="headerlink" href="#_34" title="Permanent link">&para;</a></h4>
<ol>
<li><strong>æ®µéšçš„å­¦ç¿’è¨­è¨ˆ</strong>: Chapter 3ã‹ã‚‰7ã¸ã®ç„¡ç†ã®ãªã„ã‚¹ã‚­ãƒ«ã‚¢ãƒƒãƒ—æ›²ç·š</li>
<li><strong>å®Ÿè·µçš„ã‚¢ãƒ—ãƒ­ãƒ¼ãƒ</strong>: ç†è«–ã§ã¯ãªãå®Ÿéš›ã«å‹•ä½œã™ã‚‹ã‚²ãƒ¼ãƒ ã§ã®å­¦ç¿’</li>
<li><strong>å“è³ªé‡è¦–</strong>: é«˜ã„å“è³ªåŸºæº–ã«ã‚ˆã‚‹å­¦ç¿’åŠ¹æœæœ€å¤§åŒ–  </li>
<li><strong>åŒ…æ‹¬çš„ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ</strong>: å†ç¾å¯èƒ½ã§æŒç¶šçš„ãªå­¦ç¿’ãƒ—ãƒ­ã‚»ã‚¹</li>
</ol>
<h4 id="_35">å­¦ç¿’è€…ã¸ã®æœ€çµ‚ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸<a class="headerlink" href="#_35" title="Permanent link">&para;</a></h4>
<p>æœ¬ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’é€šã˜ã¦ã€ã‚ãªãŸã¯ä»¥ä¸‹ã‚’æ‰‹ã«å…¥ã‚Œã‚‹ã“ã¨ãŒã§ãã¾ã™ï¼š</p>
<ul>
<li><strong>å³å®Ÿè·µå¯èƒ½ãªTDDã‚¹ã‚­ãƒ«</strong>: æ¥­å‹™ãƒ¬ãƒ™ãƒ«ã§ã®å“è³ªé–‹ç™ºæ‰‹æ³•</li>
<li><strong>ã‚²ãƒ¼ãƒ é–‹ç™ºã®å®Ÿç”¨åŸºç¤</strong>: ã‚¨ãƒ³ã‚¿ãƒ¼ãƒ†ã‚¤ãƒ³ãƒ¡ãƒ³ãƒˆæ¥­ç•Œã¸ã®å‚å…¥åŸºç›¤</li>
<li><strong>ãƒ¢ãƒ€ãƒ³Pythoné–‹ç™ºåŠ›</strong>: ç¾å ´ã§æ±‚ã‚ã‚‰ã‚Œã‚‹æœ€æ–°æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯  </li>
<li><strong>ç¶™ç¶šçš„æ”¹å–„ãƒã‚¤ãƒ³ãƒ‰</strong>: å“è³ªã¨åŠ¹ç‡ã‚’ä¸¡ç«‹ã™ã‚‹é–‹ç™ºæ€è€ƒ</li>
</ul>
<p><strong>ğŸ¯ Python TDDã‚²ãƒ¼ãƒ é–‹ç™ºãƒã‚¹ã‚¿ãƒ¼ã¸ã®é“ç­‹ã‚’å®Œå…¨ã«ç¤ºã—ãŸãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¨ã—ã¦ã€ç¶™ç¶šçš„ãªå­¦ç¿’ã¨å®Ÿè·µçš„ãªæˆé•·ã‚’æ”¯æ´ã—ã¾ã™ï¼</strong> âœ¨</p>
<hr />
<h3 id="_36">å‚è€ƒè³‡æ–™<a class="headerlink" href="#_36" title="Permanent link">&para;</a></h3>
<ul>
<li><a href="https://github.com/k2works/ai-programing-exercise">ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒªãƒã‚¸ãƒˆãƒª</a></li>
<li><a href="https://github.com/kitao/pyxel">Pyxelå…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ</a></li>
<li><a href="https://github.com/astral-sh/uv">uvãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼</a></li>
<li><a href="https://docs.astral.sh/ruff/">Ruffå…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ</a></li>
<li><a href="./wiki/WIP/ãƒ†ã‚¹ãƒˆé§†å‹•é–‹ç™ºã‹ã‚‰å§‹ã‚ã‚‹XXå…¥é–€/ãƒ†ã‚¹ãƒˆé§†å‹•é–‹ç™ºã‹ã‚‰å§‹ã‚ã‚‹Pythonå…¥é–€1.md">ãƒ†ã‚¹ãƒˆé§†å‹•é–‹ç™ºå…¥é–€</a></li>
</ul>
<p><strong>æœ€çµ‚æ›´æ–°</strong>: 2025å¹´8æœˆ6æ—¥<br />
<strong>ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå®Œäº†æ—¥</strong>: 2025å¹´8æœˆ5æ—¥<br />
<strong>è‘—è€…</strong>: AIãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°æ¼”ç¿’ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒãƒ¼ãƒ </p>







  
  






                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        
<div class="md-social">
  
    
    
    
    
    <a href="https://github.com/k2works" target="_blank" rel="noopener" title="GitHub Repository/claude-code-booster" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../../..", "features": ["navigation.tabs", "navigation.sections", "toc.integrate", "search.suggest", "search.highlight"], "search": "../../../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../../assets/javascripts/bundle.f55a23d4.min.js"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js"></script>
      
        <script src="../../../docs/assets/js/extra.js"></script>
      
    
  </body>
</html>