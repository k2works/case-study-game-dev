
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Site Description">
      
      
        <meta name="author" content="Project Team">
      
      
      
      
      
      <link rel="icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.22">
    
    
      
        <title>ぷよぷよから始めるテスト駆動開発入門 - Site Name</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.84d31ad4.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../docs/mkdocs/assets/css/extra.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#_1" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="Site Name" class="md-header__button md-logo" aria-label="Site Name" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Site Name
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              ぷよぷよから始めるテスト駆動開発入門
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/k2works/claude-code-booster" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    claude-code-booster
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../.." class="md-tabs__link">
        
  
  
    
  
  Home

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


  

<nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="Site Name" class="md-nav__button md-logo" aria-label="Site Name" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Site Name
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/k2works/claude-code-booster" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    claude-code-booster
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="_1">ぷよぷよから始めるテスト駆動開発入門<a class="headerlink" href="#_1" title="Permanent link">&para;</a></h1>
<h2 id="_2">はじめに<a class="headerlink" href="#_2" title="Permanent link">&para;</a></h2>
<p>みなさん、こんにちは！今日は私と一緒にテスト駆動開発（TDD）を使って、ぷよぷよゲームを作っていきましょう。さて、プログラミングの旅に出る前に、皆さんは「テスト駆動開発」について聞いたことがありますか？もしかしたら「テストって、コードを書いた後にするものじゃないの？」と思われるかもしれませんね。</p>
<blockquote>
<p>テストを書きながら開発することによって、設計が良い方向に変わり、コードが改善され続け、それによって自分自身が開発に前向きになること、それがテスト駆動開発の目指すゴールです。</p>
<p>— Kent Beck 『テスト駆動開発』 付録C　訳者解説：テスト駆動開発の現在</p>
</blockquote>
<p>この記事では、私たちが一緒にぷよぷよゲームを実装しながら、テスト駆動開発の基本的な流れと考え方を学んでいきます。まるでモブプログラミングのセッションのように、あなたと私が一緒に考え、コードを書き、改善していく過程を体験しましょう。「でも、ぷよぷよって結構複雑なゲームじゃないの？」と思われるかもしれませんが、心配いりません。各章では、ユーザーストーリーに基づいた機能を、テスト、実装、解説の順に少しずつ進めていきますよ。一歩一歩、着実に進んでいきましょう！</p>
<h3 id="_3">テスト駆動開発のサイクル<a class="headerlink" href="#_3" title="Permanent link">&para;</a></h3>
<p>さて、テスト駆動開発では、どのように進めていけばいいのでしょうか？「テストを書いてから実装する」というのは分かりましたが、具体的にはどんな手順で進めるのでしょうか？</p>
<p>私がいつも実践しているのは、以下の3つのステップを繰り返すサイクルです。皆さんも一緒にやってみましょう：</p>
<ol>
<li><strong>Red（赤）</strong>: まず失敗するテストを書きます。「え？わざと失敗するテストを？」と思われるかもしれませんが、これには重要な意味があるんです。これから実装する機能が何をすべきかを明確にするためなんですよ。</li>
<li><strong>Green（緑）</strong>: 次に、テストが通るように、最小限のコードを実装します。この段階では、きれいなコードよりも「とにかく動くこと」を優先します。「最小限」というのがポイントです。必要以上のことはしないようにしましょう。</li>
<li><strong>Refactor（リファクタリング）</strong>: 最後に、コードの品質を改善します。テストが通ることを確認しながら、重複を取り除いたり、わかりやすい名前をつけたりします。「動くけど汚いコード」から「動いてきれいなコード」へと進化させるんです。</li>
</ol>
<blockquote>
<p>レッド・グリーン・リファクタリング。それがTDDのマントラだ。</p>
<p>— Kent Beck 『テスト駆動開発』</p>
</blockquote>
<p>このサイクルを「Red-Green-Refactor」サイクルと呼びます。「赤・緑・リファクタリング」のリズムを刻むように、このサイクルを繰り返していくんです。これによって、少しずつ機能を追加し、コードの品質を高めていきましょう。皆さんも一緒にこのリズムを体感してみてください！</p>
<p><img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBjb250ZW50U3R5bGVUeXBlPSJ0ZXh0L2NzcyIgZGF0YS1kaWFncmFtLXR5cGU9IlNUQVRFIiBoZWlnaHQ9IjY1MXB4IiBwcmVzZXJ2ZUFzcGVjdFJhdGlvPSJub25lIiBzdHlsZT0id2lkdGg6NzM3cHg7aGVpZ2h0OjY1MXB4O2JhY2tncm91bmQ6I0ZGRkZGRjsiIHZlcnNpb249IjEuMSIgdmlld0JveD0iMCAwIDczNyA2NTEiIHdpZHRoPSI3MzdweCIgem9vbUFuZFBhbj0ibWFnbmlmeSI+PGRlZnMvPjxnPjxlbGxpcHNlIGN4PSIzOTkiIGN5PSIxNiIgZmlsbD0iIzIyMjIyMiIgcng9IjEwIiByeT0iMTAiIHN0eWxlPSJzdHJva2U6IzIyMjIyMjtzdHJva2Utd2lkdGg6MTsiLz48ZyBpZD0iLi4uLi4uLi4uLiI+PHJlY3QgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSI1MCIgcng9IjEyLjUiIHJ5PSIxMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSIxNTkuOTk5NCIgeD0iMzE5IiB5PSI4NyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgeDE9IjMxOSIgeDI9IjQ3OC45OTk0IiB5MT0iMTEzLjI5NjkiIHkyPSIxMTMuMjk2OSIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjEzOS45OTk0IiB4PSIzMjkiIHk9IjEwNC45OTUxIj4mIzEyNDY3OyYjMTI1NDA7JiMxMjQ4NzsmIzEyNDUxOyYjMTI1MzE7JiMxMjQ2NDsmIzEyMzkyOyYjMTI0ODY7JiMxMjQ3MzsmIzEyNDg4OzwvdGV4dD48L2c+PGcgaWQ9IlRPRE8iPjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iNTAiIHJ4PSIxMi41IiByeT0iMTIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iNjEuMzcxMSIgeD0iMjg5LjMyIiB5PSIyMTQiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHgxPSIyODkuMzIiIHgyPSIzNTAuNjkxMSIgeTE9IjI0MC4yOTY5IiB5Mj0iMjQwLjI5NjkiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI0MS4zNzExIiB4PSIyOTkuMzIiIHk9IjIzMS45OTUxIj5UT0RPPC90ZXh0PjwvZz48ZyBpZD0iUmVkIj48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjUwLjI2NTYiIHJ4PSIxMi41IiByeT0iMTIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iOTIuMDAwNSIgeD0iMTk1IiB5PSIzNDEiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHgxPSIxOTUiIHgyPSIyODcuMDAwNSIgeTE9IjM2Ny4yOTY5IiB5Mj0iMzY3LjI5NjkiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIyNy4yMjc1IiB4PSIyMjcuMzg2NSIgeT0iMzU4Ljk5NTEiPlJlZDwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMiIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI3Mi4wMDA1IiB4PSIyMDAiIHk9IjM4My40MzU1Ij4mIzEyNDg2OyYjMTI0NzM7JiMxMjQ4ODsmIzEyMzk1OyYjMjI4MzM7JiMyNTk0Mzs8L3RleHQ+PC9nPjxnIGlkPSJHcmVlbiI+PHJlY3QgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSI1MC4yNjU2IiByeD0iMTIuNSIgcnk9IjEyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjE2NC4wMDExIiB4PSI3IiB5PSI0NjguMjciLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHgxPSI3IiB4Mj0iMTcxLjAwMTEiIHkxPSI0OTQuNTY2OSIgeTI9IjQ5NC41NjY5Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNDIuNzA0MSIgeD0iNjcuNjQ4NSIgeT0iNDg2LjI2NTEiPkdyZWVuPC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEyIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjE0NC4wMDExIiB4PSIxMiIgeT0iNTEwLjcwNTUiPiYjMTI0ODY7JiMxMjQ3MzsmIzEyNDg4OyYjMTIzOTU7JiMzNjg5MDsmIzEyNDI3OyYjMjYzNjg7JiMyMzU2NzsmIzM4NDgwOyYjMTIzOTg7JiMyMzQ1NTsmIzM1MDEzOzwvdGV4dD48L2c+PGcgaWQ9IlJlZmFjdG9yIj48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjUwLjI2NTYiIHJ4PSIxMi41IiByeT0iMTIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iMjQ4LjAwMTciIHg9IjExNyIgeT0iNTk1LjUzIi8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB4MT0iMTE3IiB4Mj0iMzY1LjAwMTciIHkxPSI2MjEuODI2OSIgeTI9IjYyMS44MjY5Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNTkuMzU2NCIgeD0iMjExLjMyMjYiIHk9IjYxMy41MjUxIj5SZWZhY3RvcjwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMiIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIyMjguMDAxNyIgeD0iMTIyIiB5PSI2MzcuOTY1NSI+JiMxMjQ2NzsmIzEyNTQwOyYjMTI0ODk7JiMxMjM5ODsmIzM3MzI1OyYjMzUwNzk7JiMxMjQzNDsmIzM4NTAwOyYjMjE0MzU7JiMxMjM3NTsmIzEyMzkwOyYjMTI1MjI7JiMxMjUwMTsmIzEyNDQ5OyYjMTI0NjM7JiMxMjQ3OTsmIzEyNTIyOyYjMTI1MzE7JiMxMjQ2NDs8L3RleHQ+PC9nPjxnIGlkPSIuLi4uLi4uLi4uLiI+PHJlY3QgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSI1MCIgcng9IjEyLjUiIHJ5PSIxMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSIxNzMuOTk5MyIgeD0iNTU3IiB5PSIyMTQiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHgxPSI1NTciIHgyPSI3MzAuOTk5MyIgeTE9IjI0MC4yOTY5IiB5Mj0iMjQwLjI5NjkiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxNTMuOTk5MyIgeD0iNTY3IiB5PSIyMzEuOTk1MSI+JiMxMjQ1MjsmIzEyNDg2OyYjMTI1MjQ7JiMxMjU0MDsmIzEyNDcxOyYjMTI1MTk7JiMxMjUzMTsmIzEyNTI0OyYjMTI0OTk7JiMxMjUxNzsmIzEyNTQwOzwvdGV4dD48L2c+PCEtLWxpbmsgKnN0YXJ0KiB0byA/Pz8/Pz8/Pz8/LS0+PGcgY2xhc3M9ImxpbmsiIGRhdGEtZW50aXR5LTE9Ii5zdGFydC4iIGRhdGEtZW50aXR5LTI9Ii4uLi4uLi4uLi4iIGRhdGEtc291cmNlLWxpbmU9IjEiIGRhdGEtdWlkPSJsbms0IiBpZD0ibGlua18uc3RhcnQuXy4uLi4uLi4uLi4iPjxwYXRoIGQ9Ik0zOTksMjYuMzYgQzM5OSw0MC4yOSAzOTksNjAuOTYgMzk5LDgwLjY1IiBmaWxsPSJub25lIiBpZD0iKnN0YXJ0Ki10by0mIzEyNDY3OyYjMTI1NDA7JiMxMjQ4NzsmIzEyNDUxOyYjMTI1MzE7JiMxMjQ2NDsmIzEyMzkyOyYjMTI0ODY7JiMxMjQ3MzsmIzEyNDg4OyIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iMzk5LDg2LjY1LDQwMyw3Ny42NSwzOTksODEuNjUsMzk1LDc3LjY1LDM5OSw4Ni42NSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjwvZz48IS0tbGluayA/Pz8/Pz8/Pz8/IHRvIFRPRE8tLT48ZyBjbGFzcz0ibGluayIgZGF0YS1lbnRpdHktMT0iLi4uLi4uLi4uLiIgZGF0YS1lbnRpdHktMj0iVE9ETyIgZGF0YS1zb3VyY2UtbGluZT0iMiIgZGF0YS11aWQ9ImxuazYiIGlkPSJsaW5rXy4uLi4uLi4uLi5fVE9ETyI+PHBhdGggZD0iTTMxOC44NSwxMjAuMjYgQzI4OC40NSwxMjcuMzggMjU2LjY4LDE0MS4wNCAyMzgsMTY3IEMyMTkuOTcsMTkyLjA3IDI1My4xNTYzLDIxMS44NDA4IDI4My4zMTYzLDIyNC40ODA4IiBmaWxsPSJub25lIiBpZD0iJiMxMjQ2NzsmIzEyNTQwOyYjMTI0ODc7JiMxMjQ1MTsmIzEyNTMxOyYjMTI0NjQ7JiMxMjM5MjsmIzEyNDg2OyYjMTI0NzM7JiMxMjQ4ODstdG8tVE9ETyIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iMjg4Ljg1LDIyNi44LDI4Mi4wOTU2LDIxOS42MzIyLDI4NC4yMzg2LDIyNC44Njc0LDI3OS4wMDM0LDIyNy4wMTA0LDI4OC44NSwyMjYuOCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjExNi40MTYxIiB4PSIyMzkiIHk9IjE4MC4wNjY5Ij5UT0RPJiMxMjUyMjsmIzEyNDczOyYjMTI0ODg7JiMxMjQzNDsmIzIwMzE2OyYjMjUxMDQ7PC90ZXh0PjwvZz48IS0tbGluayBUT0RPIHRvID8/Pz8/Pz8/Pz8tLT48ZyBjbGFzcz0ibGluayIgZGF0YS1lbnRpdHktMT0iVE9ETyIgZGF0YS1lbnRpdHktMj0iLi4uLi4uLi4uLiIgZGF0YS1zb3VyY2UtbGluZT0iMTEiIGRhdGEtdWlkPSJsbmsxNSIgaWQ9ImxpbmtfVE9ET18uLi4uLi4uLi4uIj48cGF0aCBkPSJNMzM5LjA0LDIxMy43NyBDMzQ1LjkzLDIwNC42MyAzNTMuNTgsMTk0LjAyIDM2MCwxODQgQzM2OS42NCwxNjguOTcgMzc2LjUyMTgsMTU2LjY4MjggMzgzLjgyMTgsMTQyLjc3MjgiIGZpbGw9Im5vbmUiIGlkPSJUT0RPLXRvLSYjMTI0Njc7JiMxMjU0MDsmIzEyNDg3OyYjMTI0NTE7JiMxMjUzMTsmIzEyNDY0OyYjMTIzOTI7JiMxMjQ4NjsmIzEyNDczOyYjMTI0ODg7IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSIzODYuNjEsMTM3LjQ2LDM3OC44ODU5LDE0My41NzA0LDM4NC4yODY1LDE0MS44ODczLDM4NS45Njk2LDE0Ny4yODgsMzg2LjYxLDEzNy40NiIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjIyMC40MTYyIiB4PSIzNzAuMjYiIHk9IjE4MC4wNjY5Ij5UT0RPJiMxMjUyMjsmIzEyNDczOyYjMTI0ODg7JiMxMjM2NDsmIzMxMzU0OyYjMTIzOTU7JiMxMjM5NDsmIzEyNDI3OyYjMTI0MTQ7JiMxMjM5MTsmIzMyMzY4OyYjMTI0MjY7JiMzNjgyMDsmIzEyMzc3OzwvdGV4dD48L2c+PCEtLWxpbmsgVE9ETyB0byBSZWQtLT48ZyBjbGFzcz0ibGluayIgZGF0YS1lbnRpdHktMT0iVE9ETyIgZGF0YS1lbnRpdHktMj0iUmVkIiBkYXRhLXNvdXJjZS1saW5lPSIzIiBkYXRhLXVpZD0ibG5rOCIgaWQ9ImxpbmtfVE9ET19SZWQiPjxwYXRoIGQ9Ik0zMDQuNTgsMjY0LjQzIEMyOTAuNjYsMjg2LjQ4IDI3My40OTM0LDMxMy42NjY3IDI1OS41ODM0LDMzNS42OTY3IiBmaWxsPSJub25lIiBpZD0iVE9ETy10by1SZWQiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjI1Ni4zOCwzNDAuNzcsMjY0LjU2NzIsMzM1LjI5NTYsMjU5LjA0OTUsMzM2LjU0MjIsMjU3LjgwMjgsMzMxLjAyNDUsMjU2LjM4LDM0MC43NyIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9Ijc4LjAwMDEiIHg9IjI4Ni4yMyIgeT0iMzA3LjA2NjkiPiYjMTI0ODY7JiMxMjQ3MzsmIzEyNDg4OyYjMTI0MzQ7JiMyNjM2MDsmIzEyMzY3OzwvdGV4dD48L2c+PCEtLWxpbmsgUmVkIHRvIEdyZWVuLS0+PGcgY2xhc3M9ImxpbmsiIGRhdGEtZW50aXR5LTE9IlJlZCIgZGF0YS1lbnRpdHktMj0iR3JlZW4iIGRhdGEtc291cmNlLWxpbmU9IjQiIGRhdGEtdWlkPSJsbmsxMCIgaWQ9ImxpbmtfUmVkX0dyZWVuIj48cGF0aCBkPSJNMTk0LjY4LDM4NC40MSBDMTc0LjgxLDM5My4zNSAxNTIuMjUsNDA1LjY5IDEzNSw0MjEuMjcgQzEyMC40OCw0MzQuMzggMTExLjQ3MjEsNDQ3Ljc4NTggMTAzLjQ0MjEsNDYyLjcxNTgiIGZpbGw9Im5vbmUiIGlkPSJSZWQtdG8tR3JlZW4iIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjEwMC42LDQ2OCwxMDguMzg1OSw0NjEuOTY4NCwxMDIuOTY4NCw0NjMuNTk2NSwxMDEuMzQwMyw0NTguMTc5LDEwMC42LDQ2OCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9Ijc4LjAwMDEiIHg9IjEzNiIgeT0iNDM0LjMzNjkiPiYjMjYzNjg7JiMyMzU2NzsmIzM4NDgwOyYjMTIzOTg7JiMyMzQ1NTsmIzM1MDEzOzwvdGV4dD48L2c+PCEtLWxpbmsgR3JlZW4gdG8gUmVmYWN0b3ItLT48ZyBjbGFzcz0ibGluayIgZGF0YS1lbnRpdHktMT0iR3JlZW4iIGRhdGEtZW50aXR5LTI9IlJlZmFjdG9yIiBkYXRhLXNvdXJjZS1saW5lPSI1IiBkYXRhLXVpZD0ibG5rMTIiIGlkPSJsaW5rX0dyZWVuX1JlZmFjdG9yIj48cGF0aCBkPSJNOTAuNTEsNTE4LjcyIEM5Mi42Miw1MzMuODEgOTcuNTYsNTUyLjcgMTA5LDU2NS41MyBDMTIwLjEyLDU3OC4wMiAxMjkuMTcyNCw1ODUuMDM5MyAxNDQuMzkyNCw1OTIuNDk5MyIgZmlsbD0ibm9uZSIgaWQ9IkdyZWVuLXRvLVJlZmFjdG9yIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSIxNDkuNzgsNTk1LjE0LDE0My40NTksNTg3LjU4NzIsMTQ1LjI5MDMsNTkyLjkzOTQsMTM5LjkzODEsNTk0Ljc3MDcsMTQ5Ljc4LDU5NS4xNCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjEwNC4wMDAxIiB4PSIxMTAiIHk9IjU2MS41OTY5Ij4mIzEyNTIyOyYjMTI1MDE7JiMxMjQ0OTsmIzEyNDYzOyYjMTI0Nzk7JiMxMjUyMjsmIzEyNTMxOyYjMTI0NjQ7PC90ZXh0PjwvZz48IS0tbGluayBSZWZhY3RvciB0byBSZWQtLT48ZyBjbGFzcz0ibGluayIgZGF0YS1lbnRpdHktMT0iUmVmYWN0b3IiIGRhdGEtZW50aXR5LTI9IlJlZCIgZGF0YS1zb3VyY2UtbGluZT0iNiIgZGF0YS11aWQ9ImxuazEzIiBpZD0ibGlua19SZWZhY3Rvcl9SZWQiPjxwYXRoIGQ9Ik0yNDEsNTk1LjE2IEMyNDEsNTQ2Ljc3IDI0MSw0NDUuNSAyNDEsMzk3LjM1IiBmaWxsPSJub25lIiBpZD0iUmVmYWN0b3ItdG8tUmVkIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSIyNDEsMzkxLjM1LDIzNyw0MDAuMzUsMjQxLDM5Ni4zNSwyNDUsNDAwLjM1LDI0MSwzOTEuMzUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMDQuMDAwMSIgeD0iMjQyIiB5PSI0OTcuOTY2OSI+JiMyNzQyNTsmIzEyMzk4OyYjMTI0ODY7JiMxMjQ3MzsmIzEyNDg4OyYjMTI0MzQ7JiMyNjM2MDsmIzEyMzY3OzwvdGV4dD48L2c+PCEtLWxpbmsgUmVmYWN0b3IgdG8gVE9ETy0tPjxnIGNsYXNzPSJsaW5rIiBkYXRhLWVudGl0eS0xPSJSZWZhY3RvciIgZGF0YS1lbnRpdHktMj0iVE9ETyIgZGF0YS1zb3VyY2UtbGluZT0iMTAiIGRhdGEtdWlkPSJsbmsxNCIgaWQ9ImxpbmtfUmVmYWN0b3JfVE9ETyI+PHBhdGggZD0iTTI4MS43Myw1OTUuMjIgQzMwNy40NSw1NzcuNDEgMzM4Ljc4LDU1MC44IDM1NSw1MTguNTMgQzU5NS43LDM5Ljc0IDM5NC42NiwzNDYuOTggMzczLDI5NCBDMzY4LjI4LDI4Mi40NSAzNjQuMDc3NywyNzYuMjA2MyAzNTUuMjM3NywyNjcuNjc2MyIgZmlsbD0ibm9uZSIgaWQ9IlJlZmFjdG9yLXRvLVRPRE8iIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjM1MC45MiwyNjMuNTEsMzU0LjYxOSwyNzIuNjM3OCwzNTQuNTE4MSwyNjYuOTgxOSwzNjAuMTc0LDI2Ni44ODA5LDM1MC45MiwyNjMuNTEiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIyOTguNDE2MyIgeD0iNDAzLjk5IiB5PSI0MzQuMzM2OSI+JiMxMjUyMjsmIzEyNTAxOyYjMTI0NDk7JiMxMjQ2MzsmIzEyNDc5OyYjMTI1MjI7JiMxMjUzMTsmIzEyNDY0OyYjMTIzNjQ7JiMyMzQzNjsmIzIwMTAyOyYjMTIzNzU7JiMxMjM4MzsmIzEyNDI1O1RPRE8mIzEyNTIyOyYjMTI0NzM7JiMxMjQ4ODsmIzEyMzk1OyYjMjUxNDc7JiMxMjQyNzs8L3RleHQ+PC9nPjwhLS1saW5rID8/Pz8/Pz8/Pz8gdG8gPz8/Pz8/Pz8/Pz8tLT48ZyBjbGFzcz0ibGluayIgZGF0YS1lbnRpdHktMT0iLi4uLi4uLi4uLiIgZGF0YS1lbnRpdHktMj0iLi4uLi4uLi4uLi4iIGRhdGEtc291cmNlLWxpbmU9IjEyIiBkYXRhLXVpZD0ibG5rMTciIGlkPSJsaW5rXy4uLi4uLi4uLi5fLi4uLi4uLi4uLi4iPjxwYXRoIGQ9Ik00NzkuNDMsMTIwLjk1IEM1MTguNTIsMTI4LjA2IDU2NC4zOSwxNDEuNTIgNTk5LDE2NyBDNjE0Ljk4LDE3OC43NyA2MjQuMDc5MywxOTIuNjcyOSA2MzEuNTM5MywyMDguMTgyOSIgZmlsbD0ibm9uZSIgaWQ9IiYjMTI0Njc7JiMxMjU0MDsmIzEyNDg3OyYjMTI0NTE7JiMxMjUzMTsmIzEyNDY0OyYjMTIzOTI7JiMxMjQ4NjsmIzEyNDczOyYjMTI0ODg7LXRvLSYjMTI0NTI7JiMxMjQ4NjsmIzEyNTI0OyYjMTI1NDA7JiMxMjQ3MTsmIzEyNTE5OyYjMTI1MzE7JiMxMjUyNDsmIzEyNDk5OyYjMTI1MTc7JiMxMjU0MDsiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjYzNC4xNCwyMTMuNTksNjMzLjg0MzcsMjAzLjc0NTYsNjMxLjk3MjgsMjA5LjA4NDEsNjI2LjYzNDIsMjA3LjIxMzIsNjM0LjE0LDIxMy41OSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjwvZz48IS0tU1JDPVtaUEJGSWE5MTZDTnR5bklrMHItV0hRa1dmSDNqZWFNS0JHa2ExXzN4WGxvSmJjQTl0MTk0bDZNZmNFNllyQ2c3RVR4bnRoVGVQWklybzc4cnA3VC1TLVBtUGRSTnphQlh5NE84dDhMeVdxbzJRdjFUUzBWcTA5YTB6bzFKdWNfUEVrbjREWUVYVFJqMERZTzJrMzF3QndqS05iWkxPRGxIR3F0RFpjZjJ0UncyU2k4ODFqWUFIUUY3NmI3YmtEVjkxS3VVckZSUTVSenM5WVJJbkVMZV8tM3E5NlFqNmYxNVMxTnkxMXhRaEdhZVBpcHlNak1nUWhTYmJvLWNlZ1JkRmdqWUlOb2JNUEkyLTBxdXlxay1uTEpKbWo5UTNQOE5sZ2tSQW1JRXdycUVHMk5HX01nbmZ3S2tXcTVQaHZxVHpIRk1pbTlFVnctVmNZZXJxNWRkelZfcGEzX1ZaeEJabnh3czBVYjkxbEcxZ2V6eDdWMnZGeG02RVFqeTNCMWgxaDliRzd3MWgxbEdSQXlXeF9KbTRtMDBdLS0+PC9nPjwvc3ZnPg==" class="uml" alt="uml diagram" title="" /></p>
<h3 id="_4">開発環境<a class="headerlink" href="#_4" title="Permanent link">&para;</a></h3>
<p>さて、実際にコードを書く前に、私たちが使用する開発環境について少しお話ししておきましょう。皆さんは「道具選びは仕事の半分」という言葉を聞いたことがありますか？プログラミングでも同じことが言えるんです。</p>
<blockquote>
<p>道具はあなたの能力を増幅します。道具のできが優れており、簡単に使いこなせるようになっていれば、より生産的になれるのです。</p>
<p>— 達人プログラマー 熟達に向けたあなたの旅（第2版）</p>
</blockquote>
<p>「どんなツールを使えばいいの？」と思われるかもしれませんね。今回のプロジェクトでは、以下のツールを使用していきます：</p>
<ul>
<li><strong>言語</strong>: TypeScript — 「JavaScriptだけじゃダメなの？」と思われるかもしれませんが、TypeScriptは型を追加することで、大規模な開発でもバグを減らしやすくなるんです。</li>
<li><strong>ビルドツール</strong>: Vite — 開発中のコード変更をリアルタイムで反映してくれる高速な開発サーバーです。「待ち時間が少ないと開発が楽しくなりますよね！」</li>
<li><strong>テストフレームワーク</strong>: Vitest — Viteと統合された高速なテストランナーです。テスト駆動開発には欠かせないツールですね。</li>
<li><strong>タスクランナー</strong>: Gulp — 「同じ作業の繰り返しって退屈じゃないですか？」そんな反復的なタスクを自動化してくれます。</li>
<li><strong>バージョン管理</strong>: Git — コードの変更履歴を追跡し、「あれ？昨日までちゃんと動いてたのに...」というときに過去の状態に戻れる魔法のツールです。</li>
</ul>
<p>これらのツールを使って、テスト駆動開発の流れに沿ってぷよぷよゲームを実装していきましょう。「環境構築って難しそう...」と心配される方もいるかもしれませんが手順に従って進めればそんなに難しいことではありません。詳細はイテレーション0: 環境の構築で解説します。</p>
<h2 id="_5">要件<a class="headerlink" href="#_5" title="Permanent link">&para;</a></h2>
<h3 id="_6">ユーザーストーリー<a class="headerlink" href="#_6" title="Permanent link">&para;</a></h3>
<p>さて、実際にコードを書き始める前に、少し立ち止まって考えてみましょう。「何を作るのか？」という基本的な問いかけです。私たちが作るぷよぷよゲームは、どのような機能を持つべきでしょうか？</p>
<p>アジャイル開発では、この「何を作るのか？」という問いに対して、「ユーザーストーリー」という形で答えを出します。皆さんは「ユーザーストーリー」という言葉を聞いたことがありますか？</p>
<blockquote>
<p>ユーザーストーリーは、ソフトウェア要求を表現するための軽量な手法である。ユーザーストーリーは、システムについてユーザーまたは顧客の視点からフィーチャの概要を記述したものだ。
ユーザーストーリーには形式が定められておらず、標準的な記法もない。とはいえ、次のような形式でストーリーを考えてみると便利である。「＜ユーザーの種類＞として、＜機能や性能＞がほしい。それは＜ビジネス価値＞のためだ」という形のテンプレートに従うと、
たとえば次のようなストーリーを書ける。「本の購入者として、ＩＳＢＮで本を検索したい。それは探している本をすばやく見つけるためだ」</p>
<p>— Mike Cohn 『アジャイルな見積と計画づくり』</p>
</blockquote>
<p>つまり、「プレイヤーとして、〇〇ができる（〇〇したいから）」という形式で機能を表現するんです。これによって、「誰のため」の「どんな機能」を「なぜ」作るのかが明確になります。素晴らしいですよね！</p>
<p>では、私たちのぷよぷよゲームでは、どんなユーザーストーリーが考えられるでしょうか？一緒に考えてみましょう：</p>
<ul>
<li>プレイヤーとして、新しいゲームを開始できる（ゲームの基本機能として必要ですよね！）</li>
<li>プレイヤーとして、落ちてくるぷよを左右に移動できる（ぷよを適切な位置に配置したいですよね）</li>
<li>プレイヤーとして、落ちてくるぷよを回転できる（戦略的にぷよを配置するために必要です）</li>
<li>プレイヤーとして、ぷよを素早く落下させることができる（「早く次のぷよを落としたい！」というときのために）</li>
<li>プレイヤーとして、同じ色のぷよを4つ以上つなげると消去できる（これがぷよぷよの醍醐味ですよね！）</li>
<li>プレイヤーとして、連鎖反応を起こしてより高いスコアを獲得できる（「れ〜んさ〜ん！」と叫びたくなりますよね）</li>
<li>プレイヤーとして、全消し（ぜんけし）ボーナスを獲得できる（「やった！全部消えた！」という達成感を味わいたいですよね）</li>
<li>プレイヤーとして、ゲームオーバーになるとゲーム終了の演出を見ることができる（終わりが明確でないとモヤモヤしますよね）</li>
<li>プレイヤーとして、現在のスコアを確認できる（「今どれくらい点数取れてるかな？」と気になりますよね）</li>
<li>プレイヤーとして、キーボードでぷよを操作できる（PCでプレイするなら必須ですよね）</li>
<li>プレイヤーとして、タッチ操作でぷよを操作できる（スマホでもプレイしたいですよね）</li>
</ul>
<p>「うわ、結構たくさんあるな...」と思われるかもしれませんが、心配いりません！これらのユーザーストーリーを一つずつ実装していくことで、徐々にゲームを完成させていきましょう。テスト駆動開発の素晴らしいところは、各ストーリーを小さなタスクに分解し、テスト→実装→リファクタリングのサイクルで少しずつ進められることなんです。一歩一歩、着実に進んでいきましょう！</p>
<h3 id="_7">ユースケース図<a class="headerlink" href="#_7" title="Permanent link">&para;</a></h3>
<p>ユーザーストーリーを整理したところで、「これらの機能がどのように関連しているのか、全体像が見えるといいな」と思いませんか？そんなときに役立つのが「ユースケース図」です。
「ユースケース図って何？」と思われるかもしれませんね。ユースケース図は、システムと外部アクター（ここではプレイヤーとシステム自体）の相互作用を視覚的に表現するための図です。「絵に描いて整理すると分かりやすい」というやつですね。</p>
<blockquote>
<p>ユースケースは、システムの振る舞いに関する利害関係者の契約を表現するものです。</p>
<p>— アリスター・コーバーン 『ユースケース実践ガイド』</p>
</blockquote>
<p>「百聞は一見にしかず」というように、実際に見てみるのが一番分かりやすいですよね。では、私たちのぷよぷよゲームのユースケース図を見てみましょう：</p>
<p><img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBjb250ZW50U3R5bGVUeXBlPSJ0ZXh0L2NzcyIgZGF0YS1kaWFncmFtLXR5cGU9IkRFU0NSSVBUSU9OIiBoZWlnaHQ9IjU5MHB4IiBwcmVzZXJ2ZUFzcGVjdFJhdGlvPSJub25lIiBzdHlsZT0id2lkdGg6ODI2cHg7aGVpZ2h0OjU5MHB4O2JhY2tncm91bmQ6I0ZGRkZGRjsiIHZlcnNpb249IjEuMSIgdmlld0JveD0iMCAwIDgyNiA1OTAiIHdpZHRoPSI4MjZweCIgem9vbUFuZFBhbj0ibWFnbmlmeSI+PGRlZnMvPjxnPjwhLS1jbHVzdGVyID8/Pz8/Pz8/Pz8/LS0+PGcgY2xhc3M9ImNsdXN0ZXIiIGRhdGEtZW50aXR5PSIuLi4uLi4uLi4uLiIgZGF0YS1zb3VyY2UtbGluZT0iOSIgZGF0YS11aWQ9ImVudDAwMDQiIGlkPSJjbHVzdGVyXy4uLi4uLi4uLi4uIj48cmVjdCBmaWxsPSJub25lIiBoZWlnaHQ9IjU3NyIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9IjYxNS4wNyIgeD0iMTEyIiB5PSI3Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGZvbnQtd2VpZ2h0PSJib2xkIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjE1My45OTkzIiB4PSIzNDIuNTM1MyIgeT0iMjEuOTk1MSI+JiMxMjQwNzsmIzEyNDI0OyYjMTI0MDc7JiMxMjQyNDsmIzEyNDY2OyYjMTI1NDA7JiMxMjUxMjsmIzEyNDcxOyYjMTI0NzM7JiMxMjQ4NjsmIzEyNTEyOzwvdGV4dD48L2c+PCEtLWVudGl0eSBTdGFydE5ld0dhbWUtLT48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLWVudGl0eT0iU3RhcnROZXdHYW1lIiBkYXRhLXNvdXJjZS1saW5lPSIxMiIgZGF0YS11aWQ9ImVudDAwMDUiIGlkPSJlbnRpdHlfU3RhcnROZXdHYW1lIj48ZWxsaXBzZSBjeD0iMjE0LjAyNTkiIGN5PSI1NDEuOTk1MiIgZmlsbD0iI0YxRjFGMSIgcng9Ijc4LjAyNTkiIHJ5PSIxOC4wMDUyIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMjUuOTk5NSIgeD0iMTUxLjAyNjIiIHk9IjU0Ni42NDM2Ij4mIzI2MDMyOyYjMTIzNzU7JiMxMjM1NjsmIzEyNDY2OyYjMTI1NDA7JiMxMjUxMjsmIzEyNDM0OyYjMzgyODM7JiMyMjk4Nzs8L3RleHQ+PC9nPjwhLS1lbnRpdHkgUmVzdGFydEdhbWUtLT48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLWVudGl0eT0iUmVzdGFydEdhbWUiIGRhdGEtc291cmNlLWxpbmU9IjEzIiBkYXRhLXVpZD0iZW50MDAwNiIgaWQ9ImVudGl0eV9SZXN0YXJ0R2FtZSI+PGVsbGlwc2UgY3g9IjIxNC4wMjU5IiBjeT0iNDcwLjk5NTIiIGZpbGw9IiNGMUYxRjEiIHJ4PSI3OC4wMjU5IiByeT0iMTguMDA1MiIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTI1Ljk5OTUiIHg9IjE1MS4wMjYyIiB5PSI0NzUuNjQzNiI+JiMxMjQ2NjsmIzEyNTQwOyYjMTI1MTI7JiMxMjQzNDsmIzEyNTIyOyYjMTI0NzM7JiMxMjQ3OTsmIzEyNTQwOyYjMTI0ODg7PC90ZXh0PjwvZz48IS0tZW50aXR5IE1vdmVQdXlvLS0+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1lbnRpdHk9Ik1vdmVQdXlvIiBkYXRhLXNvdXJjZS1saW5lPSIxOCIgZGF0YS11aWQ9ImVudDAwMDciIGlkPSJlbnRpdHlfTW92ZVB1eW8iPjxlbGxpcHNlIGN4PSIyMTQuMDMyNCIgY3k9IjEzMS4wMDA1IiBmaWxsPSIjRjFGMUYxIiByeD0iNzIuMjUyNCIgcnk9IjE2Ljg1MDUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjExMS45OTk1IiB4PSIxNTguMDMyNyIgeT0iMTM1LjY0ODkiPiYjMTI0MDc7JiMxMjQyNDsmIzEyNDM0OyYjMjQwMzg7JiMyMTQ5MTsmIzEyMzk1OyYjMzEyMjc7JiMyMTIwNTs8L3RleHQ+PC9nPjwhLS1lbnRpdHkgUm90YXRlUHV5by0tPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtZW50aXR5PSJSb3RhdGVQdXlvIiBkYXRhLXNvdXJjZS1saW5lPSIxOSIgZGF0YS11aWQ9ImVudDAwMDgiIGlkPSJlbnRpdHlfUm90YXRlUHV5byI+PGVsbGlwc2UgY3g9IjIxNC4wMjczIiBjeT0iNjUuMDAzNiIgZmlsbD0iI0YxRjFGMSIgcng9IjUyLjQ5NzMiIHJ5PSIxNC41MjM2IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI2OS45OTk3IiB4PSIxNzkuMDI3NCIgeT0iNjkuNjUyMSI+JiMxMjQwNzsmIzEyNDI0OyYjMTI0MzQ7JiMyMjIzODsmIzM2NTc4OzwvdGV4dD48L2c+PCEtLWVudGl0eSBRdWlja0Ryb3BQdXlvLS0+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1lbnRpdHk9IlF1aWNrRHJvcFB1eW8iIGRhdGEtc291cmNlLWxpbmU9IjIwIiBkYXRhLXVpZD0iZW50MDAwOSIgaWQ9ImVudGl0eV9RdWlja0Ryb3BQdXlvIj48ZWxsaXBzZSBjeD0iMjE0LjAzMjQiIGN5PSIyMDAuMDAwNSIgZmlsbD0iI0YxRjFGMSIgcng9IjcyLjI1MjQiIHJ5PSIxNi44NTA1IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMTEuOTk5NSIgeD0iMTU4LjAzMjciIHk9IjIwNC42NDg5Ij4mIzEyNDA3OyYjMTI0MjQ7JiMxMjQzNDsmIzMyMDMyOyYjMjYwODk7JiMxMjM2NzsmIzMzODUzOyYjMTk5Nzk7PC90ZXh0PjwvZz48IS0tZW50aXR5IEZhbGxQdXlvLS0+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1lbnRpdHk9IkZhbGxQdXlvIiBkYXRhLXNvdXJjZS1saW5lPSIyNSIgZGF0YS11aWQ9ImVudDAwMTAiIGlkPSJlbnRpdHlfRmFsbFB1eW8iPjxlbGxpcHNlIGN4PSIyMTQuMDI1MiIgY3k9IjMzMC45OTUiIGZpbGw9IiNGMUYxRjEiIHJ4PSI2Ni43MjUyIiByeT0iMTUuNzQ1IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI5Ny45OTk2IiB4PSIxNjUuMDI1NCIgeT0iMzM1LjY0MzUiPiYjMTI0MDc7JiMxMjQyNDsmIzEyNDM0OyYjMzMyNTg7JiMzMDAwMTsmIzMzODUzOyYjMTk5Nzk7PC90ZXh0PjwvZz48IS0tZW50aXR5IEVyYXNlUHV5by0tPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtZW50aXR5PSJFcmFzZVB1eW8iIGRhdGEtc291cmNlLWxpbmU9IjI2IiBkYXRhLXVpZD0iZW50MDAxMSIgaWQ9ImVudGl0eV9FcmFzZVB1eW8iPjxlbGxpcHNlIGN4PSIyMTQuMDI3MyIgY3k9IjI2Ni4wMDM2IiBmaWxsPSIjRjFGMUYxIiByeD0iNTIuNDk3MyIgcnk9IjE0LjUyMzYiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjY5Ljk5OTciIHg9IjE3OS4wMjc0IiB5PSIyNzAuNjUyMSI+JiMxMjQwNzsmIzEyNDI0OyYjMTI0MzQ7JiMyODA0MDsmIzIxNDM1OzwvdGV4dD48L2c+PCEtLWVudGl0eSBDaGFpblJlYWN0aW9uLS0+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1lbnRpdHk9IkNoYWluUmVhY3Rpb24iIGRhdGEtc291cmNlLWxpbmU9IjI3IiBkYXRhLXVpZD0iZW50MDAxMiIgaWQ9ImVudGl0eV9DaGFpblJlYWN0aW9uIj48ZWxsaXBzZSBjeD0iNDM2LjAzNTIiIGN5PSIyNTcuOTk1IiBmaWxsPSIjRjFGMUYxIiByeD0iNjYuNzI1MiIgcnk9IjE1Ljc0NSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iOTcuOTk5NiIgeD0iMzg3LjAzNTQiIHk9IjI2Mi42NDM1Ij4mIzM2ODk5OyYjMzc3ODI7JiMyMTQ1MzsmIzI0NTQwOyYjMTI0MzQ7JiMzMDMzMDsmIzI5OTgzOzwvdGV4dD48L2c+PCEtLWVudGl0eSBaZW5rZXNoaUJvbnVzLS0+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1lbnRpdHk9Ilplbmtlc2hpQm9udXMiIGRhdGEtc291cmNlLWxpbmU9IjI4IiBkYXRhLXVpZD0iZW50MDAxMyIgaWQ9ImVudGl0eV9aZW5rZXNoaUJvbnVzIj48ZWxsaXBzZSBjeD0iNDM2LjA0MzEiIGN5PSIzMjcuOTk4NiIgZmlsbD0iI0YxRjFGMSIgcng9IjgzLjk5MzEiIHJ5PSIxOS4xOTg2IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMzkuOTk5NCIgeD0iMzY2LjA0MzQiIHk9IjMzMi42NDcxIj4mIzIwODQwOyYjMjgwNDA7JiMxMjM3NTsmIzEyNTA4OyYjMTI1NDA7JiMxMjQ5MDsmIzEyNDczOyYjMTI0MzQ7JiMyOTU1NDsmIzI0NDcxOzwvdGV4dD48L2c+PCEtLWVudGl0eSBEaXNwbGF5U2NvcmUtLT48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLWVudGl0eT0iRGlzcGxheVNjb3JlIiBkYXRhLXNvdXJjZS1saW5lPSIyOSIgZGF0YS11aWQ9ImVudDAwMTQiIGlkPSJlbnRpdHlfRGlzcGxheVNjb3JlIj48ZWxsaXBzZSBjeD0iNjQxLjU1NDIiIGN5PSIyNTcuMDAyOCIgZmlsbD0iI0YxRjFGMSIgcng9IjYxLjUxNDIiIHJ5PSIxNC43MDI4IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI4My45OTk2IiB4PSI1OTkuNTU0NCIgeT0iMjYxLjY1MTMiPiYjMTI0NzM7JiMxMjQ2NzsmIzEyNDUwOyYjMTI0MzQ7JiMzNDkyMDsmIzMxMDM0OzwvdGV4dD48L2c+PCEtLWVudGl0eSBLZXlib2FyZENvbnRyb2wtLT48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLWVudGl0eT0iS2V5Ym9hcmRDb250cm9sIiBkYXRhLXNvdXJjZS1saW5lPSIzNCIgZGF0YS11aWQ9ImVudDAwMTUiIGlkPSJlbnRpdHlfS2V5Ym9hcmRDb250cm9sIj48ZWxsaXBzZSBjeD0iNDM2LjA0MjQiIGN5PSI2Ny4wMDA1IiBmaWxsPSIjRjFGMUYxIiByeD0iNzIuMjUyNCIgcnk9IjE2Ljg1MDUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjExMS45OTk1IiB4PSIzODAuMDQyNyIgeT0iNzEuNjQ4OSI+JiMxMjQ2MTsmIzEyNTQwOyYjMTI1MDg7JiMxMjU0MDsmIzEyNDg5OyYjMTIzOTE7JiMyNTgwNTsmIzIwMzE2OzwvdGV4dD48L2c+PCEtLWVudGl0eSBUb3VjaENvbnRyb2wtLT48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLWVudGl0eT0iVG91Y2hDb250cm9sIiBkYXRhLXNvdXJjZS1saW5lPSIzNSIgZGF0YS11aWQ9ImVudDAwMTYiIGlkPSJlbnRpdHlfVG91Y2hDb250cm9sIj48ZWxsaXBzZSBjeD0iNDM2LjAzNzMiIGN5PSIxMzMuMDAzNiIgZmlsbD0iI0YxRjFGMSIgcng9IjUyLjQ5NzMiIHJ5PSIxNC41MjM2IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI2OS45OTk3IiB4PSI0MDEuMDM3NCIgeT0iMTM3LjY1MjEiPiYjMTI0Nzk7JiMxMjQ4MzsmIzEyNDgxOyYjMjU4MDU7JiMyMDMxNjs8L3RleHQ+PC9nPjwhLS1lbnRpdHkgR2FtZU92ZXJDaGVjay0tPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtZW50aXR5PSJHYW1lT3ZlckNoZWNrIiBkYXRhLXNvdXJjZS1saW5lPSI0MCIgZGF0YS11aWQ9ImVudDAwMTciIGlkPSJlbnRpdHlfR2FtZU92ZXJDaGVjayI+PGVsbGlwc2UgY3g9IjIxNC4wMjU5IiBjeT0iMzk5Ljk5NTIiIGZpbGw9IiNGMUYxRjEiIHJ4PSI3OC4wMjU5IiByeT0iMTguMDA1MiIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTI1Ljk5OTUiIHg9IjE1MS4wMjYyIiB5PSI0MDQuNjQzNiI+JiMxMjQ2NjsmIzEyNTQwOyYjMTI1MTI7JiMxMjQ1ODsmIzEyNTQwOyYjMTI0OTY7JiMxMjU0MDsmIzIxMDI4OyYjMjM0NTA7PC90ZXh0PjwvZz48IS0tZW50aXR5IEdhbWVPdmVyQW5pbWF0aW9uLS0+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1lbnRpdHk9IkdhbWVPdmVyQW5pbWF0aW9uIiBkYXRhLXNvdXJjZS1saW5lPSI0MSIgZGF0YS11aWQ9ImVudDAwMTgiIGlkPSJlbnRpdHlfR2FtZU92ZXJBbmltYXRpb24iPjxlbGxpcHNlIGN4PSI0MzYuMDM1OSIgY3k9IjM5OS45OTUyIiBmaWxsPSIjRjFGMUYxIiByeD0iNzguMDI1OSIgcnk9IjE4LjAwNTIiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjEyNS45OTk1IiB4PSIzNzMuMDM2MiIgeT0iNDA0LjY0MzYiPiYjMTI0NjY7JiMxMjU0MDsmIzEyNTEyOyYjMTI0NTg7JiMxMjU0MDsmIzEyNDk2OyYjMTI1NDA7JiMyODQzNjsmIzIwOTg2OzwvdGV4dD48L2c+PCEtLWVudGl0eSBQbGF5ZXItLT48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLWVudGl0eT0iUGxheWVyIiBkYXRhLXNvdXJjZS1saW5lPSI2IiBkYXRhLXVpZD0iZW50MDAwMiIgaWQ9ImVudGl0eV9QbGF5ZXIiPjxlbGxpcHNlIGN4PSI0MC45OTk4IiBjeT0iMTAxLjM1IiBmaWxsPSIjRjFGMUYxIiByeD0iOCIgcnk9IjgiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIvPjxwYXRoIGQ9Ik00MC45OTk4LDEwOS4zNSBMNDAuOTk5OCwxMzYuMzUgTTI3Ljk5OTgsMTE3LjM1IEw1My45OTk4LDExNy4zNSBNNDAuOTk5OCwxMzYuMzUgTDI3Ljk5OTgsMTUxLjM1IE00MC45OTk4LDEzNi4zNSBMNTMuOTk5OCwxNTEuMzUiIGZpbGw9Im5vbmUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjY5Ljk5OTciIHg9IjYiIHk9IjE2NS44NDUxIj4mIzEyNTAzOyYjMTI1MjQ7JiMxMjQ1MjsmIzEyNTE2OyYjMTI1NDA7PC90ZXh0PjwvZz48IS0tZW50aXR5IFN5c3RlbS0tPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtZW50aXR5PSJTeXN0ZW0iIGRhdGEtc291cmNlLWxpbmU9IjciIGRhdGEtdWlkPSJlbnQwMDAzIiBpZD0iZW50aXR5X1N5c3RlbSI+PGVsbGlwc2UgY3g9Ijc5MS4wNjk5IiBjeT0iNDM3LjM1IiBmaWxsPSIjRjFGMUYxIiByeD0iOCIgcnk9IjgiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIvPjxwYXRoIGQ9Ik03OTEuMDY5OSw0NDUuMzUgTDc5MS4wNjk5LDQ3Mi4zNSBNNzc4LjA2OTksNDUzLjM1IEw4MDQuMDY5OSw0NTMuMzUgTTc5MS4wNjk5LDQ3Mi4zNSBMNzc4LjA2OTksNDg3LjM1IE03OTEuMDY5OSw0NzIuMzUgTDgwNC4wNjk5LDQ4Ny4zNSIgZmlsbD0ibm9uZSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNTUuOTk5OCIgeD0iNzYzLjA3IiB5PSI1MDEuODQ1MSI+JiMxMjQ3MTsmIzEyNDczOyYjMTI0ODY7JiMxMjUxMjs8L3RleHQ+PC9nPjwhLS1saW5rIFBsYXllciB0byBTdGFydE5ld0dhbWUtLT48ZyBjbGFzcz0ibGluayIgZGF0YS1lbnRpdHktMT0iUGxheWVyIiBkYXRhLWVudGl0eS0yPSJTdGFydE5ld0dhbWUiIGRhdGEtc291cmNlLWxpbmU9IjQ2IiBkYXRhLXVpZD0ibG5rMTkiIGlkPSJsaW5rX1BsYXllcl9TdGFydE5ld0dhbWUiPjxwYXRoIGQ9Ik0yMy4wNywxNjkuMyBDMjMuMDcsMjcxLjMzIDIzLjA3LDU0MiAyMy4wNyw1NDIgQzIzLjA3LDU0MiA3Ni44Niw1NDIgMTI5LjUzLDU0MiIgZmlsbD0ibm9uZSIgaWQ9IlBsYXllci10by1TdGFydE5ld0dhbWUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjEzNS41Myw1NDIsMTI2LjUzLDUzOCwxMzAuNTMsNTQyLDEyNi41Myw1NDYsMTM1LjUzLDU0MiIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjwvZz48IS0tbGluayBQbGF5ZXIgdG8gUmVzdGFydEdhbWUtLT48ZyBjbGFzcz0ibGluayIgZGF0YS1lbnRpdHktMT0iUGxheWVyIiBkYXRhLWVudGl0eS0yPSJSZXN0YXJ0R2FtZSIgZGF0YS1zb3VyY2UtbGluZT0iNDciIGRhdGEtdWlkPSJsbmsyMCIgaWQ9ImxpbmtfUGxheWVyX1Jlc3RhcnRHYW1lIj48cGF0aCBkPSJNNDEuMDcsMTY5LjM0IEM0MS4wNywyNTguMjYgNDEuMDcsNDcxIDQxLjA3LDQ3MSBDNDEuMDcsNDcxIDgzLjg4LDQ3MSAxMjkuNjQsNDcxIiBmaWxsPSJub25lIiBpZD0iUGxheWVyLXRvLVJlc3RhcnRHYW1lIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSIxMzUuNjQsNDcxLDEyNi42NCw0NjcsMTMwLjY0LDQ3MSwxMjYuNjQsNDc1LDEzNS42NCw0NzEiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48L2c+PCEtLWxpbmsgUGxheWVyIHRvIE1vdmVQdXlvLS0+PGcgY2xhc3M9ImxpbmsiIGRhdGEtZW50aXR5LTE9IlBsYXllciIgZGF0YS1lbnRpdHktMj0iTW92ZVB1eW8iIGRhdGEtc291cmNlLWxpbmU9IjQ4IiBkYXRhLXVpZD0ibG5rMjEiIGlkPSJsaW5rX1BsYXllcl9Nb3ZlUHV5byI+PHBhdGggZD0iTTc2LjQzLDEzMSBDOTUuMjIsMTMxIDExMy4wMSwxMzEgMTM1LjUsMTMxIiBmaWxsPSJub25lIiBpZD0iUGxheWVyLXRvLU1vdmVQdXlvIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSIxNDEuNSwxMzEsMTMyLjUsMTI3LDEzNi41LDEzMSwxMzIuNSwxMzUsMTQxLjUsMTMxIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PC9nPjwhLS1saW5rIFBsYXllciB0byBSb3RhdGVQdXlvLS0+PGcgY2xhc3M9ImxpbmsiIGRhdGEtZW50aXR5LTE9IlBsYXllciIgZGF0YS1lbnRpdHktMj0iUm90YXRlUHV5byIgZGF0YS1zb3VyY2UtbGluZT0iNDkiIGRhdGEtdWlkPSJsbmsyMiIgaWQ9ImxpbmtfUGxheWVyX1JvdGF0ZVB1eW8iPjxwYXRoIGQ9Ik00MS4wNyw5Mi42MSBDNDEuMDcsNzguMDkgNDEuMDcsNjUgNDEuMDcsNjUgQzQxLjA3LDY1IDEwNC4zMyw2NSAxNTUuMTksNjUiIGZpbGw9Im5vbmUiIGlkPSJQbGF5ZXItdG8tUm90YXRlUHV5byIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iMTYxLjE5LDY1LDE1Mi4xOSw2MSwxNTYuMTksNjUsMTUyLjE5LDY5LDE2MS4xOSw2NSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjwvZz48IS0tbGluayBQbGF5ZXIgdG8gUXVpY2tEcm9wUHV5by0tPjxnIGNsYXNzPSJsaW5rIiBkYXRhLWVudGl0eS0xPSJQbGF5ZXIiIGRhdGEtZW50aXR5LTI9IlF1aWNrRHJvcFB1eW8iIGRhdGEtc291cmNlLWxpbmU9IjUwIiBkYXRhLXVpZD0ibG5rMjMiIGlkPSJsaW5rX1BsYXllcl9RdWlja0Ryb3BQdXlvIj48cGF0aCBkPSJNNTguMDcsMTY5LjUzIEM1OC4wNywxODUuMzQgNTguMDcsMjAwIDU4LjA3LDIwMCBDNTguMDcsMjAwIDk0LjgsMjAwIDEzNS41MiwyMDAiIGZpbGw9Im5vbmUiIGlkPSJQbGF5ZXItdG8tUXVpY2tEcm9wUHV5byIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iMTQxLjUyLDIwMCwxMzIuNTIsMTk2LDEzNi41MiwyMDAsMTMyLjUyLDIwNCwxNDEuNTIsMjAwIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PC9nPjwhLS1saW5rIFBsYXllciB0byBLZXlib2FyZENvbnRyb2wtLT48ZyBjbGFzcz0ibGluayIgZGF0YS1lbnRpdHktMT0iUGxheWVyIiBkYXRhLWVudGl0eS0yPSJLZXlib2FyZENvbnRyb2wiIGRhdGEtc291cmNlLWxpbmU9IjUxIiBkYXRhLXVpZD0ibG5rMjQiIGlkPSJsaW5rX1BsYXllcl9LZXlib2FyZENvbnRyb2wiPjxwYXRoIGQ9Ik03Ni4zMywxMDMuNSBDMTYyLjA1LDEwMy41IDM3NC4wNywxMDMuNSAzNzQuMDcsMTAzLjUgQzM3NC4wNywxMDMuNSAzNzQuMDcsOTIuNjQgMzc0LjA3LDgxLjg0IiBmaWxsPSJub25lIiBpZD0iUGxheWVyLXRvLUtleWJvYXJkQ29udHJvbCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iMzc0LjA3LDc1Ljg0LDM3MC4wNyw4NC44NCwzNzQuMDcsODAuODQsMzc4LjA3LDg0Ljg0LDM3NC4wNyw3NS44NCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjwvZz48IS0tbGluayBQbGF5ZXIgdG8gVG91Y2hDb250cm9sLS0+PGcgY2xhc3M9ImxpbmsiIGRhdGEtZW50aXR5LTE9IlBsYXllciIgZGF0YS1lbnRpdHktMj0iVG91Y2hDb250cm9sIiBkYXRhLXNvdXJjZS1saW5lPSI1MiIgZGF0YS11aWQ9ImxuazI1IiBpZD0ibGlua19QbGF5ZXJfVG91Y2hDb250cm9sIj48cGF0aCBkPSJNNzYuNDcsMTU4LjUgQzE3MC4zNCwxNTguNSA0MTguMDcsMTU4LjUgNDE4LjA3LDE1OC41IEM0MTguMDcsMTU4LjUgNDE4LjA3LDE1OC45IDQxOC4wNywxNTIuOTQiIGZpbGw9Im5vbmUiIGlkPSJQbGF5ZXItdG8tVG91Y2hDb250cm9sIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSI0MTguMDcsMTQ2Ljk0LDQxNC4wNywxNTUuOTQsNDE4LjA3LDE1MS45NCw0MjIuMDcsMTU1Ljk0LDQxOC4wNywxNDYuOTQiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48L2c+PCEtLXJldmVyc2UgbGluayBFcmFzZVB1eW8gdG8gU3lzdGVtLS0+PGcgY2xhc3M9ImxpbmsiIGRhdGEtZW50aXR5LTE9IkVyYXNlUHV5byIgZGF0YS1lbnRpdHktMj0iU3lzdGVtIiBkYXRhLXNvdXJjZS1saW5lPSI1NSIgZGF0YS11aWQ9ImxuazI2IiBpZD0ibGlua19FcmFzZVB1eW9fU3lzdGVtIj48cGF0aCBkPSJNMjcyLjc4LDI2Ni4zMiBDMzAwLjIxLDI2Ni4zMiAzMjIuMDcsMjY2LjMyIDMyMi4wNywyNjYuMzIgQzMyMi4wNywyNjYuMzIgMzIyLjA3LDQzOC41MSAzMjIuMDcsNDM4LjUxIEMzMjIuMDcsNDM4LjUxIDY2MS4zOSw0MzguNTEgNzYyLjc4LDQzOC41MSIgZmlsbD0ibm9uZSIgaWQ9IkVyYXNlUHV5by1iYWNrdG8tU3lzdGVtIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSIyNjYuNzgsMjY2LjMyLDI3NS43OCwyNzAuMzIsMjcxLjc4LDI2Ni4zMiwyNzUuNzgsMjYyLjMyLDI2Ni43OCwyNjYuMzIiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48L2c+PCEtLXJldmVyc2UgbGluayBGYWxsUHV5byB0byBTeXN0ZW0tLT48ZyBjbGFzcz0ibGluayIgZGF0YS1lbnRpdHktMT0iRmFsbFB1eW8iIGRhdGEtZW50aXR5LTI9IlN5c3RlbSIgZGF0YS1zb3VyY2UtbGluZT0iNTYiIGRhdGEtdWlkPSJsbmsyNyIgaWQ9ImxpbmtfRmFsbFB1eW9fU3lzdGVtIj48cGF0aCBkPSJNMjg3LjE1LDMzMSBDMzAxLjgyLDMzMSAzMDcuMDcsMzMxIDMwNy4wNywzMzEgQzMwNy4wNywzMzEgMzA3LjA3LDQ0My4zNCAzMDcuMDcsNDQzLjM0IEMzMDcuMDcsNDQzLjM0IDY1OC44NSw0NDMuMzQgNzYyLjYsNDQzLjM0IiBmaWxsPSJub25lIiBpZD0iRmFsbFB1eW8tYmFja3RvLVN5c3RlbSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iMjgxLjE1LDMzMSwyOTAuMTUsMzM1LDI4Ni4xNSwzMzEsMjkwLjE1LDMyNywyODEuMTUsMzMxIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PC9nPjwhLS1yZXZlcnNlIGxpbmsgQ2hhaW5SZWFjdGlvbiB0byBTeXN0ZW0tLT48ZyBjbGFzcz0ibGluayIgZGF0YS1lbnRpdHktMT0iQ2hhaW5SZWFjdGlvbiIgZGF0YS1lbnRpdHktMj0iU3lzdGVtIiBkYXRhLXNvdXJjZS1saW5lPSI1NyIgZGF0YS11aWQ9ImxuazI4IiBpZD0ibGlua19DaGFpblJlYWN0aW9uX1N5c3RlbSI+PHBhdGggZD0iTTUwMy43MywyNjQuMzUgQzUzMC41OSwyNjQuMzUgNTUwLjA3LDI2NC4zNSA1NTAuMDcsMjY0LjM1IEM1NTAuMDcsMjY0LjM1IDU1MC4wNyw0MzMuNjggNTUwLjA3LDQzMy42OCBDNTUwLjA3LDQzMy42OCA2OTkuMzgsNDMzLjY4IDc2Mi45NSw0MzMuNjgiIGZpbGw9Im5vbmUiIGlkPSJDaGFpblJlYWN0aW9uLWJhY2t0by1TeXN0ZW0iIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjQ5Ny43MywyNjQuMzUsNTA2LjczLDI2OC4zNSw1MDIuNzMsMjY0LjM1LDUwNi43MywyNjAuMzUsNDk3LjczLDI2NC4zNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjwvZz48IS0tcmV2ZXJzZSBsaW5rIFplbmtlc2hpQm9udXMgdG8gU3lzdGVtLS0+PGcgY2xhc3M9ImxpbmsiIGRhdGEtZW50aXR5LTE9Ilplbmtlc2hpQm9udXMiIGRhdGEtZW50aXR5LTI9IlN5c3RlbSIgZGF0YS1zb3VyY2UtbGluZT0iNTgiIGRhdGEtdWlkPSJsbmsyOSIgaWQ9ImxpbmtfWmVua2VzaGlCb251c19TeXN0ZW0iPjxwYXRoIGQ9Ik01MjYuMTgsMzI4IEM2MzEuMTYsMzI4IDc5MS4wNywzMjggNzkxLjA3LDMyOCBDNzkxLjA3LDMyOCA3OTEuMDcsMzg3LjUxIDc5MS4wNyw0MjguNjUiIGZpbGw9Im5vbmUiIGlkPSJaZW5rZXNoaUJvbnVzLWJhY2t0by1TeXN0ZW0iIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjUyMC4xOCwzMjgsNTI5LjE4LDMzMiw1MjUuMTgsMzI4LDUyOS4xOCwzMjQsNTIwLjE4LDMyOCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjwvZz48IS0tcmV2ZXJzZSBsaW5rIERpc3BsYXlTY29yZSB0byBTeXN0ZW0tLT48ZyBjbGFzcz0ibGluayIgZGF0YS1lbnRpdHktMT0iRGlzcGxheVNjb3JlIiBkYXRhLWVudGl0eS0yPSJTeXN0ZW0iIGRhdGEtc291cmNlLWxpbmU9IjU5IiBkYXRhLXVpZD0ibG5rMzAiIGlkPSJsaW5rX0Rpc3BsYXlTY29yZV9TeXN0ZW0iPjxwYXRoIGQ9Ik03MDkuMzcsMjU3IEM3NTUuNjcsMjU3IDgwNS4wNywyNTcgODA1LjA3LDI1NyBDODA1LjA3LDI1NyA4MDUuMDcsMzY3Ljg2IDgwNS4wNyw0MjguNDgiIGZpbGw9Im5vbmUiIGlkPSJEaXNwbGF5U2NvcmUtYmFja3RvLVN5c3RlbSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iNzAzLjM3LDI1Nyw3MTIuMzcsMjYxLDcwOC4zNywyNTcsNzEyLjM3LDI1Myw3MDMuMzcsMjU3IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PC9nPjwhLS1yZXZlcnNlIGxpbmsgR2FtZU92ZXJDaGVjayB0byBTeXN0ZW0tLT48ZyBjbGFzcz0ibGluayIgZGF0YS1lbnRpdHktMT0iR2FtZU92ZXJDaGVjayIgZGF0YS1lbnRpdHktMj0iU3lzdGVtIiBkYXRhLXNvdXJjZS1saW5lPSI2MCIgZGF0YS11aWQ9ImxuazMxIiBpZD0ibGlua19HYW1lT3ZlckNoZWNrX1N5c3RlbSI+PHBhdGggZD0iTTIxNC4wNyw0MjQuNDggQzIxNC4wNyw0MzguMDcgMjE0LjA3LDQ0OC4xNyAyMTQuMDcsNDQ4LjE3IEMyMTQuMDcsNDQ4LjE3IDY0Nyw0NDguMTcgNzYyLjg1LDQ0OC4xNyIgZmlsbD0ibm9uZSIgaWQ9IkdhbWVPdmVyQ2hlY2stYmFja3RvLVN5c3RlbSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iMjE0LjA3LDQxOC40OCwyMTAuMDcsNDI3LjQ4LDIxNC4wNyw0MjMuNDgsMjE4LjA3LDQyNy40OCwyMTQuMDcsNDE4LjQ4IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PC9nPjwhLS1yZXZlcnNlIGxpbmsgR2FtZU92ZXJBbmltYXRpb24gdG8gU3lzdGVtLS0+PGcgY2xhc3M9ImxpbmsiIGRhdGEtZW50aXR5LTE9IkdhbWVPdmVyQW5pbWF0aW9uIiBkYXRhLWVudGl0eS0yPSJTeXN0ZW0iIGRhdGEtc291cmNlLWxpbmU9IjYxIiBkYXRhLXVpZD0ibG5rMzIiIGlkPSJsaW5rX0dhbWVPdmVyQW5pbWF0aW9uX1N5c3RlbSI+PHBhdGggZD0iTTUyMC4yOCw0MDAgQzYyMC45Niw0MDAgNzc3LjA3LDQwMCA3NzcuMDcsNDAwIEM3NzcuMDcsNDAwIDc3Ny4wNyw0MTMuNTIgNzc3LjA3LDQyOC40MSIgZmlsbD0ibm9uZSIgaWQ9IkdhbWVPdmVyQW5pbWF0aW9uLWJhY2t0by1TeXN0ZW0iIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjUxNC4yOCw0MDAsNTIzLjI4LDQwNCw1MTkuMjgsNDAwLDUyMy4yOCwzOTYsNTE0LjI4LDQwMCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjwvZz48IS0tbGluayBNb3ZlUHV5byB0byBLZXlib2FyZENvbnRyb2wtLT48ZyBjbGFzcz0ibGluayIgZGF0YS1lbnRpdHktMT0iTW92ZVB1eW8iIGRhdGEtZW50aXR5LTI9IktleWJvYXJkQ29udHJvbCIgZGF0YS1zb3VyY2UtbGluZT0iNjQiIGRhdGEtdWlkPSJsbmszMyIgaWQ9ImxpbmtfTW92ZVB1eW9fS2V5Ym9hcmRDb250cm9sIj48cGF0aCBkPSJNMjc2LjA3LDEyMi4xIEMyNzYuMDcsMTA0LjA4IDI3Ni4wNyw2NSAyNzYuMDcsNjUgQzI3Ni4wNyw2NSAzMTUuNTUsNjUgMzU4LjAxLDY1IiBmaWxsPSJub25lIiBpZD0iTW92ZVB1eW8tdG8tS2V5Ym9hcmRDb250cm9sIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7c3Ryb2tlLWRhc2hhcnJheTo3LDc7Ii8+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSIzNjQuMDEsNjUsMzU1LjAxLDYxLDM1OS4wMSw2NSwzNTUuMDEsNjksMzY0LjAxLDY1IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNjEuMTg1MSIgeD0iMjkyLjQ5IiB5PSI3OC4wNjY5Ij4mIzE3MTtleHRlbmQmIzE4Nzs8L3RleHQ+PC9nPjwhLS1saW5rIE1vdmVQdXlvIHRvIFRvdWNoQ29udHJvbC0tPjxnIGNsYXNzPSJsaW5rIiBkYXRhLWVudGl0eS0xPSJNb3ZlUHV5byIgZGF0YS1lbnRpdHktMj0iVG91Y2hDb250cm9sIiBkYXRhLXNvdXJjZS1saW5lPSI2NSIgZGF0YS11aWQ9ImxuazM0IiBpZD0ibGlua19Nb3ZlUHV5b19Ub3VjaENvbnRyb2wiPjxwYXRoIGQ9Ik0yODAuNjQsMTM3Ljg0IEMzMTQuNDksMTM3Ljg0IDM0OC45MywxMzcuODQgMzgwLjA3LDEzNy44NCIgZmlsbD0ibm9uZSIgaWQ9Ik1vdmVQdXlvLXRvLVRvdWNoQ29udHJvbCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxO3N0cm9rZS1kYXNoYXJyYXk6Nyw3OyIvPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iMzg2LjA3LDEzNy44NCwzNzcuMDcsMTMzLjg0LDM4MS4wNywxMzcuODQsMzc3LjA3LDE0MS44NCwzODYuMDcsMTM3Ljg0IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNjEuMTg1MSIgeD0iMzM0LjM1IiB5PSIxNTAuOTA2OSI+JiMxNzE7ZXh0ZW5kJiMxODc7PC90ZXh0PjwvZz48IS0tbGluayBSb3RhdGVQdXlvIHRvIEtleWJvYXJkQ29udHJvbC0tPjxnIGNsYXNzPSJsaW5rIiBkYXRhLWVudGl0eS0xPSJSb3RhdGVQdXlvIiBkYXRhLWVudGl0eS0yPSJLZXlib2FyZENvbnRyb2wiIGRhdGEtc291cmNlLWxpbmU9IjY2IiBkYXRhLXVpZD0ibG5rMzUiIGlkPSJsaW5rX1JvdGF0ZVB1eW9fS2V5Ym9hcmRDb250cm9sIj48cGF0aCBkPSJNMjYwLjMsNTcuNzQgQzI5My40Nyw1Ny43NCAzMzIuNDksNTcuNzQgMzY4LjY2LDU3Ljc0IiBmaWxsPSJub25lIiBpZD0iUm90YXRlUHV5by10by1LZXlib2FyZENvbnRyb2wiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTtzdHJva2UtZGFzaGFycmF5OjcsNzsiLz48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjM3NC42Niw1Ny43NCwzNjUuNjYsNTMuNzQsMzY5LjY2LDU3Ljc0LDM2NS42Niw2MS43NCwzNzQuNjYsNTcuNzQiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI2MS4xODUxIiB4PSIyNTUuNDgiIHk9IjUzLjgwNjkiPiYjMTcxO2V4dGVuZCYjMTg3OzwvdGV4dD48L2c+PCEtLWxpbmsgUm90YXRlUHV5byB0byBUb3VjaENvbnRyb2wtLT48ZyBjbGFzcz0ibGluayIgZGF0YS1lbnRpdHktMT0iUm90YXRlUHV5byIgZGF0YS1lbnRpdHktMj0iVG91Y2hDb250cm9sIiBkYXRhLXNvdXJjZS1saW5lPSI2NyIgZGF0YS11aWQ9ImxuazM2IiBpZD0ibGlua19Sb3RhdGVQdXlvX1RvdWNoQ29udHJvbCI+PHBhdGggZD0iTTI2MC4xOSw3Mi4yNiBDMjk1LjEsNzIuMjYgMzM3LjA3LDcyLjI2IDMzNy4wNyw3Mi4yNiBDMzM3LjA3LDcyLjI2IDMzNy4wNywxMjguMTYgMzM3LjA3LDEyOC4xNiBDMzM3LjA3LDEyOC4xNiAzNTUuNDMsMTI4LjE2IDM3OS45OCwxMjguMTYiIGZpbGw9Im5vbmUiIGlkPSJSb3RhdGVQdXlvLXRvLVRvdWNoQ29udHJvbCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxO3N0cm9rZS1kYXNoYXJyYXk6Nyw3OyIvPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iMzg1Ljk4LDEyOC4xNiwzNzYuOTgsMTI0LjE2LDM4MC45OCwxMjguMTYsMzc2Ljk4LDEzMi4xNiwzODUuOTgsMTI4LjE2IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNjEuMTg1MSIgeD0iMjc1LjA3IiB5PSI5OS4yOTY5Ij4mIzE3MTtleHRlbmQmIzE4Nzs8L3RleHQ+PC9nPjwhLS1saW5rIFF1aWNrRHJvcFB1eW8gdG8gS2V5Ym9hcmRDb250cm9sLS0+PGcgY2xhc3M9ImxpbmsiIGRhdGEtZW50aXR5LTE9IlF1aWNrRHJvcFB1eW8iIGRhdGEtZW50aXR5LTI9IktleWJvYXJkQ29udHJvbCIgZGF0YS1zb3VyY2UtbGluZT0iNjgiIGRhdGEtdWlkPSJsbmszNyIgaWQ9ImxpbmtfUXVpY2tEcm9wUHV5b19LZXlib2FyZENvbnRyb2wiPjxwYXRoIGQ9Ik0yODIuNTgsMTk0LjM4IEMzMjcuOTMsMTk0LjM4IDM3OS4wNywxOTQuMzggMzc5LjA3LDE5NC4zOCBDMzc5LjA3LDE5NC4zOCAzNzkuMDcsMTEzLjg1IDM3OS4wNyw4My40MiIgZmlsbD0ibm9uZSIgaWQ9IlF1aWNrRHJvcFB1eW8tdG8tS2V5Ym9hcmRDb250cm9sIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7c3Ryb2tlLWRhc2hhcnJheTo3LDc7Ii8+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSIzNzkuMDcsNzcuNDIsMzc1LjA3LDg2LjQyLDM3OS4wNyw4Mi40MiwzODMuMDcsODYuNDIsMzc5LjA3LDc3LjQyIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNjEuMTg1MSIgeD0iMzE3LjA3IiB5PSIxOTcuMjA2OSI+JiMxNzE7ZXh0ZW5kJiMxODc7PC90ZXh0PjwvZz48IS0tbGluayBRdWlja0Ryb3BQdXlvIHRvIFRvdWNoQ29udHJvbC0tPjxnIGNsYXNzPSJsaW5rIiBkYXRhLWVudGl0eS0xPSJRdWlja0Ryb3BQdXlvIiBkYXRhLWVudGl0eS0yPSJUb3VjaENvbnRyb2wiIGRhdGEtc291cmNlLWxpbmU9IjY5IiBkYXRhLXVpZD0ibG5rMzgiIGlkPSJsaW5rX1F1aWNrRHJvcFB1eW9fVG91Y2hDb250cm9sIj48cGF0aCBkPSJNMjgyLjg1LDIwNS42MiBDMzUzLjQ2LDIwNS42MiA0NTMuMDcsMjA1LjYyIDQ1My4wNywyMDUuNjIgQzQ1My4wNywyMDUuNjIgNDUzLjA3LDE3NC4xIDQ1My4wNywxNTMiIGZpbGw9Im5vbmUiIGlkPSJRdWlja0Ryb3BQdXlvLXRvLVRvdWNoQ29udHJvbCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxO3N0cm9rZS1kYXNoYXJyYXk6Nyw3OyIvPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iNDUzLjA3LDE0Nyw0NDkuMDcsMTU2LDQ1My4wNywxNTIsNDU3LjA3LDE1Niw0NTMuMDcsMTQ3IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNjEuMTg1MSIgeD0iMzM1LjI2IiB5PSIyMTguNjg2OSI+JiMxNzE7ZXh0ZW5kJiMxODc7PC90ZXh0PjwvZz48IS0tbGluayBFcmFzZVB1eW8gdG8gQ2hhaW5SZWFjdGlvbi0tPjxnIGNsYXNzPSJsaW5rIiBkYXRhLWVudGl0eS0xPSJFcmFzZVB1eW8iIGRhdGEtZW50aXR5LTI9IkNoYWluUmVhY3Rpb24iIGRhdGEtc291cmNlLWxpbmU9IjcyIiBkYXRhLXVpZD0ibG5rMzkiIGlkPSJsaW5rX0VyYXNlUHV5b19DaGFpblJlYWN0aW9uIj48cGF0aCBkPSJNMjYwLjU3LDI1OC45IEMyOTIuMSwyNTguOSAzMjguMjYsMjU4LjkgMzYzLjM1LDI1OC45IiBmaWxsPSJub25lIiBpZD0iRXJhc2VQdXlvLXRvLUNoYWluUmVhY3Rpb24iIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTtzdHJva2UtZGFzaGFycmF5OjcsNzsiLz48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjM2OS4zNSwyNTguOSwzNjAuMzUsMjU0LjksMzY0LjM1LDI1OC45LDM2MC4zNSwyNjIuOSwzNjkuMzUsMjU4LjkiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI2My4wMDY4IiB4PSIyNTAuOTYiIHk9IjI1NC45NjY5Ij4mIzE3MTtpbmNsdWRlJiMxODc7PC90ZXh0PjwvZz48IS0tbGluayBDaGFpblJlYWN0aW9uIHRvIERpc3BsYXlTY29yZS0tPjxnIGNsYXNzPSJsaW5rIiBkYXRhLWVudGl0eS0xPSJDaGFpblJlYWN0aW9uIiBkYXRhLWVudGl0eS0yPSJEaXNwbGF5U2NvcmUiIGRhdGEtc291cmNlLWxpbmU9IjczIiBkYXRhLXVpZD0ibG5rNDAiIGlkPSJsaW5rX0NoYWluUmVhY3Rpb25fRGlzcGxheVNjb3JlIj48cGF0aCBkPSJNNDkzLjU2LDI0OS42NSBDNTIzLjAxLDI0OS42NSA1NTIuNjUsMjQ5LjY1IDU4MS41OCwyNDkuNjUiIGZpbGw9Im5vbmUiIGlkPSJDaGFpblJlYWN0aW9uLXRvLURpc3BsYXlTY29yZSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxO3N0cm9rZS1kYXNoYXJyYXk6Nyw3OyIvPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iNTg3LjU4LDI0OS42NSw1NzguNTgsMjQ1LjY1LDU4Mi41OCwyNDkuNjUsNTc4LjU4LDI1My42NSw1ODcuNTgsMjQ5LjY1IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNjMuMDA2OCIgeD0iNTQxLjU3IiB5PSIyNDUuNzE2OSI+JiMxNzE7aW5jbHVkZSYjMTg3OzwvdGV4dD48L2c+PCEtLWxpbmsgWmVua2VzaGlCb251cyB0byBEaXNwbGF5U2NvcmUtLT48ZyBjbGFzcz0ibGluayIgZGF0YS1lbnRpdHktMT0iWmVua2VzaGlCb251cyIgZGF0YS1lbnRpdHktMj0iRGlzcGxheVNjb3JlIiBkYXRhLXNvdXJjZS1saW5lPSI3NCIgZGF0YS11aWQ9ImxuazQxIiBpZD0ibGlua19aZW5rZXNoaUJvbnVzX0Rpc3BsYXlTY29yZSI+PHBhdGggZD0iTTUxNC4wNywzMjAuNjcgQzUxNC4wNywzMDIuNTMgNTE0LjA3LDI1NyA1MTQuMDcsMjU3IEM1MTQuMDcsMjU3IDU0MS4xOSwyNTcgNTczLjY4LDI1NyIgZmlsbD0ibm9uZSIgaWQ9Ilplbmtlc2hpQm9udXMtdG8tRGlzcGxheVNjb3JlIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7c3Ryb2tlLWRhc2hhcnJheTo3LDc7Ii8+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSI1NzkuNjgsMjU3LDU3MC42OCwyNTMsNTc0LjY4LDI1Nyw1NzAuNjgsMjYxLDU3OS42OCwyNTciIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI2My4wMDY4IiB4PSI1MTYuMDQiIHk9IjI3MC4wNjY5Ij4mIzE3MTtpbmNsdWRlJiMxODc7PC90ZXh0PjwvZz48IS0tbGluayBHYW1lT3ZlckNoZWNrIHRvIEdhbWVPdmVyQW5pbWF0aW9uLS0+PGcgY2xhc3M9ImxpbmsiIGRhdGEtZW50aXR5LTE9IkdhbWVPdmVyQ2hlY2siIGRhdGEtZW50aXR5LTI9IkdhbWVPdmVyQW5pbWF0aW9uIiBkYXRhLXNvdXJjZS1saW5lPSI3NSIgZGF0YS11aWQ9ImxuazQyIiBpZD0ibGlua19HYW1lT3ZlckNoZWNrX0dhbWVPdmVyQW5pbWF0aW9uIj48cGF0aCBkPSJNMjkyLjMsNDAwIEMzMTMuNTIsNDAwIDMzMC41LDQwMCAzNTEuNzMsNDAwIiBmaWxsPSJub25lIiBpZD0iR2FtZU92ZXJDaGVjay10by1HYW1lT3ZlckFuaW1hdGlvbiIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxO3N0cm9rZS1kYXNoYXJyYXk6Nyw3OyIvPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iMzU3LjczLDQwMCwzNDguNzMsMzk2LDM1Mi43Myw0MDAsMzQ4LjczLDQwNCwzNTcuNzMsNDAwIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNjMuMDA2OCIgeD0iMjYxLjAxIiB5PSI0MTMuMDY2OSI+JiMxNzE7aW5jbHVkZSYjMTg3OzwvdGV4dD48L2c+PCEtLVNSQz1bYkxKVEpYRDE2QnRWZnpYbXVyTHYwNEQ4NURHQmVvOXV2VHN1N1RqRGpwbER4WEhqMzhjeEFyMTFlQWRPSGE0NUg3dUwxT21ldlVUWGZqamp0eUFQTVJnVFFNY0FJVERpdlpqZGxaRlZFSkM2VjhmTFo1SEJKb0luNmpTamc2NFRjT2dUcWlxQ2k0MVFwRzBqMUg5bTNFU0NnQjhvQzFDNjUwMjZSYUFTb3EwTE1KWTk1RU1RSWptcnVsdVd4WmRuSmVZcHYtenoyQ3dzNVExWFBBYnpuMmlKeG5qbnJ1YjdWb1R6QWgzTDRHRmFlMUtYdDJGWV9ZTlU1RjVNVTdhaVBzRU9MZkllRXlLdTU5RV8tN1NGTTJEbEhJUS1LMzFBRzlvNDVscmFlWXZHbVR2Z0s5WGdiRE9RQnh6R1RTSlJPRWtLdi13NzdxaE1YWGdtUVBUUXdJVG5vaUh2OVJHZURhZ3Bfa1BpQTBtMzJ6LTdwLXcwRDZvbkgzM25UbFpNVjFIVWRoRDZlU3J1ZDNJWGpBZGE5d2d6ZFFrVUJiejlPZEM0SFZ6ZW1yeXU5Q3ZraTVkblB6X25KbFZHRTFwOXZqMWJ5QUxGelNmUWcwVFhXQmxYV2J5aGpWOHNTSFJnWFRGZ2RfM08zeEV3Ylhnc0s4UHBFZXVHN1JfZnpGeVRmM3d6NG9wazItcmsweUZlZWd4c0UtX0ZMcFpnYmFMQkNlbXNSU29OXzhLdl90b1A3VU56U1IzdWNPRTdhYTB0SG80OG1udUhfQ2Fqa1lFcHQ1bGNQdlpYTWVsMXQ4NV9Ma1JDbnoxQ0dKa2Z0cUhjclhPemZ4WDM3bG5ZVk5LaE0zX2N3NjdUcGoxaVpzZDh3bEpRZF9wZ3BvblRSSlprVHd1ZExGTVFFOWpYSDdZSmtwM3QxMDRoRmVIQ1IyNTNQRDdPVVNIcDFGMFpiRE1JSk1JZFRRcUJUNExUS1RIdC00VTFfbGx2VE5oYlVKVU15R1ZacTFmQUdZdExXck94TVZJZFpvTlEzTERGMHN4SDFEREExU2dGMXJLTm9iSjI1cUlEbkdSYklvY2lZelRFTTh4a1kwWGp0R1hYTE93eks2V3RHMlg5dXN3UlM0anpiNXJyODFQaEZkVkRzOGpoS2N4NVdYSEJpSTBjSzVvTmRCY2k0Q3JVQkJCS2xmZHEyeGpLVUZOU0xQaDNLX2x4RXlRV05iUzcxazFwM0N0dXVBMkM1QVNZbXJnSnh4cmI2eFJ4ZmY5bmxWVmpYN1ZWY1pfUDd3Y0pyS2VmejlFRGZVS2RPeWtjQ1Jma1FhT3MzWWJWaFo2cVA5V0NiYXRrMFBPRFBrMUVQb042Rm0wMF0tLT48L2c+PC9zdmc+" class="uml" alt="uml diagram" title="" /></p>
<p>この図を見ると、プレイヤーとシステムの役割分担がよくわかりますね。プレイヤーはゲームの開始や操作を担当し、システムはぷよの消去判定やスコア計算などの内部処理を担当しています。また、キーボード操作とタッチ操作は「拡張（extend）」関係にあり、ぷよの移動や回転などの基本操作を異なる入力方法で実現していることがわかります。</p>
<p>このようにユースケース図を作成することで、システムの全体像を把握し、実装すべき機能の関連性を明確にすることができます。それでは、実際のコード実装に進んでいきましょう！</p>
<p>誤解しないでもらいたいのですが本来ユースケースとはテキストで記述するものでありユースケース図は概要を把握するための手段に過ぎないということです。</p>
<blockquote>
<p>楕円、矢印、人型おアイコンから構成されているUMLのユースケース図は、ユースケースを把握するための表記法ではありません。
楕円や矢印は、ユースケースをのパッケージや分解を表すもので、内容を表すものではありません。</p>
<p>— アリスター・コーバーン 『ユースケース実践ガイド』</p>
</blockquote>
<h2 id="_8">リリース計画<a class="headerlink" href="#_8" title="Permanent link">&para;</a></h2>
<p>要件もわかった、プログラミング開始だ！ちょっと待ってください、何事も計画を立てる事は大事なことです。ユースケース図を見てください、結構いろんなことがありますよね。何から取り組みますか？
「スコアの表示」ですか？「ゲームオーバー判定」ですか？でもまずは「新しいゲームを開始」しないとつながりとして難しいですよね。もちろん実際にプログラミングしながら順番を考えてもいいですけど間違った順番で進めると直すのが大変ですよね。
それにこれからどんなものを作るのかは事前にある程度イメージを固めておきたいものです（いきなり「ゲームオーバー」になるゲームはやりたくないですよね）。</p>
<blockquote>
<p>計画づくりとは「なにをいつまでに作ればいいのか？」という質問に答える作業だと私は考えている</p>
<p>— Mike Cohn 『アジャイルな見積と計画づくり』</p>
</blockquote>
<p>今回の目的はぷよぷよゲームを遊べるための最小限の機能の実装です。目的を実現するためにやるべきことをイテレーションという単位でまとめましょう。「全部やること洗い出すの？そんな先のことはわからないよ！」と思いますよね。安心してください今決めることは大まかな作業の流れと前後関係の整理だけです。
細かい部分は各イテレーションでおいおい明確になってきます。その手助けをしてくれるのがテスト駆動開発なのです。</p>
<blockquote>
<p>正しい設計を、正しいタイミングで行う。動かしてから、正しくする。</p>
<p>— Kent Beck 『テスト駆動開発』</p>
</blockquote>
<p>今回はユーザーストーリーとユースケース図から以下のイテレーション計画に従ってぷよぷよゲームをリリースします。</p>
<ul>
<li>イテレーション1: ゲーム開始の実装</li>
<li>イテレーション2: ぷよの移動の実装</li>
<li>イテレーション3: ぷよの回転の実装</li>
<li>イテレーション4: ぷよの自由落下の実装</li>
<li>イテレーション5: ぷよの高速落下の実装</li>
<li>イテレーション6: ぷよの消去の実装</li>
<li>イテレーション7: 連鎖反応の実装</li>
<li>イテレーション8: 全消しボーナスの実装</li>
<li>イテレーション9: ゲームオーバーの実装</li>
</ul>
<p>では、ぷよぷよゲーム開発スタートです！</p>
<h2 id="0">イテレーション0: 環境の構築<a class="headerlink" href="#0" title="Permanent link">&para;</a></h2>
<p>...と言いたいところですがまずは環境の構築をしなければなりません。「プログラミングなんてどの言語でやるか決めるぐらいでしょ？」と思うかもしれませんが家を建てるときにしっかりとした基礎工事が必要なように開発環境もしっかりとした準備が必要です。
家を建てた後に基礎がダメだと困ったことになりますからね。</p>
<h3 id="_9">ソフトウェア開発の三種の神器<a class="headerlink" href="#_9" title="Permanent link">&para;</a></h3>
<p>良いコードを書き続けるためには何が必要になるでしょうか？それは<a href="https://t-wada.hatenablog.jp/entry/clean-code-that-works">ソフトウェア開発の三種の神器</a>と呼ばれるものです。</p>
<blockquote>
<p>今日のソフトウェア開発の世界において絶対になければならない3つの技術的な柱があります。
三本柱と言ったり、三種の神器と言ったりしていますが、それらは</p>
<ul>
<li>バージョン管理</li>
<li>テスティング</li>
<li>自動化</li>
</ul>
<p>の3つです。</p>
<p>—  https://t-wada.hatenablog.jp/entry/clean-code-that-works</p>
</blockquote>
<p>本章では開発環境のセットアップとして、これら三種の神器を準備していきます。環境構築は退屈に感じるかもしれませんが、これらのツールがあることで、安心してコードを書くことができるようになります。一緒に進めていきましょう！</p>
<h3 id="git">バージョン管理: Gitとコミットメッセージ<a class="headerlink" href="#git" title="Permanent link">&para;</a></h3>
<p>バージョン管理システムとして Git を使います。Git については既に使用していると仮定しますが、コミットメッセージについて1つだけ重要なルールを確認しておきましょう。</p>
<h4 id="_10">コミットメッセージの書き方<a class="headerlink" href="#_10" title="Permanent link">&para;</a></h4>
<p>私たちのプロジェクトでは、<a href="https://www.conventionalcommits.org/ja/">Conventional Commits</a>の書式に従ってコミットメッセージを書きます。具体的には、それぞれのコミットメッセージはヘッダ、ボディ、フッタで構成されます。</p>
<div class="highlight"><pre><span></span><code>&lt;タイプ&gt;(&lt;スコープ&gt;): &lt;タイトル&gt;
&lt;空行&gt;
&lt;ボディ&gt;
&lt;空行&gt;
&lt;フッタ&gt;
</code></pre></div>
<p>ヘッダは必須で、スコープは任意です。コミットメッセージのタイトルは50文字までにしましょう（GitHub上で読みやすくなります）。</p>
<p>コミットのタイプは次を用います：</p>
<ul>
<li><strong>feat</strong>: 新しい機能</li>
<li><strong>fix</strong>: バグ修正</li>
<li><strong>docs</strong>: ドキュメント変更のみ</li>
<li><strong>style</strong>: コードに影響を与えない変更（空白、フォーマットなど）</li>
<li><strong>refactor</strong>: 機能追加でもバグ修正でもないコード変更</li>
<li><strong>perf</strong>: パフォーマンスを改善するコード変更</li>
<li><strong>test</strong>: テストの追加や修正</li>
<li><strong>chore</strong>: ビルドプロセスや補助ツールの変更</li>
</ul>
<p>例えば：</p>
<div class="highlight"><pre><span></span><code>git<span class="w"> </span>commit<span class="w"> </span>-m<span class="w"> </span><span class="s1">&#39;feat: ゲーム初期化機能を追加&#39;</span>
git<span class="w"> </span>commit<span class="w"> </span>-m<span class="w"> </span><span class="s1">&#39;refactor: メソッドの抽出&#39;</span>
git<span class="w"> </span>commit<span class="w"> </span>-m<span class="w"> </span><span class="s1">&#39;test: ぷよ消去のテストケースを追加&#39;</span>
</code></pre></div>
<h3 id="_11">テスティング: パッケージマネージャとテスト環境<a class="headerlink" href="#_11" title="Permanent link">&para;</a></h3>
<p>良いコードを書くためには、コードが正しく動作することを確認するテストが欠かせません。そのためのツールをセットアップしていきましょう。</p>
<h4 id="npm">パッケージマネージャ: npm<a class="headerlink" href="#npm" title="Permanent link">&para;</a></h4>
<p>外部ライブラリやツールを管理するために <strong>npm</strong>（Node Package Manager）を使います。</p>
<blockquote>
<p>npmとは、Node.jsで記述されたサードパーティ製のライブラリを管理するためのツールで、npmで扱うライブラリをパッケージと呼びます。</p>
<p>—  Node.js公式ドキュメント</p>
</blockquote>
<p>まず、<code>package.json</code> を作成してプロジェクトの依存関係を管理できるようにします：</p>
<div class="highlight"><pre><span></span><code>npm<span class="w"> </span>init<span class="w"> </span>-y
</code></pre></div>
<p>これで <code>package.json</code> が作成されます。このファイルの <code>"scripts"</code> セクションを以下のように設定します：</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;puyo-puyo-game&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;private&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;version&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;0.0.0&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;module&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;scripts&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;dev&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;vite&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;build&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;tsc &amp;&amp; vite build&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;preview&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;vite preview&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;test&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;vitest run&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;test:watch&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;vitest&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;test:coverage&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;vitest run --coverage&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;lint&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;eslint . --ext .ts,.tsx&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;lint:fix&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;eslint . --ext .ts,.tsx --fix&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;format&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;prettier --write .&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;format:check&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;prettier --check .&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;gulp&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;gulp&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;watch&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;gulp watch&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;guard&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;gulp guard&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;check&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;gulp checkAndFix&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;commit&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;git add . &amp;&amp; git commit&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;setup&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;npm install &amp;&amp; npm run check&quot;</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>設定を追加したら、必要なパッケージをインストールします：</p>
<div class="highlight"><pre><span></span><code>npm<span class="w"> </span>install
</code></pre></div>
<p>これで、テストフレームワークやその他の開発ツールがインストールされます。</p>
<h3 id="_12">自動化: コード品質の自動管理<a class="headerlink" href="#_12" title="Permanent link">&para;</a></h3>
<p>良いコードを書き続けるためには、コードの品質を自動的にチェックし、維持していく仕組みが必要です。ここでは、静的コード解析、コードフォーマット、コードカバレッジ、そしてタスクランナーを設定します。</p>
<h4 id="eslint">静的コード解析: ESLint<a class="headerlink" href="#eslint" title="Permanent link">&para;</a></h4>
<p>良いコードを書き続けるためには、コードの品質を維持していく必要があります。出来上がったコードに対する品質チェックの方法として <strong>静的コード解析</strong> があります。</p>
<blockquote>
<p>静的コード解析とは、プログラムを実行することなく、ソースコードを解析してバグや脆弱性、コーディング規約違反などを検出する手法です。</p>
<p>— Wikipedia</p>
</blockquote>
<p>TypeScript用 <strong>静的コード解析</strong> ツールとして <a href="https://eslint.org/">ESLint</a> を使います。まず必要なパッケージをインストールしましょう。</p>
<div class="highlight"><pre><span></span><code>npm<span class="w"> </span>install<span class="w"> </span>-D<span class="w"> </span>eslint<span class="w"> </span>@typescript-eslint/parser<span class="w"> </span>@typescript-eslint/eslint-plugin<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>eslint-config-prettier<span class="w"> </span>eslint-plugin-prettier<span class="w"> </span>eslint-plugin-sonarjs
</code></pre></div>
<p>次に、ESLint の設定ファイル <code>eslint.config.js</code> を作成します。</p>
<div class="highlight"><pre><span></span><code><span class="k">import</span><span class="w"> </span><span class="nx">js</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@eslint/js&#39;</span>
<span class="k">import</span><span class="w"> </span><span class="nx">typescript</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@typescript-eslint/eslint-plugin&#39;</span>
<span class="k">import</span><span class="w"> </span><span class="nx">typescriptParser</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@typescript-eslint/parser&#39;</span>
<span class="k">import</span><span class="w"> </span><span class="nx">prettier</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;eslint-plugin-prettier&#39;</span>
<span class="k">import</span><span class="w"> </span><span class="nx">prettierConfig</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;eslint-config-prettier&#39;</span>
<span class="k">import</span><span class="w"> </span><span class="nx">sonarjs</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;eslint-plugin-sonarjs&#39;</span>

<span class="k">export</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="p">[</span>
<span class="w">  </span><span class="nx">js</span><span class="p">.</span><span class="nx">configs</span><span class="p">.</span><span class="nx">recommended</span><span class="p">,</span>
<span class="w">  </span><span class="p">{</span>
<span class="w">    </span><span class="nx">files</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="s1">&#39;**/*.{ts,tsx}&#39;</span><span class="p">],</span>
<span class="w">    </span><span class="nx">languageOptions</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nx">parser</span><span class="o">:</span><span class="w"> </span><span class="nx">typescriptParser</span><span class="p">,</span>
<span class="w">      </span><span class="nx">parserOptions</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">ecmaVersion</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;latest&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="nx">sourceType</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;module&#39;</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nx">plugins</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="s1">&#39;@typescript-eslint&#39;</span><span class="o">:</span><span class="w"> </span><span class="nx">typescript</span><span class="p">,</span>
<span class="w">      </span><span class="nx">prettier</span><span class="p">,</span>
<span class="w">      </span><span class="nx">sonarjs</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nx">rules</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="p">...</span><span class="nx">typescript</span><span class="p">.</span><span class="nx">configs</span><span class="p">.</span><span class="nx">recommended</span><span class="p">.</span><span class="nx">rules</span><span class="p">,</span>
<span class="w">      </span><span class="p">...</span><span class="nx">prettierConfig</span><span class="p">.</span><span class="nx">rules</span><span class="p">,</span>
<span class="w">      </span><span class="s1">&#39;prettier/prettier&#39;</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;error&#39;</span><span class="p">,</span>
<span class="w">      </span><span class="c1">// 循環的複雑度の制限 - 7を超える場合はエラー</span>
<span class="w">      </span><span class="s1">&#39;complexity&#39;</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="s1">&#39;error&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">max</span><span class="o">:</span><span class="w"> </span><span class="mf">7</span><span class="w"> </span><span class="p">}],</span>
<span class="w">      </span><span class="c1">// 認知的複雑度の制限 - 4を超える場合はエラー</span>
<span class="w">      </span><span class="s1">&#39;sonarjs/cognitive-complexity&#39;</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="s1">&#39;error&#39;</span><span class="p">,</span><span class="w"> </span><span class="mf">4</span><span class="p">],</span>
<span class="w">      </span><span class="c1">// その他の推奨ルール</span>
<span class="w">      </span><span class="s1">&#39;no-console&#39;</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="s1">&#39;warn&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">allow</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="s1">&#39;warn&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;error&#39;</span><span class="p">]</span><span class="w"> </span><span class="p">}],</span>
<span class="w">      </span><span class="s1">&#39;no-debugger&#39;</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;error&#39;</span><span class="p">,</span>
<span class="w">      </span><span class="s1">&#39;no-var&#39;</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;error&#39;</span><span class="p">,</span>
<span class="w">      </span><span class="s1">&#39;prefer-const&#39;</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;error&#39;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">},</span>
<span class="w">  </span><span class="p">{</span>
<span class="w">    </span><span class="nx">files</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="s1">&#39;**/*.test.{ts,tsx}&#39;</span><span class="p">],</span>
<span class="w">    </span><span class="nx">rules</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="s1">&#39;@typescript-eslint/no-unused-expressions&#39;</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;off&#39;</span><span class="p">,</span>
<span class="w">      </span><span class="s1">&#39;@typescript-eslint/no-unused-vars&#39;</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;warn&#39;</span><span class="p">,</span>
<span class="w">      </span><span class="s1">&#39;no-console&#39;</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;off&#39;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">},</span>
<span class="w">  </span><span class="p">{</span>
<span class="w">    </span><span class="nx">ignores</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="s1">&#39;dist/**&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;node_modules/**&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;coverage/**&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;*.config.js&#39;</span><span class="p">]</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">]</span>
</code></pre></div>
<p>設定ファイルを作成したら、以下のコマンドで静的コード解析を実行します。</p>
<div class="highlight"><pre><span></span><code>npm<span class="w"> </span>run<span class="w"> </span>lint
</code></pre></div>
<p>エラーがあった場合は <code>--fix</code> オプションで自動修正できます：</p>
<div class="highlight"><pre><span></span><code>npm<span class="w"> </span>run<span class="w"> </span>lint:fix
</code></pre></div>
<p>ESLintの詳細に関しては <a href="https://qiita.com/mysticatea/items/f523dab04a25f617c87d">ESLint ルールまとめ</a>を参照ください。</p>
<p><strong>コード複雑度のチェック</strong></p>
<p>ESLint の設定ファイルには、すでに <strong>循環的複雑度</strong> と <strong>認知的複雑度</strong> の制限が含まれています。これらの指標について説明します。</p>
<p><strong>循環的複雑度 (Cyclomatic Complexity)</strong></p>
<blockquote>
<p>循環的複雑度(サイクロマティック複雑度)とは、ソフトウェア測定法の一つであり、コードがどれぐらい複雑であるかをメソッド単位で数値にして表す指標。</p>
</blockquote>
<p>私たちの設定では、循環的複雑度を <strong>7以下</strong> に制限しています。</p>
<table>
<thead>
<tr>
<th>複雑度の範囲</th>
<th>意味</th>
</tr>
</thead>
<tbody>
<tr>
<td>1～10</td>
<td>低複雑度：管理しやすく、問題なし。</td>
</tr>
<tr>
<td>11～20</td>
<td>中程度の複雑度：リファクタリングを検討。</td>
</tr>
<tr>
<td>21～50</td>
<td>高複雑度：リファクタリングが強く推奨される。</td>
</tr>
<tr>
<td>51以上</td>
<td>非常に高い複雑度:コードを分割する必要がある。</td>
</tr>
</tbody>
</table>
<p><strong>認知的複雑度 (Cognitive Complexity)</strong></p>
<blockquote>
<p>認知的複雑度（Cognitive Complexity）
プログラムを読む人の認知負荷を測るための指標のこと。コードの構造が「どれだけ頭を使う必要があるか」を定量的に評価する。循環的複雑度とは異なり、制御構造のネストやコードの流れの読みやすさに重点を置いている</p>
</blockquote>
<p>私たちの設定では、認知的複雑度を <strong>4以下</strong> に制限しています。</p>
<table>
<thead>
<tr>
<th>複雑度の範囲</th>
<th>意味</th>
</tr>
</thead>
<tbody>
<tr>
<td>0～4</td>
<td>理解が非常に容易：リファクタリング不要。</td>
</tr>
<tr>
<td>5～14</td>
<td>中程度の難易度:改善が必要な場合もある。</td>
</tr>
<tr>
<td>15以上</td>
<td>理解が困難:コードの簡素化を検討するべき。</td>
</tr>
</tbody>
</table>
<p>コード複雑度の制限により、以下の効果が得られます：</p>
<ul>
<li><strong>可読性向上</strong>: 小さなメソッドは理解しやすい</li>
<li><strong>保守性向上</strong>: 変更の影響範囲が限定される</li>
<li><strong>テスト容易性</strong>: 個別機能のテストが簡単</li>
<li><strong>自動品質管理</strong>: 複雑なコードの混入を自動防止</li>
</ul>
<p><strong>循環参照の検知</strong></p>
<p>循環参照を検知できるようにします。</p>
<blockquote>
<p>循環参照（じゅんかんさんしょう）とは、複数の物体または情報が、相互の情報を参照し合ってループを成している状態のこと。循環参照が存在すると、コードの理解が困難になり、保守性が低下します。</p>
<p>— Wikipedia</p>
</blockquote>
<p><strong>dependency-cruiser</strong> を使って循環参照を検知します。</p>
<div class="highlight"><pre><span></span><code>npm<span class="w"> </span>i<span class="w"> </span>-D<span class="w"> </span>dependency-cruiser
npx<span class="w"> </span>depcruise<span class="w"> </span>--init
</code></pre></div>
<p>初期化コマンドを実行すると、<code>.dependency-cruiser.js</code> という設定ファイルが作成されます。以下のように編集して、循環参照の検知を有効にします。</p>
<div class="highlight"><pre><span></span><code><span class="cm">/** @type {import(&#39;dependency-cruiser&#39;).IConfiguration} */</span>
<span class="k">export</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">forbidden</span><span class="o">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nx">name</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;no-circular&#39;</span><span class="p">,</span>
<span class="w">      </span><span class="nx">severity</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;error&#39;</span><span class="p">,</span>
<span class="w">      </span><span class="nx">comment</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;循環参照を禁止します&#39;</span><span class="p">,</span>
<span class="w">      </span><span class="kr">from</span><span class="o">:</span><span class="w"> </span><span class="p">{},</span>
<span class="w">      </span><span class="nx">to</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">circular</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nx">name</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;no-orphans&#39;</span><span class="p">,</span>
<span class="w">      </span><span class="nx">severity</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;warn&#39;</span><span class="p">,</span>
<span class="w">      </span><span class="nx">comment</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;使用されていないファイルを警告します&#39;</span><span class="p">,</span>
<span class="w">      </span><span class="kr">from</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">orphan</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">        </span><span class="nx">pathNot</span><span class="o">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">          </span><span class="s1">&#39;(^|/)\\.[^/]+\\.(js|cjs|mjs|ts|json)$&#39;</span><span class="p">,</span><span class="w"> </span><span class="c1">// ドットファイル</span>
<span class="w">          </span><span class="s1">&#39;\\.d\\.ts$&#39;</span><span class="p">,</span><span class="w"> </span><span class="c1">// 型定義ファイル</span>
<span class="w">          </span><span class="s1">&#39;(^|/)tsconfig\\.json$&#39;</span><span class="p">,</span><span class="w"> </span><span class="c1">// tsconfig</span>
<span class="w">          </span><span class="s1">&#39;(^|/)(babel|webpack)\\.config\\.(js|cjs|mjs|ts|json)$&#39;</span><span class="w"> </span><span class="c1">// 設定ファイル</span>
<span class="w">        </span><span class="p">]</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nx">to</span><span class="o">:</span><span class="w"> </span><span class="p">{}</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">],</span>
<span class="w">  </span><span class="nx">options</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">doNotFollow</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nx">path</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;node_modules&#39;</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nx">tsPreCompilationDeps</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">    </span><span class="nx">tsConfig</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nx">fileName</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;tsconfig.json&#39;</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nx">enhancedResolveOptions</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nx">exportsFields</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="s1">&#39;exports&#39;</span><span class="p">],</span>
<span class="w">      </span><span class="nx">conditionNames</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="s1">&#39;import&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;require&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;node&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;default&#39;</span><span class="p">]</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nx">reporterOptions</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nx">dot</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">collapsePattern</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;node_modules/[^/]+&#39;</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nx">archi</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">collapsePattern</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;^(node_modules|packages|src|lib|app|test)/[^/]+&#39;</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>循環参照をチェックするには、以下のコマンドを実行します。</p>
<div class="highlight"><pre><span></span><code>npx<span class="w"> </span>depcruise<span class="w"> </span>src
</code></pre></div>
<p>循環参照が検出された場合は、以下のようなエラーメッセージが表示されます。</p>
<div class="highlight"><pre><span></span><code><span class="w">  </span>error<span class="w"> </span>no-circular:<span class="w"> </span>src/module-a.ts<span class="w"> </span>→<span class="w"> </span>src/module-b.ts<span class="w"> </span>→<span class="w"> </span>src/module-a.ts
</code></pre></div>
<p>このエラーが表示された場合は、モジュールの依存関係を見直し、循環参照を解消する必要があります。</p>
<p><strong>循環参照を解消する一般的な方法：</strong></p>
<ol>
<li><strong>依存性逆転の原則を適用</strong>: インターフェースを導入して依存関係を逆転させる</li>
<li><strong>共通モジュールの抽出</strong>: 両方が依存する部分を別のモジュールに抽出する</li>
<li><strong>レイヤーアーキテクチャの導入</strong>: 明確な依存関係の方向性を定義する</li>
</ol>
<p>可視化して依存関係を確認することもできます。</p>
<div class="highlight"><pre><span></span><code>npx<span class="w"> </span>depcruise<span class="w"> </span>src<span class="w"> </span>--include-only<span class="w"> </span><span class="s2">&quot;^src&quot;</span><span class="w"> </span>--output-type<span class="w"> </span>dot<span class="w"> </span><span class="p">|</span><span class="w"> </span>dot<span class="w"> </span>-T<span class="w"> </span>svg<span class="w"> </span>&gt;<span class="w"> </span>dependency-graph.svg
</code></pre></div>
<p>これで依存関係のグラフが SVG 形式で生成されます。</p>
<h4 id="prettier">コードフォーマッタ: Prettier<a class="headerlink" href="#prettier" title="Permanent link">&para;</a></h4>
<p>コードのフォーマットを統一するために <strong>Prettier</strong> を使います。</p>
<blockquote>
<p>優れたソースコードは「目に優しい」ものでなければいけない。</p>
<p>—  リーダブルコード</p>
</blockquote>
<p>フォーマットのチェックと自動修正は以下のコマンドで実行できます：</p>
<div class="highlight"><pre><span></span><code>npm<span class="w"> </span>run<span class="w"> </span>format:check<span class="w">  </span><span class="c1"># チェックのみ</span>
npm<span class="w"> </span>run<span class="w"> </span>format<span class="w">        </span><span class="c1"># 自動修正</span>
</code></pre></div>
<h4 id="vitest-coverage">コードカバレッジ: Vitest Coverage<a class="headerlink" href="#vitest-coverage" title="Permanent link">&para;</a></h4>
<p>テストがコードのどれだけをカバーしているかを確認するために、<strong>Vitest</strong> のカバレッジ機能を使います。</p>
<blockquote>
<p>コード網羅率（コードもうらりつ、英: Code coverage）は、ソフトウェアテストで用いられる尺度の1つである。プログラムのソースコードがテストされた割合を意味する。</p>
</blockquote>
<p>必要なパッケージをインストールします：</p>
<div class="highlight"><pre><span></span><code>npm<span class="w"> </span>install<span class="w"> </span>--save-dev<span class="w"> </span>vitest<span class="w"> </span>@vitest/coverage-v8
</code></pre></div>
<p>カバレッジレポートを生成するには：</p>
<div class="highlight"><pre><span></span><code>npm<span class="w"> </span>run<span class="w"> </span>test:coverage
</code></pre></div>
<p>実行後、<code>coverage</code> フォルダ内の <code>index.html</code> を開くと、視覚的にカバレッジ状況を確認できます。</p>
<h4 id="gulp">タスクランナー: Gulp<a class="headerlink" href="#gulp" title="Permanent link">&para;</a></h4>
<p>複数のコマンドを覚えるのは大変です。タスクランナーの <strong>Gulp</strong> を使って、よく使うコマンドをタスクとして登録し、簡単に実行できるようにします。</p>
<blockquote>
<p>GulpはJavaScript/TypeScriptにおけるタスクランナーです。gulpコマンドと起点となるgulpfile.jsというタスクを記述するファイルを用意することで、タスクの実行や登録されたタスクの一覧表示を行えます。</p>
</blockquote>
<p><code>gulpfile.js</code> を作成し、以下のように設定します：</p>
<div class="highlight"><pre><span></span><code><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">watch</span><span class="p">,</span><span class="w"> </span><span class="nx">series</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;gulp&#39;</span>
<span class="k">import</span><span class="w"> </span><span class="nx">shell</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;gulp-shell&#39;</span>

<span class="c1">// テストタスク</span>
<span class="k">export</span><span class="w"> </span><span class="kd">const</span><span class="w"> </span><span class="nx">test</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">shell</span><span class="p">.</span><span class="nx">task</span><span class="p">([</span><span class="s1">&#39;npm run test&#39;</span><span class="p">])</span>

<span class="c1">// テストカバレッジタスク</span>
<span class="k">export</span><span class="w"> </span><span class="kd">const</span><span class="w"> </span><span class="nx">coverage</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">shell</span><span class="p">.</span><span class="nx">task</span><span class="p">([</span><span class="s1">&#39;npm run test:coverage&#39;</span><span class="p">])</span>

<span class="c1">// 静的コード解析タスク</span>
<span class="k">export</span><span class="w"> </span><span class="kd">const</span><span class="w"> </span><span class="nx">lint</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">shell</span><span class="p">.</span><span class="nx">task</span><span class="p">([</span><span class="s1">&#39;npm run lint&#39;</span><span class="p">])</span>

<span class="c1">// 自動修正付き静的コード解析タスク</span>
<span class="k">export</span><span class="w"> </span><span class="kd">const</span><span class="w"> </span><span class="nx">lintFix</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">shell</span><span class="p">.</span><span class="nx">task</span><span class="p">([</span><span class="s1">&#39;npm run lint:fix&#39;</span><span class="p">])</span>

<span class="c1">// フォーマットタスク</span>
<span class="k">export</span><span class="w"> </span><span class="kd">const</span><span class="w"> </span><span class="nx">format</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">shell</span><span class="p">.</span><span class="nx">task</span><span class="p">([</span><span class="s1">&#39;npm run format&#39;</span><span class="p">])</span>

<span class="c1">// フォーマットチェックタスク</span>
<span class="k">export</span><span class="w"> </span><span class="kd">const</span><span class="w"> </span><span class="nx">formatCheck</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">shell</span><span class="p">.</span><span class="nx">task</span><span class="p">([</span><span class="s1">&#39;npm run format:check&#39;</span><span class="p">])</span>

<span class="c1">// ビルドタスク</span>
<span class="k">export</span><span class="w"> </span><span class="kd">const</span><span class="w"> </span><span class="nx">build</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">shell</span><span class="p">.</span><span class="nx">task</span><span class="p">([</span><span class="s1">&#39;npm run build&#39;</span><span class="p">])</span>

<span class="c1">// 開発サーバータスク</span>
<span class="k">export</span><span class="w"> </span><span class="kd">const</span><span class="w"> </span><span class="nx">dev</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">shell</span><span class="p">.</span><span class="nx">task</span><span class="p">([</span><span class="s1">&#39;npm run dev&#39;</span><span class="p">])</span>

<span class="c1">// 全体チェックタスク（自動修正付き）</span>
<span class="k">export</span><span class="w"> </span><span class="kd">const</span><span class="w"> </span><span class="nx">checkAndFix</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">series</span><span class="p">(</span><span class="nx">lintFix</span><span class="p">,</span><span class="w"> </span><span class="nx">format</span><span class="p">,</span><span class="w"> </span><span class="nx">test</span><span class="p">)</span>

<span class="c1">// ファイル監視タスク（自動テスト実行）</span>
<span class="k">export</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">guard</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;🔍 Guard is watching for file changes...&#39;</span><span class="p">)</span>
<span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;Files will be automatically linted, formatted, and tested on change.&#39;</span><span class="p">)</span>
<span class="w">    </span><span class="nx">watch</span><span class="p">(</span><span class="s1">&#39;src/**/*.ts&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">series</span><span class="p">(</span><span class="nx">lintFix</span><span class="p">,</span><span class="w"> </span><span class="nx">format</span><span class="p">,</span><span class="w"> </span><span class="nx">test</span><span class="p">))</span>
<span class="w">    </span><span class="nx">watch</span><span class="p">(</span><span class="s1">&#39;**/*.test.ts&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">series</span><span class="p">(</span><span class="nx">test</span><span class="p">))</span>
<span class="p">}</span>

<span class="c1">// ファイル監視タスク</span>
<span class="k">export</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">watchFiles</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">watch</span><span class="p">(</span><span class="s1">&#39;src/**/*.ts&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">series</span><span class="p">(</span><span class="nx">formatCheck</span><span class="p">,</span><span class="w"> </span><span class="nx">lint</span><span class="p">,</span><span class="w"> </span><span class="nx">test</span><span class="p">))</span>
<span class="w">    </span><span class="nx">watch</span><span class="p">(</span><span class="s1">&#39;**/*.test.ts&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">series</span><span class="p">(</span><span class="nx">test</span><span class="p">))</span>
<span class="p">}</span>

<span class="c1">// デフォルトタスク</span>
<span class="k">export</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="nx">series</span><span class="p">(</span><span class="nx">checkAndFix</span><span class="p">,</span><span class="w"> </span><span class="nx">guard</span><span class="p">)</span>

<span class="c1">// ウォッチタスクのエイリアス</span>
<span class="k">export</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">watchFiles</span><span class="w"> </span><span class="kr">as</span><span class="w"> </span><span class="nx">watch</span><span class="w"> </span><span class="p">}</span>
</code></pre></div>
<p>登録されたタスクを確認するには：</p>
<div class="highlight"><pre><span></span><code>npx<span class="w"> </span>gulp<span class="w"> </span>--tasks
</code></pre></div>
<p>特定のタスクを実行するには：</p>
<div class="highlight"><pre><span></span><code>npx<span class="w"> </span>gulp<span class="w"> </span><span class="nb">test</span><span class="w">      </span><span class="c1"># テスト実行</span>
npx<span class="w"> </span>gulp<span class="w"> </span>lint<span class="w">      </span><span class="c1"># 静的解析</span>
npx<span class="w"> </span>gulp<span class="w"> </span>format<span class="w">    </span><span class="c1"># フォーマット</span>
npx<span class="w"> </span>gulp<span class="w"> </span>check<span class="w">     </span><span class="c1"># 全体チェック（自動修正付き）</span>
</code></pre></div>
<h4 id="guard">タスクの自動実行: Guard<a class="headerlink" href="#guard" title="Permanent link">&para;</a></h4>
<p>ファイルを編集するたびに手動でコマンドを実行するのは面倒です。<strong>Guard</strong> 機能を使って、ファイルの変更を検知して自動的にテストやフォーマットを実行できるようにします。</p>
<div class="highlight"><pre><span></span><code>npm<span class="w"> </span>run<span class="w"> </span>guard
</code></pre></div>
<p>このコマンドを実行すると、ファイルを保存するたびに自動的に以下が実行されます：</p>
<ol>
<li>ESLintによる静的解析（自動修正付き）</li>
<li>Prettierによるフォーマット</li>
<li>テストの実行</li>
</ol>
<p>これにより、常にコードの品質を保ちながら開発を進めることができます。開発を始める際は、まず <code>npm run guard</code> を実行して、後はコードを書くことに集中しましょう！</p>
<h3 id="_13">環境構築の完了<a class="headerlink" href="#_13" title="Permanent link">&para;</a></h3>
<p>お疲れさまでした！これで開発環境のセットアップが完了しました。以下のツールが使えるようになりました：</p>
<ul>
<li><strong>バージョン管理</strong>: Git（Conventional Commits形式）</li>
<li><strong>テスティング</strong>: Vitest（カバレッジレポート付き）</li>
<li><strong>静的コード解析</strong>: ESLint（循環的複雑度チェック付き）</li>
<li><strong>コードフォーマット</strong>: Prettier</li>
<li><strong>タスクランナー</strong>: Gulp</li>
<li><strong>自動化</strong>: Guard（ファイル監視と自動実行）</li>
</ul>
<p>これらのツールにより、<a href="https://t-wada.hatenablog.jp/entry/clean-code-that-works">ソフトウェア開発の三種の神器</a>が揃いました。これから安心してテスト駆動開発に取り組むことができます！</p>
<h3 id="_14">環境構成<a class="headerlink" href="#_14" title="Permanent link">&para;</a></h3>
<p>実際に構築した開発環境の構成は以下の通りです：</p>
<h4 id="_15">プロジェクト構造<a class="headerlink" href="#_15" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code>app/typescript-3/
├── src/                    # ソースコード
│   └── main.ts            # エントリーポイント
├── tests/                 # テストコード
│   └── example.test.ts    # テストサンプル
├── package.json           # 依存関係管理
├── tsconfig.json          # TypeScript設定
├── tsconfig.node.json     # Node.js用TypeScript設定
├── vite.config.ts         # Vite設定
├── vitest.config.ts       # Vitest設定
├── gulpfile.js            # Gulpタスク定義
├── .eslintrc.cjs          # ESLint設定
├── .prettierrc            # Prettier設定
├── .gitignore             # Git除外設定
└── index.html             # HTMLエントリーポイント
</code></pre></div>
<h4 id="packagejson">package.json の主要な設定<a class="headerlink" href="#packagejson" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;puyo-puyo-game&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;module&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;scripts&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;dev&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;vite&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;build&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;tsc &amp;&amp; vite build&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;preview&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;vite preview&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;test&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;vitest run&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;test:watch&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;vitest&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;test:coverage&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;vitest run --coverage&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;lint&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;eslint . --ext .ts,.tsx&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;lint:fix&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;eslint . --ext .ts,.tsx --fix&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;format&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;prettier --write .&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;format:check&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;prettier --check .&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;gulp&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;gulp&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;watch&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;gulp watch&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;guard&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;gulp guard&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;check&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;gulp checkAndFix&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;commit&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;git add . &amp;&amp; git commit&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;setup&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;npm install &amp;&amp; npm run check&quot;</span>
<span class="w">  </span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;devDependencies&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;@typescript-eslint/eslint-plugin&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;^7.0.0&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;@typescript-eslint/parser&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;^7.0.0&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;@vitest/coverage-v8&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;^1.3.1&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;eslint&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;^8.56.0&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;eslint-config-prettier&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;^9.1.0&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;eslint-plugin-complexity&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;^1.0.2&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;gulp&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;^5.0.0&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;gulp-shell&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;^0.8.0&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;jsdom&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;^27.0.0&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;prettier&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;^3.2.5&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;typescript&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;^5.3.3&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;vite&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;^5.1.0&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;vitest&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;^1.3.1&quot;</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<h4 id="typescripttsconfigjson">TypeScript設定（tsconfig.json）<a class="headerlink" href="#typescripttsconfigjson" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;compilerOptions&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;target&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;ES2020&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;useDefineForClassFields&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;module&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;ESNext&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;lib&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;ES2020&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;DOM&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;DOM.Iterable&quot;</span><span class="p">],</span>
<span class="w">    </span><span class="nt">&quot;skipLibCheck&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;moduleResolution&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;bundler&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;allowImportingTsExtensions&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;resolveJsonModule&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;isolatedModules&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;noEmit&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;strict&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;noUnusedLocals&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;noUnusedParameters&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;noFallthroughCasesInSwitch&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;types&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;vitest/globals&quot;</span><span class="p">]</span>
<span class="w">  </span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;include&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;src&quot;</span><span class="p">],</span>
<span class="w">  </span><span class="nt">&quot;references&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w"> </span><span class="nt">&quot;path&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;./tsconfig.node.json&quot;</span><span class="w"> </span><span class="p">}]</span>
<span class="p">}</span>
</code></pre></div>
<h4 id="eslinteslintrccjs">ESLint設定（.eslintrc.cjs）<a class="headerlink" href="#eslinteslintrccjs" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">root</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">    </span><span class="nx">env</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">browser</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"> </span><span class="nx">es2020</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="w"> </span><span class="p">},</span>
<span class="w">    </span><span class="k">extends</span><span class="o">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="s1">&#39;eslint:recommended&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="s1">&#39;plugin:@typescript-eslint/recommended&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="s1">&#39;prettier&#39;</span><span class="p">,</span>
<span class="w">    </span><span class="p">],</span>
<span class="w">    </span><span class="nx">ignorePatterns</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="s1">&#39;dist&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;.eslintrc.cjs&#39;</span><span class="p">],</span>
<span class="w">    </span><span class="nx">parser</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;@typescript-eslint/parser&#39;</span><span class="p">,</span>
<span class="w">    </span><span class="nx">plugins</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="s1">&#39;complexity&#39;</span><span class="p">],</span>
<span class="w">    </span><span class="nx">rules</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">complexity</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="s1">&#39;error&#39;</span><span class="p">,</span><span class="w"> </span><span class="mf">7</span><span class="p">],</span>
<span class="w">        </span><span class="s1">&#39;@typescript-eslint/no-explicit-any&#39;</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;warn&#39;</span><span class="p">,</span>
<span class="w">    </span><span class="p">},</span>
<span class="p">}</span>
</code></pre></div>
<h4 id="prettierprettierrc">Prettier設定（.prettierrc）<a class="headerlink" href="#prettierprettierrc" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;semi&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;singleQuote&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;trailingComma&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;es5&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;printWidth&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">80</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;tabWidth&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span>
<span class="p">}</span>
</code></pre></div>
<h4 id="vitestvitestconfigts">Vitest設定（vitest.config.ts）<a class="headerlink" href="#vitestvitestconfigts" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">defineConfig</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;vitest/config&#39;</span>

<span class="k">export</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="nx">defineConfig</span><span class="p">({</span>
<span class="w">    </span><span class="nx">test</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">globals</span><span class="o">:</span><span class="w"> </span><span class="kt">true</span><span class="p">,</span>
<span class="w">        </span><span class="nx">environment</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;jsdom&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="nx">coverage</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nx">provider</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;v8&#39;</span><span class="p">,</span>
<span class="w">            </span><span class="nx">reporter</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="s1">&#39;text&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;html&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;lcov&#39;</span><span class="p">],</span>
<span class="w">            </span><span class="nx">exclude</span><span class="o">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">                </span><span class="s1">&#39;node_modules/&#39;</span><span class="p">,</span>
<span class="w">                </span><span class="s1">&#39;dist/&#39;</span><span class="p">,</span>
<span class="w">                </span><span class="s1">&#39;**/*.test.ts&#39;</span><span class="p">,</span>
<span class="w">                </span><span class="s1">&#39;**/*.spec.ts&#39;</span><span class="p">,</span>
<span class="w">                </span><span class="s1">&#39;gulpfile.js&#39;</span><span class="p">,</span>
<span class="w">                </span><span class="s1">&#39;vite.config.ts&#39;</span><span class="p">,</span>
<span class="w">                </span><span class="s1">&#39;vitest.config.ts&#39;</span><span class="p">,</span>
<span class="w">            </span><span class="p">],</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">    </span><span class="p">},</span>
<span class="p">})</span>
</code></pre></div>
<h4 id="_16">環境構築の確認<a class="headerlink" href="#_16" title="Permanent link">&para;</a></h4>
<p>環境構築が正しく完了したことを確認するには、以下のコマンドを実行します：</p>
<div class="highlight"><pre><span></span><code><span class="nb">cd</span><span class="w"> </span>app/typescript-3
npm<span class="w"> </span>run<span class="w"> </span>check
</code></pre></div>
<p>このコマンドは以下の処理を順次実行します：</p>
<ol>
<li>ESLint による静的解析（自動修正付き）</li>
<li>Prettier によるコードフォーマット</li>
<li>Vitest によるテスト実行</li>
</ol>
<p>すべてのチェックが成功すれば、環境構築は完了です。</p>
<p>では、実際のゲーム開発に進みましょう！</p>
<h2 id="1">イテレーション1: ゲーム開始の実装<a class="headerlink" href="#1" title="Permanent link">&para;</a></h2>
<p>さあ、いよいよコードを書き始めましょう！テスト駆動開発では、小さなイテレーション（反復）で機能を少しずつ追加していきます。最初のイテレーションでは、最も基本的な機能である「ゲームの開始」を実装します。</p>
<blockquote>
<p>システム構築はどこから始めるべきだろうか。システム構築が終わったらこうなる、というストーリーを語るところからだ。</p>
<p>— Kent Beck 『テスト駆動開発』</p>
</blockquote>
<h3 id="_17">ユーザーストーリー<a class="headerlink" href="#_17" title="Permanent link">&para;</a></h3>
<p>まずは、このイテレーションで実装するユーザーストーリーを確認しましょう：</p>
<blockquote>
<p>プレイヤーとして、新しいゲームを開始できる</p>
</blockquote>
<p>このシンプルなストーリーから始めることで、ゲームの基本的な構造を作り、後続の機能追加の土台を築くことができます。では、テスト駆動開発のサイクルに従って、まずはテストから書いていきましょう！</p>
<h3 id="todo">TODOリスト<a class="headerlink" href="#todo" title="Permanent link">&para;</a></h3>
<p>さて、ユーザーストーリーを実装するために、まずはTODOリストを作成しましょう。TODOリストは、大きな機能を小さなタスクに分解するのに役立ちます。</p>
<blockquote>
<p>何をテストすべきだろうか - 着手する前に、必要になりそうなテストをリストに書き出しておこう。</p>
<p>— Kent Beck 『テスト駆動開発』</p>
</blockquote>
<p>私たちの「新しいゲームを開始できる」というユーザーストーリーを実現するためには、どのようなタスクが必要でしょうか？考えてみましょう：</p>
<ul>
<li>ゲームの初期化処理を実装する（ゲームの状態や必要なコンポーネントを設定する）</li>
<li>ゲーム画面を表示する（プレイヤーが視覚的にゲームを認識できるようにする）</li>
<li>新しいぷよを生成する（ゲーム開始時に最初のぷよを作成する）</li>
<li>ゲームループを開始する（ゲームの継続的な更新と描画を行う）</li>
</ul>
<p>これらのタスクを一つずつ実装していきましょう。テスト駆動開発では、各タスクに対してテスト→実装→リファクタリングのサイクルを回します。まずは「ゲームの初期化処理」から始めましょう！</p>
<h3 id="_18">テスト: ゲームの初期化<a class="headerlink" href="#_18" title="Permanent link">&para;</a></h3>
<p>さて、TODOリストの最初のタスク「ゲームの初期化処理を実装する」に取り掛かりましょう。テスト駆動開発では、まずテストを書くことから始めます。</p>
<blockquote>
<p>テストファースト</p>
<p>いつテストを書くべきだろうか——それはテスト対象のコードを書く前だ。</p>
<p>— Kent Beck 『テスト駆動開発』</p>
</blockquote>
<p>では、ゲームの初期化処理をテストするコードを書いてみましょう。何をテストすべきでしょうか？ゲームが初期化されたとき、必要なコンポーネントが正しく作成され、ゲームの状態が適切に設定されていることを確認する必要がありますね。</p>
<div class="highlight"><pre><span></span><code><span class="c1">// src/tests/game.test.ts</span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">describe</span><span class="p">,</span><span class="w"> </span><span class="nx">it</span><span class="p">,</span><span class="w"> </span><span class="nx">expect</span><span class="p">,</span><span class="w"> </span><span class="nx">beforeEach</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;vitest&#39;</span><span class="p">;</span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">Game</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;../game&#39;</span><span class="p">;</span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">Config</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;../config&#39;</span><span class="p">;</span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">Stage</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;../stage&#39;</span><span class="p">;</span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">PuyoImage</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;../puyoimage&#39;</span><span class="p">;</span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">Player</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;../player&#39;</span><span class="p">;</span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">Score</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;../score&#39;</span><span class="p">;</span>

<span class="nx">describe</span><span class="p">(</span><span class="s1">&#39;ゲーム&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="nx">game</span><span class="o">:</span><span class="w"> </span><span class="kt">Game</span><span class="p">;</span>

<span class="w">    </span><span class="nx">beforeEach</span><span class="p">(()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// DOMの準備</span>
<span class="w">        </span><span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">innerHTML</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="sb">`</span>
<span class="sb">            &lt;div id=&quot;stage&quot;&gt;&lt;/div&gt;</span>
<span class="sb">            &lt;div id=&quot;score&quot;&gt;&lt;/div&gt;</span>
<span class="sb">            &lt;div id=&quot;next&quot;&gt;&lt;/div&gt;</span>
<span class="sb">            &lt;div id=&quot;next2&quot;&gt;&lt;/div&gt;</span>
<span class="sb">        `</span><span class="p">;</span>
<span class="w">        </span><span class="nx">game</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">Game</span><span class="p">();</span>
<span class="w">    </span><span class="p">});</span>

<span class="w">    </span><span class="nx">describe</span><span class="p">(</span><span class="s1">&#39;ゲームの初期化&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">it</span><span class="p">(</span><span class="s1">&#39;ゲームを初期化すると、必要なコンポーネントが作成される&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nx">game</span><span class="p">.</span><span class="nx">initialize</span><span class="p">();</span>

<span class="w">            </span><span class="nx">expect</span><span class="p">(</span><span class="nx">game</span><span class="p">[</span><span class="s1">&#39;config&#39;</span><span class="p">]).</span><span class="nx">toBeInstanceOf</span><span class="p">(</span><span class="nx">Config</span><span class="p">);</span>
<span class="w">            </span><span class="nx">expect</span><span class="p">(</span><span class="nx">game</span><span class="p">[</span><span class="s1">&#39;puyoImage&#39;</span><span class="p">]).</span><span class="nx">toBeInstanceOf</span><span class="p">(</span><span class="nx">PuyoImage</span><span class="p">);</span>
<span class="w">            </span><span class="nx">expect</span><span class="p">(</span><span class="nx">game</span><span class="p">[</span><span class="s1">&#39;stage&#39;</span><span class="p">]).</span><span class="nx">toBeInstanceOf</span><span class="p">(</span><span class="nx">Stage</span><span class="p">);</span>
<span class="w">            </span><span class="nx">expect</span><span class="p">(</span><span class="nx">game</span><span class="p">[</span><span class="s1">&#39;player&#39;</span><span class="p">]).</span><span class="nx">toBeInstanceOf</span><span class="p">(</span><span class="nx">Player</span><span class="p">);</span>
<span class="w">            </span><span class="nx">expect</span><span class="p">(</span><span class="nx">game</span><span class="p">[</span><span class="s1">&#39;score&#39;</span><span class="p">]).</span><span class="nx">toBeInstanceOf</span><span class="p">(</span><span class="nx">Score</span><span class="p">);</span>
<span class="w">        </span><span class="p">});</span>

<span class="w">        </span><span class="nx">it</span><span class="p">(</span><span class="s1">&#39;ゲームを初期化すると、ゲームモードがstartになる&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nx">game</span><span class="p">.</span><span class="nx">initialize</span><span class="p">();</span>

<span class="w">            </span><span class="nx">expect</span><span class="p">(</span><span class="nx">game</span><span class="p">[</span><span class="s1">&#39;mode&#39;</span><span class="p">]).</span><span class="nx">toEqual</span><span class="p">(</span><span class="s1">&#39;start&#39;</span><span class="p">);</span>
<span class="w">        </span><span class="p">});</span>
<span class="w">    </span><span class="p">});</span>
<span class="p">});</span>
</code></pre></div>
<p>このテストでは、<code>Game</code>クラスの<code>initialize</code>メソッドが正しく動作することを確認しています。具体的には、必要なコンポーネント（Config, PuyoImage, Stage, Player, Score）が作成され、ゲームモードが'start'に設定されることを検証しています。</p>
<h3 id="_19">実装: ゲームの初期化<a class="headerlink" href="#_19" title="Permanent link">&para;</a></h3>
<p>テストを書いたら、次に実行してみましょう。どうなるでしょうか？</p>
<div class="highlight"><pre><span></span><code>Error: Cannot find module &#39;../game&#39;
</code></pre></div>
<p>おっと！まだ<code>Game</code>クラスを実装していないので、当然エラーになりますね。これがテスト駆動開発の「Red（赤）」の状態です。テストが失敗することを確認できました。</p>
<blockquote>
<p>アサートファースト</p>
<p>ではテストはどこから書き始めるべきだろうか。それはテストの終わりにパスすべきアサーションを書くところからだ。</p>
<p>— Kent Beck 『テスト駆動開発』</p>
</blockquote>
<p>では、テストが通るように最小限のコードを実装していきましょう。「最小限」というのがポイントです。この段階では、テストが通ることだけを目指して、必要最低限のコードを書きます。</p>
<div class="highlight"><pre><span></span><code><span class="c1">// src/game.ts</span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">Config</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;./config&#39;</span><span class="p">;</span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">PuyoImage</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;./puyoimage&#39;</span><span class="p">;</span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">Stage</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;./stage&#39;</span><span class="p">;</span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">Player</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;./player&#39;</span><span class="p">;</span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">Score</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;./score&#39;</span><span class="p">;</span>

<span class="k">export</span><span class="w"> </span><span class="kr">type</span><span class="w"> </span><span class="nx">GameMode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;start&#39;</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="s1">&#39;checkFall&#39;</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="s1">&#39;fall&#39;</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="s1">&#39;checkErase&#39;</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="s1">&#39;erasing&#39;</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="s1">&#39;newPuyo&#39;</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="s1">&#39;playing&#39;</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="s1">&#39;gameOver&#39;</span><span class="p">;</span>

<span class="k">export</span><span class="w"> </span><span class="kd">class</span><span class="w"> </span><span class="nx">Game</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">private</span><span class="w"> </span><span class="nx">mode</span><span class="o">:</span><span class="w"> </span><span class="kt">GameMode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;start&#39;</span><span class="p">;</span>
<span class="w">    </span><span class="k">private</span><span class="w"> </span><span class="nx">frame</span><span class="o">:</span><span class="w"> </span><span class="kt">number</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0</span><span class="p">;</span>
<span class="w">    </span><span class="k">private</span><span class="w"> </span><span class="nx">combinationCount</span><span class="o">:</span><span class="w"> </span><span class="kt">number</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0</span><span class="p">;</span>
<span class="w">    </span><span class="k">private</span><span class="w"> </span><span class="nx">config</span><span class="o">:</span><span class="w"> </span><span class="kt">Config</span><span class="p">;</span>
<span class="w">    </span><span class="k">private</span><span class="w"> </span><span class="nx">puyoImage</span><span class="o">:</span><span class="w"> </span><span class="kt">PuyoImage</span><span class="p">;</span>
<span class="w">    </span><span class="k">private</span><span class="w"> </span><span class="nx">stage</span><span class="o">:</span><span class="w"> </span><span class="kt">Stage</span><span class="p">;</span>
<span class="w">    </span><span class="k">private</span><span class="w"> </span><span class="nx">player</span><span class="o">:</span><span class="w"> </span><span class="kt">Player</span><span class="p">;</span>
<span class="w">    </span><span class="k">private</span><span class="w"> </span><span class="nx">score</span><span class="o">:</span><span class="w"> </span><span class="kt">Score</span><span class="p">;</span>

<span class="w">    </span><span class="kr">constructor</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// コンストラクタでは何もしない</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nx">initialize</span><span class="p">()</span><span class="o">:</span><span class="w"> </span><span class="ow">void</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// 各コンポーネントの初期化</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="nx">config</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">Config</span><span class="p">();</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="nx">puyoImage</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">PuyoImage</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">config</span><span class="p">);</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="nx">stage</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">Stage</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">config</span><span class="p">,</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">puyoImage</span><span class="p">);</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="nx">player</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">Player</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">config</span><span class="p">,</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">stage</span><span class="p">,</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">puyoImage</span><span class="p">);</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="nx">score</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">Score</span><span class="p">();</span>

<span class="w">        </span><span class="c1">// ゲームモードを設定</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="nx">mode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;start&#39;</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<h3 id="_20">解説: ゲームの初期化<a class="headerlink" href="#_20" title="Permanent link">&para;</a></h3>
<p>テストが通りましたね！おめでとうございます。これがテスト駆動開発の「Green（緑）」の状態です。</p>
<p>実装したゲームの初期化処理について、少し解説しておきましょう。この処理では、主に以下のことを行っています：</p>
<ol>
<li>各コンポーネント（Config, PuyoImage, Stage, Player, Score）のインスタンスを作成</li>
<li>ゲームモードを'start'に設定</li>
</ol>
<p>これにより、ゲームを開始するための準備が整います。各コンポーネントの役割を理解しておくと、今後の実装がスムーズになりますよ：</p>
<ul>
<li><strong>Config</strong>: ゲームの設定値を管理します（画面サイズ、ぷよの大きさなど）</li>
<li><strong>PuyoImage</strong>: ぷよの画像を管理します（各色のぷよの画像を読み込み、描画する）</li>
<li><strong>Stage</strong>: ゲームのステージ（盤面）を管理します（ぷよの配置状態、消去判定など）</li>
<li><strong>Player</strong>: プレイヤーの入力と操作を管理します（キーボード入力の処理、ぷよの移動など）</li>
<li><strong>Score</strong>: スコアの計算と表示を管理します（連鎖数に応じたスコア計算など）</li>
</ul>
<p>このように、責任を明確に分けることで、コードの保守性が高まります。これはオブジェクト指向設計の基本原則の一つ、「単一責任の原則」に従っています。</p>
<blockquote>
<p>単一責任の原則（SRP）：クラスを変更する理由は1つだけであるべき。</p>
<p>— Robert C. Martin 『Clean Architecture』</p>
</blockquote>
<h3 id="_21">テスト: ゲームループの開始<a class="headerlink" href="#_21" title="Permanent link">&para;</a></h3>
<p>次に、ゲームループを開始するテストを書きます。</p>
<div class="highlight"><pre><span></span><code><span class="c1">// src/tests/game.test.ts（続き）</span>
<span class="nx">describe</span><span class="p">(</span><span class="s1">&#39;ゲームループ&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">it</span><span class="p">(</span><span class="s1">&#39;ゲームループを開始すると、requestAnimationFrameが呼ばれる&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// requestAnimationFrameのモック</span>
<span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">originalRequestAnimationFrame</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">window</span><span class="p">.</span><span class="nx">requestAnimationFrame</span><span class="p">;</span>
<span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">mockRequestAnimationFrame</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">vi</span><span class="p">.</span><span class="nx">fn</span><span class="p">();</span>
<span class="w">        </span><span class="nb">window</span><span class="p">.</span><span class="nx">requestAnimationFrame</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">mockRequestAnimationFrame</span><span class="p">;</span>

<span class="w">        </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nx">game</span><span class="p">.</span><span class="nx">loop</span><span class="p">();</span>

<span class="w">            </span><span class="nx">expect</span><span class="p">(</span><span class="nx">mockRequestAnimationFrame</span><span class="p">).</span><span class="nx">toHaveBeenCalledTimes</span><span class="p">(</span><span class="mf">1</span><span class="p">);</span>
<span class="w">            </span><span class="nx">expect</span><span class="p">(</span><span class="nx">mockRequestAnimationFrame</span><span class="p">).</span><span class="nx">toHaveBeenCalledWith</span><span class="p">(</span><span class="nx">expect</span><span class="p">.</span><span class="nx">any</span><span class="p">(</span><span class="nb">Function</span><span class="p">));</span>
<span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="k">finally</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="c1">// モックを元に戻す</span>
<span class="w">            </span><span class="nb">window</span><span class="p">.</span><span class="nx">requestAnimationFrame</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">originalRequestAnimationFrame</span><span class="p">;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">});</span>
<span class="p">});</span>
</code></pre></div>
<p>このテストでは、<code>Game</code>クラスの<code>loop</code>メソッドが<code>requestAnimationFrame</code>を呼び出すことを確認しています。</p>
<h3 id="_22">実装: ゲームループの開始<a class="headerlink" href="#_22" title="Permanent link">&para;</a></h3>
<p>テストが失敗することを確認したら、テストが通るように最小限のコードを実装します。</p>
<div class="highlight"><pre><span></span><code><span class="c1">// src/game.ts（続き）</span>
<span class="nx">loop</span><span class="p">()</span><span class="o">:</span><span class="w"> </span><span class="ow">void</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// ゲームループの処理</span>
<span class="w">    </span><span class="nx">requestAnimationFrame</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">loop</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="k">this</span><span class="p">));</span>
<span class="p">}</span>
</code></pre></div>
<h3 id="_23">解説: ゲームループの開始<a class="headerlink" href="#_23" title="Permanent link">&para;</a></h3>
<p>さて、今回実装した「ゲームループ」について少し詳しく解説しましょう。「ゲームループって何？」と思われるかもしれませんね。</p>
<p>ゲームループは、その名の通り、ゲームの状態を更新し、画面を描画するための繰り返し処理なんです。心臓がずっと鼓動を続けるように、このループが継続的に実行されることで、ゲームが生き生きと動き続けるんですよ。</p>
<p>ここで使っている<code>requestAnimationFrame</code>というメソッド、これがとても賢いんです！「どう賢いの？」というと、ブラウザの描画タイミングに合わせて処理を実行してくれるんです。これによって、スムーズなアニメーションが可能になるんですよ。</p>
<p>コードを見てみると、<code>loop</code>メソッド内で<code>requestAnimationFrame</code>を呼び出し、自分自身（<code>this.loop</code>）をコールバックとして渡していますね。「これってどういうこと？」というと、「次の描画タイミングでも、また私を呼んでね」とブラウザにお願いしているようなものなんです。これによって、ループ処理が実現されるんですよ。</p>
<p>また、<code>bind(this)</code>という少し難しそうな記述がありますね。これは「コールバック内でも<code>this</code>が正しく機能するように」という指示なんです。JavaScriptの<code>this</code>は少し扱いが難しいんですが、この<code>bind(this)</code>によって、コールバック内でも正しく<code>this</code>が機能するようになるんです。</p>
<p>このゲームループが基盤となって、これから様々な機能を追加していきますよ！</p>
<h3 id="_24">実装: 画面<a class="headerlink" href="#_24" title="Permanent link">&para;</a></h3>
<h4 id="indexhtml">index.html の実装<a class="headerlink" href="#indexhtml" title="Permanent link">&para;</a></h4>
<p>まず、アプリケーションのエントリーポイントとなる HTML ファイルを作成します。</p>
<div class="highlight"><pre><span></span><code><span class="cm">&lt;!-- index.html --&gt;</span>
<span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="p">&lt;</span><span class="nt">html</span> <span class="na">lang</span><span class="o">=</span><span class="s">&quot;ja&quot;</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">charset</span><span class="o">=</span><span class="s">&quot;UTF-8&quot;</span> <span class="p">/&gt;</span>
    <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">name</span><span class="o">=</span><span class="s">&quot;viewport&quot;</span> <span class="na">content</span><span class="o">=</span><span class="s">&quot;width=device-width, initial-scale=1.0&quot;</span> <span class="p">/&gt;</span>
    <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>ぷよぷよゲーム<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;app&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">script</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;module&quot;</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;/src/main.ts&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</code></pre></div>
<p>この HTML ファイルでは、以下のことを行っています：</p>
<ol>
<li>
<p><strong>基本的な HTML 構造の定義</strong></p>
<ul>
<li><code>lang="ja"</code> で日本語ページであることを指定</li>
<li>ビューポート設定でレスポンシブ対応</li>
<li>ページタイトルの設定</li>
</ul>
</li>
<li>
<p><strong>アプリケーションのマウントポイント</strong></p>
<ul>
<li><code>&lt;div id="app"&gt;&lt;/div&gt;</code> がゲーム画面を表示する場所になります</li>
<li>後続のイテレーションで、この中に Canvas 要素が追加されます</li>
</ul>
</li>
<li>
<p><strong>TypeScript モジュールの読み込み</strong></p>
<ul>
<li><code>type="module"</code> により ES Modules として読み込み</li>
<li>Vite が TypeScript をトランスパイルしてブラウザで実行可能にします</li>
</ul>
</li>
</ol>
<h4 id="maints">main.ts の実装<a class="headerlink" href="#maints" title="Permanent link">&para;</a></h4>
<p>次に、ゲームを起動するエントリーポイント <code>main.ts</code> を実装します。</p>
<div class="highlight"><pre><span></span><code><span class="c1">// src/main.ts</span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">Game</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;./game&#39;</span>

<span class="c1">// ゲームのインスタンスを作成</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">game</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">Game</span><span class="p">()</span>

<span class="c1">// ゲームを初期化</span>
<span class="nx">game</span><span class="p">.</span><span class="nx">initialize</span><span class="p">()</span>

<span class="c1">// ゲームループを開始</span>
<span class="nx">game</span><span class="p">.</span><span class="nx">loop</span><span class="p">()</span>

<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;Puyo Puyo Game Started!&#39;</span><span class="p">)</span>
</code></pre></div>
<p>このコードでは、以下の 3 つのステップでゲームを開始します：</p>
<ol>
<li><code>Game</code> クラスのインスタンスを作成</li>
<li><code>initialize()</code> メソッドで各コンポーネントを初期化</li>
<li><code>loop()</code> メソッドでゲームループを開始</li>
</ol>
<h4 id="_25">依存クラスの実装<a class="headerlink" href="#_25" title="Permanent link">&para;</a></h4>
<p>必要な依存クラス（Config, PuyoImage, Stage, Player, Score）も最小限の実装を作成します。</p>
<div class="highlight"><pre><span></span><code><span class="c1">// src/config.ts</span>
<span class="k">export</span><span class="w"> </span><span class="kd">class</span><span class="w"> </span><span class="nx">Config</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="c1">// 最小限の実装</span>
<span class="p">}</span>

<span class="c1">// src/puyoimage.ts</span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">Config</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;./config&#39;</span>

<span class="k">export</span><span class="w"> </span><span class="kd">class</span><span class="w"> </span><span class="nx">PuyoImage</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kr">constructor</span><span class="p">(</span><span class="nx">_config</span><span class="o">:</span><span class="w"> </span><span class="kt">Config</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// 最小限の実装</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>

<span class="c1">// src/stage.ts</span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">Config</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;./config&#39;</span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">PuyoImage</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;./puyoimage&#39;</span>

<span class="k">export</span><span class="w"> </span><span class="kd">class</span><span class="w"> </span><span class="nx">Stage</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kr">constructor</span><span class="p">(</span><span class="nx">_config</span><span class="o">:</span><span class="w"> </span><span class="kt">Config</span><span class="p">,</span><span class="w"> </span><span class="nx">_puyoImage</span><span class="o">:</span><span class="w"> </span><span class="kt">PuyoImage</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// 最小限の実装</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>

<span class="c1">// src/player.ts</span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">Config</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;./config&#39;</span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">Stage</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;./stage&#39;</span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">PuyoImage</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;./puyoimage&#39;</span>

<span class="k">export</span><span class="w"> </span><span class="kd">class</span><span class="w"> </span><span class="nx">Player</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kr">constructor</span><span class="p">(</span><span class="nx">_config</span><span class="o">:</span><span class="w"> </span><span class="kt">Config</span><span class="p">,</span><span class="w"> </span><span class="nx">_stage</span><span class="o">:</span><span class="w"> </span><span class="kt">Stage</span><span class="p">,</span><span class="w"> </span><span class="nx">_puyoImage</span><span class="o">:</span><span class="w"> </span><span class="kt">PuyoImage</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// 最小限の実装</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>

<span class="c1">// src/score.ts</span>
<span class="k">export</span><span class="w"> </span><span class="kd">class</span><span class="w"> </span><span class="nx">Score</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="c1">// 最小限の実装</span>
<span class="p">}</span>
</code></pre></div>
<p>これらのクラスは現時点では空の実装ですが、後続のイテレーションで徐々に機能を追加していきます。</p>
<h4 id="eslint_1">ESLint 設定の調整<a class="headerlink" href="#eslint_1" title="Permanent link">&para;</a></h4>
<p>未使用の引数に関する ESLint エラーを回避するため、<code>.eslintrc.cjs</code> に以下の設定を追加します：</p>
<div class="highlight"><pre><span></span><code><span class="nx">rules</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">complexity</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="s1">&#39;error&#39;</span><span class="p">,</span><span class="w"> </span><span class="mf">7</span><span class="p">],</span>
<span class="w">  </span><span class="s1">&#39;@typescript-eslint/no-explicit-any&#39;</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;warn&#39;</span><span class="p">,</span>
<span class="w">  </span><span class="s1">&#39;@typescript-eslint/no-unused-vars&#39;</span><span class="o">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="s1">&#39;error&#39;</span><span class="p">,</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nx">argsIgnorePattern</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;^_&#39;</span><span class="p">,</span>
<span class="w">      </span><span class="nx">varsIgnorePattern</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;^_&#39;</span><span class="p">,</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">  </span><span class="p">],</span>
<span class="p">},</span>
</code></pre></div>
<p>この設定により、<code>_</code> で始まる引数名は未使用でもエラーにならなくなります。</p>
<h4 id="_26">テストの確認<a class="headerlink" href="#_26" title="Permanent link">&para;</a></h4>
<p>すべての実装が完了したら、テストを実行して確認しましょう：</p>
<div class="highlight"><pre><span></span><code>npm<span class="w"> </span>run<span class="w"> </span>check
</code></pre></div>
<p>以下の結果が表示されれば成功です：</p>
<div class="highlight"><pre><span></span><code>✓ tests/game.test.ts (3 tests) 9ms

Test Files  1 passed (1)
     Tests  3 passed (3)
</code></pre></div>
<h3 id="_27">画面の確認<a class="headerlink" href="#_27" title="Permanent link">&para;</a></h3>
<p>ではここで以下のコマンドを実行して実際に動作する画面を確認しましょう。</p>
<div class="highlight"><pre><span></span><code>npm<span class="w"> </span>run<span class="w"> </span>dev
</code></pre></div>
<p>ブラウザで <code>http://localhost:3000</code> を開くと、ぷよぷよゲームの画面が表示されます。コンソールには「Puyo Puyo Game Started!」というメッセージが表示されているはずです。</p>
<p>おめでとうございます！リリースに向けて最初の第一歩を踏み出すことができました。これから機能を追加するごとにどんどん実際のゲームの完成に近づく事が確認できます、楽しみですね。</p>
<p>「機能は別々に作りこんで最後に画面と統合するんじゃないの？」と思うもしれません。そういうアプローチもありますが画面イメージが最後まで確認できないともし間違っていたら手戻りが大変です。それに動作するプログラムがどんどん成長するのを見るのは楽しいですからね。</p>
<blockquote>
<p>トップダウンでもボトムアップでもなく、エンドツーエンドで構築していく</p>
<p>エンドツーエンドで小さな機能を構築し、そこから作業を進めながら問題について学習していく。</p>
<p>— 達人プログラマー 熟達に向けたあなたの旅（第2版）</p>
</blockquote>
<h3 id="1_1">イテレーション 1 のまとめ<a class="headerlink" href="#1_1" title="Permanent link">&para;</a></h3>
<p>このイテレーションで実装した内容：</p>
<ol>
<li>
<p><strong>Game クラスの初期化</strong></p>
<ul>
<li>必要なコンポーネント（Config, PuyoImage, Stage, Player, Score）の作成</li>
<li>ゲームモードの設定</li>
</ul>
</li>
<li>
<p><strong>ゲームループの実装</strong></p>
<ul>
<li><code>requestAnimationFrame</code> を使用した継続的なループ処理</li>
<li><code>bind(this)</code> による <code>this</code> コンテキストの保持</li>
</ul>
</li>
<li>
<p><strong>エントリーポイントの実装</strong></p>
<ul>
<li><code>index.html</code> でアプリケーションの基本構造を定義</li>
<li><code>&lt;div id="app"&gt;</code> をゲーム画面のマウントポイントとして設定</li>
<li><code>main.ts</code> でゲームの初期化とループ開始</li>
<li>ブラウザでの動作確認が可能に</li>
</ul>
</li>
<li>
<p><strong>テストの作成</strong></p>
<ul>
<li>ゲーム初期化のテスト（2 テスト）</li>
<li>ゲームループのテスト（1 テスト）</li>
<li>すべてのテストが成功</li>
</ul>
</li>
</ol>
<p>次のイテレーションでは、ぷよの移動機能を実装していきます。</p>
<h2 id="2">イテレーション2: ぷよの移動の実装<a class="headerlink" href="#2" title="Permanent link">&para;</a></h2>
<p>さて、前回のイテレーションでゲームの基本的な構造ができましたね。「ゲームが始まったけど、ぷよが動かないと面白くないよね？」と思いませんか？そこで次は、ぷよを左右に移動できるようにしていきましょう！</p>
<h3 id="_28">ユーザーストーリー<a class="headerlink" href="#_28" title="Permanent link">&para;</a></h3>
<p>まずは、このイテレーションで実装するユーザーストーリーを確認しましょう：</p>
<blockquote>
<p>プレイヤーとして、落ちてくるぷよを左右に移動できる</p>
</blockquote>
<p>「ぷよぷよって、落ちてくるぷよを左右に動かして、うまく積み上げるゲームですよね？」そうです！今回はその基本操作である「左右の移動」を実装していきます。</p>
<h3 id="todo_1">TODOリスト<a class="headerlink" href="#todo_1" title="Permanent link">&para;</a></h3>
<p>さて、このユーザーストーリーを実現するために、どんなタスクが必要でしょうか？一緒に考えてみましょう。
「ぷよを左右に移動する」という機能を実現するためには、以下のようなタスクが必要そうですね：</p>
<ul>
<li>プレイヤーの入力を検出する（キーボードの左右キーが押されたことを検知する）</li>
<li>ぷよを左右に移動する処理を実装する（実際にぷよの位置を変更する）</li>
<li>移動可能かどうかのチェックを実装する（画面の端や他のぷよにぶつかる場合は移動できないようにする）</li>
<li>移動後の表示を更新する（画面上でぷよの位置が変わったことを表示する）</li>
</ul>
<p>「なるほど、順番に実装していけばいいんですね！」そうです、一つずつ進めていきましょう。テスト駆動開発の流れに沿って、まずはテストから書いていきますよ。</p>
<h3 id="_29">テスト: プレイヤーの入力検出<a class="headerlink" href="#_29" title="Permanent link">&para;</a></h3>
<p>「最初に何をテストすればいいんでしょうか？」まずは、プレイヤーの入力を検出する部分からテストしていきましょう。キーボードの左右キーが押されたときに、それを正しく検知できるかどうかをテストします。</p>
<blockquote>
<p>テストファースト</p>
<p>いつテストを書くべきだろうか——それはテスト対象のコードを書く前だ。</p>
<p>— Kent Beck 『テスト駆動開発』</p>
</blockquote>
<div class="highlight"><pre><span></span><code><span class="c1">// src/tests/player.test.ts</span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">describe</span><span class="p">,</span><span class="w"> </span><span class="nx">it</span><span class="p">,</span><span class="w"> </span><span class="nx">expect</span><span class="p">,</span><span class="w"> </span><span class="nx">beforeEach</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;vitest&#39;</span><span class="p">;</span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">Player</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;../player&#39;</span><span class="p">;</span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">Config</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;../config&#39;</span><span class="p">;</span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">Stage</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;../stage&#39;</span><span class="p">;</span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">PuyoImage</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;../puyoimage&#39;</span><span class="p">;</span>

<span class="nx">describe</span><span class="p">(</span><span class="s1">&#39;プレイヤー&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="nx">config</span><span class="o">:</span><span class="w"> </span><span class="kt">Config</span><span class="p">;</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="nx">puyoImage</span><span class="o">:</span><span class="w"> </span><span class="kt">PuyoImage</span><span class="p">;</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="nx">stage</span><span class="o">:</span><span class="w"> </span><span class="kt">Stage</span><span class="p">;</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="nx">player</span><span class="o">:</span><span class="w"> </span><span class="kt">Player</span><span class="p">;</span>

<span class="w">    </span><span class="nx">beforeEach</span><span class="p">(()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// DOMの準備</span>
<span class="w">        </span><span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">innerHTML</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="sb">`</span>
<span class="sb">            &lt;div id=&quot;stage&quot;&gt;&lt;/div&gt;</span>
<span class="sb">        `</span><span class="p">;</span>
<span class="w">        </span><span class="nx">config</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">Config</span><span class="p">();</span>
<span class="w">        </span><span class="nx">puyoImage</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">PuyoImage</span><span class="p">(</span><span class="nx">config</span><span class="p">);</span>
<span class="w">        </span><span class="nx">stage</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">Stage</span><span class="p">(</span><span class="nx">config</span><span class="p">,</span><span class="w"> </span><span class="nx">puyoImage</span><span class="p">);</span>
<span class="w">        </span><span class="nx">player</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">Player</span><span class="p">(</span><span class="nx">config</span><span class="p">,</span><span class="w"> </span><span class="nx">stage</span><span class="p">,</span><span class="w"> </span><span class="nx">puyoImage</span><span class="p">);</span>
<span class="w">    </span><span class="p">});</span>

<span class="w">    </span><span class="nx">describe</span><span class="p">(</span><span class="s1">&#39;キー入力&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">it</span><span class="p">(</span><span class="s1">&#39;左キーが押されると、左向きの移動フラグが立つ&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="c1">// キーダウンイベントをシミュレート（左キー）</span>
<span class="w">            </span><span class="kd">const</span><span class="w"> </span><span class="nx">event</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">KeyboardEvent</span><span class="p">(</span><span class="s1">&#39;keydown&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">key</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;ArrowLeft&#39;</span><span class="w"> </span><span class="p">});</span>
<span class="w">            </span><span class="nb">document</span><span class="p">.</span><span class="nx">dispatchEvent</span><span class="p">(</span><span class="nx">event</span><span class="p">);</span>

<span class="w">            </span><span class="nx">expect</span><span class="p">(</span><span class="nx">player</span><span class="p">[</span><span class="s1">&#39;inputKeyLeft&#39;</span><span class="p">]).</span><span class="nx">toBe</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
<span class="w">        </span><span class="p">});</span>

<span class="w">        </span><span class="nx">it</span><span class="p">(</span><span class="s1">&#39;右キーが押されると、右向きの移動フラグが立つ&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="c1">// キーダウンイベントをシミュレート（右キー）</span>
<span class="w">            </span><span class="kd">const</span><span class="w"> </span><span class="nx">event</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">KeyboardEvent</span><span class="p">(</span><span class="s1">&#39;keydown&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">key</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;ArrowRight&#39;</span><span class="w"> </span><span class="p">});</span>
<span class="w">            </span><span class="nb">document</span><span class="p">.</span><span class="nx">dispatchEvent</span><span class="p">(</span><span class="nx">event</span><span class="p">);</span>

<span class="w">            </span><span class="nx">expect</span><span class="p">(</span><span class="nx">player</span><span class="p">[</span><span class="s1">&#39;inputKeyRight&#39;</span><span class="p">]).</span><span class="nx">toBe</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
<span class="w">        </span><span class="p">});</span>

<span class="w">        </span><span class="nx">it</span><span class="p">(</span><span class="s1">&#39;キーが離されると、対応する移動フラグが下がる&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="c1">// まず左キーを押す</span>
<span class="w">            </span><span class="nb">document</span><span class="p">.</span><span class="nx">dispatchEvent</span><span class="p">(</span><span class="ow">new</span><span class="w"> </span><span class="nx">KeyboardEvent</span><span class="p">(</span><span class="s1">&#39;keydown&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">key</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;ArrowLeft&#39;</span><span class="w"> </span><span class="p">}));</span>
<span class="w">            </span><span class="nx">expect</span><span class="p">(</span><span class="nx">player</span><span class="p">[</span><span class="s1">&#39;inputKeyLeft&#39;</span><span class="p">]).</span><span class="nx">toBe</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>

<span class="w">            </span><span class="c1">// 次に左キーを離す</span>
<span class="w">            </span><span class="nb">document</span><span class="p">.</span><span class="nx">dispatchEvent</span><span class="p">(</span><span class="ow">new</span><span class="w"> </span><span class="nx">KeyboardEvent</span><span class="p">(</span><span class="s1">&#39;keyup&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">key</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;ArrowLeft&#39;</span><span class="w"> </span><span class="p">}));</span>
<span class="w">            </span><span class="nx">expect</span><span class="p">(</span><span class="nx">player</span><span class="p">[</span><span class="s1">&#39;inputKeyLeft&#39;</span><span class="p">]).</span><span class="nx">toBe</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span>
<span class="w">        </span><span class="p">});</span>
<span class="w">    </span><span class="p">});</span>
<span class="p">});</span>
</code></pre></div>
<p>「このテストは何をしているんですか？」このテストでは、キーボードの左右キーが押されたときと離されたときに、<code>Player</code>クラスの中の対応するフラグが正しく設定されるかどうかを確認しています。例えば、左キーが押されたら<code>inputKeyLeft</code>というフラグが<code>true</code>になり、離されたら<code>false</code>になることを期待していますね。</p>
<p>「テストを実行するとどうなるんでしょう？」まだ実装していないので、当然テストは失敗するはずです。これがテスト駆動開発の「Red（赤）」の状態です。では、テストが通るように実装していきましょう！</p>
<h3 id="_30">実装: プレイヤーの入力検出<a class="headerlink" href="#_30" title="Permanent link">&para;</a></h3>
<p>「失敗するテストができたので、次は実装ですね！」そうです！テストが通るように、最小限のコードを実装していきましょう。</p>
<blockquote>
<p>仮実装を経て本実装へ</p>
<p>失敗するテストを書いてから、最初に行う実装はどのようなものだろうか - ベタ書きの値を返そう。
それでテストが通るようになったら、ベタ書きの値をだんだん本物の式や変数に置き換えていく。</p>
<p>— Kent Beck 『テスト駆動開発』</p>
</blockquote>
<div class="highlight"><pre><span></span><code><span class="c1">// src/player.ts</span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">Config</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;./config&#39;</span><span class="p">;</span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">Stage</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;./stage&#39;</span><span class="p">;</span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">PuyoImage</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;./puyoimage&#39;</span><span class="p">;</span>

<span class="k">export</span><span class="w"> </span><span class="kd">class</span><span class="w"> </span><span class="nx">Player</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">private</span><span class="w"> </span><span class="nx">inputKeyLeft</span><span class="o">:</span><span class="w"> </span><span class="kt">boolean</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span><span class="p">;</span>
<span class="w">    </span><span class="k">private</span><span class="w"> </span><span class="nx">inputKeyRight</span><span class="o">:</span><span class="w"> </span><span class="kt">boolean</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span><span class="p">;</span>
<span class="w">    </span><span class="k">private</span><span class="w"> </span><span class="nx">inputKeyUp</span><span class="o">:</span><span class="w"> </span><span class="kt">boolean</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span><span class="p">;</span>
<span class="w">    </span><span class="k">private</span><span class="w"> </span><span class="nx">inputKeyDown</span><span class="o">:</span><span class="w"> </span><span class="kt">boolean</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span><span class="p">;</span>

<span class="w">    </span><span class="kr">constructor</span><span class="p">(</span>
<span class="w">        </span><span class="k">private</span><span class="w"> </span><span class="nx">config</span><span class="o">:</span><span class="w"> </span><span class="kt">Config</span><span class="p">,</span>
<span class="w">        </span><span class="k">private</span><span class="w"> </span><span class="nx">stage</span><span class="o">:</span><span class="w"> </span><span class="kt">Stage</span><span class="p">,</span>
<span class="w">        </span><span class="k">private</span><span class="w"> </span><span class="nx">puyoImage</span><span class="o">:</span><span class="w"> </span><span class="kt">PuyoImage</span>
<span class="w">    </span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// キーボードイベントの登録</span>
<span class="w">        </span><span class="nb">document</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;keydown&#39;</span><span class="p">,</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">onKeyDown</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="k">this</span><span class="p">));</span>
<span class="w">        </span><span class="nb">document</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;keyup&#39;</span><span class="p">,</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">onKeyUp</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="k">this</span><span class="p">));</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="k">private</span><span class="w"> </span><span class="nx">onKeyDown</span><span class="p">(</span><span class="nx">e</span><span class="o">:</span><span class="w"> </span><span class="kt">KeyboardEvent</span><span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="ow">void</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">switch</span><span class="w"> </span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">key</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">case</span><span class="w"> </span><span class="s1">&#39;ArrowLeft&#39;</span><span class="o">:</span>
<span class="w">                </span><span class="k">this</span><span class="p">.</span><span class="nx">inputKeyLeft</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span><span class="p">;</span>
<span class="w">                </span><span class="k">break</span><span class="p">;</span>
<span class="w">            </span><span class="k">case</span><span class="w"> </span><span class="s1">&#39;ArrowRight&#39;</span><span class="o">:</span>
<span class="w">                </span><span class="k">this</span><span class="p">.</span><span class="nx">inputKeyRight</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span><span class="p">;</span>
<span class="w">                </span><span class="k">break</span><span class="p">;</span>
<span class="w">            </span><span class="k">case</span><span class="w"> </span><span class="s1">&#39;ArrowUp&#39;</span><span class="o">:</span>
<span class="w">                </span><span class="k">this</span><span class="p">.</span><span class="nx">inputKeyUp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span><span class="p">;</span>
<span class="w">                </span><span class="k">break</span><span class="p">;</span>
<span class="w">            </span><span class="k">case</span><span class="w"> </span><span class="s1">&#39;ArrowDown&#39;</span><span class="o">:</span>
<span class="w">                </span><span class="k">this</span><span class="p">.</span><span class="nx">inputKeyDown</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span><span class="p">;</span>
<span class="w">                </span><span class="k">break</span><span class="p">;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="k">private</span><span class="w"> </span><span class="nx">onKeyUp</span><span class="p">(</span><span class="nx">e</span><span class="o">:</span><span class="w"> </span><span class="kt">KeyboardEvent</span><span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="ow">void</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">switch</span><span class="w"> </span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">key</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">case</span><span class="w"> </span><span class="s1">&#39;ArrowLeft&#39;</span><span class="o">:</span>
<span class="w">                </span><span class="k">this</span><span class="p">.</span><span class="nx">inputKeyLeft</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span><span class="p">;</span>
<span class="w">                </span><span class="k">break</span><span class="p">;</span>
<span class="w">            </span><span class="k">case</span><span class="w"> </span><span class="s1">&#39;ArrowRight&#39;</span><span class="o">:</span>
<span class="w">                </span><span class="k">this</span><span class="p">.</span><span class="nx">inputKeyRight</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span><span class="p">;</span>
<span class="w">                </span><span class="k">break</span><span class="p">;</span>
<span class="w">            </span><span class="k">case</span><span class="w"> </span><span class="s1">&#39;ArrowUp&#39;</span><span class="o">:</span>
<span class="w">                </span><span class="k">this</span><span class="p">.</span><span class="nx">inputKeyUp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span><span class="p">;</span>
<span class="w">                </span><span class="k">break</span><span class="p">;</span>
<span class="w">            </span><span class="k">case</span><span class="w"> </span><span class="s1">&#39;ArrowDown&#39;</span><span class="o">:</span>
<span class="w">                </span><span class="k">this</span><span class="p">.</span><span class="nx">inputKeyDown</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span><span class="p">;</span>
<span class="w">                </span><span class="k">break</span><span class="p">;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>「なるほど！キーが押されたり離されたりしたときのイベントを検知して、フラグを設定しているんですね。」そうです！ここでは、<code>document.addEventListener</code>を使って、キーボードのイベントをリッスンしています。キーが押されたら<code>onKeyDown</code>メソッドが呼ばれ、離されたら<code>onKeyUp</code>メソッドが呼ばれます。</p>
<p>「<code>bind(this)</code>って何ですか？」良い質問ですね！JavaScriptでは、イベントハンドラの中の<code>this</code>は、イベントが発生した要素（ここでは<code>document</code>）を指してしまいます。でも、私たちは<code>Player</code>クラスのメソッドの中で<code>this</code>が<code>Player</code>インスタンスを指すようにしたいんです。そこで<code>bind(this)</code>を使って、<code>this</code>の参照先を固定しているんですよ。</p>
<blockquote>
<p>bind() は Function インスタンスのメソッドで、新しい関数を生成し、呼び出し時に、 this キーワードを指定された値に設定し、指定された引数の並びを、新しい関数が呼び出された際に指定されたものより前にして呼び出します。</p>
<p>— Mozilla Developer Network 『Function.prototype.bind()』</p>
</blockquote>
<p>「テストは通りましたか？」はい、これでテストは通るはずです！これがテスト駆動開発の「Green（緑）」の状態です。次は、ぷよを実際に移動させる機能をテストしていきましょう。</p>
<h3 id="_31">テスト: ぷよの移動<a class="headerlink" href="#_31" title="Permanent link">&para;</a></h3>
<p>「次は何をテストしますか？」次は、ぷよを左右に移動する機能をテストしましょう。ぷよが左右に移動できるか、そして画面の端に到達したときに移動が制限されるかをテストします。</p>
<div class="highlight"><pre><span></span><code><span class="c1">// src/tests/player.test.ts（続き）</span>
<span class="nx">describe</span><span class="p">(</span><span class="s1">&#39;ぷよの移動&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">beforeEach</span><span class="p">(()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// 新しいぷよを作成</span>
<span class="w">        </span><span class="nx">player</span><span class="p">.</span><span class="nx">createNewPuyo</span><span class="p">();</span>
<span class="w">    </span><span class="p">});</span>

<span class="w">    </span><span class="nx">it</span><span class="p">(</span><span class="s1">&#39;左に移動できる場合、左に移動する&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// 初期位置を記録</span>
<span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">initialX</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">player</span><span class="p">[</span><span class="s1">&#39;puyoX&#39;</span><span class="p">];</span>

<span class="w">        </span><span class="c1">// 左に移動</span>
<span class="w">        </span><span class="nx">player</span><span class="p">.</span><span class="nx">moveLeft</span><span class="p">();</span>

<span class="w">        </span><span class="c1">// 位置が1つ左に移動していることを確認</span>
<span class="w">        </span><span class="nx">expect</span><span class="p">(</span><span class="nx">player</span><span class="p">[</span><span class="s1">&#39;puyoX&#39;</span><span class="p">]).</span><span class="nx">toBe</span><span class="p">(</span><span class="nx">initialX</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mf">1</span><span class="p">);</span>
<span class="w">    </span><span class="p">});</span>

<span class="w">    </span><span class="nx">it</span><span class="p">(</span><span class="s1">&#39;右に移動できる場合、右に移動する&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// 初期位置を記録</span>
<span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">initialX</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">player</span><span class="p">[</span><span class="s1">&#39;puyoX&#39;</span><span class="p">];</span>

<span class="w">        </span><span class="c1">// 右に移動</span>
<span class="w">        </span><span class="nx">player</span><span class="p">.</span><span class="nx">moveRight</span><span class="p">();</span>

<span class="w">        </span><span class="c1">// 位置が1つ右に移動していることを確認</span>
<span class="w">        </span><span class="nx">expect</span><span class="p">(</span><span class="nx">player</span><span class="p">[</span><span class="s1">&#39;puyoX&#39;</span><span class="p">]).</span><span class="nx">toBe</span><span class="p">(</span><span class="nx">initialX</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mf">1</span><span class="p">);</span>
<span class="w">    </span><span class="p">});</span>

<span class="w">    </span><span class="nx">it</span><span class="p">(</span><span class="s1">&#39;左端にいる場合、左に移動できない&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// 左端に移動</span>
<span class="w">        </span><span class="nx">player</span><span class="p">[</span><span class="s1">&#39;puyoX&#39;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0</span><span class="p">;</span>

<span class="w">        </span><span class="c1">// 左に移動を試みる</span>
<span class="w">        </span><span class="nx">player</span><span class="p">.</span><span class="nx">moveLeft</span><span class="p">();</span>

<span class="w">        </span><span class="c1">// 位置が変わっていないことを確認</span>
<span class="w">        </span><span class="nx">expect</span><span class="p">(</span><span class="nx">player</span><span class="p">[</span><span class="s1">&#39;puyoX&#39;</span><span class="p">]).</span><span class="nx">toBe</span><span class="p">(</span><span class="mf">0</span><span class="p">);</span>
<span class="w">    </span><span class="p">});</span>

<span class="w">    </span><span class="nx">it</span><span class="p">(</span><span class="s1">&#39;右端にいる場合、右に移動できない&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// 右端に移動（ステージの幅 - 1）</span>
<span class="w">        </span><span class="nx">player</span><span class="p">[</span><span class="s1">&#39;puyoX&#39;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">config</span><span class="p">.</span><span class="nx">stageCols</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mf">1</span><span class="p">;</span>

<span class="w">        </span><span class="c1">// 右に移動を試みる</span>
<span class="w">        </span><span class="nx">player</span><span class="p">.</span><span class="nx">moveRight</span><span class="p">();</span>

<span class="w">        </span><span class="c1">// 位置が変わっていないことを確認</span>
<span class="w">        </span><span class="nx">expect</span><span class="p">(</span><span class="nx">player</span><span class="p">[</span><span class="s1">&#39;puyoX&#39;</span><span class="p">]).</span><span class="nx">toBe</span><span class="p">(</span><span class="nx">config</span><span class="p">.</span><span class="nx">stageCols</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mf">1</span><span class="p">);</span>
<span class="w">    </span><span class="p">});</span>
<span class="p">});</span>
</code></pre></div>
<p>「このテストでは何を確認しているんですか？」このテストでは、以下の4つのケースを確認しています：</p>
<ol>
<li>通常の状態で左に移動できるか</li>
<li>通常の状態で右に移動できるか</li>
<li>左端にいるときに左に移動しようとしても位置が変わらないか</li>
<li>右端にいるときに右に移動しようとしても位置が変わらないか</li>
</ol>
<p>「なるほど、画面の端を超えて移動できないようにするんですね！」そうです！ゲームの画面外にぷよが出てしまうと困りますからね。では、このテストが通るように実装していきましょう。</p>
<h3 id="_32">実装: ぷよの移動<a class="headerlink" href="#_32" title="Permanent link">&para;</a></h3>
<p>「テストが失敗することを確認したら、実装に進みましょう！」そうですね。では、ぷよを移動させる機能を実装していきましょう。</p>
<div class="highlight"><pre><span></span><code><span class="c1">// src/player.ts（続き）</span>
<span class="k">private</span><span class="w"> </span><span class="nx">puyoX</span><span class="o">:</span><span class="w"> </span><span class="kt">number</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">2</span><span class="p">;</span><span class="w"> </span><span class="c1">// ぷよのX座標（中央に配置）</span>
<span class="k">private</span><span class="w"> </span><span class="nx">puyoY</span><span class="o">:</span><span class="w"> </span><span class="kt">number</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0</span><span class="p">;</span><span class="w"> </span><span class="c1">// ぷよのY座標（一番上）</span>
<span class="k">private</span><span class="w"> </span><span class="nx">puyoType</span><span class="o">:</span><span class="w"> </span><span class="kt">number</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0</span><span class="p">;</span><span class="w"> </span><span class="c1">// 現在のぷよの種類</span>
<span class="k">private</span><span class="w"> </span><span class="nx">nextPuyoType</span><span class="o">:</span><span class="w"> </span><span class="kt">number</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0</span><span class="p">;</span><span class="w"> </span><span class="c1">// 次のぷよの種類</span>
<span class="k">private</span><span class="w"> </span><span class="nx">rotation</span><span class="o">:</span><span class="w"> </span><span class="kt">number</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0</span><span class="p">;</span><span class="w"> </span><span class="c1">// 現在の回転状態</span>

<span class="nx">createNewPuyo</span><span class="p">()</span><span class="o">:</span><span class="w"> </span><span class="ow">void</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// 新しいぷよを作成（ここでは簡略化）</span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">puyoX</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">2</span><span class="p">;</span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">puyoY</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0</span><span class="p">;</span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">puyoType</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">()</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mf">4</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mf">1</span><span class="p">;</span><span class="w"> </span><span class="c1">// 1～4のランダムな値</span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">nextPuyoType</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">()</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mf">4</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mf">1</span><span class="p">;</span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">rotation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0</span><span class="p">;</span>
<span class="p">}</span>

<span class="nx">moveLeft</span><span class="p">()</span><span class="o">:</span><span class="w"> </span><span class="ow">void</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// 左端でなければ左に移動</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">puyoX</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mf">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="nx">puyoX</span><span class="o">--</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="nx">moveRight</span><span class="p">()</span><span class="o">:</span><span class="w"> </span><span class="ow">void</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// 右端でなければ右に移動</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">puyoX</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">config</span><span class="p">.</span><span class="nx">stageCols</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mf">1</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="nx">puyoX</span><span class="o">++</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>「ぷよの位置や種類を管理するプロパティがたくさんありますね！」そうですね。ぷよの状態を管理するために、いくつかのプロパティを定義しています：</p>
<ul>
<li><code>puyoX</code>と<code>puyoY</code>：ぷよの位置（X座標とY座標）</li>
<li><code>puyoType</code>と<code>nextPuyoType</code>：現在のぷよと次のぷよの種類</li>
<li><code>rotation</code>：ぷよの回転状態</li>
</ul>
<p>「移動の処理はシンプルですね！」そうですね。<code>moveLeft</code>メソッドでは左端（X座標が0）でなければX座標を1減らし、<code>moveRight</code>メソッドでは右端（X座標がステージの幅-1）でなければX座標を1増やしています。これで、ぷよが画面の端を超えて移動することはなくなりました。</p>
<p>「これでテストは通りましたか？」はい、これでテストは通るはずです！これでぷよを左右に移動させる基本的な機能が実装できました。プレイヤーがキーボードの左右キーを押すと、ぷよが対応する方向に移動し、画面の端に到達すると移動が制限されます。</p>
<p>「でも、まだ実際にキー入力に応じて移動する処理が実装されていませんよね？」鋭い指摘ですね！確かに、キーが押されたことを検知するフラグと、ぷよを移動させるメソッドはできましたが、それらを連携させる部分はまだ実装していません。これは次のイテレーションで、ゲームループの中で処理していきますね。</p>
<p>「なるほど、少しずつ機能を追加していくんですね！」そうです！テスト駆動開発では、小さな機能を一つずつ確実に実装していくことで、複雑なシステムを構築していきます。今回は「ぷよを左右に移動させる」という基本機能を実装しました。次のイテレーションでは、「ぷよを回転させる」機能を実装していきましょう！</p>
<h3 id="_33">実装:ぷよの画面表示<a class="headerlink" href="#_33" title="Permanent link">&para;</a></h3>
<p>「テストは通ったけど、実際にぷよが動いているところを見たいですね！」そうですね！それでは、ぷよを画面に表示して、実際にキーボードで操作できるようにしましょう。</p>
<h4 id="indexhtml_1">index.html の更新<a class="headerlink" href="#indexhtml_1" title="Permanent link">&para;</a></h4>
<p>まず、ゲーム画面を表示するための要素を index.html に追加します：</p>
<div class="highlight"><pre><span></span><code><span class="cm">&lt;!-- index.html --&gt;</span>
<span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="p">&lt;</span><span class="nt">html</span> <span class="na">lang</span><span class="o">=</span><span class="s">&quot;ja&quot;</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">charset</span><span class="o">=</span><span class="s">&quot;UTF-8&quot;</span> <span class="p">/&gt;</span>
    <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">name</span><span class="o">=</span><span class="s">&quot;viewport&quot;</span> <span class="na">content</span><span class="o">=</span><span class="s">&quot;width=device-width, initial-scale=1.0&quot;</span> <span class="p">/&gt;</span>
    <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>ぷよぷよゲーム<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;app&quot;</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;stage&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">script</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;module&quot;</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;/src/main.ts&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</code></pre></div>
<p>「何が変わったんですか？」<code>&lt;div id="app"&gt;</code> の中に <code>&lt;div id="stage"&gt;&lt;/div&gt;</code> を追加しました。この要素に、後で Canvas 要素が追加されて、ゲーム画面が表示されるようになります。</p>
<h4 id="config">Config クラスの拡張<a class="headerlink" href="#config" title="Permanent link">&para;</a></h4>
<p>次に、画面表示に必要な設定を Config クラスに追加します：</p>
<div class="highlight"><pre><span></span><code><span class="c1">// src/config.ts</span>
<span class="k">export</span><span class="w"> </span><span class="kd">class</span><span class="w"> </span><span class="nx">Config</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">stageCols</span><span class="o">:</span><span class="w"> </span><span class="kt">number</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">6</span><span class="w"> </span><span class="c1">// ステージの列数</span>
<span class="w">  </span><span class="nx">stageRows</span><span class="o">:</span><span class="w"> </span><span class="kt">number</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">12</span><span class="w"> </span><span class="c1">// ステージの行数</span>
<span class="w">  </span><span class="nx">puyoSize</span><span class="o">:</span><span class="w"> </span><span class="kt">number</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">32</span><span class="w"> </span><span class="c1">// ぷよのサイズ（ピクセル）</span>
<span class="w">  </span><span class="nx">stageBackgroundColor</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;#2a2a2a&#39;</span><span class="w"> </span><span class="c1">// ステージの背景色</span>
<span class="w">  </span><span class="nx">stageBorderColor</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;#444&#39;</span><span class="w"> </span><span class="c1">// ステージの枠線色</span>
<span class="p">}</span>
</code></pre></div>
<h4 id="puyoimage">PuyoImage クラスの実装<a class="headerlink" href="#puyoimage" title="Permanent link">&para;</a></h4>
<p>次に、ぷよを描画するための PuyoImage クラスを実装します：</p>
<div class="highlight"><pre><span></span><code><span class="c1">// src/puyoimage.ts</span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">Config</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;./config&#39;</span>

<span class="k">export</span><span class="w"> </span><span class="kd">class</span><span class="w"> </span><span class="nx">PuyoImage</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">private</span><span class="w"> </span><span class="k">readonly</span><span class="w"> </span><span class="nx">colors</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">[]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="s1">&#39;#888&#39;</span><span class="p">,</span><span class="w"> </span><span class="c1">// 0: 空</span>
<span class="w">    </span><span class="s1">&#39;#ff0000&#39;</span><span class="p">,</span><span class="w"> </span><span class="c1">// 1: 赤</span>
<span class="w">    </span><span class="s1">&#39;#00ff00&#39;</span><span class="p">,</span><span class="w"> </span><span class="c1">// 2: 緑</span>
<span class="w">    </span><span class="s1">&#39;#0000ff&#39;</span><span class="p">,</span><span class="w"> </span><span class="c1">// 3: 青</span>
<span class="w">    </span><span class="s1">&#39;#ffff00&#39;</span><span class="p">,</span><span class="w"> </span><span class="c1">// 4: 黄色</span>
<span class="w">  </span><span class="p">]</span>

<span class="w">  </span><span class="kr">constructor</span><span class="p">(</span><span class="k">private</span><span class="w"> </span><span class="nx">config</span><span class="o">:</span><span class="w"> </span><span class="kt">Config</span><span class="p">)</span><span class="w"> </span><span class="p">{}</span>

<span class="w">  </span><span class="nx">draw</span><span class="p">(</span>
<span class="w">    </span><span class="nx">ctx</span><span class="o">:</span><span class="w"> </span><span class="kt">CanvasRenderingContext2D</span><span class="p">,</span>
<span class="w">    </span><span class="kr">type</span><span class="o">:</span><span class="w"> </span><span class="kt">number</span><span class="p">,</span>
<span class="w">    </span><span class="nx">x</span><span class="o">:</span><span class="w"> </span><span class="kt">number</span><span class="p">,</span>
<span class="w">    </span><span class="nx">y</span><span class="o">:</span><span class="w"> </span><span class="kt">number</span>
<span class="w">  </span><span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="ow">void</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">config</span><span class="p">.</span><span class="nx">puyoSize</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">color</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">colors</span><span class="p">[</span><span class="kr">type</span><span class="p">]</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">colors</span><span class="p">[</span><span class="mf">0</span><span class="p">]</span>

<span class="w">    </span><span class="c1">// 円の中心座標と半径を計算</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">centerX</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">x</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="nx">size</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">size</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mf">2</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">centerY</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">y</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="nx">size</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">size</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mf">2</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">radius</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">size</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mf">2</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mf">2</span><span class="w"> </span><span class="c1">// 少し小さめにして余白を作る</span>

<span class="w">    </span><span class="c1">// ぷよを円形で描画</span>
<span class="w">    </span><span class="nx">ctx</span><span class="p">.</span><span class="nx">fillStyle</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">color</span>
<span class="w">    </span><span class="nx">ctx</span><span class="p">.</span><span class="nx">beginPath</span><span class="p">()</span>
<span class="w">    </span><span class="nx">ctx</span><span class="p">.</span><span class="nx">arc</span><span class="p">(</span><span class="nx">centerX</span><span class="p">,</span><span class="w"> </span><span class="nx">centerY</span><span class="p">,</span><span class="w"> </span><span class="nx">radius</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="nb">Math</span><span class="p">.</span><span class="nx">PI</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mf">2</span><span class="p">)</span>
<span class="w">    </span><span class="nx">ctx</span><span class="p">.</span><span class="nx">fill</span><span class="p">()</span>

<span class="w">    </span><span class="c1">// 枠線を描画</span>
<span class="w">    </span><span class="nx">ctx</span><span class="p">.</span><span class="nx">strokeStyle</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;#000&#39;</span>
<span class="w">    </span><span class="nx">ctx</span><span class="p">.</span><span class="nx">lineWidth</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">2</span>
<span class="w">    </span><span class="nx">ctx</span><span class="p">.</span><span class="nx">beginPath</span><span class="p">()</span>
<span class="w">    </span><span class="nx">ctx</span><span class="p">.</span><span class="nx">arc</span><span class="p">(</span><span class="nx">centerX</span><span class="p">,</span><span class="w"> </span><span class="nx">centerY</span><span class="p">,</span><span class="w"> </span><span class="nx">radius</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="nb">Math</span><span class="p">.</span><span class="nx">PI</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mf">2</span><span class="p">)</span>
<span class="w">    </span><span class="nx">ctx</span><span class="p">.</span><span class="nx">stroke</span><span class="p">()</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>「ぷよを円形で描画しているんですね！」そうです！<code>ctx.arc()</code> メソッドを使って、ぷよを円形で描画しています。</p>
<h4 id="stage">Stage クラスの実装<a class="headerlink" href="#stage" title="Permanent link">&para;</a></h4>
<p>続いて、ゲームのステージを管理する Stage クラスを実装します：</p>
<div class="highlight"><pre><span></span><code><span class="c1">// src/stage.ts</span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">Config</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;./config&#39;</span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">PuyoImage</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;./puyoimage&#39;</span>

<span class="k">export</span><span class="w"> </span><span class="kd">class</span><span class="w"> </span><span class="nx">Stage</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">private</span><span class="w"> </span><span class="nx">canvas</span><span class="o">!:</span><span class="w"> </span><span class="nx">HTMLCanvasElement</span>
<span class="w">  </span><span class="k">private</span><span class="w"> </span><span class="nx">ctx</span><span class="o">!:</span><span class="w"> </span><span class="nx">CanvasRenderingContext2D</span>
<span class="w">  </span><span class="k">private</span><span class="w"> </span><span class="nx">field</span><span class="o">:</span><span class="w"> </span><span class="kt">number</span><span class="p">[][]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[]</span>

<span class="w">  </span><span class="kr">constructor</span><span class="p">(</span>
<span class="w">    </span><span class="k">private</span><span class="w"> </span><span class="nx">config</span><span class="o">:</span><span class="w"> </span><span class="kt">Config</span><span class="p">,</span>
<span class="w">    </span><span class="k">private</span><span class="w"> </span><span class="nx">puyoImage</span><span class="o">:</span><span class="w"> </span><span class="kt">PuyoImage</span>
<span class="w">  </span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">initializeCanvas</span><span class="p">()</span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">initializeField</span><span class="p">()</span>
<span class="w">  </span><span class="p">}</span>

<span class="w">  </span><span class="k">private</span><span class="w"> </span><span class="nx">initializeCanvas</span><span class="p">()</span><span class="o">:</span><span class="w"> </span><span class="ow">void</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// canvas要素を作成</span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">canvas</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s1">&#39;canvas&#39;</span><span class="p">)</span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">canvas</span><span class="p">.</span><span class="nx">width</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">config</span><span class="p">.</span><span class="nx">stageCols</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">config</span><span class="p">.</span><span class="nx">puyoSize</span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">canvas</span><span class="p">.</span><span class="nx">height</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">config</span><span class="p">.</span><span class="nx">stageRows</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">config</span><span class="p">.</span><span class="nx">puyoSize</span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">canvas</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">border</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="sb">`2px solid </span><span class="si">${</span><span class="k">this</span><span class="p">.</span><span class="nx">config</span><span class="p">.</span><span class="nx">stageBorderColor</span><span class="si">}</span><span class="sb">`</span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">canvas</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">backgroundColor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">config</span><span class="p">.</span><span class="nx">stageBackgroundColor</span>

<span class="w">    </span><span class="c1">// ステージ要素に追加</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">stageElement</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;stage&#39;</span><span class="p">)</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">stageElement</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nx">stageElement</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">canvas</span><span class="p">)</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="c1">// 描画コンテキストを取得（テスト環境では取得できない可能性がある）</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">ctx</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">canvas</span><span class="p">.</span><span class="nx">getContext</span><span class="p">(</span><span class="s1">&#39;2d&#39;</span><span class="p">)</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">ctx</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="k">this</span><span class="p">.</span><span class="nx">ctx</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">ctx</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">}</span>

<span class="w">  </span><span class="k">private</span><span class="w"> </span><span class="nx">initializeField</span><span class="p">()</span><span class="o">:</span><span class="w"> </span><span class="ow">void</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// フィールドを初期化（全て0=空）</span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">field</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[]</span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kd">let</span><span class="w"> </span><span class="nx">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0</span><span class="p">;</span><span class="w"> </span><span class="nx">y</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">config</span><span class="p">.</span><span class="nx">stageRows</span><span class="p">;</span><span class="w"> </span><span class="nx">y</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="k">this</span><span class="p">.</span><span class="nx">field</span><span class="p">[</span><span class="nx">y</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[]</span>
<span class="w">      </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kd">let</span><span class="w"> </span><span class="nx">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0</span><span class="p">;</span><span class="w"> </span><span class="nx">x</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">config</span><span class="p">.</span><span class="nx">stageCols</span><span class="p">;</span><span class="w"> </span><span class="nx">x</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="nx">field</span><span class="p">[</span><span class="nx">y</span><span class="p">][</span><span class="nx">x</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">}</span>

<span class="w">  </span><span class="nx">draw</span><span class="p">()</span><span class="o">:</span><span class="w"> </span><span class="ow">void</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">ctx</span><span class="p">)</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="c1">// テスト環境対応</span>

<span class="w">    </span><span class="c1">// キャンバスをクリア</span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">ctx</span><span class="p">.</span><span class="nx">clearRect</span><span class="p">(</span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">canvas</span><span class="p">.</span><span class="nx">width</span><span class="p">,</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">canvas</span><span class="p">.</span><span class="nx">height</span><span class="p">)</span>

<span class="w">    </span><span class="c1">// フィールドのぷよを描画</span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kd">let</span><span class="w"> </span><span class="nx">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0</span><span class="p">;</span><span class="w"> </span><span class="nx">y</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">config</span><span class="p">.</span><span class="nx">stageRows</span><span class="p">;</span><span class="w"> </span><span class="nx">y</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kd">let</span><span class="w"> </span><span class="nx">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0</span><span class="p">;</span><span class="w"> </span><span class="nx">x</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">config</span><span class="p">.</span><span class="nx">stageCols</span><span class="p">;</span><span class="w"> </span><span class="nx">x</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">puyoType</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">field</span><span class="p">[</span><span class="nx">y</span><span class="p">][</span><span class="nx">x</span><span class="p">]</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">puyoType</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mf">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="k">this</span><span class="p">.</span><span class="nx">puyoImage</span><span class="p">.</span><span class="nx">draw</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">ctx</span><span class="p">,</span><span class="w"> </span><span class="nx">puyoType</span><span class="p">,</span><span class="w"> </span><span class="nx">x</span><span class="p">,</span><span class="w"> </span><span class="nx">y</span><span class="p">)</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">}</span>

<span class="w">  </span><span class="nx">drawPuyo</span><span class="p">(</span><span class="nx">x</span><span class="o">:</span><span class="w"> </span><span class="kt">number</span><span class="p">,</span><span class="w"> </span><span class="nx">y</span><span class="o">:</span><span class="w"> </span><span class="kt">number</span><span class="p">,</span><span class="w"> </span><span class="kr">type</span><span class="o">:</span><span class="w"> </span><span class="kt">number</span><span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="ow">void</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">ctx</span><span class="p">)</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="c1">// テスト環境対応</span>

<span class="w">    </span><span class="c1">// 指定位置にぷよを描画</span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">puyoImage</span><span class="p">.</span><span class="nx">draw</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">ctx</span><span class="p">,</span><span class="w"> </span><span class="kr">type</span><span class="p">,</span><span class="w"> </span><span class="nx">x</span><span class="p">,</span><span class="w"> </span><span class="nx">y</span><span class="p">)</span>
<span class="w">  </span><span class="p">}</span>

<span class="w">  </span><span class="nx">setPuyo</span><span class="p">(</span><span class="nx">x</span><span class="o">:</span><span class="w"> </span><span class="kt">number</span><span class="p">,</span><span class="w"> </span><span class="nx">y</span><span class="o">:</span><span class="w"> </span><span class="kt">number</span><span class="p">,</span><span class="w"> </span><span class="kr">type</span><span class="o">:</span><span class="w"> </span><span class="kt">number</span><span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="ow">void</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// フィールドにぷよを配置</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span>
<span class="w">      </span><span class="nx">y</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="mf">0</span><span class="w"> </span><span class="o">&amp;&amp;</span>
<span class="w">      </span><span class="nx">y</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">config</span><span class="p">.</span><span class="nx">stageRows</span><span class="w"> </span><span class="o">&amp;&amp;</span>
<span class="w">      </span><span class="nx">x</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="mf">0</span><span class="w"> </span><span class="o">&amp;&amp;</span>
<span class="w">      </span><span class="nx">x</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">config</span><span class="p">.</span><span class="nx">stageCols</span>
<span class="w">    </span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="k">this</span><span class="p">.</span><span class="nx">field</span><span class="p">[</span><span class="nx">y</span><span class="p">][</span><span class="nx">x</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kr">type</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">}</span>

<span class="w">  </span><span class="nx">getPuyo</span><span class="p">(</span><span class="nx">x</span><span class="o">:</span><span class="w"> </span><span class="kt">number</span><span class="p">,</span><span class="w"> </span><span class="nx">y</span><span class="o">:</span><span class="w"> </span><span class="kt">number</span><span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="kt">number</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// フィールドからぷよの種類を取得</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span>
<span class="w">      </span><span class="nx">y</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mf">0</span><span class="w"> </span><span class="o">||</span>
<span class="w">      </span><span class="nx">y</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">config</span><span class="p">.</span><span class="nx">stageRows</span><span class="w"> </span><span class="o">||</span>
<span class="w">      </span><span class="nx">x</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mf">0</span><span class="w"> </span><span class="o">||</span>
<span class="w">      </span><span class="nx">x</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">config</span><span class="p">.</span><span class="nx">stageCols</span>
<span class="w">    </span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="k">return</span><span class="w"> </span><span class="o">-</span><span class="mf">1</span><span class="w"> </span><span class="c1">// 範囲外</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">field</span><span class="p">[</span><span class="nx">y</span><span class="p">][</span><span class="nx">x</span><span class="p">]</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>「Canvas を使って描画しているんですね！」そうです。HTML5 の Canvas API を使って、ゲーム画面を描画しています。</p>
<h4 id="player">Player クラスの拡張<a class="headerlink" href="#player" title="Permanent link">&para;</a></h4>
<p>Player クラスに描画と更新のメソッドを追加します：</p>
<div class="highlight"><pre><span></span><code><span class="c1">// src/player.ts（追加部分）</span>
<span class="nx">draw</span><span class="p">()</span><span class="o">:</span><span class="w"> </span><span class="ow">void</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="c1">// 現在のぷよを描画</span>
<span class="w">  </span><span class="k">this</span><span class="p">.</span><span class="nx">stage</span><span class="p">.</span><span class="nx">drawPuyo</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">puyoX</span><span class="p">,</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">puyoY</span><span class="p">,</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">puyoType</span><span class="p">)</span>
<span class="p">}</span>

<span class="nx">update</span><span class="p">()</span><span class="o">:</span><span class="w"> </span><span class="ow">void</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="c1">// キー入力に応じて移動</span>
<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">inputKeyLeft</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">moveLeft</span><span class="p">()</span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">inputKeyLeft</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span><span class="w"> </span><span class="c1">// 移動後フラグをクリア</span>
<span class="w">  </span><span class="p">}</span>
<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">inputKeyRight</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">moveRight</span><span class="p">()</span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">inputKeyRight</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span><span class="w"> </span><span class="c1">// 移動後フラグをクリア</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<h4 id="game">Game クラスの更新<a class="headerlink" href="#game" title="Permanent link">&para;</a></h4>
<p>最後に、Game クラスのゲームループで描画と更新を行うようにします：</p>
<div class="highlight"><pre><span></span><code><span class="c1">// src/game.ts</span>
<span class="nx">initialize</span><span class="p">()</span><span class="o">:</span><span class="w"> </span><span class="ow">void</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="c1">// 各コンポーネントの初期化</span>
<span class="w">  </span><span class="k">this</span><span class="p">.</span><span class="nx">config</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">Config</span><span class="p">()</span>
<span class="w">  </span><span class="k">this</span><span class="p">.</span><span class="nx">puyoImage</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">PuyoImage</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">config</span><span class="p">)</span>
<span class="w">  </span><span class="k">this</span><span class="p">.</span><span class="nx">stage</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">Stage</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">config</span><span class="p">,</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">puyoImage</span><span class="p">)</span>
<span class="w">  </span><span class="k">this</span><span class="p">.</span><span class="nx">player</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">Player</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">config</span><span class="p">,</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">stage</span><span class="p">,</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">puyoImage</span><span class="p">)</span>
<span class="w">  </span><span class="k">this</span><span class="p">.</span><span class="nx">score</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">Score</span><span class="p">()</span>

<span class="w">  </span><span class="c1">// ゲームモードを設定</span>
<span class="w">  </span><span class="k">this</span><span class="p">.</span><span class="nx">mode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;newPuyo&#39;</span>
<span class="p">}</span>

<span class="nx">loop</span><span class="p">()</span><span class="o">:</span><span class="w"> </span><span class="ow">void</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="c1">// ゲームループの処理</span>
<span class="w">  </span><span class="k">this</span><span class="p">.</span><span class="nx">update</span><span class="p">()</span>
<span class="w">  </span><span class="k">this</span><span class="p">.</span><span class="nx">draw</span><span class="p">()</span>
<span class="w">  </span><span class="nx">requestAnimationFrame</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">loop</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="k">this</span><span class="p">))</span>
<span class="p">}</span>

<span class="k">private</span><span class="w"> </span><span class="nx">update</span><span class="p">()</span><span class="o">:</span><span class="w"> </span><span class="ow">void</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">this</span><span class="p">.</span><span class="nx">frame</span><span class="o">++</span>

<span class="w">  </span><span class="c1">// モードに応じた処理</span>
<span class="w">  </span><span class="k">switch</span><span class="w"> </span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">mode</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">case</span><span class="w"> </span><span class="s1">&#39;newPuyo&#39;</span><span class="o">:</span>
<span class="w">      </span><span class="c1">// 新しいぷよを作成</span>
<span class="w">      </span><span class="k">this</span><span class="p">.</span><span class="nx">player</span><span class="p">.</span><span class="nx">createNewPuyo</span><span class="p">()</span>
<span class="w">      </span><span class="k">this</span><span class="p">.</span><span class="nx">mode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;playing&#39;</span>
<span class="w">      </span><span class="k">break</span>

<span class="w">    </span><span class="k">case</span><span class="w"> </span><span class="s1">&#39;playing&#39;</span><span class="o">:</span>
<span class="w">      </span><span class="c1">// プレイ中の処理（キー入力に応じた移動）</span>
<span class="w">      </span><span class="k">this</span><span class="p">.</span><span class="nx">player</span><span class="p">.</span><span class="nx">update</span><span class="p">()</span>
<span class="w">      </span><span class="k">break</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>

<span class="k">private</span><span class="w"> </span><span class="nx">draw</span><span class="p">()</span><span class="o">:</span><span class="w"> </span><span class="ow">void</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="c1">// ステージを描画</span>
<span class="w">  </span><span class="k">this</span><span class="p">.</span><span class="nx">stage</span><span class="p">.</span><span class="nx">draw</span><span class="p">()</span>

<span class="w">  </span><span class="c1">// プレイヤーのぷよを描画</span>
<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">mode</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">&#39;playing&#39;</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">player</span><span class="p">.</span><span class="nx">draw</span><span class="p">()</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<h4 id="_34">動作確認<a class="headerlink" href="#_34" title="Permanent link">&para;</a></h4>
<p>「これで実際に動かせますね！」はい！開発サーバーを起動して、ブラウザで確認してみましょう：</p>
<div class="highlight"><pre><span></span><code>npm<span class="w"> </span>run<span class="w"> </span>dev
</code></pre></div>
<p>ブラウザで <code>http://localhost:3000/</code> にアクセスすると、ステージが表示され、円形のぷよが表示されます。左右の矢印キーを押すと、ぷよが左右に移動します！</p>
<p>「動きました！」素晴らしい！これで、テストだけでなく実際の動作も確認できるようになりましたね。</p>
<h4 id="_35">テスト環境への対応<a class="headerlink" href="#_35" title="Permanent link">&para;</a></h4>
<p>「でも、Canvas を使うとテストが動かなくなりませんか？」良い質問ですね。jsdom 環境では Canvas の <code>getContext()</code> がサポートされていないので、以下のように対応しました：</p>
<ol>
<li>Stage クラスの <code>initializeCanvas()</code> で、<code>ctx</code> が取得できない場合でもエラーにしない</li>
<li><code>draw()</code> や <code>drawPuyo()</code> メソッドで、<code>ctx</code> が存在しない場合は早期リターン</li>
</ol>
<p>これにより、テスト環境でも問題なくテストが実行できます。</p>
<h3 id="2_1">イテレーション2のまとめ<a class="headerlink" href="#2_1" title="Permanent link">&para;</a></h3>
<p>このイテレーションで実装した内容：</p>
<ol>
<li>
<p><strong>index.html の更新</strong></p>
<ul>
<li><code>&lt;div id="stage"&gt;&lt;/div&gt;</code> 要素を追加</li>
<li>Canvas 要素のマウントポイントとして機能</li>
</ul>
</li>
<li>
<p><strong>Player クラスのキー入力検出機能</strong></p>
<ul>
<li>4方向のキー入力フラグ（inputKeyLeft, inputKeyRight, inputKeyUp, inputKeyDown）の実装</li>
<li>keydown/keyup イベントリスナーの登録</li>
<li>setKeyState メソッドによるキー状態の一元管理（リファクタリング）</li>
</ul>
</li>
<li>
<p><strong>Player クラスのぷよ移動機能</strong></p>
<ul>
<li>ぷよの状態管理（puyoX, puyoY, puyoType, nextPuyoType, rotation）</li>
<li>createNewPuyo メソッド：新しいぷよを生成</li>
<li>moveLeft/moveRight メソッド：ぷよを左右に移動（境界チェック付き）</li>
<li>getRandomPuyoType メソッド：ランダムなぷよの種類を生成（リファクタリング）</li>
<li>マジックナンバーの定数化（INITIAL_PUYO_X, INITIAL_PUYO_Y, MIN_PUYO_TYPE, MAX_PUYO_TYPE）</li>
</ul>
</li>
<li>
<p><strong>Config クラスの拡張</strong></p>
<ul>
<li>stageCols: ステージの列数（6）</li>
<li>stageRows: ステージの行数（12）</li>
<li>puyoSize: ぷよのサイズ（32ピクセル）</li>
<li>stageBackgroundColor: ステージの背景色</li>
<li>stageBorderColor: ステージの枠線色</li>
</ul>
</li>
<li>
<p><strong>PuyoImage クラスの実装</strong></p>
<ul>
<li>colors 配列：ぷよの種類ごとの色定義（赤、緑、青、黄色）</li>
<li>draw メソッド：Canvas API を使用した円形ぷよの描画</li>
<li>ctx.arc() による円の描画、枠線の追加</li>
</ul>
</li>
<li>
<p><strong>Stage クラスの実装</strong></p>
<ul>
<li>Canvas 要素の生成と DOM への追加</li>
<li>field 配列：ステージ上のぷよ配置情報を管理</li>
<li>initializeCanvas/initializeField：初期化処理</li>
<li>draw/drawPuyo：ステージとぷよの描画</li>
<li>setPuyo/getPuyo：フィールドへのぷよの配置と取得</li>
<li>テスト環境対応：ctx が null の場合の早期リターン</li>
</ul>
</li>
<li>
<p><strong>Player クラスの拡張</strong></p>
<ul>
<li>draw メソッド：プレイヤーが操作中のぷよを描画</li>
<li>update メソッド：キー入力に応じてぷよを移動</li>
</ul>
</li>
<li>
<p><strong>Game クラスの拡張</strong></p>
<ul>
<li>update メソッド：ゲーム状態の更新（newPuyo → playing の状態遷移）</li>
<li>draw メソッド：ステージとプレイヤーのぷよを描画</li>
<li>loop メソッド：update と draw を呼び出すゲームループ</li>
</ul>
</li>
<li>
<p><strong>テストの作成</strong></p>
<ul>
<li>キー入力検出のテスト（3 テスト）<ul>
<li>左キー押下時のフラグ設定</li>
<li>右キー押下時のフラグ設定</li>
<li>キー解放時のフラグクリア</li>
</ul>
</li>
<li>ぷよの移動テスト（4 テスト）<ul>
<li>左に移動できる場合の移動</li>
<li>右に移動できる場合の移動</li>
<li>左端での移動制限</li>
<li>右端での移動制限</li>
</ul>
</li>
<li>合計10テストすべて成功</li>
</ul>
</li>
<li>
<p><strong>TDD サイクルの実践</strong></p>
<ul>
<li>Red: 失敗するテストを先に作成</li>
<li>Green: テストを通す最小限の実装</li>
<li>Refactor: マジックナンバーの定数化、ランダム生成ロジックの抽出</li>
</ul>
</li>
<li>
<p><strong>学んだ重要な概念</strong></p>
<ul>
<li><code>bind(this)</code> によるイベントハンドラのコンテキスト固定</li>
<li>TypeScript の private フィールドアクセス（テストでの <code>player['inputKeyLeft']</code> 記法）</li>
<li>jsdom 環境での KeyboardEvent のシミュレーション</li>
<li>境界チェックによる移動制限の実装</li>
<li>static readonly 定数による設定値の管理</li>
<li>Canvas API による 2D グラフィックス描画（arc, fillRect, clearRect）</li>
<li>requestAnimationFrame によるゲームループの実装</li>
<li>テスト環境と実行環境の違いへの対応（Canvas の getContext の存在チェック）</li>
</ul>
</li>
</ol>
<p>次のイテレーションでは、ぷよの回転機能を実装していきます。</p>
<h2 id="3">イテレーション3: ぷよの回転の実装<a class="headerlink" href="#3" title="Permanent link">&para;</a></h2>
<p>「左右に移動できるようになったけど、ぷよぷよって回転もできますよね？」そうですね！ぷよぷよの醍醐味の一つは、ぷよを回転させて思い通りの場所に配置することです。今回は、ぷよを回転させる機能を実装していきましょう！</p>
<h3 id="_36">ユーザーストーリー<a class="headerlink" href="#_36" title="Permanent link">&para;</a></h3>
<p>まずは、このイテレーションで実装するユーザーストーリーを確認しましょう：</p>
<blockquote>
<p>プレイヤーとして、落ちてくるぷよを回転できる</p>
</blockquote>
<p>「回転って具体的にどういう動きですか？」良い質問ですね！ぷよぷよでは、2つのぷよが連なった状態で落ちてきます。回転とは、この2つのぷよの相対的な位置関係を変えることです。例えば、縦に並んでいるぷよを横に並ぶように変えたりできるんですよ。</p>
<h3 id="todo_2">TODOリスト<a class="headerlink" href="#todo_2" title="Permanent link">&para;</a></h3>
<p>「どんな作業が必要になりますか？」このユーザーストーリーを実現するために、TODOリストを作成してみましょう。</p>
<p>「ぷよを回転させる」という機能を実現するためには、以下のようなタスクが必要そうですね：</p>
<ul>
<li>ぷよの回転処理を実装する（時計回り・反時計回りの回転）</li>
<li>回転可能かどうかのチェックを実装する（他のぷよや壁にぶつかる場合は回転できないようにする）</li>
<li>壁キック処理を実装する（壁際での回転を可能にする特殊処理）</li>
<li>回転後の表示を更新する（画面上でぷよの位置が変わったことを表示する）</li>
</ul>
<p>「壁キックって何ですか？」壁キックとは、ぷよが壁際にあるときに回転すると壁にめり込んでしまうので、自動的に少し位置をずらして回転を可能にする処理のことです。プレイヤーの操作性を向上させるための工夫なんですよ。</p>
<h3 id="_37">テスト: ぷよの回転<a class="headerlink" href="#_37" title="Permanent link">&para;</a></h3>
<p>「まずは何からテストしますか？」テスト駆動開発の流れに沿って、まずは基本的な回転機能のテストから書いていきましょう。</p>
<div class="highlight"><pre><span></span><code><span class="c1">// src/tests/player.test.ts（続き）</span>
<span class="nx">describe</span><span class="p">(</span><span class="s1">&#39;ぷよの回転&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">beforeEach</span><span class="p">(()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// 新しいぷよを作成</span>
<span class="w">        </span><span class="nx">player</span><span class="p">.</span><span class="nx">createNewPuyo</span><span class="p">();</span>
<span class="w">    </span><span class="p">});</span>

<span class="w">    </span><span class="nx">it</span><span class="p">(</span><span class="s1">&#39;時計回りに回転すると、回転状態が1増える&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// 初期回転状態を記録</span>
<span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">initialRotation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">player</span><span class="p">[</span><span class="s1">&#39;rotation&#39;</span><span class="p">];</span>

<span class="w">        </span><span class="c1">// 時計回りに回転</span>
<span class="w">        </span><span class="nx">player</span><span class="p">.</span><span class="nx">rotateRight</span><span class="p">();</span>

<span class="w">        </span><span class="c1">// 回転状態が1増えていることを確認</span>
<span class="w">        </span><span class="nx">expect</span><span class="p">(</span><span class="nx">player</span><span class="p">[</span><span class="s1">&#39;rotation&#39;</span><span class="p">]).</span><span class="nx">toBe</span><span class="p">((</span><span class="nx">initialRotation</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mf">1</span><span class="p">)</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="mf">4</span><span class="p">);</span>
<span class="w">    </span><span class="p">});</span>

<span class="w">    </span><span class="nx">it</span><span class="p">(</span><span class="s1">&#39;反時計回りに回転すると、回転状態が1減る&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// 初期回転状態を記録</span>
<span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">initialRotation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">player</span><span class="p">[</span><span class="s1">&#39;rotation&#39;</span><span class="p">];</span>

<span class="w">        </span><span class="c1">// 反時計回りに回転</span>
<span class="w">        </span><span class="nx">player</span><span class="p">.</span><span class="nx">rotateLeft</span><span class="p">();</span>

<span class="w">        </span><span class="c1">// 回転状態が1減っていることを確認（負の値にならないように調整）</span>
<span class="w">        </span><span class="nx">expect</span><span class="p">(</span><span class="nx">player</span><span class="p">[</span><span class="s1">&#39;rotation&#39;</span><span class="p">]).</span><span class="nx">toBe</span><span class="p">((</span><span class="nx">initialRotation</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mf">3</span><span class="p">)</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="mf">4</span><span class="p">);</span>
<span class="w">    </span><span class="p">});</span>

<span class="w">    </span><span class="nx">it</span><span class="p">(</span><span class="s1">&#39;回転状態が4になると0に戻る&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// 回転状態を3に設定</span>
<span class="w">        </span><span class="nx">player</span><span class="p">[</span><span class="s1">&#39;rotation&#39;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">3</span><span class="p">;</span>

<span class="w">        </span><span class="c1">// 時計回りに回転</span>
<span class="w">        </span><span class="nx">player</span><span class="p">.</span><span class="nx">rotateRight</span><span class="p">();</span>

<span class="w">        </span><span class="c1">// 回転状態が0になっていることを確認</span>
<span class="w">        </span><span class="nx">expect</span><span class="p">(</span><span class="nx">player</span><span class="p">[</span><span class="s1">&#39;rotation&#39;</span><span class="p">]).</span><span class="nx">toBe</span><span class="p">(</span><span class="mf">0</span><span class="p">);</span>
<span class="w">    </span><span class="p">});</span>
<span class="p">});</span>
</code></pre></div>
<p>「このテストは何を確認しているんですか？」このテストでは、以下の3つのケースを確認しています：</p>
<ol>
<li>時計回りに回転すると、回転状態が1増えるか</li>
<li>反時計回りに回転すると、回転状態が1減るか（ただし、負の値にならないように調整）</li>
<li>回転状態が最大値（3）から時計回りに回転すると、0に戻るか（循環するか）</li>
</ol>
<p>「回転状態って何ですか？」回転状態は、ぷよの向きを表す値です。0から3までの値を取り、それぞれ以下の状態を表します：
- 0: 2つ目のぷよが上にある状態
- 1: 2つ目のぷよが右にある状態
- 2: 2つ目のぷよが下にある状態
- 3: 2つ目のぷよが左にある状態</p>
<p>「なるほど、4方向の回転を表現するんですね！」そうです！では、このテストが通るように実装していきましょう。</p>
<h3 id="_38">実装: ぷよの回転<a class="headerlink" href="#_38" title="Permanent link">&para;</a></h3>
<p>「テストが失敗することを確認したら、実装に進みましょう！」そうですね。では、ぷよを回転させる機能を実装していきましょう。</p>
<div class="highlight"><pre><span></span><code><span class="c1">// src/player.ts（続き）</span>
<span class="nx">rotateRight</span><span class="p">()</span><span class="o">:</span><span class="w"> </span><span class="ow">void</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// 時計回りに回転（0→1→2→3→0）</span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">rotation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">rotation</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mf">1</span><span class="p">)</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="mf">4</span><span class="p">;</span>
<span class="p">}</span>

<span class="nx">rotateLeft</span><span class="p">()</span><span class="o">:</span><span class="w"> </span><span class="ow">void</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// 反時計回りに回転（0→3→2→1→0）</span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">rotation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">rotation</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mf">3</span><span class="p">)</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="mf">4</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
<p>「シンプルですね！」そうですね。回転処理自体はとてもシンプルです。<code>rotateRight</code>メソッドでは回転状態を1増やし、<code>rotateLeft</code>メソッドでは回転状態を1減らしています（ただし、負の値にならないように3を足して4で割った余りを取っています）。</p>
<p>「なぜ反時計回りの場合は単純に1減らすのではなく、3を足して4で割るんですか？」鋭い質問ですね！JavaScriptでは、負の数の剰余演算（%演算子）の結果が他の言語と異なる場合があります。例えば、-1 % 4は-1になることがあります。しかし、私たちは常に0から3の範囲の値が欲しいので、3を足して（これは1を引くのと同じ効果があります）から4で割ることで、確実に正の値の範囲内に収めているんです。</p>
<blockquote>
<p>剰余演算子 (%) は、1 つ目のオペランドが 2 つ目のオペランドで除算されたときの余りである剰余を返します。これは常に被除数の符号を取ります。</p>
<p>— Mozilla Developer Network 『剰余演算子』</p>
</blockquote>
<p>「テストは通りましたか？」はい、これでテストは通るはずです！これで基本的な回転機能が実装できました。しかし、まだ壁際での回転（壁キック）処理が実装されていませんね。次はそれをテストしていきましょう。</p>
<h3 id="_39">テスト: 壁キック処理<a class="headerlink" href="#_39" title="Permanent link">&para;</a></h3>
<p>「壁キック処理のテストはどうやって書くんですか？」壁キック処理は、ぷよが壁際にあるときに回転すると自動的に位置を調整する機能です。これをテストするには、ぷよを壁際に配置し、回転させたときに適切に位置が調整されるかを確認します。</p>
<div class="highlight"><pre><span></span><code><span class="c1">// src/tests/player.test.ts（続き）</span>
<span class="nx">describe</span><span class="p">(</span><span class="s1">&#39;壁キック処理&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">beforeEach</span><span class="p">(()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// 新しいぷよを作成</span>
<span class="w">        </span><span class="nx">player</span><span class="p">.</span><span class="nx">createNewPuyo</span><span class="p">();</span>
<span class="w">    </span><span class="p">});</span>

<span class="w">    </span><span class="nx">it</span><span class="p">(</span><span class="s1">&#39;右端で右回転すると、左に移動して回転する（壁キック）&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// 右端に移動</span>
<span class="w">        </span><span class="nx">player</span><span class="p">[</span><span class="s1">&#39;puyoX&#39;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">config</span><span class="p">.</span><span class="nx">stageCols</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mf">1</span><span class="p">;</span>
<span class="w">        </span><span class="nx">player</span><span class="p">[</span><span class="s1">&#39;rotation&#39;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0</span><span class="p">;</span><span class="w"> </span><span class="c1">// 上向き</span>

<span class="w">        </span><span class="c1">// 右回転（2つ目のぷよが右にくる）</span>
<span class="w">        </span><span class="nx">player</span><span class="p">.</span><span class="nx">rotateRight</span><span class="p">();</span>

<span class="w">        </span><span class="c1">// 壁キックにより左に移動していることを確認</span>
<span class="w">        </span><span class="nx">expect</span><span class="p">(</span><span class="nx">player</span><span class="p">[</span><span class="s1">&#39;puyoX&#39;</span><span class="p">]).</span><span class="nx">toBe</span><span class="p">(</span><span class="nx">config</span><span class="p">.</span><span class="nx">stageCols</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mf">2</span><span class="p">);</span>
<span class="w">        </span><span class="nx">expect</span><span class="p">(</span><span class="nx">player</span><span class="p">[</span><span class="s1">&#39;rotation&#39;</span><span class="p">]).</span><span class="nx">toBe</span><span class="p">(</span><span class="mf">1</span><span class="p">);</span>
<span class="w">    </span><span class="p">});</span>

<span class="w">    </span><span class="nx">it</span><span class="p">(</span><span class="s1">&#39;左端で左回転すると、右に移動して回転する（壁キック）&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// 左端に移動</span>
<span class="w">        </span><span class="nx">player</span><span class="p">[</span><span class="s1">&#39;puyoX&#39;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0</span><span class="p">;</span>
<span class="w">        </span><span class="nx">player</span><span class="p">[</span><span class="s1">&#39;rotation&#39;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0</span><span class="p">;</span><span class="w"> </span><span class="c1">// 上向き</span>

<span class="w">        </span><span class="c1">// 左回転（2つ目のぷよが左にくる）</span>
<span class="w">        </span><span class="nx">player</span><span class="p">.</span><span class="nx">rotateLeft</span><span class="p">();</span>

<span class="w">        </span><span class="c1">// 壁キックにより右に移動していることを確認</span>
<span class="w">        </span><span class="nx">expect</span><span class="p">(</span><span class="nx">player</span><span class="p">[</span><span class="s1">&#39;puyoX&#39;</span><span class="p">]).</span><span class="nx">toBe</span><span class="p">(</span><span class="mf">1</span><span class="p">);</span>
<span class="w">        </span><span class="nx">expect</span><span class="p">(</span><span class="nx">player</span><span class="p">[</span><span class="s1">&#39;rotation&#39;</span><span class="p">]).</span><span class="nx">toBe</span><span class="p">(</span><span class="mf">3</span><span class="p">);</span>
<span class="w">    </span><span class="p">});</span>
<span class="p">});</span>
</code></pre></div>
<p>「このテストでは何を確認しているんですか？」このテストでは、以下の2つのケースを確認しています：</p>
<ol>
<li>右端にいるときに時計回りに回転すると、左に1マス移動して回転するか</li>
<li>左端にいるときに反時計回りに回転すると、右に1マス移動して回転するか</li>
</ol>
<p>「なるほど、壁にめり込まないように自動的に位置を調整するんですね！」そうです！これがいわゆる「壁キック」と呼ばれる処理です。プレイヤーの操作性を向上させるための工夫なんですよ。では、このテストが通るように実装していきましょう。</p>
<h3 id="_40">実装: 壁キック処理<a class="headerlink" href="#_40" title="Permanent link">&para;</a></h3>
<p>「テストが失敗することを確認したら、実装に進みましょう！」そうですね。では、壁キック処理を実装していきましょう。</p>
<div class="highlight"><pre><span></span><code><span class="c1">// src/player.ts（続き）</span>
<span class="nx">rotateRight</span><span class="p">()</span><span class="o">:</span><span class="w"> </span><span class="ow">void</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// 回転前の状態を保存</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">oldRotation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">rotation</span><span class="p">;</span>

<span class="w">    </span><span class="c1">// 時計回りに回転</span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">rotation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">rotation</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mf">1</span><span class="p">)</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="mf">4</span><span class="p">;</span>

<span class="w">    </span><span class="c1">// 右端で右回転した場合（2つ目のぷよが右にくる場合）</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">rotation</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="mf">1</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">puyoX</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">config</span><span class="p">.</span><span class="nx">stageCols</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mf">1</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// 左に移動（壁キック）</span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">puyoX</span><span class="o">--</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// 左端で左回転した場合（2つ目のぷよが左にくる場合）</span>
<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">rotation</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="mf">3</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">puyoX</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="mf">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// 右に移動（壁キック）</span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">puyoX</span><span class="o">++</span><span class="p">;</span>
<span class="p">}</span>
<span class="p">}</span>

<span class="nx">rotateLeft</span><span class="p">()</span><span class="o">:</span><span class="w"> </span><span class="ow">void</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// 回転前の状態を保存</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">oldRotation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">rotation</span><span class="p">;</span>

<span class="w">    </span><span class="c1">// 反時計回りに回転</span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">rotation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">rotation</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mf">3</span><span class="p">)</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="mf">4</span><span class="p">;</span>

<span class="w">    </span><span class="c1">// 右端で右回転した場合（2つ目のぷよが右にくる場合）</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">rotation</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="mf">1</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">puyoX</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">config</span><span class="p">.</span><span class="nx">stageCols</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mf">1</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// 左に移動（壁キック）</span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">puyoX</span><span class="o">--</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// 左端で左回転した場合（2つ目のぷよが左にくる場合）</span>
<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">rotation</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="mf">3</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">puyoX</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="mf">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// 右に移動（壁キック）</span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">puyoX</span><span class="o">++</span><span class="p">;</span>
<span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>「なるほど、回転後に壁にめり込む場合は位置を調整するんですね！」そうです！この実装では、以下のことを行っています：</p>
<ol>
<li>まず通常の回転処理を行う</li>
<li>回転後、ぷよが壁にめり込む状況になっていないかチェックする</li>
<li>めり込む場合は、ぷよの位置を調整する（壁キック）</li>
</ol>
<p>「でも、<code>rotateRight</code>と<code>rotateLeft</code>で同じ壁キック処理が重複していますね？」鋭い指摘です！確かに重複していますね。これはリファクタリングの良い候補です。共通の壁キック処理を抽出して、コードの重複を減らすことができるでしょう。しかし、今回はテストが通ることを優先して、リファクタリングは次のステップで行うことにしましょう。</p>
<p>「テストは通りましたか？」はい、これでテストは通るはずです！これでぷよを回転させる機能と、壁際での特殊処理（壁キック）が実装できました。プレイヤーがキーボードの上キーを押すと、ぷよが回転し、壁際でも適切に位置が調整されるようになりました。</p>
<h3 id="3_1">イテレーション3のまとめ<a class="headerlink" href="#3_1" title="Permanent link">&para;</a></h3>
<p>このイテレーションでは、ぷよの回転機能と壁際での特殊処理を実装しました。以下がイテレーション3で実施した内容のまとめです：</p>
<ol>
<li>
<p><strong>回転状態の管理</strong></p>
<ul>
<li>rotation プロパティ：0(上)、1(右)、2(下)、3(左) の 4 状態で管理</li>
<li>回転状態に応じた 2 つ目のぷよの位置計算（offsetX, offsetY 配列使用）</li>
</ul>
</li>
<li>
<p><strong>回転メソッドの実装</strong></p>
<ul>
<li>rotateRight メソッド：時計回りに回転（rotation を +1）</li>
<li>rotateLeft メソッド：反時計回りに回転（rotation を +3、つまり -1 と同等）</li>
<li>performRotation メソッド：回転処理と壁キック処理を統合</li>
</ul>
</li>
<li>
<p><strong>壁キック処理</strong></p>
<ul>
<li>回転後に 2 つ目のぷよが壁外に出る場合、軸ぷよの位置を自動調整</li>
<li>左壁キック：nextX &lt; 0 のとき puyoX を +1</li>
<li>右壁キック：nextX &gt;= stageCols のとき puyoX を -1</li>
</ul>
</li>
<li>
<p><strong>2 つ目のぷよを考慮した移動制限</strong></p>
<ul>
<li>moveLeft/moveRight の改善：回転状態に応じて 2 つ目のぷよの位置も計算</li>
<li>軸ぷよと 2 つ目のぷよの両方が範囲内にある場合のみ移動可能</li>
</ul>
</li>
<li>
<p><strong>描画の更新</strong></p>
<ul>
<li>draw メソッドで回転状態に応じた 2 つ目のぷよの描画</li>
<li>軸ぷよと 2 つ目のぷよを両方描画</li>
</ul>
</li>
<li>
<p><strong>キー入力の統合</strong></p>
<ul>
<li>update メソッドで上キー(inputKeyUp)による回転処理</li>
<li>回転後フラグをクリア</li>
</ul>
</li>
<li>
<p><strong>テストの作成</strong></p>
<ul>
<li>回転機能のテスト（3 テスト）<ul>
<li>時計回りに回転すると回転状態が 1 増える</li>
<li>反時計回りに回転すると回転状態が 1 減る</li>
<li>回転状態が 4 になると 0 に戻る</li>
</ul>
</li>
<li>壁キック処理のテスト（3 テスト）<ul>
<li>左壁際で回転すると右にキックする</li>
<li>右壁際で右向き回転時に左にキックする</li>
<li>左壁際で左向き状態から回転すると右にキックする</li>
</ul>
</li>
<li>横向き移動制限のテスト（2 テスト）<ul>
<li>横向き（右）の状態で右端にいる場合、右に移動できない</li>
<li>横向き（左）の状態で左端にいる場合、左に移動できない</li>
</ul>
</li>
<li>合計 18 テストすべて成功</li>
</ul>
</li>
<li>
<p><strong>TDD サイクルの実践</strong></p>
<ul>
<li>Red: 回転・壁キック・移動制限のテストを先に作成し失敗を確認</li>
<li>Green: 各機能を実装してテストを通過</li>
<li>Refactor: performRotation メソッドへの共通処理抽出</li>
</ul>
</li>
<li>
<p><strong>学んだ重要な概念</strong></p>
<ul>
<li>4 方向状態管理：配列インデックスによる効率的な座標オフセット計算</li>
<li>壁キック：ユーザビリティ向上のための位置自動調整</li>
<li>複合的な境界チェック：軸ぷよと 2 つ目のぷよ両方の範囲チェック</li>
<li>DRY 原則：重複コードの共通メソッド化（performRotation）</li>
</ul>
</li>
</ol>
<p><strong>注意</strong>: このイテレーションでは壁との境界チェックのみを実装しており、既存のぷよとの衝突判定はまだ実装されていません。そのため、回転や移動時に着地済みのぷよを上書きしてしまう問題があります。この問題は後のイテレーションで修正します。</p>
<p>このイテレーションにより、ぷよを自由に回転させながら左右に移動できるようになり、ぷよぷよの基本的な操作性が実現できました。</p>
<h2 id="4">イテレーション4: ぷよの自由落下の実装<a class="headerlink" href="#4" title="Permanent link">&para;</a></h2>
<p>「回転ができるようになったけど、ぷよぷよって自動で落ちていくよね？」そうですね！ぷよぷよでは、ぷよが一定間隔で自動的に下に落ちていきます。今回は、その「自由落下」機能を実装していきましょう！</p>
<h3 id="_41">ユーザーストーリー<a class="headerlink" href="#_41" title="Permanent link">&para;</a></h3>
<p>まずは、このイテレーションで実装するユーザーストーリーを確認しましょう：</p>
<blockquote>
<p>システムとしてぷよを自由落下させることができる</p>
</blockquote>
<p>「ぷよが自動的に落ちていく」という機能は、ぷよぷよの基本中の基本ですね。プレイヤーが何も操作しなくても、時間とともにぷよが下に落ちていく仕組みを作りましょう。</p>
<h3 id="todo_3">TODOリスト<a class="headerlink" href="#todo_3" title="Permanent link">&para;</a></h3>
<p>「どんな作業が必要になりますか？」このユーザーストーリーを実現するために、TODO リストを作成してみましょう。</p>
<p>「ぷよを自由落下させる」という機能を実現するためには、以下のようなタスクが必要そうですね：</p>
<ul>
<li>落下タイマーの実装（一定時間ごとに落下処理を実行する仕組み）</li>
<li>自動落下処理の実装（タイマーが発火したときにぷよを1マス下に移動する）</li>
<li>落下可能判定の実装（下に移動できるかどうかをチェックする）</li>
<li>着地処理の実装（ぷよが着地したときの処理）</li>
<li>ゲームループとの統合（ゲームの更新処理に自由落下を組み込む）</li>
</ul>
<p>「なるほど、順番に実装していけばいいんですね！」そうです、一つずつ進めていきましょう。テスト駆動開発の流れに沿って、まずはテストから書いていきますよ。</p>
<h3 id="_42">テスト: 落下タイマー<a class="headerlink" href="#_42" title="Permanent link">&para;</a></h3>
<p>「最初に何をテストすればいいんでしょうか？」まずは、一定時間ごとに落下処理が実行される仕組みをテストしましょう。</p>
<div class="highlight"><pre><span></span><code><span class="c1">// src/tests/player.test.ts（続き）</span>
<span class="nx">describe</span><span class="p">(</span><span class="s1">&#39;自由落下&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">beforeEach</span><span class="p">(()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// 新しいぷよを作成</span>
<span class="w">        </span><span class="nx">player</span><span class="p">.</span><span class="nx">createNewPuyo</span><span class="p">()</span>
<span class="w">    </span><span class="p">})</span>

<span class="w">    </span><span class="nx">it</span><span class="p">(</span><span class="s1">&#39;指定時間が経過すると、ぷよが1マス下に落ちる&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// 初期位置を記録</span>
<span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">initialY</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">player</span><span class="p">[</span><span class="s1">&#39;puyoY&#39;</span><span class="p">]</span>

<span class="w">        </span><span class="c1">// 落下間隔を取得（例: 1000ms = 1秒）</span>
<span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">dropInterval</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">1000</span>

<span class="w">        </span><span class="c1">// ゲームの更新処理を実行（落下間隔分）</span>
<span class="w">        </span><span class="nx">player</span><span class="p">.</span><span class="nx">update</span><span class="p">(</span><span class="nx">dropInterval</span><span class="p">)</span>

<span class="w">        </span><span class="c1">// 位置が1つ下に移動していることを確認</span>
<span class="w">        </span><span class="nx">expect</span><span class="p">(</span><span class="nx">player</span><span class="p">[</span><span class="s1">&#39;puyoY&#39;</span><span class="p">]).</span><span class="nx">toBe</span><span class="p">(</span><span class="nx">initialY</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mf">1</span><span class="p">)</span>
<span class="w">    </span><span class="p">})</span>

<span class="w">    </span><span class="nx">it</span><span class="p">(</span><span class="s1">&#39;指定時間未満では、ぷよは落ちない&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// 初期位置を記録</span>
<span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">initialY</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">player</span><span class="p">[</span><span class="s1">&#39;puyoY&#39;</span><span class="p">]</span>

<span class="w">        </span><span class="c1">// 落下間隔を取得</span>
<span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">dropInterval</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">1000</span>

<span class="w">        </span><span class="c1">// タイマーを半分だけ進める</span>
<span class="w">        </span><span class="nx">player</span><span class="p">.</span><span class="nx">update</span><span class="p">(</span><span class="nx">dropInterval</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mf">2</span><span class="p">)</span>

<span class="w">        </span><span class="c1">// 位置が変わっていないことを確認</span>
<span class="w">        </span><span class="nx">expect</span><span class="p">(</span><span class="nx">player</span><span class="p">[</span><span class="s1">&#39;puyoY&#39;</span><span class="p">]).</span><span class="nx">toBe</span><span class="p">(</span><span class="nx">initialY</span><span class="p">)</span>
<span class="w">    </span><span class="p">})</span>

<span class="w">    </span><span class="nx">it</span><span class="p">(</span><span class="s1">&#39;下端に達した場合、それ以上落ちない&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// 下端の1つ上に配置</span>
<span class="w">        </span><span class="nx">player</span><span class="p">[</span><span class="s1">&#39;puyoY&#39;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">config</span><span class="p">.</span><span class="nx">stageRows</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mf">1</span>

<span class="w">        </span><span class="c1">// 落下処理を実行</span>
<span class="w">        </span><span class="nx">player</span><span class="p">.</span><span class="nx">update</span><span class="p">(</span><span class="mf">1000</span><span class="p">)</span>

<span class="w">        </span><span class="c1">// 位置が変わっていないことを確認（下端を超えない）</span>
<span class="w">        </span><span class="nx">expect</span><span class="p">(</span><span class="nx">player</span><span class="p">[</span><span class="s1">&#39;puyoY&#39;</span><span class="p">]).</span><span class="nx">toBe</span><span class="p">(</span><span class="nx">config</span><span class="p">.</span><span class="nx">stageRows</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mf">1</span><span class="p">)</span>
<span class="w">    </span><span class="p">})</span>
<span class="p">})</span>
</code></pre></div>
<p>「テストを書いたら、次は実装ですね！」その通りです。Red（失敗）→ Green（成功）→ Refactor（改善）のサイクルで進めていきましょう。</p>
<h3 id="_43">実装: 落下タイマー<a class="headerlink" href="#_43" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1">// src/player.ts（続き）</span>
<span class="kd">class</span><span class="w"> </span><span class="nx">Player</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">private</span><span class="w"> </span><span class="nx">dropTimer</span><span class="o">:</span><span class="w"> </span><span class="kt">number</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0</span><span class="p">;</span>
<span class="w">    </span><span class="k">private</span><span class="w"> </span><span class="nx">dropInterval</span><span class="o">:</span><span class="w"> </span><span class="kt">number</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">1000</span><span class="p">;</span><span class="w"> </span><span class="c1">// 1秒ごとに落下</span>

<span class="w">    </span><span class="c1">// タイマーをリセットする</span>
<span class="w">    </span><span class="nx">resetDropTimer</span><span class="p">()</span><span class="o">:</span><span class="w"> </span><span class="ow">void</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="nx">dropTimer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="c1">// 落下間隔を取得する</span>
<span class="w">    </span><span class="nx">getDropInterval</span><span class="p">()</span><span class="o">:</span><span class="w"> </span><span class="kt">number</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">dropInterval</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="c1">// ゲームの更新処理</span>
<span class="w">    </span><span class="nx">update</span><span class="p">(</span><span class="nx">deltaTime</span><span class="o">:</span><span class="w"> </span><span class="kt">number</span><span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="ow">void</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// タイマーを進める</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="nx">dropTimer</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="nx">deltaTime</span><span class="p">;</span>

<span class="w">        </span><span class="c1">// 落下間隔を超えたら落下処理を実行</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">dropTimer</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">dropInterval</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="nx">applyGravity</span><span class="p">();</span>
<span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="nx">dropTimer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0</span><span class="p">;</span><span class="w"> </span><span class="c1">// タイマーをリセット</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="c1">// 重力を適用する（ぷよを1マス下に落とす）</span>
<span class="w">    </span><span class="k">private</span><span class="w"> </span><span class="nx">applyGravity</span><span class="p">()</span><span class="o">:</span><span class="w"> </span><span class="ow">void</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// 下に移動できるかチェック</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">canMoveDown</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="nx">puyoY</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="mf">1</span><span class="p">;</span>
<span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="c1">// 着地した場合の処理（後で実装）</span>
<span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="nx">onLanded</span><span class="p">();</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="c1">// 下に移動できるかチェックする</span>
<span class="w">    </span><span class="k">private</span><span class="w"> </span><span class="nx">canMoveDown</span><span class="p">()</span><span class="o">:</span><span class="w"> </span><span class="kt">boolean</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// 子ぷよの位置も考慮してチェック</span>
<span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">nextY</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">puyoY</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mf">1</span><span class="p">;</span>
<span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">childNextY</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">puyoY</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">childOffsetY</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mf">1</span><span class="p">;</span>

<span class="w">        </span><span class="c1">// 親ぷよと子ぷよが範囲内かチェック</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">nextY</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="nx">config</span><span class="p">.</span><span class="nx">stageRows</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="nx">childNextY</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="nx">config</span><span class="p">.</span><span class="nx">stageRows</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="kc">false</span><span class="p">;</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="c1">// フィールドに衝突するかチェック（後で実装）</span>
<span class="w">        </span><span class="c1">// if (this.checkCollision(this.puyoX, nextY) ||</span>
<span class="w">        </span><span class="c1">//     this.checkCollision(this.puyoX + this.childOffsetX, childNextY)) {</span>
<span class="w">        </span><span class="c1">//     return false;</span>
<span class="w">        </span><span class="c1">// }</span>

<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="kc">true</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="c1">// 着地したときの処理</span>
<span class="w">    </span><span class="k">private</span><span class="w"> </span><span class="nx">onLanded</span><span class="p">()</span><span class="o">:</span><span class="w"> </span><span class="ow">void</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// 後で実装</span>
<span class="w">        </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;ぷよが着地しました&#39;</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>「タイマーを使って一定間隔で落下させるんですね！」そうです！この実装では、以下のことを行っています：</p>
<ol>
<li><code>dropTimer</code> でタイマーを管理</li>
<li><code>update()</code> メソッドで経過時間を加算</li>
<li>一定間隔（<code>dropInterval</code>）を超えたら <code>applyGravity()</code> を実行</li>
<li><code>applyGravity()</code> で下に移動できるかチェックし、移動またはは着地処理を実行</li>
</ol>
<p>「でも、<code>canMoveDown()</code> の中でフィールドとの衝突チェックがコメントアウトされていますね？」鋭い指摘です！確かに、フィールドに配置されたぷよとの衝突チェックはまだ実装していません。今は基本的な落下の仕組みだけを実装して、フィールドとの衝突チェックは次のステップで追加していきましょう。</p>
<h3 id="_44">テスト: 着地判定<a class="headerlink" href="#_44" title="Permanent link">&para;</a></h3>
<p>「ぷよが着地したときの処理もテストしたいです！」いいですね！次は、ぷよが着地したときの振る舞いをテストしましょう。</p>
<div class="highlight"><pre><span></span><code><span class="c1">// src/tests/player.test.ts（続き）</span>
<span class="nx">describe</span><span class="p">(</span><span class="s1">&#39;着地判定&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">beforeEach</span><span class="p">(()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">player</span><span class="p">.</span><span class="nx">createNewPuyo</span><span class="p">();</span>
<span class="w">    </span><span class="p">});</span>

<span class="w">    </span><span class="nx">it</span><span class="p">(</span><span class="s1">&#39;ぷよが一番下まで落ちたら着地する&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// ぷよを一番下の1つ上の位置に配置</span>
<span class="w">        </span><span class="nx">player</span><span class="p">[</span><span class="s1">&#39;puyoY&#39;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">config</span><span class="p">.</span><span class="nx">stageRows</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mf">2</span><span class="p">;</span>
<span class="w">        </span><span class="nx">player</span><span class="p">[</span><span class="s1">&#39;childOffsetY&#39;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">1</span><span class="p">;</span><span class="w"> </span><span class="c1">// 子ぷよは下</span>

<span class="w">        </span><span class="c1">// スパイを設定して着地処理が呼ばれるか確認</span>
<span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">landedSpy</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">jest</span><span class="p">.</span><span class="nx">spyOn</span><span class="p">(</span><span class="nx">player</span><span class="w"> </span><span class="kr">as</span><span class="w"> </span><span class="nx">any</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;onLanded&#39;</span><span class="p">);</span>

<span class="w">        </span><span class="c1">// 重力を適用</span>
<span class="w">        </span><span class="nx">player</span><span class="p">[</span><span class="s1">&#39;applyGravity&#39;</span><span class="p">]();</span>

<span class="w">        </span><span class="c1">// 着地処理が呼ばれたことを確認</span>
<span class="w">        </span><span class="nx">expect</span><span class="p">(</span><span class="nx">landedSpy</span><span class="p">).</span><span class="nx">toHaveBeenCalled</span><span class="p">();</span>
<span class="w">    </span><span class="p">});</span>

<span class="w">    </span><span class="nx">it</span><span class="p">(</span><span class="s1">&#39;着地したぷよはフィールドに固定される&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// ぷよを一番下まで落とす</span>
<span class="w">        </span><span class="nx">player</span><span class="p">[</span><span class="s1">&#39;puyoY&#39;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">config</span><span class="p">.</span><span class="nx">stageRows</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mf">1</span><span class="p">;</span>

<span class="w">        </span><span class="c1">// 着地処理を実行</span>
<span class="w">        </span><span class="nx">player</span><span class="p">[</span><span class="s1">&#39;onLanded&#39;</span><span class="p">]();</span>

<span class="w">        </span><span class="c1">// フィールドにぷよが配置されているか確認（後で実装）</span>
<span class="w">        </span><span class="c1">// const field = player.getField();</span>
<span class="w">        </span><span class="c1">// expect(field[player[&#39;puyoY&#39;]][player[&#39;puyoX&#39;]]).not.toBe(0);</span>
<span class="w">    </span><span class="p">});</span>
<span class="p">});</span>
</code></pre></div>
<h3 id="_45">実装: 着地処理<a class="headerlink" href="#_45" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1">// src/player.ts（続き）</span>
<span class="kd">class</span><span class="w"> </span><span class="nx">Player</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// フィールドの状態を保持する2次元配列</span>
<span class="w">    </span><span class="k">private</span><span class="w"> </span><span class="nx">field</span><span class="o">:</span><span class="w"> </span><span class="kt">number</span><span class="p">[][];</span>

<span class="w">    </span><span class="kr">constructor</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// フィールドを初期化（0で埋める）</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="nx">field</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">Array</span><span class="p">.</span><span class="kr">from</span><span class="p">(</span>
<span class="w">            </span><span class="p">{</span><span class="w"> </span><span class="nx">length</span><span class="o">:</span><span class="w"> </span><span class="kt">config.stageRows</span><span class="w"> </span><span class="p">},</span>
<span class="w">            </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nb">Array</span><span class="p">(</span><span class="nx">config</span><span class="p">.</span><span class="nx">stageCols</span><span class="p">).</span><span class="nx">fill</span><span class="p">(</span><span class="mf">0</span><span class="p">)</span>
<span class="w">        </span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="c1">// フィールドを取得する</span>
<span class="w">    </span><span class="nx">getField</span><span class="p">()</span><span class="o">:</span><span class="w"> </span><span class="kt">number</span><span class="p">[][]</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">field</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="c1">// 着地したときの処理</span>
<span class="w">    </span><span class="k">private</span><span class="w"> </span><span class="nx">onLanded</span><span class="p">()</span><span class="o">:</span><span class="w"> </span><span class="ow">void</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// 親ぷよをフィールドに配置</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="nx">field</span><span class="p">[</span><span class="k">this</span><span class="p">.</span><span class="nx">puyoY</span><span class="p">][</span><span class="k">this</span><span class="p">.</span><span class="nx">puyoX</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">puyoColor</span><span class="p">;</span>

<span class="w">        </span><span class="c1">// 子ぷよをフィールドに配置</span>
<span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">childX</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">puyoX</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">childOffsetX</span><span class="p">;</span>
<span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">childY</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">puyoY</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">childOffsetY</span><span class="p">;</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="nx">field</span><span class="p">[</span><span class="nx">childY</span><span class="p">][</span><span class="nx">childX</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">childColor</span><span class="p">;</span>

<span class="w">        </span><span class="c1">// 次のぷよを生成</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="nx">createNewPuyo</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="c1">// 下に移動できるかチェックする（更新版）</span>
<span class="w">    </span><span class="k">private</span><span class="w"> </span><span class="nx">canMoveDown</span><span class="p">()</span><span class="o">:</span><span class="w"> </span><span class="kt">boolean</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">nextY</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">puyoY</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mf">1</span><span class="p">;</span>
<span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">childNextY</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">puyoY</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">childOffsetY</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mf">1</span><span class="p">;</span>

<span class="w">        </span><span class="c1">// 範囲外チェック</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">nextY</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="nx">config</span><span class="p">.</span><span class="nx">stageRows</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="nx">childNextY</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="nx">config</span><span class="p">.</span><span class="nx">stageRows</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="kc">false</span><span class="p">;</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="c1">// フィールドとの衝突チェック</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">field</span><span class="p">[</span><span class="nx">nextY</span><span class="p">][</span><span class="k">this</span><span class="p">.</span><span class="nx">puyoX</span><span class="p">]</span><span class="w"> </span><span class="o">!==</span><span class="w"> </span><span class="mf">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="kc">false</span><span class="p">;</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">childX</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">puyoX</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">childOffsetX</span><span class="p">;</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">field</span><span class="p">[</span><span class="nx">childNextY</span><span class="p">][</span><span class="nx">childX</span><span class="p">]</span><span class="w"> </span><span class="o">!==</span><span class="w"> </span><span class="mf">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="kc">false</span><span class="p">;</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="kc">true</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>「着地したらフィールドに配置して、次のぷよを生成するんですね！」そうです！この実装では、以下のことを行っています：</p>
<ol>
<li><code>field</code> でフィールドの状態を管理（0 は空、それ以外はぷよの色）</li>
<li><code>onLanded()</code> で親ぷよと子ぷよをフィールドに配置</li>
<li>着地後、<code>createNewPuyo()</code> で次のぷよを生成</li>
<li><code>canMoveDown()</code> でフィールドとの衝突もチェック</li>
</ol>
<p>「テストは通りましたか？」はい、これでテストは通るはずです！これでぷよが自動的に落下し、着地したらフィールドに固定される機能が実装できました。</p>
<h3 id="todo_4">TODO リストの更新<a class="headerlink" href="#todo_4" title="Permanent link">&para;</a></h3>
<p>実装が完了したので、TODO リストを更新しましょう：</p>
<ul class="task-list">
<li class="task-list-item"><input type="checkbox" disabled checked/> 落下タイマーの実装</li>
<li class="task-list-item"><input type="checkbox" disabled checked/> 自動落下処理の実装</li>
<li class="task-list-item"><input type="checkbox" disabled checked/> 落下可能判定の実装</li>
<li class="task-list-item"><input type="checkbox" disabled checked/> 着地処理の実装</li>
<li class="task-list-item"><input type="checkbox" disabled/> ゲームループとの統合</li>
</ul>
<p>「あとはゲームループとの統合だけですね！」そうです！実際のゲームでは、<code>update()</code> メソッドをゲームループから定期的に呼び出す必要があります。実装のまえに現在の動作状況を確認しておきましょう。</p>
<h3 id="_46">画面の確認<a class="headerlink" href="#_46" title="Permanent link">&para;</a></h3>
<p>では、現在の進行状況を確認してみましょう。ぷよは落下しながら回転し左右に動きます。おや？着地したはずなのに次のぷよが出てきませんね？
それに、着地したぷよが回転できて左右に動きますね追加の作業が必要です TODOリストを追加しましょう。</p>
<ul>
<li>ぷよが着地したら固定する</li>
<li>ぷよが着地して固定したら次のぷよを出す</li>
<li>着地したぷよの上にぷよが重なる</li>
</ul>
<p>ぷよの着地、衝突判定は機能しているようですが以下のケースがうまく機能していません。ぷよは個別に重力が働く必要があるようです。</p>
<div class="highlight"><pre><span></span><code>   0  1  2  3  4  5
┌──┬──┬──┬──┬──┬──┐ 0
│  │  │  │  │  │  │
├──┼──┼──┼──┼──┼──┤ 1
│  │  │  │  │  │  │
├──┼──┼──┼──┼──┼──┤ 2
│  │  │  │ Y│ B│  │
├──┼──┼──┼──┼──┼──┤ 3
│  │  │  │ Y│  │  │
├──┼──┼──┼──┼──┼──┤ 4
│  │  │  │ Y│  │  │
└──┴──┴──┴──┴──┴──┘

凡例: Y=黄色 B=青色
</code></pre></div>
<ul>
<li>個別のぷよに重力が作用する</li>
</ul>
<h3 id="_47">テスト: 重力判定<a class="headerlink" href="#_47" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="nx">it</span><span class="p">(</span><span class="s1">&#39;個別のぷよに重力が作用する&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// Y=黄色 B=青色</span>
<span class="w">    </span><span class="c1">// 位置 (3, 9), (3, 10), (3, 11) に黄色（下端から3段積み）</span>
<span class="w">    </span><span class="nx">stage</span><span class="p">.</span><span class="nx">setPuyo</span><span class="p">(</span><span class="mf">3</span><span class="p">,</span><span class="w"> </span><span class="mf">9</span><span class="p">,</span><span class="w"> </span><span class="mf">1</span><span class="p">)</span>
<span class="w">    </span><span class="nx">stage</span><span class="p">.</span><span class="nx">setPuyo</span><span class="p">(</span><span class="mf">3</span><span class="p">,</span><span class="w"> </span><span class="mf">10</span><span class="p">,</span><span class="w"> </span><span class="mf">1</span><span class="p">)</span>
<span class="w">    </span><span class="nx">stage</span><span class="p">.</span><span class="nx">setPuyo</span><span class="p">(</span><span class="mf">3</span><span class="p">,</span><span class="w"> </span><span class="mf">11</span><span class="p">,</span><span class="w"> </span><span class="mf">1</span><span class="p">)</span>
<span class="w">    </span><span class="c1">// 位置 (4, 2) に青色 (浮いている)</span>
<span class="w">    </span><span class="nx">stage</span><span class="p">.</span><span class="nx">setPuyo</span><span class="p">(</span><span class="mf">4</span><span class="p">,</span><span class="w"> </span><span class="mf">2</span><span class="p">,</span><span class="w"> </span><span class="mf">2</span><span class="p">)</span>

<span class="w">    </span><span class="c1">// 重力を適用</span>
<span class="w">    </span><span class="nx">stage</span><span class="p">.</span><span class="nx">applyGravity</span><span class="p">()</span>

<span class="w">    </span><span class="c1">// 青ぷよが1マス落ちていることを確認</span>
<span class="w">    </span><span class="nx">expect</span><span class="p">(</span><span class="nx">stage</span><span class="p">.</span><span class="nx">getPuyo</span><span class="p">(</span><span class="mf">4</span><span class="p">,</span><span class="w"> </span><span class="mf">2</span><span class="p">)).</span><span class="nx">toBe</span><span class="p">(</span><span class="mf">0</span><span class="p">)</span>
<span class="w">    </span><span class="nx">expect</span><span class="p">(</span><span class="nx">stage</span><span class="p">.</span><span class="nx">getPuyo</span><span class="p">(</span><span class="mf">4</span><span class="p">,</span><span class="w"> </span><span class="mf">3</span><span class="p">)).</span><span class="nx">toBe</span><span class="p">(</span><span class="mf">2</span><span class="p">)</span>
<span class="w">    </span><span class="c1">// 黄色ぷよは変わらない（下端に積み重なっているので動かない）</span>
<span class="w">    </span><span class="nx">expect</span><span class="p">(</span><span class="nx">stage</span><span class="p">.</span><span class="nx">getPuyo</span><span class="p">(</span><span class="mf">3</span><span class="p">,</span><span class="w"> </span><span class="mf">9</span><span class="p">)).</span><span class="nx">toBe</span><span class="p">(</span><span class="mf">1</span><span class="p">)</span>
<span class="w">    </span><span class="nx">expect</span><span class="p">(</span><span class="nx">stage</span><span class="p">.</span><span class="nx">getPuyo</span><span class="p">(</span><span class="mf">3</span><span class="p">,</span><span class="w"> </span><span class="mf">10</span><span class="p">)).</span><span class="nx">toBe</span><span class="p">(</span><span class="mf">1</span><span class="p">)</span>
<span class="w">    </span><span class="nx">expect</span><span class="p">(</span><span class="nx">stage</span><span class="p">.</span><span class="nx">getPuyo</span><span class="p">(</span><span class="mf">3</span><span class="p">,</span><span class="w"> </span><span class="mf">11</span><span class="p">)).</span><span class="nx">toBe</span><span class="p">(</span><span class="mf">1</span><span class="p">)</span>
<span class="p">})</span>
</code></pre></div>
<h3 id="_48">実装: 重力判定<a class="headerlink" href="#_48" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1">// ステージ上のぷよに重力を適用（1マスずつ落とす）</span>
<span class="c1">// 戻り値: 落下したぷよがあれば true</span>
<span class="nx">applyGravity</span><span class="p">()</span><span class="o">:</span><span class="w"> </span><span class="kt">boolean</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// フィールドのコピーを作成（移動前の状態を保存）</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">originalField</span><span class="o">:</span><span class="w"> </span><span class="kt">number</span><span class="p">[][]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">field</span><span class="p">.</span><span class="nx">map</span><span class="p">((</span><span class="nx">row</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">[...</span><span class="nx">row</span><span class="p">])</span>

<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="nx">hasFallen</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span>

<span class="w">    </span><span class="c1">// 下から上に向かって各列をスキャン（列ごとに処理）</span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kd">let</span><span class="w"> </span><span class="nx">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0</span><span class="p">;</span><span class="w"> </span><span class="nx">x</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">config</span><span class="p">.</span><span class="nx">stageCols</span><span class="p">;</span><span class="w"> </span><span class="nx">x</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kd">let</span><span class="w"> </span><span class="nx">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">config</span><span class="p">.</span><span class="nx">stageRows</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mf">2</span><span class="p">;</span><span class="w"> </span><span class="nx">y</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="mf">0</span><span class="p">;</span><span class="w"> </span><span class="nx">y</span><span class="o">--</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="kd">const</span><span class="w"> </span><span class="nx">color</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">originalField</span><span class="p">[</span><span class="nx">y</span><span class="p">][</span><span class="nx">x</span><span class="p">]</span>
<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">color</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mf">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="c1">// 元のフィールドで下に空きがあるかチェック</span>
<span class="w">                </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">originalField</span><span class="p">[</span><span class="nx">y</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mf">1</span><span class="p">][</span><span class="nx">x</span><span class="p">]</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="mf">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="c1">// 1マス下に移動</span>
<span class="w">                    </span><span class="k">this</span><span class="p">.</span><span class="nx">field</span><span class="p">[</span><span class="nx">y</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mf">1</span><span class="p">][</span><span class="nx">x</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">color</span>
<span class="w">                    </span><span class="k">this</span><span class="p">.</span><span class="nx">field</span><span class="p">[</span><span class="nx">y</span><span class="p">][</span><span class="nx">x</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0</span>
<span class="w">                    </span><span class="nx">hasFallen</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span>
<span class="w">                </span><span class="p">}</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nx">hasFallen</span>
<span class="p">}</span>
</code></pre></div>
<h3 id="_49">実装: ゲームループとの統合<a class="headerlink" href="#_49" title="Permanent link">&para;</a></h3>
<p>ゲームループで deltaTime を計算し、Player の <code>updateWithDelta</code> を呼び出すようにします。</p>
<h4 id="game_1">Game クラスの拡張<a class="headerlink" href="#game_1" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="c1">// src/game.ts</span>
<span class="k">export</span><span class="w"> </span><span class="kd">class</span><span class="w"> </span><span class="nx">Game</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">private</span><span class="w"> </span><span class="nx">lastTime</span><span class="o">:</span><span class="w"> </span><span class="kt">number</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0</span>

<span class="w">    </span><span class="nx">loop</span><span class="p">(</span><span class="nx">currentTime</span><span class="o">:</span><span class="w"> </span><span class="kt">number</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0</span><span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="ow">void</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// 経過時間を計算（ミリ秒）</span>
<span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">deltaTime</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">currentTime</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">lastTime</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="nx">lastTime</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">currentTime</span>

<span class="w">        </span><span class="c1">// ゲームループの処理</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="nx">update</span><span class="p">(</span><span class="nx">deltaTime</span><span class="p">)</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="nx">draw</span><span class="p">()</span>
<span class="w">        </span><span class="nx">requestAnimationFrame</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">loop</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="k">this</span><span class="p">))</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="k">private</span><span class="w"> </span><span class="nx">update</span><span class="p">(</span><span class="nx">deltaTime</span><span class="o">:</span><span class="w"> </span><span class="kt">number</span><span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="ow">void</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="nx">frame</span><span class="o">++</span>

<span class="w">        </span><span class="c1">// モードに応じた処理</span>
<span class="w">        </span><span class="k">switch</span><span class="w"> </span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">mode</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">case</span><span class="w"> </span><span class="s1">&#39;newPuyo&#39;</span><span class="o">:</span>
<span class="w">                </span><span class="c1">// 新しいぷよを作成</span>
<span class="w">                </span><span class="k">this</span><span class="p">.</span><span class="nx">player</span><span class="p">.</span><span class="nx">createNewPuyo</span><span class="p">()</span>
<span class="w">                </span><span class="k">this</span><span class="p">.</span><span class="nx">mode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;playing&#39;</span>
<span class="w">                </span><span class="k">break</span>

<span class="w">            </span><span class="k">case</span><span class="w"> </span><span class="s1">&#39;playing&#39;</span><span class="o">:</span>
<span class="w">                </span><span class="c1">// プレイ中の処理（キー入力と自由落下）</span>
<span class="w">                </span><span class="k">this</span><span class="p">.</span><span class="nx">player</span><span class="p">.</span><span class="nx">updateWithDelta</span><span class="p">(</span><span class="nx">deltaTime</span><span class="p">)</span>

<span class="w">                </span><span class="c1">// 着地したら重力チェックに移行</span>
<span class="w">                </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">player</span><span class="p">.</span><span class="nx">hasLanded</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="k">this</span><span class="p">.</span><span class="nx">mode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;checkFall&#39;</span>
<span class="w">                </span><span class="p">}</span>
<span class="w">                </span><span class="k">break</span>

<span class="w">            </span><span class="k">case</span><span class="w"> </span><span class="s1">&#39;checkFall&#39;</span><span class="o">:</span>
<span class="w">                </span><span class="c1">// 重力を適用</span>
<span class="w">                </span><span class="kd">const</span><span class="w"> </span><span class="nx">hasFallen</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">stage</span><span class="p">.</span><span class="nx">applyGravity</span><span class="p">()</span>
<span class="w">                </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">hasFallen</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="c1">// ぷよが落下した場合、falling モードへ</span>
<span class="w">                    </span><span class="k">this</span><span class="p">.</span><span class="nx">mode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;falling&#39;</span>
<span class="w">                </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="c1">// 落下するぷよがない場合、次のぷよを出す</span>
<span class="w">                    </span><span class="k">this</span><span class="p">.</span><span class="nx">mode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;newPuyo&#39;</span>
<span class="w">                </span><span class="p">}</span>
<span class="w">                </span><span class="k">break</span>

<span class="w">            </span><span class="k">case</span><span class="w"> </span><span class="s1">&#39;falling&#39;</span><span class="o">:</span>
<span class="w">                </span><span class="c1">// 落下アニメーション用（一定フレーム待機）</span>
<span class="w">                </span><span class="c1">// 簡略化のため、すぐに checkFall に戻る</span>
<span class="w">                </span><span class="k">this</span><span class="p">.</span><span class="nx">mode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;checkFall&#39;</span>
<span class="w">                </span><span class="k">break</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>「<code>requestAnimationFrame</code> の引数 <code>currentTime</code> を使うんですね！」そうです！ブラウザが提供する高精度なタイムスタンプを使って、フレーム間の経過時間を計算します。</p>
<h4 id="player_1">Player クラスの着地判定<a class="headerlink" href="#player_1" title="Permanent link">&para;</a></h4>
<p>Player クラスに着地判定と固定処理を追加します：</p>
<div class="highlight"><pre><span></span><code><span class="c1">// src/player.ts</span>
<span class="k">export</span><span class="w"> </span><span class="kd">class</span><span class="w"> </span><span class="nx">Player</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">private</span><span class="w"> </span><span class="nx">landed</span><span class="o">:</span><span class="w"> </span><span class="kt">boolean</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span>

<span class="w">    </span><span class="nx">updateWithDelta</span><span class="p">(</span><span class="nx">deltaTime</span><span class="o">:</span><span class="w"> </span><span class="kt">number</span><span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="ow">void</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// タイマーを進める</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="nx">dropTimer</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="nx">deltaTime</span>

<span class="w">        </span><span class="c1">// 落下間隔に達したら落下処理</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">dropTimer</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">dropInterval</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="nx">drop</span><span class="p">()</span>
<span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="nx">dropTimer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="c1">// 既存の update 処理も実行</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="nx">update</span><span class="p">()</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="k">private</span><span class="w"> </span><span class="nx">drop</span><span class="p">()</span><span class="o">:</span><span class="w"> </span><span class="ow">void</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// 着地判定: 下に移動できるかを確認</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">canMoveDown</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="nx">puyoY</span><span class="o">++</span>
<span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="c1">// 着地したらステージに固定</span>
<span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="nx">fixToStage</span><span class="p">()</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="k">private</span><span class="w"> </span><span class="nx">canMoveDown</span><span class="p">()</span><span class="o">:</span><span class="w"> </span><span class="kt">boolean</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// 下端チェック</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">puyoY</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">config</span><span class="p">.</span><span class="nx">stageRows</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mf">1</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="kc">false</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="c1">// 2つ目のぷよの位置を計算</span>
<span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">offsetX</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="mf">1</span><span class="p">][</span><span class="k">this</span><span class="p">.</span><span class="nx">rotation</span><span class="p">]</span>
<span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">offsetY</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="o">-</span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">][</span><span class="k">this</span><span class="p">.</span><span class="nx">rotation</span><span class="p">]</span>
<span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">nextX</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">puyoX</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">offsetX</span>
<span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">nextY</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">puyoY</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">offsetY</span>

<span class="w">        </span><span class="c1">// 軸ぷよの下にぷよがあるかチェック</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">stage</span><span class="p">.</span><span class="nx">getPuyo</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">puyoX</span><span class="p">,</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">puyoY</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mf">1</span><span class="p">)</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mf">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="kc">false</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="c1">// 2つ目のぷよの下にぷよがあるかチェック</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">offsetY</span><span class="w"> </span><span class="o">!==</span><span class="w"> </span><span class="mf">1</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">nextY</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">config</span><span class="p">.</span><span class="nx">stageRows</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mf">1</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="k">return</span><span class="w"> </span><span class="kc">false</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">stage</span><span class="p">.</span><span class="nx">getPuyo</span><span class="p">(</span><span class="nx">nextX</span><span class="p">,</span><span class="w"> </span><span class="nx">nextY</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mf">1</span><span class="p">)</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mf">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="k">return</span><span class="w"> </span><span class="kc">false</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="kc">true</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="k">private</span><span class="w"> </span><span class="nx">fixToStage</span><span class="p">()</span><span class="o">:</span><span class="w"> </span><span class="ow">void</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// 軸ぷよをステージに固定</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="nx">stage</span><span class="p">.</span><span class="nx">setPuyo</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">puyoX</span><span class="p">,</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">puyoY</span><span class="p">,</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">puyoType</span><span class="p">)</span>

<span class="w">        </span><span class="c1">// 2つ目のぷよの位置を計算</span>
<span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">offsetX</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="mf">1</span><span class="p">][</span><span class="k">this</span><span class="p">.</span><span class="nx">rotation</span><span class="p">]</span>
<span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">offsetY</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="o">-</span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">][</span><span class="k">this</span><span class="p">.</span><span class="nx">rotation</span><span class="p">]</span>
<span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">nextX</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">puyoX</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">offsetX</span>
<span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">nextY</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">puyoY</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">offsetY</span>

<span class="w">        </span><span class="c1">// 2つ目のぷよをステージに固定</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="nx">stage</span><span class="p">.</span><span class="nx">setPuyo</span><span class="p">(</span><span class="nx">nextX</span><span class="p">,</span><span class="w"> </span><span class="nx">nextY</span><span class="p">,</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">nextPuyoType</span><span class="p">)</span>

<span class="w">        </span><span class="c1">// 着地フラグを立てる</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="nx">landed</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nx">hasLanded</span><span class="p">()</span><span class="o">:</span><span class="w"> </span><span class="kt">boolean</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">landed</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nx">createNewPuyo</span><span class="p">()</span><span class="o">:</span><span class="w"> </span><span class="ow">void</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// 新しいぷよを作成</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="nx">puyoX</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">Player</span><span class="p">.</span><span class="nx">INITIAL_PUYO_X</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="nx">puyoY</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">Player</span><span class="p">.</span><span class="nx">INITIAL_PUYO_Y</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="nx">puyoType</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">getRandomPuyoType</span><span class="p">()</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="nx">nextPuyoType</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">getRandomPuyoType</span><span class="p">()</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="nx">rotation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="nx">landed</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span><span class="w"> </span><span class="c1">// 着地フラグをリセット</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>「着地したらステージに固定して、フラグを立てるんですね！」その通りです。これで Game クラスが着地を検知して、次のぷよを出せるようになります。</p>
<h3 id="4_1">イテレーション4のまとめ<a class="headerlink" href="#4_1" title="Permanent link">&para;</a></h3>
<p>このイテレーションでは、ぷよの自由落下と着地処理、重力判定を実装しました。以下がイテレーション 4 で実施した内容のまとめです：</p>
<ol>
<li>
<p><strong>自由落下機能</strong></p>
<ul>
<li>dropTimer と dropInterval でタイミング管理</li>
<li>updateWithDelta メソッドで時間経過に応じた落下処理</li>
<li>1 秒間隔（1000ms）で 1 マスずつ落下</li>
</ul>
</li>
<li>
<p><strong>着地判定</strong></p>
<ul>
<li>canMoveDown メソッド：下に移動できるかチェック</li>
<li>下端チェック：puyoY &gt;= stageRows - 1</li>
<li>軸ぷよの下にぷよがあるかチェック</li>
<li>2 つ目のぷよの下にぷよがあるかチェック</li>
</ul>
</li>
<li>
<p><strong>ステージへの固定</strong></p>
<ul>
<li>fixToStage メソッド：着地したぷよをステージに配置</li>
<li>軸ぷよと 2 つ目のぷよを両方固定</li>
<li>着地フラグ（landed）を立てる</li>
</ul>
</li>
<li>
<p><strong>着地フラグの管理</strong></p>
<ul>
<li>landed プロパティで着地状態を管理</li>
<li>hasLanded メソッドで外部から着地状態を確認</li>
<li>createNewPuyo で着地フラグをリセット</li>
</ul>
</li>
<li>
<p><strong>次のぷよ生成</strong></p>
<ul>
<li>Game クラスで着地を検知</li>
<li>checkFall モードで重力を適用</li>
<li>重力適用後、次のぷよを出現</li>
</ul>
</li>
<li>
<p><strong>重力処理（Stage クラス）</strong></p>
<ul>
<li>applyGravity メソッド：ステージ上のぷよに重力を適用</li>
<li>フィールドのコピーを作成して移動前の状態を保存</li>
<li>下から上に向かって各列をスキャン</li>
<li>1 マスずつ落下（一度の呼び出しで 1 マス）</li>
<li>落下したぷよがあれば true を返す</li>
</ul>
</li>
<li>
<p><strong>ゲームフロー</strong></p>
<ul>
<li>newPuyo → playing → (着地) → checkFall → falling → checkFall → ... → newPuyo</li>
<li>checkFall: 重力を適用して落下するぷよがあるかチェック</li>
<li>falling: 落下アニメーション（簡略化のため即座に checkFall に戻る）</li>
</ul>
</li>
<li>
<p><strong>テストの作成</strong></p>
<ul>
<li>自由落下のテスト（3 テスト）<ul>
<li>指定時間が経過すると、ぷよが 1 マス下に落ちる</li>
<li>指定時間未満では、ぷよは落ちない</li>
<li>下端に達した場合、それ以上落ちない</li>
</ul>
</li>
<li>着地のテスト（3 テスト）<ul>
<li>ぷよが下端に着地したら固定される</li>
<li>ぷよが他のぷよの上に着地したら固定される</li>
<li>ぷよが着地したら着地フラグが立つ</li>
</ul>
</li>
<li>重力判定のテスト（3 テスト）<ul>
<li>個別のぷよに重力が作用する</li>
<li>浮いているぷよがない場合、何も変化しない</li>
<li>複数の浮いているぷよに重力が作用する</li>
</ul>
</li>
<li>Game クラスのテスト（1 テスト）<ul>
<li>ぷよが着地したら次のぷよが出る</li>
</ul>
</li>
<li>合計 28 テストすべて成功</li>
</ul>
</li>
<li>
<p><strong>学んだ重要な概念</strong></p>
<ul>
<li>deltaTime による時間ベースの更新</li>
<li>requestAnimationFrame の currentTime 引数の活用</li>
<li>着地判定の複合的なチェック（下端、軸ぷよ、2 つ目のぷよ）</li>
<li>ゲームモードによる状態遷移</li>
<li>フィールドコピーによる安全な重力適用</li>
</ul>
</li>
</ol>
<p>このイテレーションにより、ぷよが自動的に落下し、着地後に次のぷよが出現するようになり、ぷよぷよの基本的なゲームループが完成しました。</p>
<h2 id="5">イテレーション5: ぷよの高速落下の実装<a class="headerlink" href="#5" title="Permanent link">&para;</a></h2>
<p>「回転ができるようになったけど、ぷよぷよってもっと早く落とせたよね？」そうですね！ぷよぷよでは、プレイヤーが下キーを押すことで、ぷよを素早く落下させることができます。今回は、その「高速落下」機能を実装していきましょう！</p>
<h3 id="_50">ユーザーストーリー<a class="headerlink" href="#_50" title="Permanent link">&para;</a></h3>
<p>まずは、このイテレーションで実装するユーザーストーリーを確認しましょう：</p>
<blockquote>
<p>プレイヤーとして、ぷよを素早く落下させることができる</p>
</blockquote>
<p>「早く次のぷよを落としたい！」というときに、下キーを押して素早く落下させる機能は、ゲームのテンポを良くするために重要ですね。</p>
<h3 id="todo_5">TODOリスト<a class="headerlink" href="#todo_5" title="Permanent link">&para;</a></h3>
<p>「どんな作業が必要になりますか？」このユーザーストーリーを実現するために、TODOリストを作成してみましょう。</p>
<p>「ぷよを素早く落下させる」という機能を実現するためには、以下のようなタスクが必要そうですね：</p>
<ul>
<li>下キー入力の検出を実装する（キーボードの下キーが押されたことを検知する）</li>
<li>高速落下処理を実装する（下キーが押されているときは落下速度を上げる）</li>
<li>落下可能かどうかのチェックを実装する（下に障害物がある場合は落下できないようにする）</li>
<li>着地判定を実装する（ぷよが着地したことを検知する）</li>
</ul>
<p>「なるほど、順番に実装していけばいいんですね！」そうです、一つずつ進めていきましょう。テスト駆動開発の流れに沿って、まずはテストから書いていきますよ。</p>
<h3 id="_51">テスト: 高速落下<a class="headerlink" href="#_51" title="Permanent link">&para;</a></h3>
<p>「最初に何をテストすればいいんでしょうか？」まずは、下キーが押されたときに落下速度が上がることと、ぷよが下に移動できるかどうかをテストしましょう。</p>
<div class="highlight"><pre><span></span><code><span class="c1">// src/tests/player.test.ts（続き）</span>
<span class="nx">describe</span><span class="p">(</span><span class="s1">&#39;高速落下&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">beforeEach</span><span class="p">(()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// 新しいぷよを作成</span>
<span class="w">        </span><span class="nx">player</span><span class="p">.</span><span class="nx">createNewPuyo</span><span class="p">();</span>
<span class="w">    </span><span class="p">});</span>

<span class="w">    </span><span class="nx">it</span><span class="p">(</span><span class="s1">&#39;下キーが押されていると、落下速度が上がる&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// 下キーを押す</span>
<span class="w">        </span><span class="nb">document</span><span class="p">.</span><span class="nx">dispatchEvent</span><span class="p">(</span><span class="ow">new</span><span class="w"> </span><span class="nx">KeyboardEvent</span><span class="p">(</span><span class="s1">&#39;keydown&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">key</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;ArrowDown&#39;</span><span class="w"> </span><span class="p">}));</span>

<span class="w">        </span><span class="c1">// 通常の落下処理</span>
<span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">normalDropSpeed</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">1</span><span class="p">;</span>
<span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">fastDropSpeed</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">player</span><span class="p">.</span><span class="nx">getDropSpeed</span><span class="p">();</span>

<span class="w">        </span><span class="c1">// 高速落下の速度が通常より速いことを確認</span>
<span class="w">        </span><span class="nx">expect</span><span class="p">(</span><span class="nx">fastDropSpeed</span><span class="p">).</span><span class="nx">toBeGreaterThan</span><span class="p">(</span><span class="nx">normalDropSpeed</span><span class="p">);</span>
<span class="w">    </span><span class="p">});</span>

<span class="w">    </span><span class="nx">it</span><span class="p">(</span><span class="s1">&#39;下に移動できる場合、下に移動する&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// 初期位置を記録</span>
<span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">initialY</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">player</span><span class="p">[</span><span class="s1">&#39;puyoY&#39;</span><span class="p">];</span>

<span class="w">        </span><span class="c1">// 下に移動</span>
<span class="w">        </span><span class="nx">player</span><span class="p">.</span><span class="nx">moveDown</span><span class="p">();</span>

<span class="w">        </span><span class="c1">// 位置が1つ下に移動していることを確認</span>
<span class="w">        </span><span class="nx">expect</span><span class="p">(</span><span class="nx">player</span><span class="p">[</span><span class="s1">&#39;puyoY&#39;</span><span class="p">]).</span><span class="nx">toBe</span><span class="p">(</span><span class="nx">initialY</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mf">1</span><span class="p">);</span>
<span class="w">    </span><span class="p">});</span>

<span class="w">    </span><span class="nx">it</span><span class="p">(</span><span class="s1">&#39;下に障害物がある場合、下に移動できない&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// ステージの一番下に移動</span>
<span class="w">        </span><span class="nx">player</span><span class="p">[</span><span class="s1">&#39;puyoY&#39;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">config</span><span class="p">.</span><span class="nx">stageRows</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mf">1</span><span class="p">;</span>

<span class="w">        </span><span class="c1">// 下に移動を試みる</span>
<span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">canMove</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">player</span><span class="p">.</span><span class="nx">moveDown</span><span class="p">();</span>

<span class="w">        </span><span class="c1">// 移動できないことを確認</span>
<span class="w">        </span><span class="nx">expect</span><span class="p">(</span><span class="nx">canMove</span><span class="p">).</span><span class="nx">toBe</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span>
<span class="w">        </span><span class="nx">expect</span><span class="p">(</span><span class="nx">player</span><span class="p">[</span><span class="s1">&#39;puyoY&#39;</span><span class="p">]).</span><span class="nx">toBe</span><span class="p">(</span><span class="nx">config</span><span class="p">.</span><span class="nx">stageRows</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mf">1</span><span class="p">);</span>
<span class="w">    </span><span class="p">});</span>
<span class="p">});</span>
</code></pre></div>
<p>「このテストでは何を確認しているんですか？」このテストでは、以下の3つのケースを確認しています：</p>
<ol>
<li>下キーが押されていると、落下速度が通常より速くなるか</li>
<li>通常の状態で下に移動できるか</li>
<li>ステージの一番下にいるときに下に移動しようとしても移動できないか</li>
</ol>
<p>「なるほど、ゲームの端を超えて移動できないようにするんですね！」そうです！ゲームの画面外にぷよが出てしまうと困りますからね。では、このテストが通るように実装していきましょう。</p>
<h3 id="_52">実装: 高速落下<a class="headerlink" href="#_52" title="Permanent link">&para;</a></h3>
<p>「テストが失敗することを確認したら、実装に進みましょう！」そうですね。では、高速落下の機能を実装していきましょう。</p>
<div class="highlight"><pre><span></span><code><span class="c1">// src/player.ts（続き）</span>
<span class="nx">getDropSpeed</span><span class="p">()</span><span class="o">:</span><span class="w"> </span><span class="kt">number</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// 下キーが押されていれば高速落下</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">inputKeyDown</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="nx">10</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">1</span><span class="p">;</span>
<span class="p">}</span>

<span class="nx">moveDown</span><span class="p">()</span><span class="o">:</span><span class="w"> </span><span class="kt">boolean</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// 下に移動できるかチェック</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">puyoY</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">config</span><span class="p">.</span><span class="nx">stageRows</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mf">1</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="nx">puyoY</span><span class="o">++</span><span class="p">;</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="kc">true</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="kc">false</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
<p>「シンプルですね！」そうですね。高速落下の処理自体はとてもシンプルです。<code>getDropSpeed</code>メソッドでは、下キーが押されているかどうかを確認し、押されていれば通常の10倍の速度で落下するようにしています。また、<code>moveDown</code>メソッドでは、ぷよがステージの下端に到達していなければ下に移動できるようにしています。</p>
<p>「なぜ<code>moveDown</code>メソッドは<code>boolean</code>を返すんですか？」良い質問ですね！<code>moveDown</code>メソッドは、ぷよが実際に下に移動できたかどうかを返します。これは、ぷよが着地したかどうかを判定するために使われます。ぷよが下に移動できなかった場合（<code>false</code>が返された場合）、それはぷよが着地したことを意味します。</p>
<p>「これでテストは通りましたか？」はい、これでテストは通るはずです！これでぷよを素早く落下させる基本的な機能が実装できました。プレイヤーがキーボードの下キーを押すと、ぷよが素早く落下し、ステージの下端や他のぷよに衝突すると停止するようになりました。</p>
<p>「でも、まだ実際にキー入力に応じて落下速度が変わる処理が実装されていませんよね？」鋭い指摘ですね！確かに、キーが押されたことを検知するフラグと、落下速度を変更するメソッドはできましたが、それらを連携させる部分はまだ実装していません。</p>
<h3 id="_53">実装: ゲームループとの統合<a class="headerlink" href="#_53" title="Permanent link">&para;</a></h3>
<p>ゲームループで高速落下の速度を反映するように <code>updateWithDelta</code> メソッドを修正します。</p>
<div class="highlight"><pre><span></span><code><span class="c1">// src/player.ts（続き）</span>
<span class="nx">updateWithDelta</span><span class="p">(</span><span class="nx">deltaTime</span><span class="o">:</span><span class="w"> </span><span class="kt">number</span><span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="ow">void</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// タイマーを進める（高速落下の速度を反映）</span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">dropTimer</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="nx">deltaTime</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">getDropSpeed</span><span class="p">()</span>

<span class="w">    </span><span class="c1">// 落下間隔に達したら落下処理</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">dropTimer</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">dropInterval</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">drop</span><span class="p">()</span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">dropTimer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0</span><span class="w"> </span><span class="c1">// タイマーをリセット</span>
<span class="p">}</span>

<span class="c1">// 既存の update 処理も実行</span>
<span class="k">this</span><span class="p">.</span><span class="nx">update</span><span class="p">()</span>
<span class="p">}</span>
</code></pre></div>
<p>「なるほど！<code>deltaTime</code> に <code>getDropSpeed()</code> を掛けることで、下キーが押されているときはタイマーが10倍速く進むんですね！」その通りです！これで下キーを押している間は通常の10倍の速さでぷよが落下するようになりました。</p>
<h3 id="5_1">イテレーション5のまとめ<a class="headerlink" href="#5_1" title="Permanent link">&para;</a></h3>
<p>このイテレーションでは、ぷよの高速落下機能を実装しました。以下がイテレーション 5 で実施した内容のまとめです：</p>
<ol>
<li>
<p><strong>高速落下機能</strong></p>
<ul>
<li>getDropSpeed メソッド：下キーが押されているかチェック</li>
<li>押されていれば通常の10倍の速度（10）を返す</li>
<li>押されていなければ通常速度（1）を返す</li>
</ul>
</li>
<li>
<p><strong>moveDown メソッド</strong></p>
<ul>
<li>下に移動できるかチェック</li>
<li>移動できれば puyoY を1増やして true を返す</li>
<li>移動できなければ false を返す</li>
<li>canMoveDown を使って安全に移動判定</li>
</ul>
</li>
<li>
<p><strong>ゲームループとの統合</strong></p>
<ul>
<li>updateWithDelta メソッドを修正</li>
<li>dropTimer に deltaTime * getDropSpeed() を加算</li>
<li>高速落下時はタイマーが10倍速く進む</li>
</ul>
</li>
<li>
<p><strong>テストの作成</strong></p>
<ul>
<li>高速落下のテスト（3テスト）<ul>
<li>下キーが押されていると、落下速度が上がる</li>
<li>下に移動できる場合、下に移動する</li>
<li>下に障害物がある場合、下に移動できない</li>
</ul>
</li>
<li>合計31テストすべて成功</li>
</ul>
</li>
<li>
<p><strong>学んだ重要な概念</strong></p>
<ul>
<li>速度倍率による時間制御</li>
<li>boolean 返り値による移動成功判定</li>
<li>既存の canMoveDown メソッドの再利用</li>
</ul>
</li>
</ol>
<p>このイテレーションにより、プレイヤーが下キーを押すことでぷよを素早く落下させることができるようになり、ゲームのテンポが向上しました。
今回は「ぷよを素早く落下させる」という基本機能を実装しました。次のイテレーションでは、「ぷよを消去する」機能を実装していきましょう！</p>
<h2 id="6">イテレーション6: ぷよの消去の実装<a class="headerlink" href="#6" title="Permanent link">&para;</a></h2>
<p>「ぷよが落ちてくるようになったけど、ぷよぷよの醍醐味はぷよを消すことですよね？」そうですね！ぷよぷよの最も重要な要素の一つは、同じ色のぷよを4つ以上つなげると消去できる機能です。今回は、その「ぷよの消去」機能を実装していきましょう！</p>
<h3 id="_54">ユーザーストーリー<a class="headerlink" href="#_54" title="Permanent link">&para;</a></h3>
<p>まずは、このイテレーションで実装するユーザーストーリーを確認しましょう：</p>
<blockquote>
<p>プレイヤーとして、同じ色のぷよを4つ以上つなげると消去できる</p>
</blockquote>
<p>「これがぷよぷよの基本ルールですね！」そうです！同じ色のぷよを4つ以上つなげると消去できるというのが、ぷよぷよの基本的なルールです。これを実装することで、ゲームとしての面白さが大きく向上しますね。</p>
<h3 id="todo_6">TODOリスト<a class="headerlink" href="#todo_6" title="Permanent link">&para;</a></h3>
<p>「どんな作業が必要になりますか？」このユーザーストーリーを実現するために、TODOリストを作成してみましょう。</p>
<p>「ぷよを消去する」という機能を実現するためには、以下のようなタスクが必要そうですね：</p>
<ul>
<li>ぷよの接続判定を実装する（隣接する同じ色のぷよを検出する）</li>
<li>4つ以上つながったぷよの検出を実装する（消去対象となるぷよのグループを特定する）</li>
<li>ぷよの消去処理を実装する（消去対象のぷよを実際に消す）</li>
<li>消去後の落下処理を実装する（消去された後の空きスペースにぷよが落ちてくる）</li>
</ul>
<p>「なるほど、順番に実装していけばいいんですね！」そうです、一つずつ進めていきましょう。テスト駆動開発の流れに沿って、まずはテストから書いていきますよ。</p>
<h3 id="_55">テスト: ぷよの接続判定<a class="headerlink" href="#_55" title="Permanent link">&para;</a></h3>
<p>「最初に何をテストすればいいんでしょうか？」まずは、ぷよの接続判定をテストしましょう。同じ色のぷよが4つ以上つながっているかどうかを判定する機能が必要です。</p>
<div class="highlight"><pre><span></span><code><span class="c1">// src/tests/stage.test.ts</span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">describe</span><span class="p">,</span><span class="w"> </span><span class="nx">it</span><span class="p">,</span><span class="w"> </span><span class="nx">expect</span><span class="p">,</span><span class="w"> </span><span class="nx">beforeEach</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;vitest&#39;</span><span class="p">;</span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">Stage</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;../stage&#39;</span><span class="p">;</span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">Config</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;../config&#39;</span><span class="p">;</span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">PuyoImage</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;../puyoimage&#39;</span><span class="p">;</span>

<span class="nx">describe</span><span class="p">(</span><span class="s1">&#39;ステージ&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="nx">config</span><span class="o">:</span><span class="w"> </span><span class="kt">Config</span><span class="p">;</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="nx">puyoImage</span><span class="o">:</span><span class="w"> </span><span class="kt">PuyoImage</span><span class="p">;</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="nx">stage</span><span class="o">:</span><span class="w"> </span><span class="kt">Stage</span><span class="p">;</span>

<span class="w">    </span><span class="nx">beforeEach</span><span class="p">(()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// DOMの準備</span>
<span class="w">        </span><span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">innerHTML</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="sb">`</span>
<span class="sb">            &lt;div id=&quot;stage&quot;&gt;&lt;/div&gt;</span>
<span class="sb">        `</span><span class="p">;</span>
<span class="w">        </span><span class="nx">config</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">Config</span><span class="p">();</span>
<span class="w">        </span><span class="nx">puyoImage</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">PuyoImage</span><span class="p">(</span><span class="nx">config</span><span class="p">);</span>
<span class="w">        </span><span class="nx">stage</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">Stage</span><span class="p">(</span><span class="nx">config</span><span class="p">,</span><span class="w"> </span><span class="nx">puyoImage</span><span class="p">);</span>
<span class="w">    </span><span class="p">});</span>

<span class="w">    </span><span class="nx">describe</span><span class="p">(</span><span class="s1">&#39;ぷよの接続判定&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">it</span><span class="p">(</span><span class="s1">&#39;同じ色のぷよが4つつながっていると、消去対象になる&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="c1">// ステージにぷよを配置（1は赤ぷよ）</span>
<span class="w">            </span><span class="c1">// 0 0 0 0 0 0</span>
<span class="w">            </span><span class="c1">// 0 0 0 0 0 0</span>
<span class="w">            </span><span class="c1">// 0 0 0 0 0 0</span>
<span class="w">            </span><span class="c1">// 0 0 0 0 0 0</span>
<span class="w">            </span><span class="c1">// 0 0 0 0 0 0</span>
<span class="w">            </span><span class="c1">// 0 0 0 0 0 0</span>
<span class="w">            </span><span class="c1">// 0 0 0 0 0 0</span>
<span class="w">            </span><span class="c1">// 0 0 0 0 0 0</span>
<span class="w">            </span><span class="c1">// 0 0 0 0 0 0</span>
<span class="w">            </span><span class="c1">// 0 0 0 0 0 0</span>
<span class="w">            </span><span class="c1">// 0 1 1 0 0 0</span>
<span class="w">            </span><span class="c1">// 0 1 1 0 0 0</span>
<span class="w">            </span><span class="nx">stage</span><span class="p">.</span><span class="nx">setPuyo</span><span class="p">(</span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="mf">10</span><span class="p">,</span><span class="w"> </span><span class="mf">1</span><span class="p">);</span>
<span class="w">            </span><span class="nx">stage</span><span class="p">.</span><span class="nx">setPuyo</span><span class="p">(</span><span class="mf">2</span><span class="p">,</span><span class="w"> </span><span class="mf">10</span><span class="p">,</span><span class="w"> </span><span class="mf">1</span><span class="p">);</span>
<span class="w">            </span><span class="nx">stage</span><span class="p">.</span><span class="nx">setPuyo</span><span class="p">(</span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="mf">11</span><span class="p">,</span><span class="w"> </span><span class="mf">1</span><span class="p">);</span>
<span class="w">            </span><span class="nx">stage</span><span class="p">.</span><span class="nx">setPuyo</span><span class="p">(</span><span class="mf">2</span><span class="p">,</span><span class="w"> </span><span class="mf">11</span><span class="p">,</span><span class="w"> </span><span class="mf">1</span><span class="p">);</span>

<span class="w">            </span><span class="c1">// 消去判定</span>
<span class="w">            </span><span class="kd">const</span><span class="w"> </span><span class="nx">eraseInfo</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">stage</span><span class="p">.</span><span class="nx">checkErase</span><span class="p">();</span>

<span class="w">            </span><span class="c1">// 4つのぷよが消去対象になっていることを確認</span>
<span class="w">            </span><span class="nx">expect</span><span class="p">(</span><span class="nx">eraseInfo</span><span class="p">.</span><span class="nx">erasePuyoCount</span><span class="p">).</span><span class="nx">toBe</span><span class="p">(</span><span class="mf">4</span><span class="p">);</span>
<span class="w">            </span><span class="nx">expect</span><span class="p">(</span><span class="nx">eraseInfo</span><span class="p">.</span><span class="nx">eraseInfo</span><span class="p">.</span><span class="nx">length</span><span class="p">).</span><span class="nx">toBeGreaterThan</span><span class="p">(</span><span class="mf">0</span><span class="p">);</span>
<span class="w">        </span><span class="p">});</span>

<span class="w">        </span><span class="nx">it</span><span class="p">(</span><span class="s1">&#39;異なる色のぷよは消去対象にならない&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="c1">// ステージにぷよを配置（1は赤ぷよ、2は青ぷよ）</span>
<span class="w">            </span><span class="c1">// 0 0 0 0 0 0</span>
<span class="w">            </span><span class="c1">// 0 0 0 0 0 0</span>
<span class="w">            </span><span class="c1">// 0 0 0 0 0 0</span>
<span class="w">            </span><span class="c1">// 0 0 0 0 0 0</span>
<span class="w">            </span><span class="c1">// 0 0 0 0 0 0</span>
<span class="w">            </span><span class="c1">// 0 0 0 0 0 0</span>
<span class="w">            </span><span class="c1">// 0 0 0 0 0 0</span>
<span class="w">            </span><span class="c1">// 0 0 0 0 0 0</span>
<span class="w">            </span><span class="c1">// 0 0 0 0 0 0</span>
<span class="w">            </span><span class="c1">// 0 0 0 0 0 0</span>
<span class="w">            </span><span class="c1">// 0 1 2 0 0 0</span>
<span class="w">            </span><span class="c1">// 0 2 1 0 0 0</span>
<span class="w">            </span><span class="nx">stage</span><span class="p">.</span><span class="nx">setPuyo</span><span class="p">(</span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="mf">10</span><span class="p">,</span><span class="w"> </span><span class="mf">1</span><span class="p">);</span>
<span class="w">            </span><span class="nx">stage</span><span class="p">.</span><span class="nx">setPuyo</span><span class="p">(</span><span class="mf">2</span><span class="p">,</span><span class="w"> </span><span class="mf">10</span><span class="p">,</span><span class="w"> </span><span class="mf">2</span><span class="p">);</span>
<span class="w">            </span><span class="nx">stage</span><span class="p">.</span><span class="nx">setPuyo</span><span class="p">(</span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="mf">11</span><span class="p">,</span><span class="w"> </span><span class="mf">2</span><span class="p">);</span>
<span class="w">            </span><span class="nx">stage</span><span class="p">.</span><span class="nx">setPuyo</span><span class="p">(</span><span class="mf">2</span><span class="p">,</span><span class="w"> </span><span class="mf">11</span><span class="p">,</span><span class="w"> </span><span class="mf">1</span><span class="p">);</span>

<span class="w">            </span><span class="c1">// 消去判定</span>
<span class="w">            </span><span class="kd">const</span><span class="w"> </span><span class="nx">eraseInfo</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">stage</span><span class="p">.</span><span class="nx">checkErase</span><span class="p">();</span>

<span class="w">            </span><span class="c1">// 消去対象がないことを確認</span>
<span class="w">            </span><span class="nx">expect</span><span class="p">(</span><span class="nx">eraseInfo</span><span class="p">.</span><span class="nx">erasePuyoCount</span><span class="p">).</span><span class="nx">toBe</span><span class="p">(</span><span class="mf">0</span><span class="p">);</span>
<span class="w">            </span><span class="nx">expect</span><span class="p">(</span><span class="nx">eraseInfo</span><span class="p">.</span><span class="nx">eraseInfo</span><span class="p">.</span><span class="nx">length</span><span class="p">).</span><span class="nx">toBe</span><span class="p">(</span><span class="mf">0</span><span class="p">);</span>
<span class="w">        </span><span class="p">});</span>
<span class="w">    </span><span class="p">});</span>
<span class="p">});</span>
</code></pre></div>
<p>「このテストでは何を確認しているんですか？」このテストでは、以下の2つのケースを確認しています：</p>
<ol>
<li>同じ色のぷよが4つつながっている場合、それらが消去対象になるか</li>
<li>異なる色のぷよが隣接している場合、それらは消去対象にならないか</li>
</ol>
<p>「ステージにぷよを配置しているのはわかりますが、その図はどういう意味ですか？」良い質問ですね！コメントの図は、ステージ上のぷよの配置を視覚的に表現しています。0は空きマス、1は赤ぷよ、2は青ぷよを表しています。最初のテストでは2×2の正方形に赤ぷよを配置し、2つ目のテストでは市松模様に赤と青のぷよを配置しています。</p>
<p>「なるほど、視覚的に確認できるのは便利ですね！」そうですね。では、このテストが通るように実装していきましょう。</p>
<h3 id="_56">実装: ぷよの接続判定<a class="headerlink" href="#_56" title="Permanent link">&para;</a></h3>
<p>「テストが失敗することを確認したら、実装に進みましょう！」そうですね。では、ぷよの接続判定を実装していきましょう。</p>
<div class="highlight"><pre><span></span><code><span class="c1">// src/stage.ts</span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">Config</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;./config&#39;</span><span class="p">;</span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">PuyoImage</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;./puyoimage&#39;</span><span class="p">;</span>

<span class="k">export</span><span class="w"> </span><span class="kd">interface</span><span class="w"> </span><span class="nx">EraseInfo</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">erasePuyoCount</span><span class="o">:</span><span class="w"> </span><span class="kt">number</span><span class="p">;</span>
<span class="w">    </span><span class="nx">eraseInfo</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">x</span><span class="o">:</span><span class="w"> </span><span class="kt">number</span><span class="p">;</span>
<span class="w">        </span><span class="nx">y</span><span class="o">:</span><span class="w"> </span><span class="kt">number</span><span class="p">;</span>
<span class="w">        </span><span class="kr">type</span><span class="o">:</span><span class="w"> </span><span class="kt">number</span><span class="p">;</span>
<span class="w">    </span><span class="p">}[];</span>
<span class="p">}</span>

<span class="k">export</span><span class="w"> </span><span class="kd">class</span><span class="w"> </span><span class="nx">Stage</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">private</span><span class="w"> </span><span class="nx">board</span><span class="o">:</span><span class="w"> </span><span class="kt">number</span><span class="p">[][]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[];</span>
<span class="w">    </span><span class="k">private</span><span class="w"> </span><span class="nx">stageElement</span><span class="o">:</span><span class="w"> </span><span class="kt">HTMLElement</span><span class="p">;</span>

<span class="w">    </span><span class="kr">constructor</span><span class="p">(</span>
<span class="w">        </span><span class="k">private</span><span class="w"> </span><span class="nx">config</span><span class="o">:</span><span class="w"> </span><span class="kt">Config</span><span class="p">,</span>
<span class="w">        </span><span class="k">private</span><span class="w"> </span><span class="nx">puyoImage</span><span class="o">:</span><span class="w"> </span><span class="kt">PuyoImage</span>
<span class="w">    </span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// ステージ要素の取得</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="nx">stageElement</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;stage&#39;</span><span class="p">)</span><span class="o">!</span><span class="p">;</span>

<span class="w">        </span><span class="c1">// ステージの初期化</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="nx">initialize</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nx">initialize</span><span class="p">()</span><span class="o">:</span><span class="w"> </span><span class="ow">void</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// ボードの初期化</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="nx">board</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[];</span>
<span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kd">let</span><span class="w"> </span><span class="nx">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0</span><span class="p">;</span><span class="w"> </span><span class="nx">y</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">config</span><span class="p">.</span><span class="nx">stageRows</span><span class="p">;</span><span class="w"> </span><span class="nx">y</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="nx">board</span><span class="p">[</span><span class="nx">y</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[];</span>
<span class="w">            </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kd">let</span><span class="w"> </span><span class="nx">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0</span><span class="p">;</span><span class="w"> </span><span class="nx">x</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">config</span><span class="p">.</span><span class="nx">stageCols</span><span class="p">;</span><span class="w"> </span><span class="nx">x</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="k">this</span><span class="p">.</span><span class="nx">board</span><span class="p">[</span><span class="nx">y</span><span class="p">][</span><span class="nx">x</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0</span><span class="p">;</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nx">setPuyo</span><span class="p">(</span><span class="nx">x</span><span class="o">:</span><span class="w"> </span><span class="kt">number</span><span class="p">,</span><span class="w"> </span><span class="nx">y</span><span class="o">:</span><span class="w"> </span><span class="kt">number</span><span class="p">,</span><span class="w"> </span><span class="kr">type</span><span class="o">:</span><span class="w"> </span><span class="kt">number</span><span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="ow">void</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// ぷよをボードに設定</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="nx">board</span><span class="p">[</span><span class="nx">y</span><span class="p">][</span><span class="nx">x</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kr">type</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nx">getPuyo</span><span class="p">(</span><span class="nx">x</span><span class="o">:</span><span class="w"> </span><span class="kt">number</span><span class="p">,</span><span class="w"> </span><span class="nx">y</span><span class="o">:</span><span class="w"> </span><span class="kt">number</span><span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="kt">number</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// ボード外の場合は0（空）を返す</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">x</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mf">0</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="nx">x</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">config</span><span class="p">.</span><span class="nx">stageCols</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="nx">y</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mf">0</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="nx">y</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">config</span><span class="p">.</span><span class="nx">stageRows</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="mf">0</span><span class="p">;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">board</span><span class="p">[</span><span class="nx">y</span><span class="p">][</span><span class="nx">x</span><span class="p">];</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nx">checkErase</span><span class="p">()</span><span class="o">:</span><span class="w"> </span><span class="nx">EraseInfo</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// 消去情報</span>
<span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">eraseInfo</span><span class="o">:</span><span class="w"> </span><span class="kt">EraseInfo</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nx">erasePuyoCount</span><span class="o">:</span><span class="w"> </span><span class="kt">0</span><span class="p">,</span>
<span class="w">            </span><span class="nx">eraseInfo</span><span class="o">:</span><span class="w"> </span><span class="p">[]</span>
<span class="w">        </span><span class="p">};</span>

<span class="w">        </span><span class="c1">// 一時的なチェック用ボード</span>
<span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">checked</span><span class="o">:</span><span class="w"> </span><span class="kt">boolean</span><span class="p">[][]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[];</span>
<span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kd">let</span><span class="w"> </span><span class="nx">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0</span><span class="p">;</span><span class="w"> </span><span class="nx">y</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">config</span><span class="p">.</span><span class="nx">stageRows</span><span class="p">;</span><span class="w"> </span><span class="nx">y</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nx">checked</span><span class="p">[</span><span class="nx">y</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[];</span>
<span class="w">            </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kd">let</span><span class="w"> </span><span class="nx">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0</span><span class="p">;</span><span class="w"> </span><span class="nx">x</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">config</span><span class="p">.</span><span class="nx">stageCols</span><span class="p">;</span><span class="w"> </span><span class="nx">x</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="nx">checked</span><span class="p">[</span><span class="nx">y</span><span class="p">][</span><span class="nx">x</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span><span class="p">;</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="c1">// 全マスをチェック</span>
<span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kd">let</span><span class="w"> </span><span class="nx">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0</span><span class="p">;</span><span class="w"> </span><span class="nx">y</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">config</span><span class="p">.</span><span class="nx">stageRows</span><span class="p">;</span><span class="w"> </span><span class="nx">y</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kd">let</span><span class="w"> </span><span class="nx">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0</span><span class="p">;</span><span class="w"> </span><span class="nx">x</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">config</span><span class="p">.</span><span class="nx">stageCols</span><span class="p">;</span><span class="w"> </span><span class="nx">x</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="c1">// ぷよがあり、まだチェックしていない場合</span>
<span class="w">                </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">board</span><span class="p">[</span><span class="nx">y</span><span class="p">][</span><span class="nx">x</span><span class="p">]</span><span class="w"> </span><span class="o">!==</span><span class="w"> </span><span class="mf">0</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="o">!</span><span class="nx">checked</span><span class="p">[</span><span class="nx">y</span><span class="p">][</span><span class="nx">x</span><span class="p">])</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="c1">// 接続しているぷよを探索</span>
<span class="w">                    </span><span class="kd">const</span><span class="w"> </span><span class="nx">puyoType</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">board</span><span class="p">[</span><span class="nx">y</span><span class="p">][</span><span class="nx">x</span><span class="p">];</span>
<span class="w">                    </span><span class="kd">const</span><span class="w"> </span><span class="nx">connected</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="nx">x</span><span class="o">:</span><span class="w"> </span><span class="kt">number</span><span class="p">,</span><span class="w"> </span><span class="nx">y</span><span class="o">:</span><span class="w"> </span><span class="kt">number</span><span class="p">}[]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[];</span>
<span class="w">                    </span><span class="k">this</span><span class="p">.</span><span class="nx">searchConnectedPuyo</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span><span class="w"> </span><span class="nx">y</span><span class="p">,</span><span class="w"> </span><span class="nx">puyoType</span><span class="p">,</span><span class="w"> </span><span class="nx">checked</span><span class="p">,</span><span class="w"> </span><span class="nx">connected</span><span class="p">);</span>

<span class="w">                    </span><span class="c1">// 4つ以上つながっている場合は消去対象</span>
<span class="w">                    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">connected</span><span class="p">.</span><span class="nx">length</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="mf">4</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">                        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kd">const</span><span class="w"> </span><span class="nx">puyo</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="nx">connected</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">                            </span><span class="nx">eraseInfo</span><span class="p">.</span><span class="nx">eraseInfo</span><span class="p">.</span><span class="nx">push</span><span class="p">({</span>
<span class="w">                                </span><span class="nx">x</span><span class="o">:</span><span class="w"> </span><span class="kt">puyo.x</span><span class="p">,</span>
<span class="w">                                </span><span class="nx">y</span><span class="o">:</span><span class="w"> </span><span class="kt">puyo.y</span><span class="p">,</span>
<span class="w">                                </span><span class="kr">type</span><span class="o">:</span><span class="w"> </span><span class="nx">puyoType</span>
<span class="w">                            </span><span class="p">});</span>
<span class="w">                        </span><span class="p">}</span>
<span class="w">                        </span><span class="nx">eraseInfo</span><span class="p">.</span><span class="nx">erasePuyoCount</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="nx">connected</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
<span class="w">                    </span><span class="p">}</span>
<span class="w">                </span><span class="p">}</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nx">eraseInfo</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="k">private</span><span class="w"> </span><span class="nx">searchConnectedPuyo</span><span class="p">(</span>
<span class="w">        </span><span class="nx">startX</span><span class="o">:</span><span class="w"> </span><span class="kt">number</span><span class="p">,</span>
<span class="w">        </span><span class="nx">startY</span><span class="o">:</span><span class="w"> </span><span class="kt">number</span><span class="p">,</span>
<span class="w">        </span><span class="nx">puyoType</span><span class="o">:</span><span class="w"> </span><span class="kt">number</span><span class="p">,</span>
<span class="w">        </span><span class="nx">checked</span><span class="o">:</span><span class="w"> </span><span class="kt">boolean</span><span class="p">[][],</span>
<span class="w">        </span><span class="nx">connected</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="nx">x</span><span class="o">:</span><span class="w"> </span><span class="kt">number</span><span class="p">,</span><span class="w"> </span><span class="nx">y</span><span class="o">:</span><span class="w"> </span><span class="kt">number</span><span class="p">}[]</span>
<span class="w">    </span><span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="ow">void</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// 探索済みにする</span>
<span class="w">        </span><span class="nx">checked</span><span class="p">[</span><span class="nx">startY</span><span class="p">][</span><span class="nx">startX</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span><span class="p">;</span>
<span class="w">        </span><span class="nx">connected</span><span class="p">.</span><span class="nx">push</span><span class="p">({</span><span class="nx">x</span><span class="o">:</span><span class="w"> </span><span class="kt">startX</span><span class="p">,</span><span class="w"> </span><span class="nx">y</span><span class="o">:</span><span class="w"> </span><span class="kt">startY</span><span class="p">});</span>

<span class="w">        </span><span class="c1">// 4方向を探索</span>
<span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">directions</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span>
<span class="w">            </span><span class="p">{</span><span class="nx">dx</span><span class="o">:</span><span class="w"> </span><span class="kt">1</span><span class="p">,</span><span class="w"> </span><span class="nx">dy</span><span class="o">:</span><span class="w"> </span><span class="kt">0</span><span class="p">},</span><span class="w">  </span><span class="c1">// 右</span>
<span class="w">            </span><span class="p">{</span><span class="nx">dx</span><span class="o">:</span><span class="w"> </span><span class="o">-</span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="nx">dy</span><span class="o">:</span><span class="w"> </span><span class="kt">0</span><span class="p">},</span><span class="w"> </span><span class="c1">// 左</span>
<span class="w">            </span><span class="p">{</span><span class="nx">dx</span><span class="o">:</span><span class="w"> </span><span class="kt">0</span><span class="p">,</span><span class="w"> </span><span class="nx">dy</span><span class="o">:</span><span class="w"> </span><span class="kt">1</span><span class="p">},</span><span class="w">  </span><span class="c1">// 下</span>
<span class="w">            </span><span class="p">{</span><span class="nx">dx</span><span class="o">:</span><span class="w"> </span><span class="kt">0</span><span class="p">,</span><span class="w"> </span><span class="nx">dy</span><span class="o">:</span><span class="w"> </span><span class="o">-</span><span class="mf">1</span><span class="p">}</span><span class="w">  </span><span class="c1">// 上</span>
<span class="w">        </span><span class="p">];</span>

<span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kd">const</span><span class="w"> </span><span class="nx">direction</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="nx">directions</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="kd">const</span><span class="w"> </span><span class="nx">nextX</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">startX</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">direction</span><span class="p">.</span><span class="nx">dx</span><span class="p">;</span>
<span class="w">            </span><span class="kd">const</span><span class="w"> </span><span class="nx">nextY</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">startY</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">direction</span><span class="p">.</span><span class="nx">dy</span><span class="p">;</span>

<span class="w">            </span><span class="c1">// ボード内かつ同じ色のぷよがあり、まだチェックしていない場合</span>
<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span>
<span class="w">                </span><span class="nx">nextX</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="mf">0</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nx">nextX</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">config</span><span class="p">.</span><span class="nx">stageCols</span><span class="w"> </span><span class="o">&amp;&amp;</span>
<span class="w">                </span><span class="nx">nextY</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="mf">0</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nx">nextY</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">config</span><span class="p">.</span><span class="nx">stageRows</span><span class="w"> </span><span class="o">&amp;&amp;</span>
<span class="w">                </span><span class="k">this</span><span class="p">.</span><span class="nx">board</span><span class="p">[</span><span class="nx">nextY</span><span class="p">][</span><span class="nx">nextX</span><span class="p">]</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="nx">puyoType</span><span class="w"> </span><span class="o">&amp;&amp;</span>
<span class="w">                </span><span class="o">!</span><span class="nx">checked</span><span class="p">[</span><span class="nx">nextY</span><span class="p">][</span><span class="nx">nextX</span><span class="p">]</span>
<span class="w">            </span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="c1">// 再帰的に探索</span>
<span class="w">                </span><span class="k">this</span><span class="p">.</span><span class="nx">searchConnectedPuyo</span><span class="p">(</span><span class="nx">nextX</span><span class="p">,</span><span class="w"> </span><span class="nx">nextY</span><span class="p">,</span><span class="w"> </span><span class="nx">puyoType</span><span class="p">,</span><span class="w"> </span><span class="nx">checked</span><span class="p">,</span><span class="w"> </span><span class="nx">connected</span><span class="p">);</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<h3 id="_57">解説: ぷよの接続判定<a class="headerlink" href="#_57" title="Permanent link">&para;</a></h3>
<p>ぷよの接続判定では、以下のことを行っています。</p>
<ol>
<li>ボード上の全マスを順番にチェック</li>
<li>まだチェックしていないぷよがある場合、そのぷよと同じ色で接続しているぷよを探索</li>
<li>接続しているぷよが4つ以上ある場合、それらを消去対象として記録</li>
</ol>
<p>接続しているぷよの探索には<a href="https://ja.wikipedia.org/wiki/%E6%B7%B1%E3%81%95%E5%84%AA%E5%85%88%E6%8E%A2%E7%B4%A2">深さ優先探索（DFS）アルゴリズム</a>を使用しています。このアルゴリズムでは、あるぷよから始めて、上下左右に隣接する同じ色のぷよを再帰的に探索していきます。探索済みのぷよは<code>checked</code>配列でマークし、重複してカウントしないようにしています。</p>
<h3 id="_58">テスト: ぷよの消去と落下<a class="headerlink" href="#_58" title="Permanent link">&para;</a></h3>
<p>次に、ぷよの消去と落下処理をテストします。</p>
<div class="highlight"><pre><span></span><code><span class="c1">// src/tests/stage.test.ts（続き）</span>
<span class="nx">describe</span><span class="p">(</span><span class="s1">&#39;ぷよの消去と落下&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">it</span><span class="p">(</span><span class="s1">&#39;消去対象のぷよを消去する&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// ステージにぷよを配置</span>
<span class="w">        </span><span class="nx">stage</span><span class="p">.</span><span class="nx">setPuyo</span><span class="p">(</span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="mf">10</span><span class="p">,</span><span class="w"> </span><span class="mf">1</span><span class="p">);</span>
<span class="w">        </span><span class="nx">stage</span><span class="p">.</span><span class="nx">setPuyo</span><span class="p">(</span><span class="mf">2</span><span class="p">,</span><span class="w"> </span><span class="mf">10</span><span class="p">,</span><span class="w"> </span><span class="mf">1</span><span class="p">);</span>
<span class="w">        </span><span class="nx">stage</span><span class="p">.</span><span class="nx">setPuyo</span><span class="p">(</span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="mf">11</span><span class="p">,</span><span class="w"> </span><span class="mf">1</span><span class="p">);</span>
<span class="w">        </span><span class="nx">stage</span><span class="p">.</span><span class="nx">setPuyo</span><span class="p">(</span><span class="mf">2</span><span class="p">,</span><span class="w"> </span><span class="mf">11</span><span class="p">,</span><span class="w"> </span><span class="mf">1</span><span class="p">);</span>

<span class="w">        </span><span class="c1">// 消去判定</span>
<span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">eraseInfo</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">stage</span><span class="p">.</span><span class="nx">checkErase</span><span class="p">();</span>

<span class="w">        </span><span class="c1">// 消去実行</span>
<span class="w">        </span><span class="nx">stage</span><span class="p">.</span><span class="nx">eraseBoards</span><span class="p">(</span><span class="nx">eraseInfo</span><span class="p">.</span><span class="nx">eraseInfo</span><span class="p">);</span>

<span class="w">        </span><span class="c1">// ぷよが消去されていることを確認</span>
<span class="w">        </span><span class="nx">expect</span><span class="p">(</span><span class="nx">stage</span><span class="p">.</span><span class="nx">getPuyo</span><span class="p">(</span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="mf">10</span><span class="p">)).</span><span class="nx">toBe</span><span class="p">(</span><span class="mf">0</span><span class="p">);</span>
<span class="w">        </span><span class="nx">expect</span><span class="p">(</span><span class="nx">stage</span><span class="p">.</span><span class="nx">getPuyo</span><span class="p">(</span><span class="mf">2</span><span class="p">,</span><span class="w"> </span><span class="mf">10</span><span class="p">)).</span><span class="nx">toBe</span><span class="p">(</span><span class="mf">0</span><span class="p">);</span>
<span class="w">        </span><span class="nx">expect</span><span class="p">(</span><span class="nx">stage</span><span class="p">.</span><span class="nx">getPuyo</span><span class="p">(</span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="mf">11</span><span class="p">)).</span><span class="nx">toBe</span><span class="p">(</span><span class="mf">0</span><span class="p">);</span>
<span class="w">        </span><span class="nx">expect</span><span class="p">(</span><span class="nx">stage</span><span class="p">.</span><span class="nx">getPuyo</span><span class="p">(</span><span class="mf">2</span><span class="p">,</span><span class="w"> </span><span class="mf">11</span><span class="p">)).</span><span class="nx">toBe</span><span class="p">(</span><span class="mf">0</span><span class="p">);</span>
<span class="w">    </span><span class="p">});</span>

<span class="w">    </span><span class="nx">it</span><span class="p">(</span><span class="s1">&#39;消去後、上にあるぷよが落下する&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// ステージにぷよを配置</span>
<span class="w">        </span><span class="c1">// 0 0 0 0 0 0</span>
<span class="w">        </span><span class="c1">// 0 0 0 0 0 0</span>
<span class="w">        </span><span class="c1">// 0 0 0 0 0 0</span>
<span class="w">        </span><span class="c1">// 0 0 0 0 0 0</span>
<span class="w">        </span><span class="c1">// 0 0 0 0 0 0</span>
<span class="w">        </span><span class="c1">// 0 0 0 0 0 0</span>
<span class="w">        </span><span class="c1">// 0 0 0 0 0 0</span>
<span class="w">        </span><span class="c1">// 0 0 0 0 0 0</span>
<span class="w">        </span><span class="c1">// 0 0 2 0 0 0</span>
<span class="w">        </span><span class="c1">// 0 0 2 0 0 0</span>
<span class="w">        </span><span class="c1">// 0 1 1 0 0 0</span>
<span class="w">        </span><span class="c1">// 0 1 1 0 0 0</span>
<span class="w">        </span><span class="nx">stage</span><span class="p">.</span><span class="nx">setPuyo</span><span class="p">(</span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="mf">10</span><span class="p">,</span><span class="w"> </span><span class="mf">1</span><span class="p">);</span>
<span class="w">        </span><span class="nx">stage</span><span class="p">.</span><span class="nx">setPuyo</span><span class="p">(</span><span class="mf">2</span><span class="p">,</span><span class="w"> </span><span class="mf">10</span><span class="p">,</span><span class="w"> </span><span class="mf">1</span><span class="p">);</span>
<span class="w">        </span><span class="nx">stage</span><span class="p">.</span><span class="nx">setPuyo</span><span class="p">(</span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="mf">11</span><span class="p">,</span><span class="w"> </span><span class="mf">1</span><span class="p">);</span>
<span class="w">        </span><span class="nx">stage</span><span class="p">.</span><span class="nx">setPuyo</span><span class="p">(</span><span class="mf">2</span><span class="p">,</span><span class="w"> </span><span class="mf">11</span><span class="p">,</span><span class="w"> </span><span class="mf">1</span><span class="p">);</span>
<span class="w">        </span><span class="nx">stage</span><span class="p">.</span><span class="nx">setPuyo</span><span class="p">(</span><span class="mf">2</span><span class="p">,</span><span class="w"> </span><span class="mf">8</span><span class="p">,</span><span class="w"> </span><span class="mf">2</span><span class="p">);</span>
<span class="w">        </span><span class="nx">stage</span><span class="p">.</span><span class="nx">setPuyo</span><span class="p">(</span><span class="mf">2</span><span class="p">,</span><span class="w"> </span><span class="mf">9</span><span class="p">,</span><span class="w"> </span><span class="mf">2</span><span class="p">);</span>

<span class="w">        </span><span class="c1">// 消去判定と実行</span>
<span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">eraseInfo</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">stage</span><span class="p">.</span><span class="nx">checkErase</span><span class="p">();</span>
<span class="w">        </span><span class="nx">stage</span><span class="p">.</span><span class="nx">eraseBoards</span><span class="p">(</span><span class="nx">eraseInfo</span><span class="p">.</span><span class="nx">eraseInfo</span><span class="p">);</span>

<span class="w">        </span><span class="c1">// 落下処理</span>
<span class="w">        </span><span class="nx">stage</span><span class="p">.</span><span class="nx">fall</span><span class="p">();</span>

<span class="w">        </span><span class="c1">// 上にあったぷよが落下していることを確認</span>
<span class="w">        </span><span class="nx">expect</span><span class="p">(</span><span class="nx">stage</span><span class="p">.</span><span class="nx">getPuyo</span><span class="p">(</span><span class="mf">2</span><span class="p">,</span><span class="w"> </span><span class="mf">10</span><span class="p">)).</span><span class="nx">toBe</span><span class="p">(</span><span class="mf">2</span><span class="p">);</span>
<span class="w">        </span><span class="nx">expect</span><span class="p">(</span><span class="nx">stage</span><span class="p">.</span><span class="nx">getPuyo</span><span class="p">(</span><span class="mf">2</span><span class="p">,</span><span class="w"> </span><span class="mf">11</span><span class="p">)).</span><span class="nx">toBe</span><span class="p">(</span><span class="mf">2</span><span class="p">);</span>
<span class="w">    </span><span class="p">});</span>
<span class="p">});</span>
</code></pre></div>
<p>このテストでは、消去対象のぷよが正しく消去されることと、消去後に上にあるぷよが落下することをテストしています。</p>
<h3 id="_59">実装: ぷよの消去と落下<a class="headerlink" href="#_59" title="Permanent link">&para;</a></h3>
<p>テストが失敗することを確認したら、テストが通るように最小限のコードを実装します。</p>
<div class="highlight"><pre><span></span><code><span class="c1">// src/stage.ts（続き）</span>
<span class="nx">eraseBoards</span><span class="p">(</span><span class="nx">eraseInfo</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="nx">x</span><span class="o">:</span><span class="w"> </span><span class="kt">number</span><span class="p">,</span><span class="w"> </span><span class="nx">y</span><span class="o">:</span><span class="w"> </span><span class="kt">number</span><span class="p">,</span><span class="w"> </span><span class="kr">type</span><span class="o">:</span><span class="w"> </span><span class="kt">number</span><span class="p">}[])</span><span class="o">:</span><span class="w"> </span><span class="ow">void</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// 消去対象のぷよを消去</span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kd">const</span><span class="w"> </span><span class="nx">info</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="nx">eraseInfo</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">board</span><span class="p">[</span><span class="nx">info</span><span class="p">.</span><span class="nx">y</span><span class="p">][</span><span class="nx">info</span><span class="p">.</span><span class="nx">x</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0</span><span class="p">;</span>
<span class="p">}</span>
<span class="p">}</span>

<span class="nx">fall</span><span class="p">()</span><span class="o">:</span><span class="w"> </span><span class="ow">void</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// 下から上に向かって処理</span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kd">let</span><span class="w"> </span><span class="nx">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">config</span><span class="p">.</span><span class="nx">stageRows</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mf">2</span><span class="p">;</span><span class="w"> </span><span class="nx">y</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="mf">0</span><span class="p">;</span><span class="w"> </span><span class="nx">y</span><span class="o">--</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kd">let</span><span class="w"> </span><span class="nx">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0</span><span class="p">;</span><span class="w"> </span><span class="nx">x</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">config</span><span class="p">.</span><span class="nx">stageCols</span><span class="p">;</span><span class="w"> </span><span class="nx">x</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">board</span><span class="p">[</span><span class="nx">y</span><span class="p">][</span><span class="nx">x</span><span class="p">]</span><span class="w"> </span><span class="o">!==</span><span class="w"> </span><span class="mf">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="c1">// 現在のぷよの下が空いている場合、落下させる</span>
<span class="w">            </span><span class="kd">let</span><span class="w"> </span><span class="nx">fallY</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">y</span><span class="p">;</span>
<span class="w">            </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="nx">fallY</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mf">1</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">config</span><span class="p">.</span><span class="nx">stageRows</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">board</span><span class="p">[</span><span class="nx">fallY</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mf">1</span><span class="p">][</span><span class="nx">x</span><span class="p">]</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="mf">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="k">this</span><span class="p">.</span><span class="nx">board</span><span class="p">[</span><span class="nx">fallY</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mf">1</span><span class="p">][</span><span class="nx">x</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">board</span><span class="p">[</span><span class="nx">fallY</span><span class="p">][</span><span class="nx">x</span><span class="p">];</span>
<span class="w">                </span><span class="k">this</span><span class="p">.</span><span class="nx">board</span><span class="p">[</span><span class="nx">fallY</span><span class="p">][</span><span class="nx">x</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0</span><span class="p">;</span>
<span class="w">                </span><span class="nx">fallY</span><span class="o">++</span><span class="p">;</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<h3 id="_60">解説: ぷよの消去と落下<a class="headerlink" href="#_60" title="Permanent link">&para;</a></h3>
<p>ぷよの消去と落下処理では、以下のことを行っています。</p>
<ol>
<li>消去対象のぷよをボード上から消去する<code>eraseBoards</code>メソッドを実装</li>
<li>消去後に上にあるぷよを落下させる<code>fall</code>メソッドを実装</li>
</ol>
<p>落下処理では、下から上に向かって各列を処理し、ぷよがある場合はその下が空いていれば落下させます。これを繰り返すことで、すべてのぷよが適切な位置に落下します。</p>
<h3 id="_61">実装: ゲームループとの統合<a class="headerlink" href="#_61" title="Permanent link">&para;</a></h3>
<p>ゲームループに消去処理を統合します。Game クラスの update メソッドを修正して、消去判定と消去処理を組み込みます。</p>
<div class="highlight"><pre><span></span><code><span class="c1">// src/game.ts（update メソッドの一部）</span>
<span class="k">private</span><span class="w"> </span><span class="nx">update</span><span class="p">(</span><span class="nx">deltaTime</span><span class="o">:</span><span class="w"> </span><span class="kt">number</span><span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="ow">void</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">frame</span><span class="o">++</span>

<span class="w">    </span><span class="c1">// モードに応じた処理</span>
<span class="w">    </span><span class="k">switch</span><span class="w"> </span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">mode</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// ... 他のケース ...</span>

<span class="k">case</span><span class="w"> </span><span class="s1">&#39;checkFall&#39;</span><span class="o">:</span>
<span class="w">    </span><span class="c1">// 重力を適用</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">hasFallen</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">stage</span><span class="p">.</span><span class="nx">applyGravity</span><span class="p">()</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">hasFallen</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// ぷよが落下した場合、falling モードへ</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="nx">mode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;falling&#39;</span>
<span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// 落下するぷよがない場合、消去チェックへ</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="nx">mode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;checkErase&#39;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="k">break</span>

<span class="k">case</span><span class="w"> </span><span class="s1">&#39;falling&#39;</span><span class="o">:</span>
<span class="w">    </span><span class="c1">// 落下アニメーション用（一定フレーム待機）</span>
<span class="w">    </span><span class="c1">// 簡略化のため、すぐに checkFall に戻る</span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">mode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;checkFall&#39;</span>
<span class="w">    </span><span class="k">break</span>

<span class="k">case</span><span class="w"> </span><span class="s1">&#39;checkErase&#39;</span><span class="o">:</span>
<span class="w">    </span><span class="c1">// 消去判定</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">eraseInfo</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">stage</span><span class="p">.</span><span class="nx">checkErase</span><span class="p">()</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">eraseInfo</span><span class="p">.</span><span class="nx">erasePuyoCount</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mf">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// 消去対象がある場合、消去処理へ</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="nx">stage</span><span class="p">.</span><span class="nx">eraseBoards</span><span class="p">(</span><span class="nx">eraseInfo</span><span class="p">.</span><span class="nx">eraseInfo</span><span class="p">)</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="nx">mode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;erasing&#39;</span>
<span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// 消去対象がない場合、次のぷよを出す</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="nx">mode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;newPuyo&#39;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="k">break</span>

<span class="k">case</span><span class="w"> </span><span class="s1">&#39;erasing&#39;</span><span class="o">:</span>
<span class="w">    </span><span class="c1">// 消去アニメーション用（一定フレーム待機）</span>
<span class="w">    </span><span class="c1">// 簡略化のため、すぐに checkFall に戻る（消去後の重力適用）</span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">mode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;checkFall&#39;</span>
<span class="w">    </span><span class="k">break</span>
<span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>「ゲームの流れがどう変わったんですか？」良い質問ですね！ゲームフローは以下のように拡張されました：</p>
<p><strong>新しいゲームフロー</strong>:
<div class="highlight"><pre><span></span><code>newPuyo → playing → (着地) → checkFall → (重力適用) →
  ├─ 落下した → falling → checkFall
  └─ 落下なし → checkErase →
      ├─ 消去あり → erasing → checkFall（消去後の重力適用）
      └─ 消去なし → newPuyo
</code></pre></div></p>
<p>このフローにより、以下が実現されます：</p>
<ol>
<li><strong>着地後の重力適用</strong>: ぷよが着地したら、まず重力を適用して浮いているぷよを落とす</li>
<li><strong>消去判定</strong>: 重力適用後、落下するぷよがなくなったら消去判定</li>
<li><strong>消去処理</strong>: 4つ以上つながったぷよがあれば消去</li>
<li><strong>消去後の重力適用</strong>: 消去後、再び重力を適用（これが連鎖の基礎になる）</li>
</ol>
<h3 id="6_1">イテレーション6のまとめ<a class="headerlink" href="#6_1" title="Permanent link">&para;</a></h3>
<p>このイテレーションでは、ぷよの消去機能を実装しました。以下がイテレーション 6 で実施した内容のまとめです：</p>
<ol>
<li>
<p><strong>接続判定機能</strong></p>
<ul>
<li>EraseInfo インターフェース：消去対象の情報を表現</li>
<li>checkErase メソッド：4つ以上つながったぷよを検出</li>
<li>searchConnectedPuyo メソッド：深さ優先探索で接続ぷよを探索</li>
</ul>
</li>
<li>
<p><strong>消去処理機能</strong></p>
<ul>
<li>eraseBoards メソッド：消去対象のぷよを削除</li>
</ul>
</li>
<li>
<p><strong>ゲームループとの統合</strong></p>
<ul>
<li>checkErase モード：消去判定を実行</li>
<li>erasing モード：消去アニメーション後、重力チェックへ</li>
<li>ゲームフローの拡張：着地 → 重力 → 消去 → 重力 → 次のぷよ</li>
</ul>
</li>
<li>
<p><strong>テストの作成</strong></p>
<ul>
<li>ぷよの接続判定（3テスト）<ul>
<li>同じ色のぷよが4つつながっていると、消去対象になる</li>
<li>異なる色のぷよは消去対象にならない</li>
<li>3つ以下のつながりは消去対象にならない</li>
</ul>
</li>
<li>ぷよの消去処理（2テスト）<ul>
<li>消去対象のぷよを消去する</li>
<li>消去後、上にあるぷよが落下する</li>
</ul>
</li>
<li>ゲームループ統合（1テスト）<ul>
<li>4つ以上つながったぷよは消去される</li>
</ul>
</li>
<li>合計39テストすべて成功</li>
</ul>
</li>
<li>
<p><strong>学んだ重要な概念</strong></p>
<ul>
<li>深さ優先探索（DFS）アルゴリズム</li>
<li>再帰的な探索処理</li>
<li>ゲームモードによる状態管理</li>
<li>消去と重力の連携処理</li>
</ul>
</li>
</ol>
<p>このイテレーションにより、同じ色のぷよを4つ以上つなげると消去できるようになり、ぷよぷよの基本的なゲームルールが実装できました。次のイテレーションでは、連鎖反応を実装していきます！</p>
<h2 id="7">イテレーション7: 連鎖反応の実装<a class="headerlink" href="#7" title="Permanent link">&para;</a></h2>
<p>「ぷよを消せるようになったけど、ぷよぷよの醍醐味は連鎖じゃないですか？」そうですね！ぷよぷよの最も魅力的な要素の一つは、連鎖反応です。ぷよが消えて落下した結果、新たな消去パターンが生まれ、連続して消去が発生する「連鎖」を実装していきましょう！</p>
<h3 id="_62">ユーザーストーリー<a class="headerlink" href="#_62" title="Permanent link">&para;</a></h3>
<p>まずは、このイテレーションで実装するユーザーストーリーを確認しましょう：</p>
<blockquote>
<p>プレイヤーとして、連鎖反応を起こしてより高いスコアを獲得できる</p>
</blockquote>
<p>「れ〜んさ〜ん！」と叫びたくなるような連鎖反応を実装して、プレイヤーがより高いスコアを目指せるようにしましょう。</p>
<h3 id="todo_7">TODOリスト<a class="headerlink" href="#todo_7" title="Permanent link">&para;</a></h3>
<p>「どんな作業が必要になりますか？」このユーザーストーリーを実現するために、TODOリストを作成してみましょう。</p>
<p>「連鎖反応を実装する」という機能を実現するためには、以下のようなタスクが必要そうですね：</p>
<ul>
<li>連鎖判定を実装する（ぷよが消えた後に新たな消去パターンがあるかを判定する）</li>
<li>連鎖カウントを実装する（何連鎖目かをカウントする）</li>
<li>連鎖ボーナスの計算を実装する（連鎖数に応じたボーナス点を計算する）</li>
<li>スコア表示を実装する（プレイヤーに現在のスコアを表示する）</li>
</ul>
<p>「なるほど、順番に実装していけばいいんですね！」そうです、一つずつ進めていきましょう。テスト駆動開発の流れに沿って、まずはテストから書いていきますよ。</p>
<h3 id="_63">テスト: 連鎖判定<a class="headerlink" href="#_63" title="Permanent link">&para;</a></h3>
<p>「最初に何をテストすればいいんでしょうか？」まずは、連鎖判定をテストしましょう。ぷよが消えて落下した後に、新たな消去パターンが発生するかどうかを判定する機能が必要です。</p>
<div class="highlight"><pre><span></span><code><span class="c1">// src/tests/game.test.ts（続き）</span>
<span class="nx">describe</span><span class="p">(</span><span class="s1">&#39;連鎖反応&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">beforeEach</span><span class="p">(()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">game</span><span class="p">.</span><span class="nx">initialize</span><span class="p">();</span>
<span class="w">    </span><span class="p">});</span>

<span class="w">    </span><span class="nx">it</span><span class="p">(</span><span class="s1">&#39;ぷよの消去と落下後、新たな消去パターンがあれば連鎖が発生する&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// ゲームのステージにぷよを配置</span>
<span class="w">        </span><span class="c1">// 0 0 0 0 0 0</span>
<span class="w">        </span><span class="c1">// 0 0 0 0 0 0</span>
<span class="w">        </span><span class="c1">// 0 0 0 0 0 0</span>
<span class="w">        </span><span class="c1">// 0 0 0 0 0 0</span>
<span class="w">        </span><span class="c1">// 0 0 0 0 0 0</span>
<span class="w">        </span><span class="c1">// 0 0 0 0 0 0</span>
<span class="w">        </span><span class="c1">// 0 0 0 0 0 0</span>
<span class="w">        </span><span class="c1">// 0 0 2 0 0 0</span>
<span class="w">        </span><span class="c1">// 0 0 2 0 0 0</span>
<span class="w">        </span><span class="c1">// 0 0 2 0 0 0</span>
<span class="w">        </span><span class="c1">// 0 1 1 2 0 0</span>
<span class="w">        </span><span class="c1">// 0 1 1 0 0 0</span>
<span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">stage</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">game</span><span class="p">[</span><span class="s1">&#39;stage&#39;</span><span class="p">];</span>
<span class="w">        </span><span class="nx">stage</span><span class="p">.</span><span class="nx">setPuyo</span><span class="p">(</span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="mf">10</span><span class="p">,</span><span class="w"> </span><span class="mf">1</span><span class="p">);</span>
<span class="w">        </span><span class="nx">stage</span><span class="p">.</span><span class="nx">setPuyo</span><span class="p">(</span><span class="mf">2</span><span class="p">,</span><span class="w"> </span><span class="mf">10</span><span class="p">,</span><span class="w"> </span><span class="mf">1</span><span class="p">);</span>
<span class="w">        </span><span class="nx">stage</span><span class="p">.</span><span class="nx">setPuyo</span><span class="p">(</span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="mf">11</span><span class="p">,</span><span class="w"> </span><span class="mf">1</span><span class="p">);</span>
<span class="w">        </span><span class="nx">stage</span><span class="p">.</span><span class="nx">setPuyo</span><span class="p">(</span><span class="mf">2</span><span class="p">,</span><span class="w"> </span><span class="mf">11</span><span class="p">,</span><span class="w"> </span><span class="mf">1</span><span class="p">);</span>
<span class="w">        </span><span class="nx">stage</span><span class="p">.</span><span class="nx">setPuyo</span><span class="p">(</span><span class="mf">3</span><span class="p">,</span><span class="w"> </span><span class="mf">10</span><span class="p">,</span><span class="w"> </span><span class="mf">2</span><span class="p">);</span>
<span class="w">        </span><span class="nx">stage</span><span class="p">.</span><span class="nx">setPuyo</span><span class="p">(</span><span class="mf">2</span><span class="p">,</span><span class="w"> </span><span class="mf">7</span><span class="p">,</span><span class="w"> </span><span class="mf">2</span><span class="p">);</span>
<span class="w">        </span><span class="nx">stage</span><span class="p">.</span><span class="nx">setPuyo</span><span class="p">(</span><span class="mf">2</span><span class="p">,</span><span class="w"> </span><span class="mf">8</span><span class="p">,</span><span class="w"> </span><span class="mf">2</span><span class="p">);</span>
<span class="w">        </span><span class="nx">stage</span><span class="p">.</span><span class="nx">setPuyo</span><span class="p">(</span><span class="mf">2</span><span class="p">,</span><span class="w"> </span><span class="mf">9</span><span class="p">,</span><span class="w"> </span><span class="mf">2</span><span class="p">);</span>

<span class="w">        </span><span class="c1">// 消去判定</span>
<span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">eraseInfo</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">stage</span><span class="p">.</span><span class="nx">checkErase</span><span class="p">();</span>

<span class="w">        </span><span class="c1">// 消去実行</span>
<span class="w">        </span><span class="nx">stage</span><span class="p">.</span><span class="nx">eraseBoards</span><span class="p">(</span><span class="nx">eraseInfo</span><span class="p">.</span><span class="nx">eraseInfo</span><span class="p">);</span>

<span class="w">        </span><span class="c1">// 落下処理</span>
<span class="w">        </span><span class="nx">stage</span><span class="p">.</span><span class="nx">fall</span><span class="p">();</span>

<span class="w">        </span><span class="c1">// 連鎖判定</span>
<span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">chainEraseInfo</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">stage</span><span class="p">.</span><span class="nx">checkErase</span><span class="p">();</span>

<span class="w">        </span><span class="c1">// 連鎖が発生していることを確認</span>
<span class="w">        </span><span class="nx">expect</span><span class="p">(</span><span class="nx">chainEraseInfo</span><span class="p">.</span><span class="nx">erasePuyoCount</span><span class="p">).</span><span class="nx">toBeGreaterThan</span><span class="p">(</span><span class="mf">0</span><span class="p">);</span>
<span class="w">    </span><span class="p">});</span>
<span class="p">});</span>
</code></pre></div>
<p>「このテストでは何を確認しているんですか？」このテストでは、以下のシナリオを確認しています：</p>
<ol>
<li>まず、特定のパターンでぷよを配置します（赤ぷよの2×2の正方形と、その上に青ぷよが縦に3つ並んでいる状態）</li>
<li>最初の消去判定で赤ぷよの正方形が消えます</li>
<li>消去後に落下処理を行うと、上にあった青ぷよが落下します</li>
<li>落下した結果、新たに青ぷよが4つつながり、連鎖が発生することを確認します</li>
</ol>
<p>「なるほど、連鎖の仕組みがテストで表現されているんですね！」そうです！このテストは、ぷよぷよの連鎖の基本的な仕組みを表現しています。では、このテストが通るように実装していきましょう。</p>
<h3 id="_64">実装: 連鎖判定<a class="headerlink" href="#_64" title="Permanent link">&para;</a></h3>
<p>「既存のゲームループを見てみると、実は連鎖反応は既に実装されています！」そうなんです。イテレーション6で実装したゲームループの仕組みが、そのまま連鎖反応を実現しているんです。</p>
<p>「え？本当ですか？」はい。ゲームループの実装を見てみましょう：</p>
<div class="highlight"><pre><span></span><code><span class="c1">// app/typescript-3/src/game.ts の update メソッド</span>
<span class="k">private</span><span class="w"> </span><span class="nx">update</span><span class="p">(</span><span class="nx">deltaTime</span><span class="o">:</span><span class="w"> </span><span class="kt">number</span><span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="ow">void</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">frame</span><span class="o">++</span>

<span class="w">    </span><span class="c1">// モードに応じた処理</span>
<span class="w">    </span><span class="k">switch</span><span class="w"> </span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">mode</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="k">case</span><span class="w"> </span><span class="s1">&#39;newPuyo&#39;</span><span class="o">:</span>
<span class="w">    </span><span class="c1">// 新しいぷよを作成</span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">player</span><span class="p">.</span><span class="nx">createNewPuyo</span><span class="p">()</span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">mode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;playing&#39;</span>
<span class="w">    </span><span class="k">break</span>

<span class="k">case</span><span class="w"> </span><span class="s1">&#39;playing&#39;</span><span class="o">:</span>
<span class="w">    </span><span class="c1">// プレイ中の処理（キー入力と自由落下）</span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">player</span><span class="p">.</span><span class="nx">updateWithDelta</span><span class="p">(</span><span class="nx">deltaTime</span><span class="p">)</span>

<span class="w">    </span><span class="c1">// 着地したら重力チェックに移行</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">player</span><span class="p">.</span><span class="nx">hasLanded</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="nx">mode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;checkFall&#39;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="k">break</span>

<span class="k">case</span><span class="w"> </span><span class="s1">&#39;checkFall&#39;</span><span class="o">:</span>
<span class="w">    </span><span class="c1">// 重力を適用</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">hasFallen</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">stage</span><span class="p">.</span><span class="nx">applyGravity</span><span class="p">()</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">hasFallen</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// ぷよが落下した場合、falling モードへ</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="nx">mode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;falling&#39;</span>
<span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// 落下するぷよがない場合、消去チェックへ</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="nx">mode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;checkErase&#39;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="k">break</span>

<span class="k">case</span><span class="w"> </span><span class="s1">&#39;falling&#39;</span><span class="o">:</span>
<span class="w">    </span><span class="c1">// 落下アニメーション用（一定フレーム待機）</span>
<span class="w">    </span><span class="c1">// 簡略化のため、すぐに checkFall に戻る</span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">mode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;checkFall&#39;</span>
<span class="w">    </span><span class="k">break</span>

<span class="k">case</span><span class="w"> </span><span class="s1">&#39;checkErase&#39;</span><span class="o">:</span>
<span class="w">    </span><span class="c1">// 消去判定</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">eraseInfo</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">stage</span><span class="p">.</span><span class="nx">checkErase</span><span class="p">()</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">eraseInfo</span><span class="p">.</span><span class="nx">erasePuyoCount</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mf">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// 消去対象がある場合、消去処理へ</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="nx">stage</span><span class="p">.</span><span class="nx">eraseBoards</span><span class="p">(</span><span class="nx">eraseInfo</span><span class="p">.</span><span class="nx">eraseInfo</span><span class="p">)</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="nx">mode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;erasing&#39;</span>
<span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// 消去対象がない場合、次のぷよを出す</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="nx">mode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;newPuyo&#39;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="k">break</span>

<span class="k">case</span><span class="w"> </span><span class="s1">&#39;erasing&#39;</span><span class="o">:</span>
<span class="w">    </span><span class="c1">// 消去アニメーション用（一定フレーム待機）</span>
<span class="w">    </span><span class="c1">// 簡略化のため、すぐに checkFall に戻る（消去後の重力適用）</span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">mode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;checkFall&#39;</span>
<span class="w">    </span><span class="k">break</span>
<span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>「このゲームループの何が連鎖反応を実現しているんですか？」重要なのは、<code>erasing</code> モード後に <code>checkFall</code> に戻るという点です。連鎖が発生する流れを見てみましょう：</p>
<h4 id="_65">連鎖の流れ<a class="headerlink" href="#_65" title="Permanent link">&para;</a></h4>
<ol>
<li>
<p><strong>1回目の消去</strong>：
   <div class="highlight"><pre><span></span><code>checkErase → ぷよが消去される → erasing → checkFall
</code></pre></div></p>
</li>
<li>
<p><strong>重力適用</strong>：
   <div class="highlight"><pre><span></span><code>checkFall → 上のぷよが落下 → falling → checkFall → 落下完了 → checkErase
</code></pre></div></p>
</li>
<li>
<p><strong>2回目の消去（連鎖）</strong>：
   <div class="highlight"><pre><span></span><code>checkErase → 落下後に新しい消去パターン発見 → erasing → checkFall
</code></pre></div></p>
</li>
<li>
<p><strong>連鎖終了</strong>：
   <div class="highlight"><pre><span></span><code>checkFall → 落下なし → checkErase → 消去なし → newPuyo
</code></pre></div></p>
</li>
</ol>
<p>「つまり、<code>erasing → checkFall → checkErase</code> のサイクルが連鎖を作っているんですね！」そのとおりです！このサイクルが、消去対象がなくなるまで繰り返されることで、連鎖反応が実現されています。</p>
<h3 id="_66">テスト: 連鎖反応の確認<a class="headerlink" href="#_66" title="Permanent link">&para;</a></h3>
<p>では、テストを見てみましょう：</p>
<div class="highlight"><pre><span></span><code><span class="c1">// app/typescript-3/tests/game.test.ts</span>
<span class="nx">describe</span><span class="p">(</span><span class="s1">&#39;連鎖反応&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">it</span><span class="p">(</span><span class="s1">&#39;ぷよの消去と落下後、新たな消去パターンがあれば連鎖が発生する&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// 初期化</span>
<span class="w">        </span><span class="nx">game</span><span class="p">.</span><span class="nx">initialize</span><span class="p">()</span>

<span class="w">        </span><span class="c1">// ゲームのステージにぷよを配置</span>
<span class="w">        </span><span class="c1">// 赤ぷよの2×2と、その上に青ぷよが縦に3つ、さらに青ぷよが1つ横に</span>
<span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">stage</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">game</span><span class="p">[</span><span class="s1">&#39;stage&#39;</span><span class="p">]</span>
<span class="w">        </span><span class="nx">stage</span><span class="p">.</span><span class="nx">setPuyo</span><span class="p">(</span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="mf">10</span><span class="p">,</span><span class="w"> </span><span class="mf">1</span><span class="p">)</span><span class="w"> </span><span class="c1">// 赤</span>
<span class="w">        </span><span class="nx">stage</span><span class="p">.</span><span class="nx">setPuyo</span><span class="p">(</span><span class="mf">2</span><span class="p">,</span><span class="w"> </span><span class="mf">10</span><span class="p">,</span><span class="w"> </span><span class="mf">1</span><span class="p">)</span><span class="w"> </span><span class="c1">// 赤</span>
<span class="w">        </span><span class="nx">stage</span><span class="p">.</span><span class="nx">setPuyo</span><span class="p">(</span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="mf">11</span><span class="p">,</span><span class="w"> </span><span class="mf">1</span><span class="p">)</span><span class="w"> </span><span class="c1">// 赤</span>
<span class="w">        </span><span class="nx">stage</span><span class="p">.</span><span class="nx">setPuyo</span><span class="p">(</span><span class="mf">2</span><span class="p">,</span><span class="w"> </span><span class="mf">11</span><span class="p">,</span><span class="w"> </span><span class="mf">1</span><span class="p">)</span><span class="w"> </span><span class="c1">// 赤</span>
<span class="w">        </span><span class="nx">stage</span><span class="p">.</span><span class="nx">setPuyo</span><span class="p">(</span><span class="mf">3</span><span class="p">,</span><span class="w"> </span><span class="mf">10</span><span class="p">,</span><span class="w"> </span><span class="mf">2</span><span class="p">)</span><span class="w"> </span><span class="c1">// 青（横）</span>
<span class="w">        </span><span class="nx">stage</span><span class="p">.</span><span class="nx">setPuyo</span><span class="p">(</span><span class="mf">2</span><span class="p">,</span><span class="w"> </span><span class="mf">7</span><span class="p">,</span><span class="w"> </span><span class="mf">2</span><span class="p">)</span><span class="w"> </span><span class="c1">// 青（上）</span>
<span class="w">        </span><span class="nx">stage</span><span class="p">.</span><span class="nx">setPuyo</span><span class="p">(</span><span class="mf">2</span><span class="p">,</span><span class="w"> </span><span class="mf">8</span><span class="p">,</span><span class="w"> </span><span class="mf">2</span><span class="p">)</span><span class="w"> </span><span class="c1">// 青（上）</span>
<span class="w">        </span><span class="nx">stage</span><span class="p">.</span><span class="nx">setPuyo</span><span class="p">(</span><span class="mf">2</span><span class="p">,</span><span class="w"> </span><span class="mf">9</span><span class="p">,</span><span class="w"> </span><span class="mf">2</span><span class="p">)</span><span class="w"> </span><span class="c1">// 青（上）</span>

<span class="w">        </span><span class="c1">// checkErase モードに設定</span>
<span class="w">        </span><span class="nx">game</span><span class="p">[</span><span class="s1">&#39;mode&#39;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;checkErase&#39;</span>

<span class="w">        </span><span class="c1">// 1回目の消去判定と消去実行</span>
<span class="w">        </span><span class="nx">game</span><span class="p">[</span><span class="s1">&#39;update&#39;</span><span class="p">](</span><span class="mf">0</span><span class="p">)</span><span class="w"> </span><span class="c1">// checkErase → erasing</span>
<span class="w">        </span><span class="nx">expect</span><span class="p">(</span><span class="nx">game</span><span class="p">[</span><span class="s1">&#39;mode&#39;</span><span class="p">]).</span><span class="nx">toBe</span><span class="p">(</span><span class="s1">&#39;erasing&#39;</span><span class="p">)</span>

<span class="w">        </span><span class="c1">// 消去後の重力チェック</span>
<span class="w">        </span><span class="nx">game</span><span class="p">[</span><span class="s1">&#39;update&#39;</span><span class="p">](</span><span class="mf">0</span><span class="p">)</span><span class="w"> </span><span class="c1">// erasing → checkFall</span>
<span class="w">        </span><span class="nx">expect</span><span class="p">(</span><span class="nx">game</span><span class="p">[</span><span class="s1">&#39;mode&#39;</span><span class="p">]).</span><span class="nx">toBe</span><span class="p">(</span><span class="s1">&#39;checkFall&#39;</span><span class="p">)</span>

<span class="w">        </span><span class="c1">// 重力適用（青ぷよが落下）</span>
<span class="w">        </span><span class="nx">game</span><span class="p">[</span><span class="s1">&#39;update&#39;</span><span class="p">](</span><span class="mf">0</span><span class="p">)</span><span class="w"> </span><span class="c1">// checkFall → falling（落下あり）</span>
<span class="w">        </span><span class="nx">expect</span><span class="p">(</span><span class="nx">game</span><span class="p">[</span><span class="s1">&#39;mode&#39;</span><span class="p">]).</span><span class="nx">toBe</span><span class="p">(</span><span class="s1">&#39;falling&#39;</span><span class="p">)</span>

<span class="w">        </span><span class="c1">// 落下アニメーション</span>
<span class="w">        </span><span class="nx">game</span><span class="p">[</span><span class="s1">&#39;update&#39;</span><span class="p">](</span><span class="mf">0</span><span class="p">)</span><span class="w"> </span><span class="c1">// falling → checkFall</span>
<span class="w">        </span><span class="nx">expect</span><span class="p">(</span><span class="nx">game</span><span class="p">[</span><span class="s1">&#39;mode&#39;</span><span class="p">]).</span><span class="nx">toBe</span><span class="p">(</span><span class="s1">&#39;checkFall&#39;</span><span class="p">)</span>

<span class="w">        </span><span class="c1">// 落下完了まで繰り返し</span>
<span class="w">        </span><span class="kd">let</span><span class="w"> </span><span class="nx">iterations</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0</span>
<span class="w">        </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="nx">game</span><span class="p">[</span><span class="s1">&#39;mode&#39;</span><span class="p">]</span><span class="w"> </span><span class="o">!==</span><span class="w"> </span><span class="s1">&#39;checkErase&#39;</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nx">iterations</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mf">20</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nx">game</span><span class="p">[</span><span class="s1">&#39;update&#39;</span><span class="p">](</span><span class="mf">0</span><span class="p">)</span>
<span class="w">            </span><span class="nx">iterations</span><span class="o">++</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="c1">// checkErase モードに到達している</span>
<span class="w">        </span><span class="nx">expect</span><span class="p">(</span><span class="nx">game</span><span class="p">[</span><span class="s1">&#39;mode&#39;</span><span class="p">]).</span><span class="nx">toBe</span><span class="p">(</span><span class="s1">&#39;checkErase&#39;</span><span class="p">)</span>

<span class="w">        </span><span class="c1">// 2回目の消去判定（連鎖）</span>
<span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">chainEraseInfo</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">stage</span><span class="p">.</span><span class="nx">checkErase</span><span class="p">()</span>

<span class="w">        </span><span class="c1">// 連鎖が発生していることを確認（青ぷよが4つつながっている）</span>
<span class="w">        </span><span class="nx">expect</span><span class="p">(</span><span class="nx">chainEraseInfo</span><span class="p">.</span><span class="nx">erasePuyoCount</span><span class="p">).</span><span class="nx">toBeGreaterThan</span><span class="p">(</span><span class="mf">0</span><span class="p">)</span>
<span class="w">    </span><span class="p">})</span>
<span class="p">})</span>
</code></pre></div>
<p>「このテストは何を確認しているんですか？」このテストでは以下を確認しています：</p>
<ol>
<li><strong>初期配置</strong>：赤ぷよ4つ（2×2）と青ぷよ4つ（縦3 + 横1）を配置</li>
<li><strong>1回目の消去</strong>：赤ぷよが消える</li>
<li><strong>重力適用</strong>：青ぷよが落下</li>
<li><strong>2回目の消去</strong>：落下した青ぷよが4つつながり、連鎖が発生</li>
</ol>
<p>「テストは通ったんですか？」はい！既存の実装で40テスト全てパスしました。イテレーション6で実装したゲームループが、自然に連鎖反応を実現していたんです。</p>
<h3 id="7_1">イテレーション７のまとめ<a class="headerlink" href="#7_1" title="Permanent link">&para;</a></h3>
<p>このイテレーションでは、以下を学びました：</p>
<ol>
<li>
<p><strong>連鎖反応はゲームループの構造から生まれる</strong>：</p>
<ul>
<li><code>erasing → checkFall → checkErase</code> のサイクルが連鎖を実現</li>
<li>消去対象がなくなるまで自動的に繰り返される</li>
</ul>
</li>
<li>
<p><strong>テストファースト開発の利点</strong>：</p>
<ul>
<li>テストを先に書くことで、既存実装の動作を確認できた</li>
<li>新しいコードを追加せずに、テストだけで機能の動作を検証</li>
</ul>
</li>
<li>
<p><strong>シンプルな設計の力</strong>：</p>
<ul>
<li>複雑な連鎖ロジックを追加せずに、既存の状態遷移だけで実現</li>
<li>各モードが単一責任を持つことで、組み合わせが自然に連鎖を生む</li>
</ul>
</li>
</ol>
<p>次のイテレーションでは、連鎖カウント機能やスコア計算を実装して、連鎖の面白さをさらに高めていきます！</p>
<h2 id="8">イテレーション8: 全消しボーナスの実装<a class="headerlink" href="#8" title="Permanent link">&para;</a></h2>
<p>「連鎖ができるようになったけど、ぷよぷよには全消しボーナスもありますよね？」そうですね！ぷよぷよには、盤面上のぷよをすべて消すと得られる「全消し（ぜんけし）ボーナス」という特別な報酬があります。今回は、その全消しボーナスを実装していきましょう！</p>
<h3 id="_67">ユーザーストーリー<a class="headerlink" href="#_67" title="Permanent link">&para;</a></h3>
<p>まずは、このイテレーションで実装するユーザーストーリーを確認しましょう：</p>
<blockquote>
<p>プレイヤーとして、盤面上のぷよをすべて消したときに全消しボーナスを獲得できる</p>
</blockquote>
<p>「やった！全部消えた！」という達成感と共に、特別なボーナスポイントを獲得できる機能を実装します。これにより、プレイヤーは全消しを狙った戦略を考えるようになりますね。</p>
<h3 id="todo_8">TODOリスト<a class="headerlink" href="#todo_8" title="Permanent link">&para;</a></h3>
<p>「どんな作業が必要になりますか？」このユーザーストーリーを実現するために、TODOリストを作成してみましょう。</p>
<p>「全消しボーナスを実装する」という機能を実現するためには、以下のようなタスクが必要そうですね：</p>
<ul>
<li>全消し判定を実装する（盤面上のぷよがすべて消えたかどうかを判定する）</li>
<li>全消しボーナスの計算を実装する（全消し時に加算するボーナス点を計算する）</li>
<li>全消し演出を実装する（全消し時に特別な演出を表示する）</li>
</ul>
<p>「なるほど、順番に実装していけばいいんですね！」そうです、一つずつ進めていきましょう。テスト駆動開発の流れに沿って、まずはテストから書いていきますよ。</p>
<h3 id="_68">テスト: 全消し判定<a class="headerlink" href="#_68" title="Permanent link">&para;</a></h3>
<p>「最初に何をテストすればいいんでしょうか？」まずは、全消し判定をテストしましょう。盤面上のぷよがすべて消えたかどうかを判定する機能が必要です。</p>
<div class="highlight"><pre><span></span><code><span class="c1">// src/tests/stage.test.ts（続き）</span>
<span class="nx">describe</span><span class="p">(</span><span class="s1">&#39;全消し判定&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">it</span><span class="p">(</span><span class="s1">&#39;盤面上のぷよがすべて消えると全消しになる&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// ステージにぷよを配置</span>
<span class="w">        </span><span class="nx">stage</span><span class="p">.</span><span class="nx">setPuyo</span><span class="p">(</span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="mf">10</span><span class="p">,</span><span class="w"> </span><span class="mf">1</span><span class="p">);</span>
<span class="w">        </span><span class="nx">stage</span><span class="p">.</span><span class="nx">setPuyo</span><span class="p">(</span><span class="mf">2</span><span class="p">,</span><span class="w"> </span><span class="mf">10</span><span class="p">,</span><span class="w"> </span><span class="mf">1</span><span class="p">);</span>
<span class="w">        </span><span class="nx">stage</span><span class="p">.</span><span class="nx">setPuyo</span><span class="p">(</span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="mf">11</span><span class="p">,</span><span class="w"> </span><span class="mf">1</span><span class="p">);</span>
<span class="w">        </span><span class="nx">stage</span><span class="p">.</span><span class="nx">setPuyo</span><span class="p">(</span><span class="mf">2</span><span class="p">,</span><span class="w"> </span><span class="mf">11</span><span class="p">,</span><span class="w"> </span><span class="mf">1</span><span class="p">);</span>

<span class="w">        </span><span class="c1">// 消去判定と実行</span>
<span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">eraseInfo</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">stage</span><span class="p">.</span><span class="nx">checkErase</span><span class="p">();</span>
<span class="w">        </span><span class="nx">stage</span><span class="p">.</span><span class="nx">eraseBoards</span><span class="p">(</span><span class="nx">eraseInfo</span><span class="p">.</span><span class="nx">eraseInfo</span><span class="p">);</span>

<span class="w">        </span><span class="c1">// 全消し判定</span>
<span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">isZenkeshi</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">stage</span><span class="p">.</span><span class="nx">checkZenkeshi</span><span class="p">();</span>

<span class="w">        </span><span class="c1">// 全消しになっていることを確認</span>
<span class="w">        </span><span class="nx">expect</span><span class="p">(</span><span class="nx">isZenkeshi</span><span class="p">).</span><span class="nx">toBe</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
<span class="w">    </span><span class="p">});</span>

<span class="w">    </span><span class="nx">it</span><span class="p">(</span><span class="s1">&#39;盤面上にぷよが残っていると全消しにならない&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// ステージにぷよを配置</span>
<span class="w">        </span><span class="nx">stage</span><span class="p">.</span><span class="nx">setPuyo</span><span class="p">(</span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="mf">10</span><span class="p">,</span><span class="w"> </span><span class="mf">1</span><span class="p">);</span>
<span class="w">        </span><span class="nx">stage</span><span class="p">.</span><span class="nx">setPuyo</span><span class="p">(</span><span class="mf">2</span><span class="p">,</span><span class="w"> </span><span class="mf">10</span><span class="p">,</span><span class="w"> </span><span class="mf">1</span><span class="p">);</span>
<span class="w">        </span><span class="nx">stage</span><span class="p">.</span><span class="nx">setPuyo</span><span class="p">(</span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="mf">11</span><span class="p">,</span><span class="w"> </span><span class="mf">1</span><span class="p">);</span>
<span class="w">        </span><span class="nx">stage</span><span class="p">.</span><span class="nx">setPuyo</span><span class="p">(</span><span class="mf">2</span><span class="p">,</span><span class="w"> </span><span class="mf">11</span><span class="p">,</span><span class="w"> </span><span class="mf">1</span><span class="p">);</span>
<span class="w">        </span><span class="nx">stage</span><span class="p">.</span><span class="nx">setPuyo</span><span class="p">(</span><span class="mf">3</span><span class="p">,</span><span class="w"> </span><span class="mf">11</span><span class="p">,</span><span class="w"> </span><span class="mf">2</span><span class="p">);</span><span class="w"> </span><span class="c1">// 消えないぷよ</span>

<span class="w">        </span><span class="c1">// 消去判定と実行</span>
<span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">eraseInfo</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">stage</span><span class="p">.</span><span class="nx">checkErase</span><span class="p">();</span>
<span class="w">        </span><span class="nx">stage</span><span class="p">.</span><span class="nx">eraseBoards</span><span class="p">(</span><span class="nx">eraseInfo</span><span class="p">.</span><span class="nx">eraseInfo</span><span class="p">);</span>

<span class="w">        </span><span class="c1">// 全消し判定</span>
<span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">isZenkeshi</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">stage</span><span class="p">.</span><span class="nx">checkZenkeshi</span><span class="p">();</span>

<span class="w">        </span><span class="c1">// 全消しになっていないことを確認</span>
<span class="w">        </span><span class="nx">expect</span><span class="p">(</span><span class="nx">isZenkeshi</span><span class="p">).</span><span class="nx">toBe</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span>
<span class="w">    </span><span class="p">});</span>
<span class="p">});</span>
</code></pre></div>
<p>「このテストでは何を確認しているんですか？」このテストでは、以下の2つのケースを確認しています：</p>
<ol>
<li>盤面上のぷよがすべて消えた場合、全消しと判定されるか</li>
<li>盤面上にぷよが残っている場合、全消しと判定されないか</li>
</ol>
<p>「最初のテストでは、2×2の正方形に赤ぷよを配置して、それらが消えた後に全消しになるんですね？」そうです！最初のテストでは、2×2の正方形に赤ぷよを配置し、それらが消去された後に盤面が空になるので、全消しと判定されるはずです。</p>
<p>「2つ目のテストでは、消えないぷよが残るようにしているんですね？」その通りです！2つ目のテストでは、2×2の正方形に赤ぷよを配置した上で、別の場所に青ぷよを1つ配置しています。赤ぷよは消えますが、青ぷよは消えないので、全消しにはならないはずです。</p>
<p>「なるほど、全消し判定の条件がよく分かりますね！」では、このテストが通るように実装していきましょう。</p>
<h3 id="_69">実装: 全消し判定<a class="headerlink" href="#_69" title="Permanent link">&para;</a></h3>
<p>「テストが失敗することを確認したら、実装に進みましょう！」そうですね。では、全消し判定を実装していきましょう。</p>
<div class="highlight"><pre><span></span><code><span class="c1">// src/stage.ts（続き）</span>
<span class="nx">checkZenkeshi</span><span class="p">()</span><span class="o">:</span><span class="w"> </span><span class="kt">boolean</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// 盤面上にぷよがあるかチェック</span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kd">let</span><span class="w"> </span><span class="nx">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0</span><span class="p">;</span><span class="w"> </span><span class="nx">y</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">config</span><span class="p">.</span><span class="nx">stageRows</span><span class="p">;</span><span class="w"> </span><span class="nx">y</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kd">let</span><span class="w"> </span><span class="nx">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0</span><span class="p">;</span><span class="w"> </span><span class="nx">x</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">config</span><span class="p">.</span><span class="nx">stageCols</span><span class="p">;</span><span class="w"> </span><span class="nx">x</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">board</span><span class="p">[</span><span class="nx">y</span><span class="p">][</span><span class="nx">x</span><span class="p">]</span><span class="w"> </span><span class="o">!==</span><span class="w"> </span><span class="mf">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="k">return</span><span class="w"> </span><span class="kc">false</span><span class="p">;</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="kc">true</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
<p>「シンプルですね！」そうですね。全消し判定の実装自体はとてもシンプルです。盤面上のすべてのマスを順番にチェックし、ぷよがある（値が0でない）マスが見つかった時点で<code>false</code>を返します。すべてのマスをチェックして、ぷよが見つからなければ<code>true</code>を返します。</p>
<p>「二重ループを使って、すべてのマスをチェックしているんですね！」その通りです！外側のループで行（y座標）を、内側のループで列（x座標）を順番にチェックしています。これにより、盤面上のすべてのマスを効率的にチェックできます。</p>
<h3 id="_70">解説: 全消し判定<a class="headerlink" href="#_70" title="Permanent link">&para;</a></h3>
<p>全消し判定では、以下のことを行っています：</p>
<ol>
<li>盤面上のすべてのマスをチェック</li>
<li>ぷよがある（値が0でない）マスがあれば全消しではない</li>
<li>すべてのマスが空（値が0）であれば全消し</li>
</ol>
<p>「全消し判定はいつ行われるんですか？」良い質問ですね！全消し判定は、ぷよの消去処理後に行われます。ぷよが消えた後、盤面上にぷよが残っていないかをチェックするんです。</p>
<p>「テストは通りましたか？」はい、これでテストは通るはずです！次は、全消しボーナスの計算を実装していきましょう。</p>
<h3 id="_71">テスト: 全消しボーナス<a class="headerlink" href="#_71" title="Permanent link">&para;</a></h3>
<p>「全消しボーナスはどのようにテストすればいいですか？」全消しボーナスは、全消し時に特別なボーナス点が加算されることをテストする必要があります。</p>
<div class="highlight"><pre><span></span><code><span class="c1">// src/tests/score.test.ts（続き）</span>
<span class="nx">describe</span><span class="p">(</span><span class="s1">&#39;全消しボーナス&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">it</span><span class="p">(</span><span class="s1">&#39;全消しするとボーナスが加算される&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// 通常のスコア加算</span>
<span class="w">        </span><span class="nx">score</span><span class="p">.</span><span class="nx">addScore</span><span class="p">(</span><span class="mf">4</span><span class="p">,</span><span class="w"> </span><span class="mf">1</span><span class="p">);</span>
<span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">normalScore</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">score</span><span class="p">.</span><span class="nx">getScore</span><span class="p">();</span>

<span class="w">        </span><span class="c1">// 全消しボーナス加算</span>
<span class="w">        </span><span class="nx">score</span><span class="p">.</span><span class="nx">addZenkeshiBonus</span><span class="p">();</span>

<span class="w">        </span><span class="c1">// 全消しボーナスが加算されていることを確認</span>
<span class="w">        </span><span class="nx">expect</span><span class="p">(</span><span class="nx">score</span><span class="p">.</span><span class="nx">getScore</span><span class="p">()).</span><span class="nx">toBeGreaterThan</span><span class="p">(</span><span class="nx">normalScore</span><span class="p">);</span>
<span class="w">    </span><span class="p">});</span>
<span class="p">});</span>
</code></pre></div>
<p>「このテストでは何を確認しているんですか？」このテストでは、全消しボーナスが加算されると、スコアが増加することを確認しています。具体的には：</p>
<ol>
<li>まず通常のスコア加算を行い、現在のスコアを記録します</li>
<li>次に全消しボーナスを加算します</li>
<li>最後に、スコアが増加していることを確認します</li>
</ol>
<p>このテストでは、全消しボーナスが正しく加算されることをテストしています。</p>
<h3 id="_72">実装: 全消しボーナス<a class="headerlink" href="#_72" title="Permanent link">&para;</a></h3>
<p>テストが失敗することを確認したら、テストが通るように最小限のコードを実装します。</p>
<div class="highlight"><pre><span></span><code><span class="c1">// src/score.ts（続き）</span>
<span class="nx">addZenkeshiBonus</span><span class="p">()</span><span class="o">:</span><span class="w"> </span><span class="ow">void</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// 全消しボーナス（固定値）</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">zenkeshiBonus</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">3600</span><span class="p">;</span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">score</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="nx">zenkeshiBonus</span><span class="p">;</span>

<span class="w">    </span><span class="c1">// スコア表示の更新</span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">draw</span><span class="p">();</span>
<span class="p">}</span>
</code></pre></div>
<h3 id="_73">解説: 全消しボーナス<a class="headerlink" href="#_73" title="Permanent link">&para;</a></h3>
<p>全消しボーナスでは、以下のことを行っています。</p>
<ol>
<li>全消しボーナスの計算（固定値3600点）</li>
<li>スコアへの加算</li>
<li>スコア表示の更新</li>
</ol>
<p>全消しボーナスは、盤面上のぷよをすべて消去した場合に加算される特別なボーナスです。これにより、プレイヤーは全消しを狙った戦略を考えるようになります。</p>
<h3 id="_74">実装: ゲームループとの統合<a class="headerlink" href="#_74" title="Permanent link">&para;</a></h3>
<p>「全消しボーナスはいつ判定されるんですか？」良い質問ですね！全消しボーナスは、ゲームループの<code>checkErase</code>モードで消去対象がない場合に判定されます。</p>
<div class="highlight"><pre><span></span><code><span class="c1">// app/typescript-3/src/game.ts の update メソッド（抜粋）</span>
<span class="k">case</span><span class="w"> </span><span class="s1">&#39;checkErase&#39;</span><span class="o">:</span>
<span class="c1">// 消去判定</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">eraseInfo</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">stage</span><span class="p">.</span><span class="nx">checkErase</span><span class="p">()</span>
<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">eraseInfo</span><span class="p">.</span><span class="nx">erasePuyoCount</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mf">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// 消去対象がある場合、消去処理へ</span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">stage</span><span class="p">.</span><span class="nx">eraseBoards</span><span class="p">(</span><span class="nx">eraseInfo</span><span class="p">.</span><span class="nx">eraseInfo</span><span class="p">)</span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">mode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;erasing&#39;</span>
<span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// 消去対象がない場合、全消し判定</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">stage</span><span class="p">.</span><span class="nx">checkZenkeshi</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// 全消しボーナスを加算</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="nx">score</span><span class="p">.</span><span class="nx">addZenkeshiBonus</span><span class="p">()</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="c1">// 次のぷよを出す</span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">mode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;newPuyo&#39;</span>
<span class="p">}</span>
<span class="k">break</span>
</code></pre></div>
<p>「なるほど！消去するぷよがなくなったタイミングで全消しチェックをするんですね。」そのとおりです。ゲームの流れは以下のようになります：</p>
<ol>
<li>ぷよが着地 → <code>checkFall</code></li>
<li>重力適用 → <code>falling</code> → <code>checkFall</code>（繰り返し）</li>
<li>落下なし → <code>checkErase</code></li>
<li>消去判定：<ul>
<li>消去あり → <code>erasing</code> → <code>checkFall</code>（重力再適用）</li>
<li>消去なし → 全消し判定 → <code>newPuyo</code></li>
</ul>
</li>
</ol>
<p>「全消しボーナスの統合テストも追加したんですか？」はい、ゲームループ全体が正しく動作することを確認するテストを追加しました。</p>
<div class="highlight"><pre><span></span><code><span class="c1">// app/typescript-3/tests/game.test.ts</span>
<span class="nx">describe</span><span class="p">(</span><span class="s1">&#39;全消しボーナス&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">it</span><span class="p">(</span><span class="s1">&#39;盤面上のぷよをすべて消すと全消しボーナスが加算される&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// 初期化</span>
<span class="w">        </span><span class="nx">game</span><span class="p">.</span><span class="nx">initialize</span><span class="p">()</span>

<span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">stage</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">game</span><span class="p">[</span><span class="s1">&#39;stage&#39;</span><span class="p">]</span>
<span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">score</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">game</span><span class="p">[</span><span class="s1">&#39;score&#39;</span><span class="p">]</span>

<span class="w">        </span><span class="c1">// 初期スコア確認</span>
<span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">initialScore</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">score</span><span class="p">.</span><span class="nx">getScore</span><span class="p">()</span>

<span class="w">        </span><span class="c1">// 盤面に4つのぷよを配置（すべて消去される）</span>
<span class="w">        </span><span class="nx">stage</span><span class="p">.</span><span class="nx">setPuyo</span><span class="p">(</span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="mf">10</span><span class="p">,</span><span class="w"> </span><span class="mf">1</span><span class="p">)</span>
<span class="w">        </span><span class="nx">stage</span><span class="p">.</span><span class="nx">setPuyo</span><span class="p">(</span><span class="mf">2</span><span class="p">,</span><span class="w"> </span><span class="mf">10</span><span class="p">,</span><span class="w"> </span><span class="mf">1</span><span class="p">)</span>
<span class="w">        </span><span class="nx">stage</span><span class="p">.</span><span class="nx">setPuyo</span><span class="p">(</span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="mf">11</span><span class="p">,</span><span class="w"> </span><span class="mf">1</span><span class="p">)</span>
<span class="w">        </span><span class="nx">stage</span><span class="p">.</span><span class="nx">setPuyo</span><span class="p">(</span><span class="mf">2</span><span class="p">,</span><span class="w"> </span><span class="mf">11</span><span class="p">,</span><span class="w"> </span><span class="mf">1</span><span class="p">)</span>

<span class="w">        </span><span class="c1">// checkErase モードに設定</span>
<span class="w">        </span><span class="nx">game</span><span class="p">[</span><span class="s1">&#39;mode&#39;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;checkErase&#39;</span>

<span class="w">        </span><span class="c1">// 消去判定と処理</span>
<span class="w">        </span><span class="nx">game</span><span class="p">[</span><span class="s1">&#39;update&#39;</span><span class="p">](</span><span class="mf">0</span><span class="p">)</span><span class="w"> </span><span class="c1">// checkErase → erasing（消去実行）</span>

<span class="w">        </span><span class="c1">// 消去後の重力チェック</span>
<span class="w">        </span><span class="nx">game</span><span class="p">[</span><span class="s1">&#39;update&#39;</span><span class="p">](</span><span class="mf">0</span><span class="p">)</span><span class="w"> </span><span class="c1">// erasing → checkFall</span>

<span class="w">        </span><span class="c1">// 重力適用（落下なし）</span>
<span class="w">        </span><span class="nx">game</span><span class="p">[</span><span class="s1">&#39;update&#39;</span><span class="p">](</span><span class="mf">0</span><span class="p">)</span><span class="w"> </span><span class="c1">// checkFall → checkErase</span>

<span class="w">        </span><span class="c1">// 2回目の消去判定（全消し判定が実行される）</span>
<span class="w">        </span><span class="nx">game</span><span class="p">[</span><span class="s1">&#39;update&#39;</span><span class="p">](</span><span class="mf">0</span><span class="p">)</span><span class="w"> </span><span class="c1">// checkErase → newPuyo（全消しボーナス加算）</span>

<span class="w">        </span><span class="c1">// スコアが増加していることを確認</span>
<span class="w">        </span><span class="nx">expect</span><span class="p">(</span><span class="nx">score</span><span class="p">.</span><span class="nx">getScore</span><span class="p">()).</span><span class="nx">toBeGreaterThan</span><span class="p">(</span><span class="nx">initialScore</span><span class="p">)</span>
<span class="w">        </span><span class="nx">expect</span><span class="p">(</span><span class="nx">score</span><span class="p">.</span><span class="nx">getScore</span><span class="p">()).</span><span class="nx">toBe</span><span class="p">(</span><span class="mf">3600</span><span class="p">)</span><span class="w"> </span><span class="c1">// 全消しボーナスのみ</span>
<span class="w">    </span><span class="p">})</span>
<span class="p">})</span>
</code></pre></div>
<p>「このテストでは、4つのぷよを消去して全消しになるシナリオを確認しているんですね！」そうです。全消しボーナスが正しく加算されることと、スコアが3600点になることを検証しています。</p>
<h3 id="8_1">イテレーション８のまとめ<a class="headerlink" href="#8_1" title="Permanent link">&para;</a></h3>
<p>このイテレーションでは、以下を学びました：</p>
<ol>
<li>
<p><strong>全消し判定の実装</strong>：</p>
<ul>
<li>二重ループでフィールド全体をスキャン</li>
<li>ぷよが1つでも残っていれば全消しではない</li>
<li>シンプルなロジックで確実な判定を実現</li>
</ul>
</li>
<li>
<p><strong>全消しボーナスの設計</strong>：</p>
<ul>
<li>固定値（3600点）のボーナスを付与</li>
<li>プレイヤーに特別な達成感を与える仕組み</li>
<li>戦略的な深みを追加</li>
</ul>
</li>
<li>
<p><strong>ゲームループとの統合</strong>：</p>
<ul>
<li><code>checkErase</code>モードで消去対象がない場合に全消し判定</li>
<li>既存の状態遷移に自然に組み込む</li>
<li>統合テストでエンドツーエンドの動作を確認</li>
</ul>
</li>
<li>
<p><strong>テスト駆動開発の継続</strong>：</p>
<ul>
<li>全消しになるケースとならないケースの両方をテスト</li>
<li>境界条件（空の盤面、1つだけ残る）を確認</li>
<li>実装前にテストで仕様を明確化</li>
<li>統合テストで全体の動作を保証</li>
</ul>
</li>
</ol>
<p>このイテレーションで、全消しボーナスという特別な報酬システムが実装できました。次のイテレーションでは、ゲームの終了条件となるゲームオーバー判定を実装していきます！</p>
<h2 id="9">イテレーション9: ゲームオーバーの実装<a class="headerlink" href="#9" title="Permanent link">&para;</a></h2>
<p>「ゲームが終わる条件も必要ですよね？」そうですね！どんなゲームにも終わりがあります。ぷよぷよでは、新しいぷよを配置できなくなったときにゲームオーバーとなります。今回は、そのゲームオーバー判定と演出を実装していきましょう！</p>
<h3 id="_75">ユーザーストーリー<a class="headerlink" href="#_75" title="Permanent link">&para;</a></h3>
<p>まずは、このイテレーションで実装するユーザーストーリーを確認しましょう：</p>
<blockquote>
<p>プレイヤーとして、ゲームオーバーになるとゲーム終了の演出を見ることができる</p>
</blockquote>
<p>「ゲームが終わったことが明確に分かるといいですね！」そうですね。ゲームの終わりが明確でないと、プレイヤーはモヤモヤした気持ちになってしまいます。ゲームオーバーになったことを明確に伝え、適切な演出を行うことで、プレイヤーに達成感や次回への意欲を持ってもらうことができます。</p>
<h3 id="todo_9">TODOリスト<a class="headerlink" href="#todo_9" title="Permanent link">&para;</a></h3>
<p>「どんな作業が必要になりますか？」このユーザーストーリーを実現するために、TODOリストを作成してみましょう。</p>
<p>「ゲームオーバーを実装する」という機能を実現するためには、以下のようなタスクが必要そうですね：</p>
<ul>
<li>ゲームオーバー判定を実装する（新しいぷよを配置できない状態を検出する）</li>
<li>ゲームオーバー演出を実装する（ゲームオーバー時に特別な表示や効果を追加する）</li>
<li>リスタート機能を実装する（ゲームオーバー後に新しいゲームを始められるようにする）</li>
</ul>
<p>「なるほど、順番に実装していけばいいんですね！」そうです、一つずつ進めていきましょう。テスト駆動開発の流れに沿って、まずはテストから書いていきますよ。</p>
<h3 id="_76">テスト: ゲームオーバー判定<a class="headerlink" href="#_76" title="Permanent link">&para;</a></h3>
<p>「最初に何をテストすればいいんでしょうか？」まずは、ゲームオーバー判定をテストしましょう。新しいぷよを配置できない状態を検出する機能が必要です。</p>
<div class="highlight"><pre><span></span><code><span class="c1">// src/tests/game.test.ts（続き）</span>
<span class="nx">describe</span><span class="p">(</span><span class="s1">&#39;ゲームオーバー&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">beforeEach</span><span class="p">(()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">game</span><span class="p">.</span><span class="nx">initialize</span><span class="p">();</span>
<span class="w">    </span><span class="p">});</span>

<span class="w">    </span><span class="nx">it</span><span class="p">(</span><span class="s1">&#39;新しいぷよを配置できない場合、ゲームオーバーになる&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// ステージの上部にぷよを配置</span>
<span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">stage</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">game</span><span class="p">[</span><span class="s1">&#39;stage&#39;</span><span class="p">];</span>
<span class="w">        </span><span class="nx">stage</span><span class="p">.</span><span class="nx">setPuyo</span><span class="p">(</span><span class="mf">2</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">1</span><span class="p">);</span>
<span class="w">        </span><span class="nx">stage</span><span class="p">.</span><span class="nx">setPuyo</span><span class="p">(</span><span class="mf">2</span><span class="p">,</span><span class="w"> </span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="mf">1</span><span class="p">);</span>

<span class="w">        </span><span class="c1">// 新しいぷよの生成（通常は中央上部に配置される）</span>
<span class="w">        </span><span class="nx">game</span><span class="p">[</span><span class="s1">&#39;player&#39;</span><span class="p">].</span><span class="nx">createNewPuyo</span><span class="p">();</span>

<span class="w">        </span><span class="c1">// ゲームオーバー判定</span>
<span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">isGameOver</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">game</span><span class="p">[</span><span class="s1">&#39;player&#39;</span><span class="p">].</span><span class="nx">checkGameOver</span><span class="p">();</span>

<span class="w">        </span><span class="c1">// ゲームオーバーになっていることを確認</span>
<span class="w">        </span><span class="nx">expect</span><span class="p">(</span><span class="nx">isGameOver</span><span class="p">).</span><span class="nx">toBe</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
<span class="w">    </span><span class="p">});</span>
<span class="p">});</span>
</code></pre></div>
<p>「このテストでは何を確認しているんですか？」このテストでは、新しいぷよを配置できない状態がゲームオーバーと判定されるかを確認しています。具体的には：</p>
<ol>
<li>ステージの上部（新しいぷよが配置される位置）にぷよを配置します</li>
<li>新しいぷよを生成します</li>
<li>ゲームオーバー判定を行い、ゲームオーバーになっていることを確認します</li>
</ol>
<p>「なるほど、新しいぷよの配置位置にすでにぷよがあると、ゲームオーバーになるんですね！」そうです！ぷよぷよでは、新しいぷよを配置する位置（通常はステージの中央上部）にすでにぷよがある場合、これ以上ゲームを続行できないため、ゲームオーバーとなります。では、このテストが通るように実装していきましょう。</p>
<h3 id="_77">実装: ゲームオーバー判定<a class="headerlink" href="#_77" title="Permanent link">&para;</a></h3>
<p>「テストが失敗することを確認したら、実装に進みましょう！」そうですね。では、ゲームオーバー判定を実装していきましょう。</p>
<div class="highlight"><pre><span></span><code><span class="c1">// src/player.ts（続き）</span>
<span class="nx">checkGameOver</span><span class="p">()</span><span class="o">:</span><span class="w"> </span><span class="kt">boolean</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">stage</span><span class="p">)</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="kc">false</span><span class="p">;</span>

<span class="w">    </span><span class="c1">// 新しいぷよの配置位置にすでにぷよがあるかチェック</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">nextPos</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">getNextPuyoPosition</span><span class="p">();</span>

<span class="w">    </span><span class="c1">// 軸ぷよまたは2つ目のぷよの位置にぷよがあればゲームオーバー</span>
<span class="w">    </span><span class="c1">// getPuyo() は範囲外の場合 -1 を返すので、&gt; 0 でチェック</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="p">(</span>
<span class="w">      </span><span class="k">this</span><span class="p">.</span><span class="nx">stage</span><span class="p">.</span><span class="nx">getPuyo</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">puyoX</span><span class="p">,</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">puyoY</span><span class="p">)</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mf">0</span><span class="w"> </span><span class="o">||</span>
<span class="w">      </span><span class="k">this</span><span class="p">.</span><span class="nx">stage</span><span class="p">.</span><span class="nx">getPuyo</span><span class="p">(</span><span class="nx">nextPos</span><span class="p">.</span><span class="nx">x</span><span class="p">,</span><span class="w"> </span><span class="nx">nextPos</span><span class="p">.</span><span class="nx">y</span><span class="p">)</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mf">0</span>
<span class="w">    </span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>
<p>「シンプルですね！」そうですね。ゲームオーバー判定の実装自体はとてもシンプルです。<code>createNewPuyo()</code> で設定された軸ぷよの位置（<code>puyoX</code>, <code>puyoY</code>）と、回転状態に基づいて計算された2つ目のぷよの位置（<code>nextPos</code>）にすでにぷよがあるかどうかをチェックしています。</p>
<p>「なぜ <code>&gt; 0</code> でチェックしているんですか？」重要な質問ですね！<code>stage.getPuyo()</code> は範囲外の座標を渡されると <code>-1</code> を返します。初期状態では、軸ぷよは <code>y = 0</code>、2つ目のぷよは上向き（<code>rotation = 0</code>）なので <code>y = -1</code>（画面外）になります。もし <code>!== 0</code> でチェックすると、範囲外（<code>-1</code>）もゲームオーバーと誤判定してしまうため、<code>&gt; 0</code>（実際にぷよがある）でチェックする必要があります。</p>
<h3 id="_78">解説: ゲームオーバー判定<a class="headerlink" href="#_78" title="Permanent link">&para;</a></h3>
<p>ゲームオーバー判定では、以下のことを行っています：</p>
<ol>
<li>新しいぷよの配置位置（中央上部）を確認</li>
<li>その位置にすでにぷよがある場合、ゲームオーバーと判定</li>
</ol>
<p>「ゲームオーバー判定はいつ行われるんですか？」良い質問ですね！ゲームオーバー判定は、新しいぷよを生成するタイミングで行われます。新しいぷよを生成しようとしたときに、配置位置にすでにぷよがあれば、ゲームオーバーとなります。</p>
<p>「テストは通りましたか？」はい、これでテストは通るはずです！次は、ゲームオーバー演出を実装していきましょう。</p>
<h3 id="_79">テスト: ゲームオーバー演出<a class="headerlink" href="#_79" title="Permanent link">&para;</a></h3>
<p>「ゲームオーバー演出はどのようにテストすればいいですか？」ゲームオーバー演出は、ゲームの状態（モード）が変わることをテストするといいでしょう。</p>
<div class="highlight"><pre><span></span><code><span class="c1">// src/tests/game.test.ts（続き）</span>
<span class="nx">it</span><span class="p">(</span><span class="s1">&#39;ゲームオーバーになると、ゲームモードがgameOverに変わる&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// ステージの上部にぷよを配置</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">stage</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">game</span><span class="p">[</span><span class="s1">&#39;stage&#39;</span><span class="p">];</span>
<span class="w">    </span><span class="nx">stage</span><span class="p">.</span><span class="nx">setPuyo</span><span class="p">(</span><span class="mf">2</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">1</span><span class="p">);</span>
<span class="w">    </span><span class="nx">stage</span><span class="p">.</span><span class="nx">setPuyo</span><span class="p">(</span><span class="mf">2</span><span class="p">,</span><span class="w"> </span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="mf">1</span><span class="p">);</span>

<span class="w">    </span><span class="c1">// ゲームモードを設定</span>
<span class="w">    </span><span class="nx">game</span><span class="p">[</span><span class="s1">&#39;mode&#39;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;newPuyo&#39;</span><span class="p">;</span>

<span class="w">    </span><span class="c1">// ゲームループを実行</span>
<span class="w">    </span><span class="nx">game</span><span class="p">.</span><span class="nx">loop</span><span class="p">();</span>

<span class="w">    </span><span class="c1">// ゲームモードがgameOverになっていることを確認</span>
<span class="w">    </span><span class="nx">expect</span><span class="p">(</span><span class="nx">game</span><span class="p">[</span><span class="s1">&#39;mode&#39;</span><span class="p">]).</span><span class="nx">toBe</span><span class="p">(</span><span class="s1">&#39;gameOver&#39;</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div>
<p>「このテストでは何を確認しているんですか？」このテストでは、ゲームオーバー条件が満たされた場合に、ゲームの状態（モード）が<code>gameOver</code>に変わることを確認しています。具体的には：</p>
<ol>
<li>ステージの上部にぷよを配置して、ゲームオーバー条件を作ります</li>
<li>ゲームモードを<code>newPuyo</code>（新しいぷよを生成するモード）に設定します</li>
<li>ゲームループを実行します</li>
<li>ゲームモードが<code>gameOver</code>に変わっていることを確認します</li>
</ol>
<p>「なるほど、ゲームの状態遷移をテストしているんですね！」そうです！ゲームオーバーになると、ゲームの状態が変わり、それに応じた演出が行われるようになります。では、このテストが通るように実装していきましょう。</p>
<h3 id="_80">実装: ゲームオーバー演出<a class="headerlink" href="#_80" title="Permanent link">&para;</a></h3>
<p>「テストが失敗することを確認したら、実装に進みましょう！」そうですね。では、ゲームオーバー演出を実装していきましょう。</p>
<div class="highlight"><pre><span></span><code><span class="c1">// src/game.ts（続き）</span>
<span class="nx">loop</span><span class="p">()</span><span class="o">:</span><span class="w"> </span><span class="ow">void</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// フレームカウントを更新</span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">frame</span><span class="o">++</span><span class="p">;</span>

<span class="w">    </span><span class="c1">// ゲームの状態に応じた処理</span>
<span class="w">    </span><span class="k">switch</span><span class="w"> </span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">mode</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// 省略...</span>

<span class="k">case</span><span class="w"> </span><span class="s1">&#39;newPuyo&#39;</span><span class="o">:</span>
<span class="w">    </span><span class="c1">// 新しいぷよの生成</span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">player</span><span class="p">.</span><span class="nx">createNewPuyo</span><span class="p">();</span>

<span class="w">    </span><span class="c1">// ゲームオーバー判定</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">player</span><span class="p">.</span><span class="nx">checkGameOver</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="nx">mode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;gameOver&#39;</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="nx">mode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;playing&#39;</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="k">break</span><span class="p">;</span>

<span class="k">case</span><span class="w"> </span><span class="s1">&#39;playing&#39;</span><span class="o">:</span>
<span class="w">    </span><span class="c1">// プレイヤーの操作</span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">player</span><span class="p">.</span><span class="nx">control</span><span class="p">();</span>
<span class="w">    </span><span class="k">break</span><span class="p">;</span>

<span class="k">case</span><span class="w"> </span><span class="s1">&#39;gameOver&#39;</span><span class="o">:</span>
<span class="w">    </span><span class="c1">// ゲームオーバー演出</span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">drawGameOver</span><span class="p">();</span>
<span class="w">    </span><span class="k">break</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// 画面の更新</span>
<span class="k">this</span><span class="p">.</span><span class="nx">stage</span><span class="p">.</span><span class="nx">draw</span><span class="p">();</span>
<span class="k">this</span><span class="p">.</span><span class="nx">player</span><span class="p">.</span><span class="nx">draw</span><span class="p">();</span>
<span class="k">this</span><span class="p">.</span><span class="nx">score</span><span class="p">.</span><span class="nx">draw</span><span class="p">();</span>

<span class="c1">// 次のフレームの処理を予約</span>
<span class="nx">requestAnimationFrame</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">loop</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="k">this</span><span class="p">));</span>
<span class="p">}</span>

<span class="k">private</span><span class="w"> </span><span class="nx">drawGameOver</span><span class="p">()</span><span class="o">:</span><span class="w"> </span><span class="ow">void</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// ゲームオーバー表示</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">stageElement</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;stage&#39;</span><span class="p">)</span><span class="o">!</span><span class="p">;</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">gameOverElement</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s1">&#39;div&#39;</span><span class="p">);</span>
<span class="w">    </span><span class="nx">gameOverElement</span><span class="p">.</span><span class="nx">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;gameOver&#39;</span><span class="p">;</span>
<span class="w">    </span><span class="nx">gameOverElement</span><span class="p">.</span><span class="nx">textContent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;GAME OVER&#39;</span><span class="p">;</span>
<span class="w">    </span><span class="nx">gameOverElement</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">position</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;absolute&#39;</span><span class="p">;</span>
<span class="w">    </span><span class="nx">gameOverElement</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">top</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;50%&#39;</span><span class="p">;</span>
<span class="w">    </span><span class="nx">gameOverElement</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">left</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;50%&#39;</span><span class="p">;</span>
<span class="w">    </span><span class="nx">gameOverElement</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">transform</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;translate(-50%, -50%)&#39;</span><span class="p">;</span>
<span class="w">    </span><span class="nx">gameOverElement</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">color</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;red&#39;</span><span class="p">;</span>
<span class="w">    </span><span class="nx">gameOverElement</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">fontSize</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;36px&#39;</span><span class="p">;</span>
<span class="w">    </span><span class="nx">gameOverElement</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">fontWeight</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;bold&#39;</span><span class="p">;</span>

<span class="w">    </span><span class="c1">// すでにゲームオーバー表示がある場合は追加しない</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;gameOver&#39;</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">stageElement</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">gameOverElement</span><span class="p">);</span>
<span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<h3 id="_81">解説: ゲームオーバー演出<a class="headerlink" href="#_81" title="Permanent link">&para;</a></h3>
<p>ゲームオーバー演出では、以下のことを行っています。</p>
<ol>
<li>ゲームループ内でゲームオーバー判定を行い、条件が満たされた場合はゲームモードを<code>gameOver</code>に変更</li>
<li><code>gameOver</code>モードでは、ゲームオーバー表示を画面に追加</li>
</ol>
<p>ゲームオーバー表示は、ステージの中央に「GAME OVER」というテキストを表示します。これにより、プレイヤーはゲームが終了したことを視覚的に認識できます。</p>
<h3 id="_82">実装: ゲームループとの統合<a class="headerlink" href="#_82" title="Permanent link">&para;</a></h3>
<p>「ゲームオーバー判定はいつ行われるんですか？」良い質問ですね！ゲームオーバー判定は、新しいぷよを生成するタイミングで行われます。具体的には、<code>newPuyo</code> モードで新しいぷよを作成した直後にチェックします。</p>
<p>まず、ゲームオーバー判定のロジックを <code>handleNewPuyo()</code> メソッドに統合しました：</p>
<div class="highlight"><pre><span></span><code><span class="c1">// src/game.ts</span>
<span class="k">private</span><span class="w"> </span><span class="nx">handleNewPuyo</span><span class="p">()</span><span class="o">:</span><span class="w"> </span><span class="ow">void</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// 新しいぷよを作成</span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">player</span><span class="p">.</span><span class="nx">createNewPuyo</span><span class="p">()</span>

<span class="w">    </span><span class="c1">// ゲームオーバー判定</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">player</span><span class="p">.</span><span class="nx">checkGameOver</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">mode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;gameOver&#39;</span>
<span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">mode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;playing&#39;</span>
<span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>「なるほど、新しいぷよを作った直後にチェックするんですね！」そうです。新しいぷよを配置しようとした時点で、配置位置にすでにぷよがあれば、それ以上ゲームを続けられないと判断します。</p>
<p>次に、<code>update()</code> メソッドの <code>newPuyo</code> ケースでこのメソッドを呼び出します：</p>
<div class="highlight"><pre><span></span><code><span class="k">private</span><span class="w"> </span><span class="nx">update</span><span class="p">(</span><span class="nx">deltaTime</span><span class="o">:</span><span class="w"> </span><span class="kt">number</span><span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="ow">void</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">frame</span><span class="o">++</span>

<span class="w">    </span><span class="k">switch</span><span class="w"> </span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">mode</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="k">case</span><span class="w"> </span><span class="s1">&#39;newPuyo&#39;</span><span class="o">:</span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">handleNewPuyo</span><span class="p">()</span>
<span class="w">    </span><span class="k">break</span>

<span class="w">    </span><span class="c1">// ... 他のケース</span>

<span class="k">case</span><span class="w"> </span><span class="s1">&#39;gameOver&#39;</span><span class="o">:</span>
<span class="w">    </span><span class="c1">// ゲームオーバー演出</span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">drawGameOver</span><span class="p">()</span>
<span class="w">    </span><span class="k">break</span>
<span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<h4 id="_83">ゲームオーバー演出の実装<a class="headerlink" href="#_83" title="Permanent link">&para;</a></h4>
<p>「<code>drawGameOver()</code> はどのように実装されているんですか？」ゲームオーバー演出は非常にシンプルです。HTML にあらかじめ用意されている <code>gameOver</code> 要素を表示するだけです：</p>
<div class="highlight"><pre><span></span><code><span class="k">private</span><span class="w"> </span><span class="nx">drawGameOver</span><span class="p">()</span><span class="o">:</span><span class="w"> </span><span class="ow">void</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// ゲームオーバー表示</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">gameOverElement</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;gameOver&#39;</span><span class="p">)</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="nx">gameOverElement</span><span class="p">)</span><span class="w"> </span><span class="k">return</span>

<span class="c1">// ゲームオーバー要素を表示</span>
<span class="nx">gameOverElement</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">display</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;block&#39;</span>
<span class="p">}</span>
</code></pre></div>
<p>「なぜ新しく要素を作らないんですか？」良い質問です。HTML 側で既にスタイル設定済みの要素を用意しておくことで、JavaScript 側のコードをシンプルに保つことができます。また、デザインの変更も HTML/CSS 側で簡単に行えます。</p>
<p>HTML 側では以下のように定義されています：</p>
<div class="highlight"><pre><span></span><code><span class="p">&lt;</span><span class="nt">div</span>
        <span class="na">id</span><span class="o">=</span><span class="s">&quot;gameOver&quot;</span>
        <span class="na">style</span><span class="o">=</span><span class="s">&quot;</span>
<span class="s">    display: none;</span>
<span class="s">    position: fixed;</span>
<span class="s">    top: 50%;</span>
<span class="s">    left: 50%;</span>
<span class="s">    transform: translate(-50%, -50%);</span>
<span class="s">    color: red;</span>
<span class="s">    font-size: 48px;</span>
<span class="s">    font-weight: bold;</span>
<span class="s">    text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.8);</span>
<span class="s">    z-index: 1000;</span>
<span class="s">  &quot;</span>
<span class="p">&gt;</span>
    GAME OVER
<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</code></pre></div>
<p>「<code>position: fixed</code> と <code>transform: translate(-50%, -50%)</code> で画面中央に配置しているんですね！」その通りです。この組み合わせは CSS でよく使われるセンタリングテクニックです。</p>
<h4 id="_84">コード品質の改善<a class="headerlink" href="#_84" title="Permanent link">&para;</a></h4>
<p>実装中に <code>update()</code> メソッドの複雑度（cyclomatic complexity）が 11 に達し、ESLint の設定値（10）を超えてしまいました。そこで、各モードの処理を独立したメソッドに分離しました：</p>
<ul>
<li><code>handleNewPuyo()</code>: 新しいぷよ生成とゲームオーバー判定</li>
<li><code>handleCheckFall()</code>: 重力適用処理</li>
<li><code>handleCheckErase()</code>: 消去判定処理（既存）</li>
</ul>
<p>「メソッドを分離することで、複雑度が下がったんですね！」そうです。各メソッドが単一の責任を持つようになり、コードの可読性と保守性が向上しました。これは、リファクタリングの基本原則である「メソッド抽出（Extract Method）」パターンです。</p>
<h4 id="_85">テスト結果<a class="headerlink" href="#_85" title="Permanent link">&para;</a></h4>
<p>実装が完了したら、すべてのテストが通ることを確認しましょう：</p>
<div class="highlight"><pre><span></span><code>npm<span class="w"> </span><span class="nb">test</span>
</code></pre></div>
<p>結果：
<div class="highlight"><pre><span></span><code>Test Files  4 passed (4)
     Tests  46 passed (46)
</code></pre></div></p>
<p>「46 個すべてのテストが通りましたね！」素晴らしいです。これまでのイテレーションで書いたテストも含めて、すべてが正常に動作していることが確認できました。</p>
<h3 id="_86">実装: ユーザーインターフェース<a class="headerlink" href="#_86" title="Permanent link">&para;</a></h3>
<p>ゲームオーバー機能の実装が完了したので、ユーザーインターフェースをさらに改善していきましょう。</p>
<h4 id="ui-1">UI 改善 1: スコア・連鎖・次のぷよの表示<a class="headerlink" href="#ui-1" title="Permanent link">&para;</a></h4>
<p>まず、ゲームの状態をユーザーに分かりやすく伝えるため、スコア、連鎖数、次のぷよを画面に表示します。</p>
<p><strong>スコア表示の実装</strong> (src/score.ts):</p>
<div class="highlight"><pre><span></span><code><span class="kr">constructor</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">element</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;score&#39;</span><span class="p">)</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="nx">element</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">throw</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="ne">Error</span><span class="p">(</span><span class="s1">&#39;Score element not found&#39;</span><span class="p">)</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">scoreElement</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">element</span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">draw</span><span class="p">()</span><span class="w"> </span><span class="c1">// 初期表示</span>
<span class="p">}</span>

<span class="nx">draw</span><span class="p">()</span><span class="o">:</span><span class="w"> </span><span class="ow">void</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">scoreElement</span><span class="p">.</span><span class="nx">textContent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="sb">`スコア: </span><span class="si">${</span><span class="k">this</span><span class="p">.</span><span class="nx">score</span><span class="si">}</span><span class="sb">`</span>
<span class="p">}</span>
</code></pre></div>
<p>スコア表示は <code>Score</code> クラスのコンストラクタで初期化し、スコアが更新されるたびに <code>draw()</code> メソッドで表示を更新します。</p>
<p><strong>連鎖表示の実装</strong> (src/game.ts):</p>
<div class="highlight"><pre><span></span><code><span class="k">private</span><span class="w"> </span><span class="nx">combinationCount</span><span class="o">:</span><span class="w"> </span><span class="kt">number</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0</span>
<span class="k">private</span><span class="w"> </span><span class="nx">maxChainCount</span><span class="o">:</span><span class="w"> </span><span class="kt">number</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0</span>
<span class="k">private</span><span class="w"> </span><span class="nx">chainElement</span><span class="o">!:</span><span class="w"> </span><span class="nx">HTMLElement</span>

<span class="k">private</span><span class="w"> </span><span class="nx">updateChainDisplay</span><span class="p">()</span><span class="o">:</span><span class="w"> </span><span class="ow">void</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">chainElement</span><span class="p">)</span><span class="w"> </span><span class="k">return</span>

<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">combinationCount</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mf">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">chainElement</span><span class="p">.</span><span class="nx">textContent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="sb">`</span><span class="si">${</span><span class="k">this</span><span class="p">.</span><span class="nx">combinationCount</span><span class="si">}</span><span class="sb">連鎖`</span>
<span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">chainElement</span><span class="p">.</span><span class="nx">textContent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="sb">`最大連鎖: </span><span class="si">${</span><span class="k">this</span><span class="p">.</span><span class="nx">maxChainCount</span><span class="si">}</span><span class="sb">`</span>
<span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>連鎖中は現在の連鎖数を表示し、連鎖が終了すると最大連鎖数を表示します。これにより、プレイヤーは現在の連鎖状況と自己ベストを確認できます。</p>
<p><strong>次のぷよ表示の実装</strong> (src/game.ts):</p>
<div class="highlight"><pre><span></span><code><span class="k">private</span><span class="w"> </span><span class="nx">drawNextPuyo</span><span class="p">()</span><span class="o">:</span><span class="w"> </span><span class="ow">void</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">nextElement</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;next&#39;</span><span class="p">)</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="nx">nextElement</span><span class="p">)</span><span class="w"> </span><span class="k">return</span>

<span class="kd">let</span><span class="w"> </span><span class="nx">canvas</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">nextElement</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="s1">&#39;canvas&#39;</span><span class="p">)</span><span class="w"> </span><span class="kr">as</span><span class="w"> </span><span class="nx">HTMLCanvasElement</span>
<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="nx">canvas</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">canvas</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s1">&#39;canvas&#39;</span><span class="p">)</span>
<span class="w">    </span><span class="nx">canvas</span><span class="p">.</span><span class="nx">width</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">config</span><span class="p">.</span><span class="nx">puyoSize</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mf">2</span>
<span class="w">    </span><span class="nx">canvas</span><span class="p">.</span><span class="nx">height</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">config</span><span class="p">.</span><span class="nx">puyoSize</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mf">2</span>
<span class="w">    </span><span class="nx">nextElement</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">canvas</span><span class="p">)</span>
<span class="p">}</span>

<span class="kd">const</span><span class="w"> </span><span class="nx">ctx</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">canvas</span><span class="p">.</span><span class="nx">getContext</span><span class="p">(</span><span class="s1">&#39;2d&#39;</span><span class="p">)</span>
<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="nx">ctx</span><span class="p">)</span><span class="w"> </span><span class="k">return</span>
<span class="nx">ctx</span><span class="p">.</span><span class="nx">clearRect</span><span class="p">(</span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="nx">canvas</span><span class="p">.</span><span class="nx">width</span><span class="p">,</span><span class="w"> </span><span class="nx">canvas</span><span class="p">.</span><span class="nx">height</span><span class="p">)</span>

<span class="kd">const</span><span class="w"> </span><span class="nx">nextPuyoPair</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">player</span><span class="p">.</span><span class="nx">getNextPuyoPair</span><span class="p">()</span>
<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">nextPuyoPair</span><span class="p">.</span><span class="nx">axis</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mf">0</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nx">nextPuyoPair</span><span class="p">.</span><span class="nx">sub</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mf">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">puyoImage</span><span class="p">.</span><span class="nx">draw</span><span class="p">(</span><span class="nx">ctx</span><span class="p">,</span><span class="w"> </span><span class="nx">nextPuyoPair</span><span class="p">.</span><span class="nx">axis</span><span class="p">,</span><span class="w"> </span><span class="mf">0.5</span><span class="p">,</span><span class="w"> </span><span class="mf">1</span><span class="p">)</span><span class="w"> </span><span class="c1">// 軸ぷよ（下）</span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">puyoImage</span><span class="p">.</span><span class="nx">draw</span><span class="p">(</span><span class="nx">ctx</span><span class="p">,</span><span class="w"> </span><span class="nx">nextPuyoPair</span><span class="p">.</span><span class="nx">sub</span><span class="p">,</span><span class="w"> </span><span class="mf">0.5</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">)</span><span class="w">   </span><span class="c1">// 連結ぷよ（上）</span>
<span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>次のぷよはペアで表示し、実際のゲームプレイ時の配置（軸ぷよが下、連結ぷよが上）と同じ向きで表示します。</p>
<h4 id="ui-2">UI 改善 2: スタート・リセットボタンの追加<a class="headerlink" href="#ui-2" title="Permanent link">&para;</a></h4>
<p>ゲームの開始とリセットをユーザーが制御できるように、ボタンを追加します。</p>
<p><strong>ボタンの HTML 実装</strong> (index.html):</p>
<div class="highlight"><pre><span></span><code><span class="p">&lt;</span><span class="nt">button</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;startButton&quot;</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;button&quot;</span><span class="p">&gt;</span>スタート<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">button</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;resetButton&quot;</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;button reset&quot;</span><span class="p">&gt;</span>リセット<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</code></pre></div>
<p><strong>ゲーム状態管理の実装</strong> (src/game.ts):</p>
<div class="highlight"><pre><span></span><code><span class="k">private</span><span class="w"> </span><span class="nx">isRunning</span><span class="o">:</span><span class="w"> </span><span class="kt">boolean</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span>
<span class="k">private</span><span class="w"> </span><span class="nx">animationFrameId</span><span class="o">:</span><span class="w"> </span><span class="kt">number</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0</span>

<span class="nx">start</span><span class="p">()</span><span class="o">:</span><span class="w"> </span><span class="ow">void</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">isRunning</span><span class="p">)</span><span class="w"> </span><span class="k">return</span>

<span class="kd">const</span><span class="w"> </span><span class="nx">gameOverElement</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;gameOver&#39;</span><span class="p">)</span>
<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">gameOverElement</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">gameOverElement</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">display</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;none&#39;</span>
<span class="p">}</span>

<span class="k">this</span><span class="p">.</span><span class="nx">mode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;newPuyo&#39;</span>
<span class="k">this</span><span class="p">.</span><span class="nx">isRunning</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span>
<span class="k">this</span><span class="p">.</span><span class="nx">lastTime</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">performance</span><span class="p">.</span><span class="nx">now</span><span class="p">()</span>
<span class="k">this</span><span class="p">.</span><span class="nx">loop</span><span class="p">()</span>
<span class="p">}</span>

<span class="nx">reset</span><span class="p">()</span><span class="o">:</span><span class="w"> </span><span class="ow">void</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">animationFrameId</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">cancelAnimationFrame</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">animationFrameId</span><span class="p">)</span>
<span class="p">}</span>

<span class="c1">// 各コンポーネントをリセット</span>
<span class="k">this</span><span class="p">.</span><span class="nx">stage</span><span class="p">.</span><span class="nx">clear</span><span class="p">()</span>
<span class="k">this</span><span class="p">.</span><span class="nx">score</span><span class="p">.</span><span class="nx">reset</span><span class="p">()</span>

<span class="c1">// 連鎖カウントをリセット</span>
<span class="k">this</span><span class="p">.</span><span class="nx">combinationCount</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0</span>
<span class="k">this</span><span class="p">.</span><span class="nx">maxChainCount</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0</span>
<span class="k">this</span><span class="p">.</span><span class="nx">updateChainDisplay</span><span class="p">()</span>

<span class="c1">// ゲームオーバー表示を非表示</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">gameOverElement</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;gameOver&#39;</span><span class="p">)</span>
<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">gameOverElement</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">gameOverElement</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">display</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;none&#39;</span>
<span class="p">}</span>

<span class="c1">// 次のぷよ表示をクリア</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">nextElement</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;next&#39;</span><span class="p">)</span>
<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">nextElement</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">canvas</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">nextElement</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="s1">&#39;canvas&#39;</span><span class="p">)</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">canvas</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">ctx</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">canvas</span><span class="p">.</span><span class="nx">getContext</span><span class="p">(</span><span class="s1">&#39;2d&#39;</span><span class="p">)</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">ctx</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nx">ctx</span><span class="p">.</span><span class="nx">clearRect</span><span class="p">(</span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="nx">canvas</span><span class="p">.</span><span class="nx">width</span><span class="p">,</span><span class="w"> </span><span class="nx">canvas</span><span class="p">.</span><span class="nx">height</span><span class="p">)</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="c1">// ゲーム状態をリセット</span>
<span class="k">this</span><span class="p">.</span><span class="nx">mode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;start&#39;</span>
<span class="k">this</span><span class="p">.</span><span class="nx">isRunning</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span>
<span class="k">this</span><span class="p">.</span><span class="nx">frame</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0</span>

<span class="c1">// ステージを再描画（空の状態）</span>
<span class="k">this</span><span class="p">.</span><span class="nx">stage</span><span class="p">.</span><span class="nx">draw</span><span class="p">()</span>
<span class="p">}</span>
</code></pre></div>
<p>リセット機能では、新しいインスタンスを作成するのではなく、既存のコンポーネントをクリアすることで、DOM 要素の重複を防いでいます。</p>
<h4 id="ui-3">UI 改善 3: キー操作説明の追加<a class="headerlink" href="#ui-3" title="Permanent link">&para;</a></h4>
<p>ユーザーがゲームの操作方法を理解しやすいように、キー操作説明をステージの下に配置します。</p>
<p><strong>キー操作説明の実装</strong> (index.html):</p>
<div class="highlight"><pre><span></span><code><span class="p">&lt;</span><span class="nt">div</span> <span class="na">style</span><span class="o">=</span><span class="s">&quot;display: flex; flex-direction: column; gap: 10px&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;stage&quot;</span> <span class="na">style</span><span class="o">=</span><span class="s">&quot;position: relative&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">style</span><span class="o">=</span><span class="s">&quot;color: white; font-size: 14px; text-align: center&quot;</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">style</span><span class="o">=</span><span class="s">&quot;margin-bottom: 5px; font-weight: bold&quot;</span><span class="p">&gt;</span>キー操作<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>← → : 移動 | ↑ : 回転 | ↓ : 高速落下<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</code></pre></div>
<p>この説明により、初めてゲームをプレイするユーザーでも直感的に操作方法を理解できます。</p>
<h4 id="_87">最終的なレイアウト構成<a class="headerlink" href="#_87" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code>[ステージエリア]          [情報エリア]
┌─────────────┐        ┌──────────┐
│             │        │ スコア: 0 │
│   ステージ   │        ├──────────┤
│             │        │ 最大連鎖: 0│
└─────────────┘        ├──────────┤
┌─────────────┐        │ 次のぷよ  │
│  キー操作    │        │  [ペア]   │
│ ←→:移動     │        ├──────────┤
│ ↑:回転      │        │[スタート] │
│ ↓:高速落下  │        ├──────────┤
└─────────────┘        │[リセット] │
                       └──────────┘
</code></pre></div>
<p>このレイアウトにより、ゲームプレイに必要な情報が整理され、ユーザーフレンドリーなインターフェースが完成しました。</p>
<h3 id="9_1">イテレーション９のまとめ<a class="headerlink" href="#9_1" title="Permanent link">&para;</a></h3>
<p>イテレーション 9 では、以下を実装しました：</p>
<ol>
<li><strong>ゲームオーバー判定</strong>: 新しいぷよの配置位置にぷよがある場合を検出</li>
<li><strong>ゲームループへの統合</strong>: <code>newPuyo</code> モードでゲームオーバー判定を実行</li>
<li><strong>ゲームオーバー演出</strong>: 画面中央に「GAME OVER」を表示</li>
<li><strong>コード品質の向上</strong>: メソッド抽出による複雑度の削減</li>
<li><strong>UI の改善</strong>: スコア、連鎖、次のぷよ表示の追加</li>
<li><strong>ゲーム制御</strong>: スタート・リセットボタンの実装</li>
<li><strong>ユーザビリティ向上</strong>: キー操作説明の追加</li>
</ol>
<p>「ゲームが終わる条件を実装し、さらにユーザーインターフェースも充実させることができましたね！」そうですね。これで、プレイヤーはゲームの明確な終了を体験でき、直感的に操作できる完成度の高いゲームになりました。</p>
<h2 id="10">イテレーション10: 衝突判定の修正<a class="headerlink" href="#10" title="Permanent link">&para;</a></h2>
<h3 id="_88">発見されたバグ<a class="headerlink" href="#_88" title="Permanent link">&para;</a></h3>
<p>ゲームをプレイテストした結果、以下の重大なバグが発見されました：</p>
<ol>
<li>
<p><strong>回転時の衝突判定の欠落</strong></p>
<ul>
<li>縦にしたぷよ（rotation=2）が既に着地したぷよの位置に回転できてしまう</li>
<li>回転によって既存のぷよを上書きしてしまう</li>
</ul>
</li>
<li>
<p><strong>移動時の衝突判定の欠落</strong></p>
<ul>
<li>左右に移動する際、既に着地したぷよの位置に移動できてしまう</li>
<li>移動によって既存のぷよを上書きしてしまう</li>
</ul>
</li>
</ol>
<h3 id="_89">なぜテストで検出されなかったのか<a class="headerlink" href="#_89" title="Permanent link">&para;</a></h3>
<p>イテレーション 3 で回転機能を実装した際、以下のテストケースしか作成していませんでした：</p>
<ul>
<li>壁際での回転（壁キック機能のテスト）</li>
<li>回転状態の遷移（0→1→2→3→0）</li>
</ul>
<p><strong>欠けていたテストケース</strong>：
- 既存のぷよがある位置への回転
- 既存のぷよがある位置への移動</p>
<p>これは TDD における重要な教訓です。「テストされていない機能は動作しない」という原則を再確認できました。</p>
<h3 id="_90">実装内容<a class="headerlink" href="#_90" title="Permanent link">&para;</a></h3>
<h4 id="1-playerts">1. 回転時の衝突判定（player.ts）<a class="headerlink" href="#1-playerts" title="Permanent link">&para;</a></h4>
<p><code>canRotateTo()</code> メソッドを新規追加：</p>
<div class="highlight"><pre><span></span><code><span class="k">private</span><span class="w"> </span><span class="nx">canRotateTo</span><span class="p">(</span><span class="nx">nextX</span><span class="o">:</span><span class="w"> </span><span class="kt">number</span><span class="p">,</span><span class="w"> </span><span class="nx">nextY</span><span class="o">:</span><span class="w"> </span><span class="kt">number</span><span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="kt">boolean</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">stage</span><span class="p">)</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="kc">false</span>

<span class="w">    </span><span class="c1">// 2つ目のぷよが画面外（y &lt; 0）の場合は範囲チェックをスキップ</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">nextY</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mf">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="kc">true</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="c1">// 範囲外チェック</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span>
<span class="w">        </span><span class="nx">nextX</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mf">0</span><span class="w"> </span><span class="o">||</span>
<span class="w">        </span><span class="nx">nextX</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">config</span><span class="p">.</span><span class="nx">stageCols</span><span class="w"> </span><span class="o">||</span>
<span class="w">        </span><span class="nx">nextY</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">config</span><span class="p">.</span><span class="nx">stageRows</span>
<span class="w">    </span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="kc">false</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="c1">// 既存のぷよとの衝突チェック</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">stage</span><span class="p">.</span><span class="nx">getPuyo</span><span class="p">(</span><span class="nx">nextX</span><span class="p">,</span><span class="w"> </span><span class="nx">nextY</span><span class="p">)</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mf">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="kc">false</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="kc">true</span>
<span class="p">}</span>
</code></pre></div>
<p><strong>重要な修正点</strong>: ゲーム開始直後、軸ぷよが <code>y = 0</code>、上向き（<code>rotation = 0</code>）の場合、2つ目のぷよは <code>y = -1</code>（画面外）になります。この場合、範囲チェックをスキップすることで、ゲーム開始時の回転を正常に動作させます。<code>draw()</code> メソッドでも同様に <code>nextPos.y &gt;= 0</code> の場合のみ描画しています。</p>
<p><code>performRotation()</code> メソッドを修正：</p>
<div class="highlight"><pre><span></span><code><span class="k">private</span><span class="w"> </span><span class="nx">performRotation</span><span class="p">(</span><span class="nx">newRotation</span><span class="o">:</span><span class="w"> </span><span class="kt">number</span><span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="ow">void</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// 回転後の2つ目のぷよの位置を計算</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">offsetX</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="mf">1</span><span class="p">][</span><span class="nx">newRotation</span><span class="p">]</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">offsetY</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="o">-</span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">][</span><span class="nx">newRotation</span><span class="p">]</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="nx">newX</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">puyoX</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">nextX</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">newX</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">offsetX</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">nextY</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">puyoY</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">offsetY</span>

<span class="w">    </span><span class="c1">// 壁キック処理</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">nextX</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mf">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">newX</span><span class="o">++</span>
<span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">nextX</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">config</span><span class="p">.</span><span class="nx">stageCols</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">newX</span><span class="o">--</span>
<span class="p">}</span>

<span class="c1">// 回転後の位置を再計算</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">finalNextX</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">newX</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">offsetX</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">finalNextY</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">puyoY</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">offsetY</span>

<span class="c1">// 回転後の位置が有効かチェック</span>
<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">canRotateTo</span><span class="p">(</span><span class="nx">finalNextX</span><span class="p">,</span><span class="w"> </span><span class="nx">finalNextY</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// 回転できない場合は何もしない</span>
<span class="w">    </span><span class="k">return</span>
<span class="p">}</span>

<span class="c1">// 回転を確定</span>
<span class="k">this</span><span class="p">.</span><span class="nx">puyoX</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">newX</span>
<span class="k">this</span><span class="p">.</span><span class="nx">rotation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">newRotation</span>
<span class="p">}</span>
</code></pre></div>
<h4 id="2-playerts">2. 移動時の衝突判定（player.ts）<a class="headerlink" href="#2-playerts" title="Permanent link">&para;</a></h4>
<p><code>canMoveTo()</code> メソッドを新規追加：</p>
<div class="highlight"><pre><span></span><code><span class="k">private</span><span class="w"> </span><span class="nx">canMoveTo</span><span class="p">(</span>
<span class="w">    </span><span class="nx">axisX</span><span class="o">:</span><span class="w"> </span><span class="kt">number</span><span class="p">,</span>
<span class="w">    </span><span class="nx">axisY</span><span class="o">:</span><span class="w"> </span><span class="kt">number</span><span class="p">,</span>
<span class="w">    </span><span class="nx">nextX</span><span class="o">:</span><span class="w"> </span><span class="kt">number</span><span class="p">,</span>
<span class="w">    </span><span class="nx">nextY</span><span class="o">:</span><span class="w"> </span><span class="kt">number</span>
<span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="kt">boolean</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">stage</span><span class="p">)</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="kc">false</span>

<span class="w">    </span><span class="c1">// 軸ぷよの範囲チェック</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span>
<span class="w">        </span><span class="nx">axisX</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mf">0</span><span class="w"> </span><span class="o">||</span>
<span class="w">        </span><span class="nx">axisX</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">config</span><span class="p">.</span><span class="nx">stageCols</span><span class="w"> </span><span class="o">||</span>
<span class="w">        </span><span class="nx">axisY</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mf">0</span><span class="w"> </span><span class="o">||</span>
<span class="w">        </span><span class="nx">axisY</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">config</span><span class="p">.</span><span class="nx">stageRows</span>
<span class="w">    </span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="kc">false</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="c1">// 2つ目のぷよが画面外（y &lt; 0）の場合は範囲チェックをスキップ</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">nextY</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="mf">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// 2つ目のぷよの範囲チェック</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span>
<span class="w">            </span><span class="nx">nextX</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mf">0</span><span class="w"> </span><span class="o">||</span>
<span class="w">            </span><span class="nx">nextX</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">config</span><span class="p">.</span><span class="nx">stageCols</span><span class="w"> </span><span class="o">||</span>
<span class="w">            </span><span class="nx">nextY</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">config</span><span class="p">.</span><span class="nx">stageRows</span>
<span class="w">        </span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="kc">false</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="c1">// 2つ目のぷよの衝突チェック</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">stage</span><span class="p">.</span><span class="nx">getPuyo</span><span class="p">(</span><span class="nx">nextX</span><span class="p">,</span><span class="w"> </span><span class="nx">nextY</span><span class="p">)</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mf">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="kc">false</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="c1">// 軸ぷよの衝突チェック</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">stage</span><span class="p">.</span><span class="nx">getPuyo</span><span class="p">(</span><span class="nx">axisX</span><span class="p">,</span><span class="w"> </span><span class="nx">axisY</span><span class="p">)</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mf">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="kc">false</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="kc">true</span>
<span class="p">}</span>
</code></pre></div>
<p><strong>重要な修正点</strong>: <code>canRotateTo()</code> と同様に、2つ目のぷよが画面外（<code>y &lt; 0</code>）の場合は範囲チェックと衝突チェックをスキップします。これにより、ゲーム開始時の移動が正常に動作します。</p>
<p><code>moveLeft()</code> と <code>moveRight()</code> メソッドを修正：</p>
<div class="highlight"><pre><span></span><code><span class="nx">moveLeft</span><span class="p">()</span><span class="o">:</span><span class="w"> </span><span class="ow">void</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// 移動後の位置を計算</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">newAxisX</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">puyoX</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mf">1</span>

<span class="w">    </span><span class="c1">// 2つ目のぷよの位置を計算</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">offsetX</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="mf">1</span><span class="p">][</span><span class="k">this</span><span class="p">.</span><span class="nx">rotation</span><span class="p">]</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">offsetY</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="o">-</span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">][</span><span class="k">this</span><span class="p">.</span><span class="nx">rotation</span><span class="p">]</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">newNextX</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">newAxisX</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">offsetX</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">newNextY</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">puyoY</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">offsetY</span>

<span class="w">    </span><span class="c1">// 移動可能かチェック</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">canMoveTo</span><span class="p">(</span><span class="nx">newAxisX</span><span class="p">,</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">puyoY</span><span class="p">,</span><span class="w"> </span><span class="nx">newNextX</span><span class="p">,</span><span class="w"> </span><span class="nx">newNextY</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">puyoX</span><span class="o">--</span>
<span class="p">}</span>
<span class="p">}</span>

<span class="nx">moveRight</span><span class="p">()</span><span class="o">:</span><span class="w"> </span><span class="ow">void</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// 移動後の位置を計算</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">newAxisX</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">puyoX</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mf">1</span>

<span class="w">    </span><span class="c1">// 2つ目のぷよの位置を計算</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">offsetX</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="mf">1</span><span class="p">][</span><span class="k">this</span><span class="p">.</span><span class="nx">rotation</span><span class="p">]</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">offsetY</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="o">-</span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">][</span><span class="k">this</span><span class="p">.</span><span class="nx">rotation</span><span class="p">]</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">newNextX</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">newAxisX</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">offsetX</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">newNextY</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">puyoY</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">offsetY</span>

<span class="w">    </span><span class="c1">// 移動可能かチェック</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">canMoveTo</span><span class="p">(</span><span class="nx">newAxisX</span><span class="p">,</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">puyoY</span><span class="p">,</span><span class="w"> </span><span class="nx">newNextX</span><span class="p">,</span><span class="w"> </span><span class="nx">newNextY</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">puyoX</span><span class="o">++</span>
<span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<h4 id="3-playertestts">3. テストケースの追加（player.test.ts）<a class="headerlink" href="#3-playertestts" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="nx">describe</span><span class="p">(</span><span class="s1">&#39;衝突判定&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">it</span><span class="p">(</span><span class="s1">&#39;既存のぷよがある位置には左に移動できない&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// 軸ぷよを (3, 5) に配置（上向き rotation=0）</span>
<span class="w">        </span><span class="nx">player</span><span class="p">[</span><span class="s1">&#39;puyoX&#39;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">3</span>
<span class="w">        </span><span class="nx">player</span><span class="p">[</span><span class="s1">&#39;puyoY&#39;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">5</span>
<span class="w">        </span><span class="nx">player</span><span class="p">[</span><span class="s1">&#39;rotation&#39;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0</span>

<span class="w">        </span><span class="c1">// 左側に障害物を配置</span>
<span class="w">        </span><span class="nx">stage</span><span class="p">.</span><span class="nx">setPuyo</span><span class="p">(</span><span class="mf">2</span><span class="p">,</span><span class="w"> </span><span class="mf">5</span><span class="p">,</span><span class="w"> </span><span class="mf">1</span><span class="p">)</span>

<span class="w">        </span><span class="c1">// 左に移動を試みる</span>
<span class="w">        </span><span class="nx">player</span><span class="p">.</span><span class="nx">moveLeft</span><span class="p">()</span>

<span class="w">        </span><span class="c1">// 移動していないことを確認</span>
<span class="w">        </span><span class="nx">expect</span><span class="p">(</span><span class="nx">player</span><span class="p">[</span><span class="s1">&#39;puyoX&#39;</span><span class="p">]).</span><span class="nx">toBe</span><span class="p">(</span><span class="mf">3</span><span class="p">)</span>
<span class="w">    </span><span class="p">})</span>

<span class="w">    </span><span class="nx">it</span><span class="p">(</span><span class="s1">&#39;既存のぷよがある位置には右に移動できない&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// 軸ぷよを (2, 5) に配置（上向き rotation=0）</span>
<span class="w">        </span><span class="nx">player</span><span class="p">[</span><span class="s1">&#39;puyoX&#39;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">2</span>
<span class="w">        </span><span class="nx">player</span><span class="p">[</span><span class="s1">&#39;puyoY&#39;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">5</span>
<span class="w">        </span><span class="nx">player</span><span class="p">[</span><span class="s1">&#39;rotation&#39;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0</span>

<span class="w">        </span><span class="c1">// 右側に障害物を配置</span>
<span class="w">        </span><span class="nx">stage</span><span class="p">.</span><span class="nx">setPuyo</span><span class="p">(</span><span class="mf">3</span><span class="p">,</span><span class="w"> </span><span class="mf">5</span><span class="p">,</span><span class="w"> </span><span class="mf">1</span><span class="p">)</span>

<span class="w">        </span><span class="c1">// 右に移動を試みる</span>
<span class="w">        </span><span class="nx">player</span><span class="p">.</span><span class="nx">moveRight</span><span class="p">()</span>

<span class="w">        </span><span class="c1">// 移動していないことを確認</span>
<span class="w">        </span><span class="nx">expect</span><span class="p">(</span><span class="nx">player</span><span class="p">[</span><span class="s1">&#39;puyoX&#39;</span><span class="p">]).</span><span class="nx">toBe</span><span class="p">(</span><span class="mf">2</span><span class="p">)</span>
<span class="w">    </span><span class="p">})</span>

<span class="w">    </span><span class="nx">it</span><span class="p">(</span><span class="s1">&#39;2つ目のぷよの位置に障害物がある場合も移動できない&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// 軸ぷよを (2, 5) に配置、右向き (rotation=1)</span>
<span class="w">        </span><span class="nx">player</span><span class="p">[</span><span class="s1">&#39;puyoX&#39;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">2</span>
<span class="w">        </span><span class="nx">player</span><span class="p">[</span><span class="s1">&#39;puyoY&#39;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">5</span>
<span class="w">        </span><span class="nx">player</span><span class="p">[</span><span class="s1">&#39;rotation&#39;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">1</span>

<span class="w">        </span><span class="c1">// 2つ目のぷよの右側（3, 5 の右 = 4, 5）に障害物を配置</span>
<span class="w">        </span><span class="nx">stage</span><span class="p">.</span><span class="nx">setPuyo</span><span class="p">(</span><span class="mf">4</span><span class="p">,</span><span class="w"> </span><span class="mf">5</span><span class="p">,</span><span class="w"> </span><span class="mf">1</span><span class="p">)</span>

<span class="w">        </span><span class="c1">// 右に移動を試みる</span>
<span class="w">        </span><span class="nx">player</span><span class="p">.</span><span class="nx">moveRight</span><span class="p">()</span>

<span class="w">        </span><span class="c1">// 移動していないことを確認</span>
<span class="w">        </span><span class="nx">expect</span><span class="p">(</span><span class="nx">player</span><span class="p">[</span><span class="s1">&#39;puyoX&#39;</span><span class="p">]).</span><span class="nx">toBe</span><span class="p">(</span><span class="mf">2</span><span class="p">)</span>
<span class="w">    </span><span class="p">})</span>

<span class="w">    </span><span class="nx">it</span><span class="p">(</span><span class="s1">&#39;既存のぷよがある位置には回転できない&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// 軸ぷよを (2, 5) に配置（上向き rotation=0）</span>
<span class="w">        </span><span class="nx">player</span><span class="p">[</span><span class="s1">&#39;puyoX&#39;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">2</span>
<span class="w">        </span><span class="nx">player</span><span class="p">[</span><span class="s1">&#39;puyoY&#39;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">5</span>
<span class="w">        </span><span class="nx">player</span><span class="p">[</span><span class="s1">&#39;rotation&#39;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0</span>

<span class="w">        </span><span class="c1">// 右側（回転先）に障害物を配置</span>
<span class="w">        </span><span class="nx">stage</span><span class="p">.</span><span class="nx">setPuyo</span><span class="p">(</span><span class="mf">3</span><span class="p">,</span><span class="w"> </span><span class="mf">5</span><span class="p">,</span><span class="w"> </span><span class="mf">1</span><span class="p">)</span>

<span class="w">        </span><span class="c1">// 現在の回転状態を記録</span>
<span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">beforeRotation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">player</span><span class="p">[</span><span class="s1">&#39;rotation&#39;</span><span class="p">]</span>

<span class="w">        </span><span class="c1">// 右回転を試みる（0 → 1 で右向きになる）</span>
<span class="w">        </span><span class="nx">player</span><span class="p">.</span><span class="nx">rotateRight</span><span class="p">()</span>

<span class="w">        </span><span class="c1">// 回転していないことを確認</span>
<span class="w">        </span><span class="nx">expect</span><span class="p">(</span><span class="nx">player</span><span class="p">[</span><span class="s1">&#39;rotation&#39;</span><span class="p">]).</span><span class="nx">toBe</span><span class="p">(</span><span class="nx">beforeRotation</span><span class="p">)</span>
<span class="w">    </span><span class="p">})</span>

<span class="w">    </span><span class="nx">it</span><span class="p">(</span><span class="s1">&#39;回転後の位置が空いていれば回転できる&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// 軸ぷよを (2, 5) に配置（上向き rotation=0）</span>
<span class="w">        </span><span class="nx">player</span><span class="p">[</span><span class="s1">&#39;puyoX&#39;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">2</span>
<span class="w">        </span><span class="nx">player</span><span class="p">[</span><span class="s1">&#39;puyoY&#39;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">5</span>
<span class="w">        </span><span class="nx">player</span><span class="p">[</span><span class="s1">&#39;rotation&#39;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0</span>

<span class="w">        </span><span class="c1">// 右回転を試みる（0 → 1）</span>
<span class="w">        </span><span class="nx">player</span><span class="p">.</span><span class="nx">rotateRight</span><span class="p">()</span>

<span class="w">        </span><span class="c1">// 回転していることを確認</span>
<span class="w">        </span><span class="nx">expect</span><span class="p">(</span><span class="nx">player</span><span class="p">[</span><span class="s1">&#39;rotation&#39;</span><span class="p">]).</span><span class="nx">toBe</span><span class="p">(</span><span class="mf">1</span><span class="p">)</span>
<span class="w">    </span><span class="p">})</span>
<span class="p">})</span>
</code></pre></div>
<h4 id="4_2">4. 既存テストの修正<a class="headerlink" href="#4_2" title="Permanent link">&para;</a></h4>
<p>既存の回転・移動テストが画面外のぷよの処理を追加したことで正常に動作するようになりました。</p>
<p>外側の <code>beforeEach()</code> に <code>player.setStage(stage)</code> を追加：</p>
<div class="highlight"><pre><span></span><code><span class="nx">beforeEach</span><span class="p">(()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// DOMの準備</span>
<span class="w">    </span><span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">innerHTML</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="sb">`</span>
<span class="sb">        &lt;div id=&quot;app&quot;&gt;</span>
<span class="sb">            &lt;div id=&quot;stage&quot;&gt;&lt;/div&gt;</span>
<span class="sb">        &lt;/div&gt;</span>
<span class="sb">    `</span>
<span class="w">    </span><span class="nx">config</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">Config</span><span class="p">()</span>
<span class="w">    </span><span class="nx">puyoImage</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">PuyoImage</span><span class="p">(</span><span class="nx">config</span><span class="p">)</span>
<span class="w">    </span><span class="nx">stage</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">Stage</span><span class="p">(</span><span class="nx">config</span><span class="p">,</span><span class="w"> </span><span class="nx">puyoImage</span><span class="p">)</span>
<span class="w">    </span><span class="nx">player</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">Player</span><span class="p">(</span><span class="nx">config</span><span class="p">)</span>
<span class="w">    </span><span class="nx">player</span><span class="p">.</span><span class="nx">setStage</span><span class="p">(</span><span class="nx">stage</span><span class="p">)</span><span class="w"> </span><span class="c1">// Stageへの参照を設定</span>
<span class="p">})</span>
</code></pre></div>
<p>衝突判定テストでは、既存のぷよとの衝突を検証するため、テスト内で明示的に位置を設定します（例: <code>player['puyoY'] = 5</code>）。これにより、2つ目のぷよが画面内に配置され、衝突判定が正しく動作することを確認できます。</p>
<h3 id="_91">学んだ教訓<a class="headerlink" href="#_91" title="Permanent link">&para;</a></h3>
<ol>
<li>
<p><strong>テストカバレッジの重要性</strong></p>
<ul>
<li>機能を実装したら、その機能の「正常系」だけでなく「異常系」もテストする</li>
<li>境界値テストだけでなく、衝突判定のような制約条件もテストする</li>
</ul>
</li>
<li>
<p><strong>プレイテストの重要性</strong></p>
<ul>
<li>自動テストでカバーできない部分は手動テストで補完</li>
<li>実際にゲームを遊んでみることで、テストケースの漏れに気づける</li>
</ul>
</li>
<li>
<p><strong>TDD のサイクルを守る</strong></p>
<ul>
<li>Red（失敗するテストを書く）</li>
<li>Green（テストを通す最小限の実装）</li>
<li>Refactor（リファクタリング）</li>
<li><strong>重要</strong>: テストを書かずに実装すると、バグを見逃す可能性が高い</li>
</ul>
</li>
<li>
<p><strong>バグ発見時の対応</strong></p>
<ul>
<li>まずテストを書いてバグを再現</li>
<li>テストが失敗することを確認（Red）</li>
<li>バグを修正してテストを通す（Green）</li>
<li>同様のバグを防ぐためのテストを追加</li>
</ul>
</li>
<li>
<p><strong>境界条件の扱い</strong></p>
<ul>
<li>ゲーム開始時の画面外のぷよ（<code>y &lt; 0</code>）のような特殊なケースに注意</li>
<li>範囲チェックを実装する際は、すべての境界条件を考慮する</li>
<li><code>draw()</code> メソッドと衝突判定メソッドで一貫した境界条件の扱いを保つ</li>
</ul>
</li>
</ol>
<h3 id="_92">テスト結果<a class="headerlink" href="#_92" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>✓ app/typescript-4/tests/example.test.ts (2)
✓ app/typescript-4/tests/stage.test.ts (6)
✓ app/typescript-4/tests/game.test.ts (6)
✓ app/typescript-4/tests/player.test.ts (19)

Test Files  4 passed (4)
     Tests  33 passed (33)
</code></pre></div>
<p>すべてのテストがパスし、衝突判定のバグが修正されました。player.test.ts に衝突判定テストを5つ追加したことで、テスト総数が28から33に増加しました。</p>
<h2 id="_93">ふりかえり<a class="headerlink" href="#_93" title="Permanent link">&para;</a></h2>
<p>ぷよぷよゲームの実装を完了することができたので、これまでのふりかえりをしておきましょう。</p>
<h3 id="keep">Keep（続けること）<a class="headerlink" href="#keep" title="Permanent link">&para;</a></h3>
<p>まず <strong>TODOリスト</strong> を作成して <strong>テストファースト</strong> で１つずつ小さなステップで開発を進めていきました。テスト駆動開発の「Red-Green-Refactor」サイクルに従うことで、コードの品質を保ちながら、段階的に機能を追加していくことができました。</p>
<p>各章では、ユーザーストーリーに基づいた機能を、テスト、実装、解説の順に進めていきました。この流れは非常に効果的で、実装の方針が明確になり、必要最小限のコードで機能を実現することができました。</p>
<p>特に以下の点は今後も続けていきたいプラクティスです：</p>
<ol>
<li>ユーザーストーリーからTODOリストへの分解</li>
<li>テストファーストの原則に従った実装</li>
<li>小さなステップでの開発</li>
<li>リファクタリングによるコードの継続的な改善</li>
</ol>
<h3 id="problem">Problem（課題）<a class="headerlink" href="#problem" title="Permanent link">&para;</a></h3>
<p>開発を進める中で、いくつかの課題も見えてきました。</p>
<p>まず、テストの粒度をどの程度にするかという判断が難しい場面がありました。細かすぎるテストは冗長になり、大きすぎるテストは問題の特定が難しくなります。</p>
<p>また、リファクタリングのタイミングも課題でした。機能追加とリファクタリングのバランスをどう取るか、特に初期段階でのリファクタリングの重要性と、後回しにすることのリスクを実感しました。</p>
<p>ゲームロジックの複雑さが増すにつれて、テストの維持も難しくなりました。特に、ゲームの状態遷移や重力処理のテストは工夫が必要でした。</p>
<h3 id="try">Try（挑戦）<a class="headerlink" href="#try" title="Permanent link">&para;</a></h3>
<p>今後は以下のことに挑戦していきたいと思います：</p>
<ol>
<li>より効率的なテスト戦略の模索 - ユニットテストとインテグレーションテストのバランスを考慮する</li>
<li>自動化テストのカバレッジを高める工夫</li>
<li>より複雑なゲーム機能（マルチプレイヤー、ネットワーク対戦など）への挑戦</li>
<li>パフォーマンス最適化とそのテスト手法の習得</li>
</ol>
<p>これらの知識と経験は、他のプロジェクトにも応用できるものです。テスト駆動開発は、コードの品質を高め、保守性を向上させるための強力な手法です。ぜひ、自分のプロジェクトにも取り入れてみてください。</p>
<blockquote>
<p>私がかつて発見した、そして多くの人に気づいてもらいたい効果とは、反復可能な振る舞いを規則にまで還元することで、規則の適用は機会的に反復可能になるということだ。</p>
<p>— Kent Beck 『テスト駆動開発』</p>
</blockquote>
<h2 id="_94">アーキテクチャ図解<a class="headerlink" href="#_94" title="Permanent link">&para;</a></h2>
<p>実装したぷよぷよゲームのアーキテクチャを視覚的に理解するために、状態遷移図、クラス図、シーケンス図を示します。</p>
<h3 id="_95">状態遷移図<a class="headerlink" href="#_95" title="Permanent link">&para;</a></h3>
<p>ゲームの状態（モード）遷移を示します。</p>
<p><img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBjb250ZW50U3R5bGVUeXBlPSJ0ZXh0L2NzcyIgZGF0YS1kaWFncmFtLXR5cGU9IlNUQVRFIiBoZWlnaHQ9Ijg2M3B4IiBwcmVzZXJ2ZUFzcGVjdFJhdGlvPSJub25lIiBzdHlsZT0id2lkdGg6NTkzcHg7aGVpZ2h0Ojg2M3B4O2JhY2tncm91bmQ6I0ZGRkZGRjsiIHZlcnNpb249IjEuMSIgdmlld0JveD0iMCAwIDU5MyA4NjMiIHdpZHRoPSI1OTNweCIgem9vbUFuZFBhbj0ibWFnbmlmeSI+PHRpdGxlPiYjMTI0NjY7JiMxMjU0MDsmIzEyNTEyOyYjMTI1MTQ7JiMxMjU0MDsmIzEyNDg5OyYjMjkzNjY7JiMyNDkwNzsmIzM2OTgzOyYjMzEyMjc7JiMyMjI1OTs8L3RpdGxlPjxkZWZzLz48Zz48ZyBjbGFzcz0idGl0bGUiIGRhdGEtc291cmNlLWxpbmU9IjEiPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBmb250LXdlaWdodD0iYm9sZCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxNTMuOTk5MyIgeD0iMjEyLjg1MDQiIHk9IjIyLjk5NTEiPiYjMTI0NjY7JiMxMjU0MDsmIzEyNTEyOyYjMTI1MTQ7JiMxMjU0MDsmIzEyNDg5OyYjMjkzNjY7JiMyNDkwNzsmIzM2OTgzOyYjMzEyMjc7JiMyMjI1OTs8L3RleHQ+PC9nPjxlbGxpcHNlIGN4PSIzNzEuNyIgY3k9IjUzLjI5NjkiIGZpbGw9IiMyMjIyMjIiIHJ4PSIxMCIgcnk9IjEwIiBzdHlsZT0ic3Ryb2tlOiMyMjIyMjI7c3Ryb2tlLXdpZHRoOjE7Ii8+PGcgaWQ9InN0YXJ0Ij48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjUwIiByeD0iMTIuNSIgcnk9IjEyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjUyLjYwNzQiIHg9IjM0NS40IiB5PSIxNDAuMjk2OSIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgeDE9IjM0NS40IiB4Mj0iMzk4LjAwNzQiIHkxPSIxNjYuNTkzOCIgeTI9IjE2Ni41OTM4Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMzIuNjA3NCIgeD0iMzU1LjQiIHk9IjE1OC4yOTIiPnN0YXJ0PC90ZXh0PjwvZz48ZyBpZD0ibmV3UHV5byI+PHJlY3QgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSI1MCIgcng9IjEyLjUiIHJ5PSIxMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSI4My4xMDI1IiB4PSIzMzAuMTUiIHk9IjI2Ny4yOTY5Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB4MT0iMzMwLjE1IiB4Mj0iNDEzLjI1MjUiIHkxPSIyOTMuNTkzOCIgeTI9IjI5My41OTM4Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNjMuMTAyNSIgeD0iMzQwLjE1IiB5PSIyODUuMjkyIj5uZXdQdXlvPC90ZXh0PjwvZz48ZyBpZD0icGxheWluZyI+PHJlY3QgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSI1MCIgcng9IjEyLjUiIHJ5PSIxMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSI3MS4yOSIgeD0iMTQ5LjA1IiB5PSIzOTQuMjk2OSIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgeDE9IjE0OS4wNSIgeDI9IjIyMC4zNCIgeTE9IjQyMC41OTM4IiB5Mj0iNDIwLjU5MzgiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI1MS4yOSIgeD0iMTU5LjA1IiB5PSI0MTIuMjkyIj5wbGF5aW5nPC90ZXh0PjwvZz48ZyBpZD0iZ2FtZU92ZXIiPjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iNTAiIHJ4PSIxMi41IiByeT0iMTIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iOTMuMzkwNiIgeD0iMzI1IiB5PSIzOTQuMjk2OSIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgeDE9IjMyNSIgeDI9IjQxOC4zOTA2IiB5MT0iNDIwLjU5MzgiIHkyPSI0MjAuNTkzOCIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjczLjM5MDYiIHg9IjMzNSIgeT0iNDEyLjI5MiI+Z2FtZU92ZXI8L3RleHQ+PC9nPjxnIGlkPSJjaGVja0ZhbGwiPjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iNTAiIHJ4PSIxMi41IiByeT0iMTIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iODUuMzk5NCIgeD0iNyIgeT0iNTM4Ljk5NjkiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHgxPSI3IiB4Mj0iOTIuMzk5NCIgeTE9IjU2NS4yOTM4IiB5Mj0iNTY1LjI5MzgiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI2NS4zOTk0IiB4PSIxNyIgeT0iNTU2Ljk5MiI+Y2hlY2tGYWxsPC90ZXh0PjwvZz48ZyBpZD0iY2hlY2tFcmFzZSI+PHJlY3QgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSI1MCIgcng9IjEyLjUiIHJ5PSIxMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSIxMDAuMDc2MiIgeD0iMTQ4LjY2IiB5PSI2NzEuMzk2OSIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgeDE9IjE0OC42NiIgeDI9IjI0OC43MzYyIiB5MT0iNjk3LjY5MzgiIHkyPSI2OTcuNjkzOCIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjgwLjA3NjIiIHg9IjE1OC42NiIgeT0iNjg5LjM5MiI+Y2hlY2tFcmFzZTwvdGV4dD48L2c+PGcgaWQ9ImVyYXNpbmciPjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iNTAiIHJ4PSIxMi41IiByeT0iMTIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iNzEuODkxNiIgeD0iNDIuNzUiIHk9IjgwMy43OTY5Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB4MT0iNDIuNzUiIHgyPSIxMTQuNjQxNiIgeTE9IjgzMC4wOTM4IiB5Mj0iODMwLjA5MzgiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI1MS44OTE2IiB4PSI1Mi43NSIgeT0iODIxLjc5MiI+ZXJhc2luZzwvdGV4dD48L2c+PGVsbGlwc2UgY3g9IjM5My43IiBjeT0iNTYzLjk5NjkiIGZpbGw9Im5vbmUiIHJ4PSIxMSIgcnk9IjExIiBzdHlsZT0ic3Ryb2tlOiMyMjIyMjI7c3Ryb2tlLXdpZHRoOjE7Ii8+PGVsbGlwc2UgY3g9IjM5My43IiBjeT0iNTYzLjk5NjkiIGZpbGw9IiMyMjIyMjIiIHJ4PSI2IiByeT0iNiIgc3R5bGU9InN0cm9rZTojMjIyMjIyO3N0cm9rZS13aWR0aDoxOyIvPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtZW50aXR5PSJHTU4yIiBkYXRhLXNvdXJjZS1saW5lPSIyMyIgZGF0YS11aWQ9ImVudDAwMDMiIGlkPSJlbnRpdHlfR01OMiI+PHBhdGggZD0iTTQ0OC43LDI3Mi4xNjY5IEw0NDguNywyODguMjk2OSBMNDEzLjYyLDI5Mi4yOTY5IEw0NDguNywyOTYuMjk2OSBMNDQ4LjcsMzEyLjQzMjUgQTAsMCAwIDAgMCA0NDguNywzMTIuNDMyNSBMNTg2LjcwMDEsMzEyLjQzMjUgQTAsMCAwIDAgMCA1ODYuNzAwMSwzMTIuNDMyNSBMNTg2LjcwMDEsMjgyLjE2NjkgTDU3Ni43MDAxLDI3Mi4xNjY5IEw0NDguNywyNzIuMTY2OSBBMCwwIDAgMCAwIDQ0OC43LDI3Mi4xNjY5IiBmaWxsPSIjRkVGRkREIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiLz48cGF0aCBkPSJNNTc2LjcwMDEsMjcyLjE2NjkgTDU3Ni43MDAxLDI4Mi4xNjY5IEw1ODYuNzAwMSwyODIuMTY2OSBMNTc2LjcwMDEsMjcyLjE2NjkiIGZpbGw9IiNGRUZGREQiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjExNy4wMDAxIiB4PSI0NTQuNyIgeT0iMjg5LjIzMzgiPiYjMjYwMzI7JiMxMjM3NTsmIzEyMzU2OyYjMTI0MDc7JiMxMjQyNDsmIzEyNDM0OyYjMjk5ODM7JiMyNTEwNDsmIzEyMzc1OzwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMTcuMDAwMSIgeD0iNDU0LjciIHk9IjMwNC4zNjY2Ij4mIzM3MTk3OyYjMzI2MjI7JiMyMTQ4NzsmIzMzMDIxOyYjMTIzNjM7JiMxMjQ4MTsmIzEyNDU1OyYjMTI0ODM7JiMxMjQ2Mzs8L3RleHQ+PC9nPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtZW50aXR5PSJHTU41IiBkYXRhLXNvdXJjZS1saW5lPSIyOCIgZGF0YS11aWQ9ImVudDAwMDYiIGlkPSJlbnRpdHlfR01ONSI+PHBhdGggZD0iTTE5Ni4yLDUzNi4yOTY5IEwxOTYuMiw1NTkuOTk2OSBMOTIuNjMsNTYzLjk5NjkgTDE5Ni4yLDU2Ny45OTY5IEwxOTYuMiw1OTEuNjk1MyBBMCwwIDAgMCAwIDE5Ni4yLDU5MS42OTUzIEwzNDcuMjAwMiw1OTEuNjk1MyBBMCwwIDAgMCAwIDM0Ny4yMDAyLDU5MS42OTUzIEwzNDcuMjAwMiw1NDYuMjk2OSBMMzM3LjIwMDIsNTM2LjI5NjkgTDE5Ni4yLDUzNi4yOTY5IEEwLDAgMCAwIDAgMTk2LjIsNTM2LjI5NjkiIGZpbGw9IiNGRUZGREQiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIvPjxwYXRoIGQ9Ik0zMzcuMjAwMiw1MzYuMjk2OSBMMzM3LjIwMDIsNTQ2LjI5NjkgTDM0Ny4yMDAyLDU0Ni4yOTY5IEwzMzcuMjAwMiw1MzYuMjk2OSIgZmlsbD0iI0ZFRkZERCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNTIuMDAwMSIgeD0iMjAyLjIiIHk9IjU1My4zNjM4Ij4mIzM3MzI1OyYjMjExNDc7JiMzNjk2OTsmIzI5OTkyOzwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMzAuMDAwMiIgeD0iMjAyLjIiIHk9IjU2OC40OTY2Ij4mIzIwODQwOyYjMTI0MDc7JiMxMjQyNDsmIzEyMzY0OyYjMzM4NTM7JiMxOTk3OTsmIzIzNDM2OyYjMjAxMDI7JiMxMjQxNDsmIzEyMzkxOzwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI1Mi4wMDAxIiB4PSIyMDIuMiIgeT0iNTgzLjYyOTQiPiYjMzIzNjg7JiMxMjQyNjsmIzM2ODIwOyYjMTIzNzc7PC90ZXh0PjwvZz48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLWVudGl0eT0iR01OOCIgZGF0YS1zb3VyY2UtbGluZT0iMzQiIGRhdGEtdWlkPSJlbnQwMDA5IiBpZD0iZW50aXR5X0dNTjgiPjxwYXRoIGQ9Ik0yODQuMDYsNjY4LjY5NjkgTDI4NC4wNiw2OTIuMzk2OSBMMjQ5LjE3LDY5Ni4zOTY5IEwyODQuMDYsNzAwLjM5NjkgTDI4NC4wNiw3MjQuMDk1MyBBMCwwIDAgMCAwIDI4NC4wNiw3MjQuMDk1MyBMNDE3LjMzMTEsNzI0LjA5NTMgQTAsMCAwIDAgMCA0MTcuMzMxMSw3MjQuMDk1MyBMNDE3LjMzMTEsNjc4LjY5NjkgTDQwNy4zMzExLDY2OC42OTY5IEwyODQuMDYsNjY4LjY5NjkgQTAsMCAwIDAgMCAyODQuMDYsNjY4LjY5NjkiIGZpbGw9IiNGRUZGREQiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIvPjxwYXRoIGQ9Ik00MDcuMzMxMSw2NjguNjk2OSBMNDA3LjMzMTEsNjc4LjY5NjkgTDQxNy4zMzExLDY3OC42OTY5IEw0MDcuMzMxMSw2NjguNjk2OSIgZmlsbD0iI0ZFRkZERCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTEyLjI3MTEiIHg9IjI5MC4wNiIgeT0iNjg1Ljc2MzgiPjQmIzIwNDkxOyYjMjAxOTc7JiMxOTk3ODsmIzEyMzk4OyYjMjE1MTY7JiMzMzM5NDsmIzIxMDI4OyYjMjM0NTA7PC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjY1LjAwMDEiIHg9IjI5MC4wNiIgeT0iNzAwLjg5NjYiPiYjMjA4NDA7JiMyODA0MDsmIzEyMzc1OyYjMjEwMjg7JiMyMzQ1MDs8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTA0LjAwMDEiIHg9IjI5MC4wNiIgeT0iNzE2LjAyOTQiPiYjMzY4OTk7JiMzNzc4MjsmIzEyNDU5OyYjMTI0NTQ7JiMxMjUzMTsmIzEyNDg4OyYjMjYzNTY7JiMyNjAzMjs8L3RleHQ+PC9nPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtZW50aXR5PSJHTU4xMSIgZGF0YS1zb3VyY2UtbGluZT0iNDAiIGRhdGEtdWlkPSJlbnQwMDEyIiBpZD0iZW50aXR5X0dNTjExIj48cGF0aCBkPSJNMTQ5LjM0LDgwMS4wOTY5IEwxNDkuMzQsODI0Ljc5NjkgTDExNS4wMyw4MjguNzk2OSBMMTQ5LjM0LDgzMi43OTY5IEwxNDkuMzQsODU2LjQ5NTMgQTAsMCAwIDAgMCAxNDkuMzQsODU2LjQ5NTMgTDI3MC4wNjgxLDg1Ni40OTUzIEEwLDAgMCAwIDAgMjcwLjA2ODEsODU2LjQ5NTMgTDI3MC4wNjgxLDgxMS4wOTY5IEwyNjAuMDY4MSw4MDEuMDk2OSBMMTQ5LjM0LDgwMS4wOTY5IEEwLDAgMCAwIDAgMTQ5LjM0LDgwMS4wOTY5IiBmaWxsPSIjRkVGRkREIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiLz48cGF0aCBkPSJNMjYwLjA2ODEsODAxLjA5NjkgTDI2MC4wNjgxLDgxMS4wOTY5IEwyNzAuMDY4MSw4MTEuMDk2OSBMMjYwLjA2ODEsODAxLjA5NjkiIGZpbGw9IiNGRUZGREQiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9Ijc4LjAwMDEiIHg9IjE1NS4zNCIgeT0iODE4LjE2MzgiPiYjMjgwNDA7JiMyMTQzNTsmIzI0NDYwOyYjMTIzOTk7JiMyNDUxNzsmIzEyMzc4OzwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI5OS43MjgxIiB4PSIxNTUuMzQiIHk9IjgzMy4yOTY2Ij5jaGVja0ZhbGwmIzEyMzk1OyYjMjUxNDc7JiMxMjQyNjs8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iOTEuMDAwMSIgeD0iMTU1LjM0IiB5PSI4NDguNDI5NCI+JiMzNjg5OTsmIzM3NzgyOyYjMTI0MzQ7JiMxMjQ4MTsmIzEyNDU1OyYjMTI0ODM7JiMxMjQ2Mzs8L3RleHQ+PC9nPjwhLS1saW5rICpzdGFydCogdG8gc3RhcnQtLT48ZyBjbGFzcz0ibGluayIgZGF0YS1lbnRpdHktMT0iLnN0YXJ0LiIgZGF0YS1lbnRpdHktMj0ic3RhcnQiIGRhdGEtc291cmNlLWxpbmU9IjMiIGRhdGEtdWlkPSJsbms0IiBpZD0ibGlua18uc3RhcnQuX3N0YXJ0Ij48cGF0aCBkPSJNMzcxLjcsNjMuNjc2OSBDMzcxLjcsODAuNDA2OSAzNzEuNywxMDkuODk2OSAzNzEuNywxMzMuOTI2OSIgZmlsbD0ibm9uZSIgaWQ9IipzdGFydCotdG8tc3RhcnQiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjM3MS43LDEzOS45MjY5LDM3NS43LDEzMC45MjY5LDM3MS43LDEzNC45MjY5LDM2Ny43LDEzMC45MjY5LDM3MS43LDEzOS45MjY5IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNjUuMDAwMSIgeD0iMzcyLjciIHk9IjEwNi4zNjM4Ij4mIzEyNDY2OyYjMTI1NDA7JiMxMjUxMjsmIzM4MjgzOyYjMjI5ODc7PC90ZXh0PjwvZz48IS0tbGluayBzdGFydCB0byBuZXdQdXlvLS0+PGcgY2xhc3M9ImxpbmsiIGRhdGEtZW50aXR5LTE9InN0YXJ0IiBkYXRhLWVudGl0eS0yPSJuZXdQdXlvIiBkYXRhLXNvdXJjZS1saW5lPSI1IiBkYXRhLXVpZD0ibG5rNiIgaWQ9Imxpbmtfc3RhcnRfbmV3UHV5byI+PHBhdGggZD0iTTM3MS43LDE5MC42OTY5IEMzNzEuNywyMTIuNzI2OSAzNzEuNywyMzguOTU2OSAzNzEuNywyNjAuOTY2OSIgZmlsbD0ibm9uZSIgaWQ9InN0YXJ0LXRvLW5ld1B1eW8iIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjM3MS43LDI2Ni45NjY5LDM3NS43LDI1Ny45NjY5LDM3MS43LDI2MS45NjY5LDM2Ny43LDI1Ny45NjY5LDM3MS43LDI2Ni45NjY5IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNjUuMDAwMSIgeD0iMzcyLjciIHk9IjIzMy4zNjM4Ij4mIzIxMDIxOyYjMjYzOTk7JiMyMTI3MDsmIzIzNDM2OyYjMjAxMDI7PC90ZXh0PjwvZz48IS0tbGluayBuZXdQdXlvIHRvIHBsYXlpbmctLT48ZyBjbGFzcz0ibGluayIgZGF0YS1lbnRpdHktMT0ibmV3UHV5byIgZGF0YS1lbnRpdHktMj0icGxheWluZyIgZGF0YS1zb3VyY2UtbGluZT0iNyIgZGF0YS11aWQ9ImxuazgiIGlkPSJsaW5rX25ld1B1eW9fcGxheWluZyI+PHBhdGggZD0iTTMzMC41NywzMTcuNzA2OSBDMzE1LjY2LDMyNi43NjY5IDI5OC43OCwzMzcuMjg2OSAyODMuNywzNDcuMjk2OSBDMjYxLjE1LDM2Mi4yNzY5IDI0MS4yMzg5LDM3Ni40Nzk0IDIyMi4xMjg5LDM5MC40ODk0IiBmaWxsPSJub25lIiBpZD0ibmV3UHV5by10by1wbGF5aW5nIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSIyMTcuMjksMzk0LjAzNjksMjI2LjkxMzQsMzkxLjk0MTUsMjIxLjMyMjQsMzkxLjA4MDYsMjIyLjE4MzQsMzg1LjQ4OTYsMjE3LjI5LDM5NC4wMzY5IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNzguMDAwMSIgeD0iMjg0LjciIHk9IjM2MC4zNjM4Ij4mIzEyNDA3OyYjMTI0MjQ7JiMzNzE5NzsmIzMyNjIyOyYjMjE0ODc7JiMzMzAyMTs8L3RleHQ+PC9nPjwhLS1saW5rIG5ld1B1eW8gdG8gZ2FtZU92ZXItLT48ZyBjbGFzcz0ibGluayIgZGF0YS1lbnRpdHktMT0ibmV3UHV5byIgZGF0YS1lbnRpdHktMj0iZ2FtZU92ZXIiIGRhdGEtc291cmNlLWxpbmU9IjgiIGRhdGEtdWlkPSJsbmsxMCIgaWQ9ImxpbmtfbmV3UHV5b19nYW1lT3ZlciI+PHBhdGggZD0iTTM3MS43LDMxNy42OTY5IEMzNzEuNywzMzkuNzI2OSAzNzEuNywzNjUuOTU2OSAzNzEuNywzODcuOTY2OSIgZmlsbD0ibm9uZSIgaWQ9Im5ld1B1eW8tdG8tZ2FtZU92ZXIiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjM3MS43LDM5My45NjY5LDM3NS43LDM4NC45NjY5LDM3MS43LDM4OC45NjY5LDM2Ny43LDM4NC45NjY5LDM3MS43LDM5My45NjY5IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNzguMDAwMSIgeD0iMzcyLjciIHk9IjM2MC4zNjM4Ij4mIzEyNDA3OyYjMTI0MjQ7JiMzNzE5NzsmIzMyNjIyOyYjMTk5ODE7JiMyMTQ4Nzs8L3RleHQ+PC9nPjwhLS1saW5rIHBsYXlpbmcgdG8gY2hlY2tGYWxsLS0+PGcgY2xhc3M9ImxpbmsiIGRhdGEtZW50aXR5LTE9InBsYXlpbmciIGRhdGEtZW50aXR5LTI9ImNoZWNrRmFsbCIgZGF0YS1zb3VyY2UtbGluZT0iMTAiIGRhdGEtdWlkPSJsbmsxMiIgaWQ9ImxpbmtfcGxheWluZ19jaGVja0ZhbGwiPjxwYXRoIGQ9Ik0xNjEuOCw0NDQuNTA2OSBDMTM2Ljk3LDQ3MC43NDY5IDEwMS43MDMzLDUwOC4wMjgyIDc2LjgzMzMsNTM0LjMxODIiIGZpbGw9Im5vbmUiIGlkPSJwbGF5aW5nLXRvLWNoZWNrRmFsbCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iNzIuNzEsNTM4LjY3NjksODEuODAwOCw1MzQuODg3Nyw3Ni4xNDYxLDUzNS4wNDQ2LDc1Ljk4OTEsNTI5LjM4OTksNzIuNzEsNTM4LjY3NjkiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI1Mi4wMDAxIiB4PSIxMzQuMjYiIHk9IjQ5NC44NjM4Ij4mIzEyNDA3OyYjMTI0MjQ7JiMzMDUyODsmIzIyMzIwOzwvdGV4dD48L2c+PCEtLWxpbmsgY2hlY2tGYWxsIHRvIGNoZWNrRmFsbC0tPjxnIGNsYXNzPSJsaW5rIiBkYXRhLWVudGl0eS0xPSJjaGVja0ZhbGwiIGRhdGEtZW50aXR5LTI9ImNoZWNrRmFsbCIgZGF0YS1zb3VyY2UtbGluZT0iMTIiIGRhdGEtdWlkPSJsbmsxMyIgaWQ9ImxpbmtfY2hlY2tGYWxsX2NoZWNrRmFsbCI+PHBhdGggZD0iTTkyLjg1LDU1MS43MzY5IEMxMTEuNDYsNTUwLjczNjkgMTI3LjQsNTU0LjgxNjkgMTI3LjQsNTYzLjk5NjkgQzEyNy40LDU3My4xNzY5IDExNy40NTE0LDU3Ny41ODg4IDk4Ljg0MTQsNTc2LjU4ODgiIGZpbGw9Im5vbmUiIGlkPSJjaGVja0ZhbGwtdG8tY2hlY2tGYWxsIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSI5Mi44NSw1NzYuMjY2OSwxMDEuNjIyNCw1ODAuNzQ0LDk3Ljg0MjgsNTc2LjUzNTIsMTAyLjA1MTcsNTcyLjc1NTYsOTIuODUsNTc2LjI2NjkiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIzOSIgeD0iMTMzLjQiIHk9IjU2OC41NjM4Ij4mIzMzODUzOyYjMTk5Nzk7JiMyMDAxMzs8L3RleHQ+PC9nPjwhLS1saW5rIGNoZWNrRmFsbCB0byBjaGVja0VyYXNlLS0+PGcgY2xhc3M9ImxpbmsiIGRhdGEtZW50aXR5LTE9ImNoZWNrRmFsbCIgZGF0YS1lbnRpdHktMj0iY2hlY2tFcmFzZSIgZGF0YS1zb3VyY2UtbGluZT0iMTMiIGRhdGEtdWlkPSJsbmsxNSIgaWQ9ImxpbmtfY2hlY2tGYWxsX2NoZWNrRXJhc2UiPjxwYXRoIGQ9Ik03Ny4zOCw1ODkuMjI2OSBDMTA0LjA1LDYxMi41NjY5IDEzOS42OTUzLDY0My43NTUgMTY2LjQwNTMsNjY3LjEzNSIgZmlsbD0ibm9uZSIgaWQ9ImNoZWNrRmFsbC10by1jaGVja0VyYXNlIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSIxNzAuOTIsNjcxLjA4NjksMTY2Ljc4MjUsNjYyLjE0OTMsMTY3LjE1NzcsNjY3Ljc5MzcsMTYxLjUxMzMsNjY4LjE2ODksMTcwLjkyLDY3MS4wODY5IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNTIuMDAwMSIgeD0iMTM0LjEyIiB5PSI2MzQuNzYzOCI+JiMzMzg1MzsmIzE5OTc5OyYjMjM0MzY7JiMyMDEwMjs8L3RleHQ+PC9nPjwhLS1saW5rIGNoZWNrRXJhc2UgdG8gZXJhc2luZy0tPjxnIGNsYXNzPSJsaW5rIiBkYXRhLWVudGl0eS0xPSJjaGVja0VyYXNlIiBkYXRhLWVudGl0eS0yPSJlcmFzaW5nIiBkYXRhLXNvdXJjZS1saW5lPSIxNSIgZGF0YS11aWQ9ImxuazE3IiBpZD0ibGlua19jaGVja0VyYXNlX2VyYXNpbmciPjxwYXRoIGQ9Ik0xNzYuNDEsNzIxLjYxNjkgQzE1NC44Niw3NDUuMDQ2OSAxMjYuNDQyNCw3NzUuOTExMyAxMDQuOTMyNCw3OTkuMjkxMyIgZmlsbD0ibm9uZSIgaWQ9ImNoZWNrRXJhc2UtdG8tZXJhc2luZyIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iMTAwLjg3LDgwMy43MDY5LDEwOS45MDczLDc5OS43OTE4LDEwNC4yNTUzLDgwMC4wMjczLDEwNC4wMTk5LDc5NC4zNzUzLDEwMC44Nyw4MDMuNzA2OSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjUyLjAwMDEiIHg9IjE0Ni44OCIgeT0iNzY3LjE2MzgiPiYjMjgwNDA7JiMyMTQzNTsmIzEyMzU0OyYjMTI0MjY7PC90ZXh0PjwvZz48IS0tbGluayBjaGVja0VyYXNlIHRvIG5ld1B1eW8tLT48ZyBjbGFzcz0ibGluayIgZGF0YS1lbnRpdHktMT0iY2hlY2tFcmFzZSIgZGF0YS1lbnRpdHktMj0ibmV3UHV5byIgZGF0YS1zb3VyY2UtbGluZT0iMTYiIGRhdGEtdWlkPSJsbmsxOCIgaWQ9ImxpbmtfY2hlY2tFcmFzZV9uZXdQdXlvIj48cGF0aCBkPSJNMjQ5LjExLDY3NC45MTY5IEMzMTEuNTUsNjQ5LjExNjkgNDExLjE1LDYwNi4zNjY5IDQyMi43LDU5MS42OTY5IEM0OTAuNTMsNTA1LjUyNjkgNTA5LjUxLDQ0My40MTY5IDQ1Ni43LDM0Ny4yOTY5IEM0NDcuMzUsMzMwLjI5NjkgNDM1LjQ1LDMyMC42NjEzIDQxOC45NCwzMTIuMDUxMyIgZmlsbD0ibm9uZSIgaWQ9ImNoZWNrRXJhc2UtdG8tbmV3UHV5byIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iNDEzLjYyLDMwOS4yNzY5LDQxOS43NTA0LDMxNi45ODUyLDQxOC4wNTM0LDMxMS41ODg5LDQyMy40NDk2LDMwOS44OTE4LDQxMy42MiwzMDkuMjc2OSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjUyLjAwMDEiIHg9IjQ5Ny4xOTE4IiB5PSI0ODcuMzYzOCI+JiMyODA0MDsmIzIxNDM1OyYjMTIzOTQ7JiMxMjM3NTs8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNzUuMTQzNiIgeD0iNDg1LjYyIiB5PSI1MDIuNDk2NiI+KCYjMjA4NDA7JiMyODA0MDsmIzEyMzc1OyYjMjEwMjg7JiMyMzQ1MDspPC90ZXh0PjwvZz48IS0tbGluayBlcmFzaW5nIHRvIGNoZWNrRmFsbC0tPjxnIGNsYXNzPSJsaW5rIiBkYXRhLWVudGl0eS0xPSJlcmFzaW5nIiBkYXRhLWVudGl0eS0yPSJjaGVja0ZhbGwiIGRhdGEtc291cmNlLWxpbmU9IjE4IiBkYXRhLXVpZD0ibG5rMTkiIGlkPSJsaW5rX2VyYXNpbmdfY2hlY2tGYWxsIj48cGF0aCBkPSJNNzUuODMsODAzLjQ5NjkgQzczLjM2LDc4Mi40ODY5IDY5LjczLDc1MS4yOTY5IDY2LjcsNzI0LjA5NjkgQzYxLjM4LDY3Ni4zMzY5IDU2LjExMzUsNjI2LjQzNDQgNTIuODUzNSw1OTUuMjM0NCIgZmlsbD0ibm9uZSIgaWQ9ImVyYXNpbmctdG8tY2hlY2tGYWxsIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSI1Mi4yMyw1ODkuMjY2OSw0OS4xODcsNTk4LjYzMzgsNTIuNzQ5Niw1OTQuMjM5OCw1Ny4xNDM2LDU5Ny44MDI1LDUyLjIzLDU4OS4yNjY5IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNTIuMDAwMSIgeD0iNzIuNzcxOCIgeT0iNjkzLjQ2MzgiPiYjMjgwNDA7JiMyMTQzNTsmIzIzNDM2OyYjMjAxMDI7PC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjYyLjE0MzYiIHg9IjY3LjciIHk9IjcwOC41OTY2Ij4oJiMzNjg5OTsmIzM3NzgyOyYjMjEwMjg7JiMyMzQ1MDspPC90ZXh0PjwvZz48IS0tbGluayBnYW1lT3ZlciB0byAqZW5kKi0tPjxnIGNsYXNzPSJsaW5rIiBkYXRhLWVudGl0eS0xPSJnYW1lT3ZlciIgZGF0YS1lbnRpdHktMj0iLmVuZC4iIGRhdGEtc291cmNlLWxpbmU9IjIwIiBkYXRhLXVpZD0ibG5rMjEiIGlkPSJsaW5rX2dhbWVPdmVyXy5lbmQuIj48cGF0aCBkPSJNMzY3Ljc1LDQ0NC42NjY5IEMzNjUuNjksNDYyLjAzNjkgMzY0LjM5LDQ4NS44MzY5IDM2OC43LDUwNi4yOTY5IEMzNzIuNDcsNTI0LjE5NjkgMzc5LjI5OTMsNTM4LjEwODMgMzg1LjQ0OTMsNTQ4Ljk0ODMiIGZpbGw9Im5vbmUiIGlkPSJnYW1lT3Zlci10by0qZW5kKiIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iMzg4LjQxLDU1NC4xNjY5LDM4Ny40NDgsNTQ0LjM2NTEsMzg1Ljk0MjcsNTQ5LjgxOCwzODAuNDg5OCw1NDguMzEyOCwzODguNDEsNTU0LjE2NjkiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI2NS4wMDAxIiB4PSIzNjkuNyIgeT0iNDk0Ljg2MzgiPiYjMTI0NjY7JiMxMjU0MDsmIzEyNTEyOyYjMzIwNjY7JiMyMDEwMjs8L3RleHQ+PC9nPjwhLS1TUkM9W1ZQOTFSbjlINENWbHlvZHNNNHJ3d3ljM0R4dE1VLWpYS3Z6MEg2WmVMaUVEenJ4SFhMclFxWDFDSW5pUWpMOGIwWWFBTDBHLXBFcFJQUi01eHg3aVdmbGdSVkJjRF8tUC1TeXBLYVFRUUNYa2FWejZWZU55dW84ZVVVTTFNeEh5RWxIUU96N2UwLW15VkF2alJaeE0zV216UHNZRkxZTC10SDhqMm8xOEEySDN0WnV4cDZTYjlDbkJ6dzhmeEJoZXNDd2xUbTFYSWM3eFFKc1ZvWUlLNVhxWUNfclluUGpxbjRidHBZVF9XR2R6RFRiLUd0OG5xWGJMOTBtR3dZWHFCcWRzTlp0THEtYzh6SXVCdWc4N2lDaDRrTmJydWVtaVBfSnpGa1A5Slp5VzRISWtpUFBJOTk1SGk4YXhDQ05uNjJiM0xldkpBcmoyd1hsSTN4a1AzTDZ5YUl5bzVrUGRxSmJfMDEwQW5hU0QyZUNmUEE1Vi1FR1Zyd0VnbzJUTGZrd3JUWU5sOW1pRWEzTThiYWliYWVRTVZIY0UxNnd6OXppWkZHZXlHdFJnclBna01QTUZpN3VNZjFQb1lnbzVkMkZoMGljeXE5SFlOM1VRNlZwdDVMNWstRkloTHhpMWtVWW8wUk5OM0tLd0hUZTJ4d3VkUlBsRlFhWkZfWS16QzFNc0hDNW9ualZFZzhvcTh3aHNsN0dSVTA0bkhvNG0yYmFSc0hWYVZVSWNzX1dYYl92ZGItSzFPNmR1cjRSUTVSQ1lxbEZMOXE3UVRpc25FZEdlVnRnbEVOeTBdLS0+PC9nPjwvc3ZnPg==" class="uml" alt="uml diagram" title="" /></p>
<h3 id="_96">クラス図<a class="headerlink" href="#_96" title="Permanent link">&para;</a></h3>
<p>各クラスの責務と関係性を示します。</p>
<p><img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBjb250ZW50U3R5bGVUeXBlPSJ0ZXh0L2NzcyIgZGF0YS1kaWFncmFtLXR5cGU9IkNMQVNTIiBoZWlnaHQ9IjE4MDVweCIgcHJlc2VydmVBc3BlY3RSYXRpbz0ibm9uZSIgc3R5bGU9IndpZHRoOjEzNjJweDtoZWlnaHQ6MTgwNXB4O2JhY2tncm91bmQ6I0ZGRkZGRjsiIHZlcnNpb249IjEuMSIgdmlld0JveD0iMCAwIDEzNjIgMTgwNSIgd2lkdGg9IjEzNjJweCIgem9vbUFuZFBhbj0ibWFnbmlmeSI+PHRpdGxlPiYjMTI0NjM7JiMxMjUyMTsmIzEyNDczOyYjMjIyNTk7PC90aXRsZT48ZGVmcy8+PGc+PGcgY2xhc3M9InRpdGxlIiBkYXRhLXNvdXJjZS1saW5lPSIxIj48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgZm9udC13ZWlnaHQ9ImJvbGQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNTUuOTk5OCIgeD0iNjQ2LjQ1NjciIHk9IjIyLjk5NTEiPiYjMTI0NjM7JiMxMjUyMTsmIzEyNDczOyYjMjIyNTk7PC90ZXh0PjwvZz48IS0tY2xhc3MgR2FtZS0tPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtZW50aXR5PSJHYW1lIiBkYXRhLXNvdXJjZS1saW5lPSIzIiBkYXRhLXVpZD0iZW50MDAwMiIgaWQ9ImVudGl0eV9HYW1lIj48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjMyNS4wNDY5IiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSIyMjcuOTYwOSIgeD0iMTg2LjAyIiB5PSI0NC4yOTY5Ii8+PGVsbGlwc2UgY3g9IjI3NC45MTExIiBjeT0iNjAuMjk2OSIgZmlsbD0iI0FERDFCMiIgcng9IjExIiByeT0iMTEiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48cGF0aCBkPSJNMjc3Ljg3OTksNjUuOTM3NSBRMjc3LjMwMTcsNjYuMjM0NCAyNzYuNjYxMSw2Ni4zNzUgUTI3Ni4wMjA1LDY2LjUzMTMgMjc1LjMxNzQsNjYuNTMxMyBRMjcyLjgxNzQsNjYuNTMxMyAyNzEuNDg5Miw2NC44OTA2IFEyNzAuMTc2Nyw2My4yMzQ0IDI3MC4xNzY3LDYwLjEwOTQgUTI3MC4xNzY3LDU2Ljk4NDQgMjcxLjQ4OTIsNTUuMzI4MSBRMjcyLjgxNzQsNTMuNjcxOSAyNzUuMzE3NCw1My42NzE5IFEyNzYuMDIwNSw1My42NzE5IDI3Ni42NjExLDUzLjgyODEgUTI3Ny4zMTc0LDUzLjk4NDQgMjc3Ljg3OTksNTQuMjgxMyBMMjc3Ljg3OTksNTcgUTI3Ny4yNTQ5LDU2LjQyMTkgMjc2LjY2MTEsNTYuMTU2MyBRMjc2LjA2NzQsNTUuODc1IDI3NS40NDI0LDU1Ljg3NSBRMjc0LjA5ODYsNTUuODc1IDI3My40MTExLDU2Ljk1MzEgUTI3Mi43MjM2LDU4LjAxNTYgMjcyLjcyMzYsNjAuMTA5NCBRMjcyLjcyMzYsNjIuMjAzMSAyNzMuNDExMSw2My4yODEzIFEyNzQuMDk4Niw2NC4zNDM4IDI3NS40NDI0LDY0LjM0MzggUTI3Ni4wNjc0LDY0LjM0MzggMjc2LjY2MTEsNjQuMDc4MSBRMjc3LjI1NDksNjMuNzk2OSAyNzcuODc5OSw2My4yMTg4IEwyNzcuODc5OSw2NS45Mzc1IFogIiBmaWxsPSIjMDAwMDAwIi8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNDEuNjc4NyIgeD0iMjk1LjQxMTEiIHk9IjY1LjE0MzYiPkdhbWU8L3RleHQ+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB4MT0iMTg3LjAyIiB4Mj0iNDEyLjk4MDkiIHkxPSI3Ni4yOTY5IiB5Mj0iNzYuMjk2OSIvPjxyZWN0IGZpbGw9Im5vbmUiIGhlaWdodD0iNiIgc3R5bGU9InN0cm9rZTojQzgyOTMwO3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9IjYiIHg9IjE5NC4wMiIgeT0iODYuOTQ1MyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjEyOC42OTM0IiB4PSIyMDYuMDIiIHk9IjkzLjI5MiI+bW9kZTogR2FtZU1vZGU8L3RleHQ+PHJlY3QgZmlsbD0ibm9uZSIgaGVpZ2h0PSI2IiBzdHlsZT0ic3Ryb2tlOiNDODI5MzA7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iNiIgeD0iMTk0LjAyIiB5PSIxMDMuMjQyMiIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjEwNS4zMjEzIiB4PSIyMDYuMDIiIHk9IjEwOS41ODg5Ij5mcmFtZTogbnVtYmVyPC90ZXh0PjxyZWN0IGZpbGw9Im5vbmUiIGhlaWdodD0iNiIgc3R5bGU9InN0cm9rZTojQzgyOTMwO3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9IjYiIHg9IjE5NC4wMiIgeT0iMTE5LjUzOTEiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxOTIuMzI5MSIgeD0iMjA2LjAyIiB5PSIxMjUuODg1NyI+Y29tYmluYXRpb25Db3VudDogbnVtYmVyPC90ZXh0PjxyZWN0IGZpbGw9Im5vbmUiIGhlaWdodD0iNiIgc3R5bGU9InN0cm9rZTojQzgyOTMwO3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9IjYiIHg9IjE5NC4wMiIgeT0iMTM1LjgzNTkiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxNzUuODc1IiB4PSIyMDYuMDIiIHk9IjE0Mi4xODI2Ij5tYXhDaGFpbkNvdW50OiBudW1iZXI8L3RleHQ+PHJlY3QgZmlsbD0ibm9uZSIgaGVpZ2h0PSI2IiBzdHlsZT0ic3Ryb2tlOiNDODI5MzA7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iNiIgeD0iMTk0LjAyIiB5PSIxNTIuMTMyOCIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9Ijk2LjkyNjgiIHg9IjIwNi4wMiIgeT0iMTU4LjQ3OTUiPmNvbmZpZzogQ29uZmlnPC90ZXh0PjxyZWN0IGZpbGw9Im5vbmUiIGhlaWdodD0iNiIgc3R5bGU9InN0cm9rZTojQzgyOTMwO3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9IjYiIHg9IjE5NC4wMiIgeT0iMTY4LjQyOTciLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxNjUuNjM0OCIgeD0iMjA2LjAyIiB5PSIxNzQuNzc2NCI+cHV5b0ltYWdlOiBQdXlvSW1hZ2U8L3RleHQ+PHJlY3QgZmlsbD0ibm9uZSIgaGVpZ2h0PSI2IiBzdHlsZT0ic3Ryb2tlOiNDODI5MzA7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iNiIgeD0iMTk0LjAyIiB5PSIxODQuNzI2NiIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9Ijg4LjQ4NDQiIHg9IjIwNi4wMiIgeT0iMTkxLjA3MzIiPnN0YWdlOiBTdGFnZTwvdGV4dD48cmVjdCBmaWxsPSJub25lIiBoZWlnaHQ9IjYiIHN0eWxlPSJzdHJva2U6I0M4MjkzMDtzdHJva2Utd2lkdGg6MTsiIHdpZHRoPSI2IiB4PSIxOTQuMDIiIHk9IjIwMS4wMjM0Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iOTYuNzQyMiIgeD0iMjA2LjAyIiB5PSIyMDcuMzcwMSI+cGxheWVyOiBQbGF5ZXI8L3RleHQ+PHJlY3QgZmlsbD0ibm9uZSIgaGVpZ2h0PSI2IiBzdHlsZT0ic3Ryb2tlOiNDODI5MzA7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iNiIgeD0iMTk0LjAyIiB5PSIyMTcuMzIwMyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9Ijg2LjYxMTMiIHg9IjIwNi4wMiIgeT0iMjIzLjY2NyI+c2NvcmU6IFNjb3JlPC90ZXh0PjxyZWN0IGZpbGw9Im5vbmUiIGhlaWdodD0iNiIgc3R5bGU9InN0cm9rZTojQzgyOTMwO3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9IjYiIHg9IjE5NC4wMiIgeT0iMjMzLjYxNzIiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMjMuNzUxIiB4PSIyMDYuMDIiIHk9IjIzOS45NjM5Ij5sYXN0VGltZTogbnVtYmVyPC90ZXh0PjxyZWN0IGZpbGw9Im5vbmUiIGhlaWdodD0iNiIgc3R5bGU9InN0cm9rZTojQzgyOTMwO3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9IjYiIHg9IjE5NC4wMiIgeT0iMjQ5LjkxNDEiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIyMDEuOTYwOSIgeD0iMjA2LjAyIiB5PSIyNTYuMjYwNyI+Y2hhaW5FbGVtZW50OiBIVE1MRWxlbWVudDwvdGV4dD48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHgxPSIxODcuMDIiIHgyPSI0MTIuOTgwOSIgeTE9IjI2My41NjI1IiB5Mj0iMjYzLjU2MjUiLz48ZWxsaXBzZSBjeD0iMTk3LjAyIiBjeT0iMjc3LjIxMDkiIGZpbGw9IiM4NEJFODQiIHJ4PSIzIiByeT0iMyIgc3R5bGU9InN0cm9rZTojMDM4MDQ4O3N0cm9rZS13aWR0aDoxOyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjEwOC4wNjkzIiB4PSIyMDYuMDIiIHk9IjI4MC41NTc2Ij5pbml0aWFsaXplKCk6IHZvaWQ8L3RleHQ+PGVsbGlwc2UgY3g9IjE5Ny4wMiIgY3k9IjI5My41MDc4IiBmaWxsPSIjODRCRTg0IiByeD0iMyIgcnk9IjMiIHN0eWxlPSJzdHJva2U6IzAzODA0ODtzdHJva2Utd2lkdGg6MTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxNjUuMzc1IiB4PSIyMDYuMDIiIHk9IjI5Ni44NTQ1Ij5sb29wKGN1cnJlbnRUaW1lKTogdm9pZDwvdGV4dD48cmVjdCBmaWxsPSIjRjI0RDVDIiBoZWlnaHQ9IjYiIHN0eWxlPSJzdHJva2U6I0M4MjkzMDtzdHJva2Utd2lkdGg6MTsiIHdpZHRoPSI2IiB4PSIxOTQuMDIiIHk9IjMwNi44MDQ3Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTY5LjE5NjMiIHg9IjIwNi4wMiIgeT0iMzEzLjE1MTQiPnVwZGF0ZShkZWx0YVRpbWUpOiB2b2lkPC90ZXh0PjxyZWN0IGZpbGw9IiNGMjRENUMiIGhlaWdodD0iNiIgc3R5bGU9InN0cm9rZTojQzgyOTMwO3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9IjYiIHg9IjE5NC4wMiIgeT0iMzIzLjEwMTYiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI4NC4zODk2IiB4PSIyMDYuMDIiIHk9IjMyOS40NDgyIj5kcmF3KCk6IHZvaWQ8L3RleHQ+PHJlY3QgZmlsbD0iI0YyNEQ1QyIgaGVpZ2h0PSI2IiBzdHlsZT0ic3Ryb2tlOiNDODI5MzA7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iNiIgeD0iMTk0LjAyIiB5PSIzMzkuMzk4NCIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjE5MC42NDA2IiB4PSIyMDYuMDIiIHk9IjM0NS43NDUxIj51cGRhdGVDaGFpbkRpc3BsYXkoKTogdm9pZDwvdGV4dD48cmVjdCBmaWxsPSIjRjI0RDVDIiBoZWlnaHQ9IjYiIHN0eWxlPSJzdHJva2U6I0M4MjkzMDtzdHJva2Utd2lkdGg6MTsiIHdpZHRoPSI2IiB4PSIxOTQuMDIiIHk9IjM1NS42OTUzIi8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTU5Ljc0MjIiIHg9IjIwNi4wMiIgeT0iMzYyLjA0MiI+ZHJhd0dhbWVPdmVyKCk6IHZvaWQ8L3RleHQ+PC9nPjwhLS1jbGFzcyBDb25maWctLT48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLWVudGl0eT0iQ29uZmlnIiBkYXRhLXNvdXJjZS1saW5lPSIyNCIgZGF0YS11aWQ9ImVudDAwMDMiIGlkPSJlbnRpdHlfQ29uZmlnIj48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjExMy4xODc1IiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSIxNzUuNTE1NiIgeD0iNDU2LjI0IiB5PSIxNjg1LjA3NjkiLz48ZWxsaXBzZSBjeD0iNTE3LjI4ODMiIGN5PSIxNzAxLjA3NjkiIGZpbGw9IiNBREQxQjIiIHJ4PSIxMSIgcnk9IjExIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHBhdGggZD0iTTUyMC4yNTcxLDE3MDYuNzE3NSBRNTE5LjY3OSwxNzA3LjAxNDQgNTE5LjAzODMsMTcwNy4xNTUgUTUxOC4zOTc3LDE3MDcuMzExMyA1MTcuNjk0NiwxNzA3LjMxMTMgUTUxNS4xOTQ2LDE3MDcuMzExMyA1MTMuODY2NSwxNzA1LjY3MDYgUTUxMi41NTQsMTcwNC4wMTQ0IDUxMi41NTQsMTcwMC44ODk0IFE1MTIuNTU0LDE2OTcuNzY0NCA1MTMuODY2NSwxNjk2LjEwODEgUTUxNS4xOTQ2LDE2OTQuNDUxOSA1MTcuNjk0NiwxNjk0LjQ1MTkgUTUxOC4zOTc3LDE2OTQuNDUxOSA1MTkuMDM4MywxNjk0LjYwODEgUTUxOS42OTQ2LDE2OTQuNzY0NCA1MjAuMjU3MSwxNjk1LjA2MTMgTDUyMC4yNTcxLDE2OTcuNzggUTUxOS42MzIxLDE2OTcuMjAxOSA1MTkuMDM4MywxNjk2LjkzNjMgUTUxOC40NDQ2LDE2OTYuNjU1IDUxNy44MTk2LDE2OTYuNjU1IFE1MTYuNDc1OCwxNjk2LjY1NSA1MTUuNzg4MywxNjk3LjczMzEgUTUxNS4xMDA4LDE2OTguNzk1NiA1MTUuMTAwOCwxNzAwLjg4OTQgUTUxNS4xMDA4LDE3MDIuOTgzMSA1MTUuNzg4MywxNzA0LjA2MTMgUTUxNi40NzU4LDE3MDUuMTIzOCA1MTcuODE5NiwxNzA1LjEyMzggUTUxOC40NDQ2LDE3MDUuMTIzOCA1MTkuMDM4MywxNzA0Ljg1ODEgUTUxOS42MzIxLDE3MDQuNTc2OSA1MjAuMjU3MSwxNzAzLjk5ODggTDUyMC4yNTcxLDE3MDYuNzE3NSBaICIgZmlsbD0iIzAwMDAwMCIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjQ0LjkxODkiIHg9IjUzNy43ODgzIiB5PSIxNzA1LjkyMzYiPkNvbmZpZzwvdGV4dD48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHgxPSI0NTcuMjQiIHgyPSI2MzAuNzU1NiIgeTE9IjE3MTcuMDc2OSIgeTI9IjE3MTcuMDc2OSIvPjxlbGxpcHNlIGN4PSI0NjcuMjQiIGN5PSIxNzMwLjcyNTMiIGZpbGw9Im5vbmUiIHJ4PSIzIiByeT0iMyIgc3R5bGU9InN0cm9rZTojMDM4MDQ4O3N0cm9rZS13aWR0aDoxOyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjEzOS43MDYxIiB4PSI0NzYuMjQiIHk9IjE3MzQuMDcyIj5zdGFnZVJvd3M6IG51bWJlcjwvdGV4dD48ZWxsaXBzZSBjeD0iNDY3LjI0IiBjeT0iMTc0Ny4wMjIyIiBmaWxsPSJub25lIiByeD0iMyIgcnk9IjMiIHN0eWxlPSJzdHJva2U6IzAzODA0ODtzdHJva2Utd2lkdGg6MTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMzIuMTkzNCIgeD0iNDc2LjI0IiB5PSIxNzUwLjM2ODkiPnN0YWdlQ29sczogbnVtYmVyPC90ZXh0PjxlbGxpcHNlIGN4PSI0NjcuMjQiIGN5PSIxNzYzLjMxOTEiIGZpbGw9Im5vbmUiIHJ4PSIzIiByeT0iMyIgc3R5bGU9InN0cm9rZTojMDM4MDQ4O3N0cm9rZS13aWR0aDoxOyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjEyNy4xNTUzIiB4PSI0NzYuMjQiIHk9IjE3NjYuNjY1NyI+cHV5b1NpemU6IG51bWJlcjwvdGV4dD48ZWxsaXBzZSBjeD0iNDY3LjI0IiBjeT0iMTc3OS42MTU5IiBmaWxsPSJub25lIiByeD0iMyIgcnk9IjMiIHN0eWxlPSJzdHJva2U6IzAzODA0ODtzdHJva2Utd2lkdGg6MTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxNDkuNTE1NiIgeD0iNDc2LjI0IiB5PSIxNzgyLjk2MjYiPmRyb3BJbnRlcnZhbDogbnVtYmVyPC90ZXh0PjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgeDE9IjQ1Ny4yNCIgeDI9IjYzMC43NTU2IiB5MT0iMTc5MC4yNjQ0IiB5Mj0iMTc5MC4yNjQ0Ii8+PC9nPjwhLS1jbGFzcyBQdXlvSW1hZ2UtLT48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLWVudGl0eT0iUHV5b0ltYWdlIiBkYXRhLXNvdXJjZS1saW5lPSIzMSIgZGF0YS11aWQ9ImVudDAwMDQiIGlkPSJlbnRpdHlfUHV5b0ltYWdlIj48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjEyOS40ODQ0IiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSIyNTQuOTIxOSIgeD0iNTguNTQiIHk9IjE0NzguNTk2OSIvPjxlbGxpcHNlIGN4PSIxNDIuNzQ1MSIgY3k9IjE0OTQuNTk2OSIgZmlsbD0iI0FERDFCMiIgcng9IjExIiByeT0iMTEiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48cGF0aCBkPSJNMTQ1LjcxMzgsMTUwMC4yMzc1IFExNDUuMTM1NywxNTAwLjUzNDQgMTQ0LjQ5NTEsMTUwMC42NzUgUTE0My44NTQ1LDE1MDAuODMxMyAxNDMuMTUxMywxNTAwLjgzMTMgUTE0MC42NTEzLDE1MDAuODMxMyAxMzkuMzIzMiwxNDk5LjE5MDYgUTEzOC4wMTA3LDE0OTcuNTM0NCAxMzguMDEwNywxNDk0LjQwOTQgUTEzOC4wMTA3LDE0OTEuMjg0NCAxMzkuMzIzMiwxNDg5LjYyODEgUTE0MC42NTEzLDE0ODcuOTcxOSAxNDMuMTUxMywxNDg3Ljk3MTkgUTE0My44NTQ1LDE0ODcuOTcxOSAxNDQuNDk1MSwxNDg4LjEyODEgUTE0NS4xNTEzLDE0ODguMjg0NCAxNDUuNzEzOCwxNDg4LjU4MTMgTDE0NS43MTM4LDE0OTEuMyBRMTQ1LjA4ODgsMTQ5MC43MjE5IDE0NC40OTUxLDE0OTAuNDU2MyBRMTQzLjkwMTMsMTQ5MC4xNzUgMTQzLjI3NjMsMTQ5MC4xNzUgUTE0MS45MzI2LDE0OTAuMTc1IDE0MS4yNDUxLDE0OTEuMjUzMSBRMTQwLjU1NzYsMTQ5Mi4zMTU2IDE0MC41NTc2LDE0OTQuNDA5NCBRMTQwLjU1NzYsMTQ5Ni41MDMxIDE0MS4yNDUxLDE0OTcuNTgxMyBRMTQxLjkzMjYsMTQ5OC42NDM4IDE0My4yNzYzLDE0OTguNjQzOCBRMTQzLjkwMTMsMTQ5OC42NDM4IDE0NC40OTUxLDE0OTguMzc4MSBRMTQ1LjA4ODgsMTQ5OC4wOTY5IDE0NS43MTM4LDE0OTcuNTE4OCBMMTQ1LjcxMzgsMTUwMC4yMzc1IFogIiBmaWxsPSIjMDAwMDAwIi8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNzguMDExNyIgeD0iMTYzLjI0NTEiIHk9IjE0OTkuNDQzNiI+UHV5b0ltYWdlPC90ZXh0PjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgeDE9IjU5LjU0IiB4Mj0iMzEyLjQ2MTkiIHkxPSIxNTEwLjU5NjkiIHkyPSIxNTEwLjU5NjkiLz48cmVjdCBmaWxsPSJub25lIiBoZWlnaHQ9IjYiIHN0eWxlPSJzdHJva2U6I0M4MjkzMDtzdHJva2Utd2lkdGg6MTsiIHdpZHRoPSI2IiB4PSI2Ni41NCIgeT0iMTUyMS4yNDUzIi8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iOTYuOTI2OCIgeD0iNzguNTQiIHk9IjE1MjcuNTkyIj5jb25maWc6IENvbmZpZzwvdGV4dD48cmVjdCBmaWxsPSJub25lIiBoZWlnaHQ9IjYiIHN0eWxlPSJzdHJva2U6I0M4MjkzMDtzdHJva2Utd2lkdGg6MTsiIHdpZHRoPSI2IiB4PSI2Ni41NCIgeT0iMTUzNy41NDIyIi8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMjA2Ljc4MDMiIHg9Ijc4LjU0IiB5PSIxNTQzLjg4ODkiPmNhbnZhczogSFRNTENhbnZhc0VsZW1lbnQ8L3RleHQ+PHJlY3QgZmlsbD0ibm9uZSIgaGVpZ2h0PSI2IiBzdHlsZT0ic3Ryb2tlOiNDODI5MzA7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iNiIgeD0iNjYuNTQiIHk9IjE1NTMuODM5MSIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjIyOC45MjE5IiB4PSI3OC41NCIgeT0iMTU2MC4xODU3Ij5jdHg6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRDwvdGV4dD48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHgxPSI1OS41NCIgeDI9IjMxMi40NjE5IiB5MT0iMTU2Ny40ODc1IiB5Mj0iMTU2Ny40ODc1Ii8+PGVsbGlwc2UgY3g9IjY5LjU0IiBjeT0iMTU4MS4xMzU5IiBmaWxsPSIjODRCRTg0IiByeD0iMyIgcnk9IjMiIHN0eWxlPSJzdHJva2U6IzAzODA0ODtzdHJva2Utd2lkdGg6MTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxODMuNjA2NCIgeD0iNzguNTQiIHk9IjE1ODQuNDgyNiI+ZHJhdyhjdHgsIHgsIHksIGNvbG9yKTogdm9pZDwvdGV4dD48cmVjdCBmaWxsPSIjRjI0RDVDIiBoZWlnaHQ9IjYiIHN0eWxlPSJzdHJva2U6I0M4MjkzMDtzdHJva2Utd2lkdGg6MTsiIHdpZHRoPSI2IiB4PSI2Ni41NCIgeT0iMTU5NC40MzI4Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTUzLjAyOTMiIHg9Ijc4LjU0IiB5PSIxNjAwLjc3OTUiPmRyYXdQdXlvKGNvbG9yKTogdm9pZDwvdGV4dD48L2c+PCEtLWNsYXNzIFN0YWdlLS0+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1lbnRpdHk9IlN0YWdlIiBkYXRhLXNvdXJjZS1saW5lPSI0MCIgZGF0YS11aWQ9ImVudDAwMDUiIGlkPSJlbnRpdHlfU3RhZ2UiPjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iMzI1LjA0NjkiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjI1NC45MjE5IiB4PSIyOTcuNTQiIHk9IjEwNzYuNTQ2OSIvPjxlbGxpcHNlIGN4PSI0MDAuNTIzNCIgY3k9IjEwOTIuNTQ2OSIgZmlsbD0iI0FERDFCMiIgcng9IjExIiByeT0iMTEiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48cGF0aCBkPSJNNDAzLjQ5MjEsMTA5OC4xODc1IFE0MDIuOTE0LDEwOTguNDg0NCA0MDIuMjczNCwxMDk4LjYyNSBRNDAxLjYzMjgsMTA5OC43ODEzIDQwMC45Mjk2LDEwOTguNzgxMyBRMzk4LjQyOTYsMTA5OC43ODEzIDM5Ny4xMDE1LDEwOTcuMTQwNiBRMzk1Ljc4OSwxMDk1LjQ4NDQgMzk1Ljc4OSwxMDkyLjM1OTQgUTM5NS43ODksMTA4OS4yMzQ0IDM5Ny4xMDE1LDEwODcuNTc4MSBRMzk4LjQyOTYsMTA4NS45MjE5IDQwMC45Mjk2LDEwODUuOTIxOSBRNDAxLjYzMjgsMTA4NS45MjE5IDQwMi4yNzM0LDEwODYuMDc4MSBRNDAyLjkyOTYsMTA4Ni4yMzQ0IDQwMy40OTIxLDEwODYuNTMxMyBMNDAzLjQ5MjEsMTA4OS4yNSBRNDAyLjg2NzEsMTA4OC42NzE5IDQwMi4yNzM0LDEwODguNDA2MyBRNDAxLjY3OTYsMTA4OC4xMjUgNDAxLjA1NDYsMTA4OC4xMjUgUTM5OS43MTA5LDEwODguMTI1IDM5OS4wMjM0LDEwODkuMjAzMSBRMzk4LjMzNTksMTA5MC4yNjU2IDM5OC4zMzU5LDEwOTIuMzU5NCBRMzk4LjMzNTksMTA5NC40NTMxIDM5OS4wMjM0LDEwOTUuNTMxMyBRMzk5LjcxMDksMTA5Ni41OTM4IDQwMS4wNTQ2LDEwOTYuNTkzOCBRNDAxLjY3OTYsMTA5Ni41OTM4IDQwMi4yNzM0LDEwOTYuMzI4MSBRNDAyLjg2NzEsMTA5Ni4wNDY5IDQwMy40OTIxLDEwOTUuNDY4OCBMNDAzLjQ5MjEsMTA5OC4xODc1IFogIiBmaWxsPSIjMDAwMDAwIi8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNDAuNDU1MSIgeD0iNDIxLjAyMzQiIHk9IjEwOTcuMzkzNiI+U3RhZ2U8L3RleHQ+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB4MT0iMjk4LjU0IiB4Mj0iNTUxLjQ2MTkiIHkxPSIxMTA4LjU0NjkiIHkyPSIxMTA4LjU0NjkiLz48cmVjdCBmaWxsPSJub25lIiBoZWlnaHQ9IjYiIHN0eWxlPSJzdHJva2U6I0M4MjkzMDtzdHJva2Utd2lkdGg6MTsiIHdpZHRoPSI2IiB4PSIzMDUuNTQiIHk9IjExMTkuMTk1MyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9Ijk2LjkyNjgiIHg9IjMxNy41NCIgeT0iMTEyNS41NDIiPmNvbmZpZzogQ29uZmlnPC90ZXh0PjxyZWN0IGZpbGw9Im5vbmUiIGhlaWdodD0iNiIgc3R5bGU9InN0cm9rZTojQzgyOTMwO3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9IjYiIHg9IjMwNS41NCIgeT0iMTEzNS40OTIyIi8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTY1LjYzNDgiIHg9IjMxNy41NCIgeT0iMTE0MS44Mzg5Ij5wdXlvSW1hZ2U6IFB1eW9JbWFnZTwvdGV4dD48cmVjdCBmaWxsPSJub25lIiBoZWlnaHQ9IjYiIHN0eWxlPSJzdHJva2U6I0M4MjkzMDtzdHJva2Utd2lkdGg6MTsiIHdpZHRoPSI2IiB4PSIzMDUuNTQiIHk9IjExNTEuNzg5MSIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjExNS44NjIzIiB4PSIzMTcuNTQiIHk9IjExNTguMTM1NyI+ZmllbGQ6IG51bWJlcltdW108L3RleHQ+PHJlY3QgZmlsbD0ibm9uZSIgaGVpZ2h0PSI2IiBzdHlsZT0ic3Ryb2tlOiNDODI5MzA7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iNiIgeD0iMzA1LjU0IiB5PSIxMTY4LjA4NTkiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIyMDYuNzgwMyIgeD0iMzE3LjU0IiB5PSIxMTc0LjQzMjYiPmNhbnZhczogSFRNTENhbnZhc0VsZW1lbnQ8L3RleHQ+PHJlY3QgZmlsbD0ibm9uZSIgaGVpZ2h0PSI2IiBzdHlsZT0ic3Ryb2tlOiNDODI5MzA7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iNiIgeD0iMzA1LjU0IiB5PSIxMTg0LjM4MjgiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIyMjguOTIxOSIgeD0iMzE3LjU0IiB5PSIxMTkwLjcyOTUiPmN0eDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEPC90ZXh0PjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgeDE9IjI5OC41NCIgeDI9IjU1MS40NjE5IiB5MT0iMTE5OC4wMzEzIiB5Mj0iMTE5OC4wMzEzIi8+PGVsbGlwc2UgY3g9IjMwOC41NCIgY3k9IjEyMTEuNjc5NyIgZmlsbD0iIzg0QkU4NCIgcng9IjMiIHJ5PSIzIiBzdHlsZT0ic3Ryb2tlOiMwMzgwNDg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTUyLjg5OTQiIHg9IjMxNy41NCIgeT0iMTIxNS4wMjY0Ij5nZXRGaWVsZCgpOiBudW1iZXJbXVtdPC90ZXh0PjxlbGxpcHNlIGN4PSIzMDguNTQiIGN5PSIxMjI3Ljk3NjYiIGZpbGw9IiM4NEJFODQiIHJ4PSIzIiByeT0iMyIgc3R5bGU9InN0cm9rZTojMDM4MDQ4O3N0cm9rZS13aWR0aDoxOyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjE1Ny4zNTY0IiB4PSIzMTcuNTQiIHk9IjEyMzEuMzIzMiI+Z2V0UHV5byh4LCB5KTogbnVtYmVyPC90ZXh0PjxlbGxpcHNlIGN4PSIzMDguNTQiIGN5PSIxMjQ0LjI3MzQiIGZpbGw9IiM4NEJFODQiIHJ4PSIzIiByeT0iMyIgc3R5bGU9InN0cm9rZTojMDM4MDQ4O3N0cm9rZS13aWR0aDoxOyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjE3NC4xMjUiIHg9IjMxNy41NCIgeT0iMTI0Ny42MjAxIj5zZXRQdXlvKHgsIHksIGNvbG9yKTogdm9pZDwvdGV4dD48ZWxsaXBzZSBjeD0iMzA4LjU0IiBjeT0iMTI2MC41NzAzIiBmaWxsPSIjODRCRTg0IiByeD0iMyIgcnk9IjMiIHN0eWxlPSJzdHJva2U6IzAzODA0ODtzdHJva2Utd2lkdGg6MTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI4NC4zODk2IiB4PSIzMTcuNTQiIHk9IjEyNjMuOTE3Ij5kcmF3KCk6IHZvaWQ8L3RleHQ+PGVsbGlwc2UgY3g9IjMwOC41NCIgY3k9IjEyNzYuODY3MiIgZmlsbD0iIzg0QkU4NCIgcng9IjMiIHJ5PSIzIiBzdHlsZT0ic3Ryb2tlOiMwMzgwNDg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTY1LjcyMzYiIHg9IjMxNy41NCIgeT0iMTI4MC4yMTM5Ij5hcHBseUdyYXZpdHkoKTogYm9vbGVhbjwvdGV4dD48ZWxsaXBzZSBjeD0iMzA4LjU0IiBjeT0iMTI5My4xNjQxIiBmaWxsPSIjODRCRTg0IiByeD0iMyIgcnk9IjMiIHN0eWxlPSJzdHJva2U6IzAzODA0ODtzdHJva2Utd2lkdGg6MTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxNjUuNzUxIiB4PSIzMTcuNTQiIHk9IjEyOTYuNTEwNyI+Y2hlY2tFcmFzZSgpOiBFcmFzZUluZm88L3RleHQ+PGVsbGlwc2UgY3g9IjMwOC41NCIgY3k9IjEzMDkuNDYwOSIgZmlsbD0iIzg0QkU4NCIgcng9IjMiIHJ5PSIzIiBzdHlsZT0ic3Ryb2tlOiMwMzgwNDg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMjAyLjYxMDQiIHg9IjMxNy41NCIgeT0iMTMxMi44MDc2Ij5lcmFzZUJvYXJkcyhlcmFzZUluZm8pOiB2b2lkPC90ZXh0PjxlbGxpcHNlIGN4PSIzMDguNTQiIGN5PSIxMzI1Ljc1NzgiIGZpbGw9IiM4NEJFODQiIHJ4PSIzIiByeT0iMyIgc3R5bGU9InN0cm9rZTojMDM4MDQ4O3N0cm9rZS13aWR0aDoxOyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjE4MC45MDYzIiB4PSIzMTcuNTQiIHk9IjEzMjkuMTA0NSI+Y2hlY2taZW5rZXNoaSgpOiBib29sZWFuPC90ZXh0PjxyZWN0IGZpbGw9IiNGMjRENUMiIGhlaWdodD0iNiIgc3R5bGU9InN0cm9rZTojQzgyOTMwO3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9IjYiIHg9IjMwNS41NCIgeT0iMTMzOS4wNTQ3Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTY4LjIxODgiIHg9IjMxNy41NCIgeT0iMTM0NS40MDE0Ij5kcmF3QmFja2dyb3VuZCgpOiB2b2lkPC90ZXh0PjxyZWN0IGZpbGw9IiNGMjRENUMiIGhlaWdodD0iNiIgc3R5bGU9InN0cm9rZTojQzgyOTMwO3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9IjYiIHg9IjMwNS41NCIgeT0iMTM1NS4zNTE2Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTEzLjc3MDUiIHg9IjMxNy41NCIgeT0iMTM2MS42OTgyIj5kcmF3R3JpZCgpOiB2b2lkPC90ZXh0PjxyZWN0IGZpbGw9IiNGMjRENUMiIGhlaWdodD0iNiIgc3R5bGU9InN0cm9rZTojQzgyOTMwO3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9IjYiIHg9IjMwNS41NCIgeT0iMTM3MS42NDg0Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTI1Ljg0OTYiIHg9IjMxNy41NCIgeT0iMTM3Ny45OTUxIj5kcmF3UHV5b3MoKTogdm9pZDwvdGV4dD48cmVjdCBmaWxsPSIjRjI0RDVDIiBoZWlnaHQ9IjYiIHN0eWxlPSJzdHJva2U6I0M4MjkzMDtzdHJva2Utd2lkdGg6MTsiIHdpZHRoPSI2IiB4PSIzMDUuNTQiIHk9IjEzODcuOTQ1MyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjIxOS40MzM2IiB4PSIzMTcuNTQiIHk9IjEzOTQuMjkyIj5zZWFyY2hDb25uZWN0ZWRQdXlvKC4uLik6IHZvaWQ8L3RleHQ+PC9nPjwhLS1jbGFzcyBQbGF5ZXItLT48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLWVudGl0eT0iUGxheWVyIiBkYXRhLXNvdXJjZS1saW5lPSI2MSIgZGF0YS11aWQ9ImVudDAwMDYiIGlkPSJlbnRpdHlfUGxheWVyIj48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjU1My4yMDMxIiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSIyMTguNDA0MyIgeD0iMjg5LjgiIHk9IjQ0Ni4zNDY5Ii8+PGVsbGlwc2UgY3g9IjM3Mi45Njk0IiBjeT0iNDYyLjM0NjkiIGZpbGw9IiNBREQxQjIiIHJ4PSIxMSIgcnk9IjExIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHBhdGggZD0iTTM3NS45MzgyLDQ2Ny45ODc1IFEzNzUuMzYwMSw0NjguMjg0NCAzNzQuNzE5NCw0NjguNDI1IFEzNzQuMDc4OCw0NjguNTgxMiAzNzMuMzc1Nyw0NjguNTgxMiBRMzcwLjg3NTcsNDY4LjU4MTIgMzY5LjU0NzYsNDY2Ljk0MDYgUTM2OC4yMzUxLDQ2NS4yODQ0IDM2OC4yMzUxLDQ2Mi4xNTk0IFEzNjguMjM1MSw0NTkuMDM0NCAzNjkuNTQ3Niw0NTcuMzc4MSBRMzcwLjg3NTcsNDU1LjcyMTkgMzczLjM3NTcsNDU1LjcyMTkgUTM3NC4wNzg4LDQ1NS43MjE5IDM3NC43MTk0LDQ1NS44NzgxIFEzNzUuMzc1Nyw0NTYuMDM0NCAzNzUuOTM4Miw0NTYuMzMxMiBMMzc1LjkzODIsNDU5LjA1IFEzNzUuMzEzMiw0NTguNDcxOSAzNzQuNzE5NCw0NTguMjA2MiBRMzc0LjEyNTcsNDU3LjkyNSAzNzMuNTAwNyw0NTcuOTI1IFEzNzIuMTU2OSw0NTcuOTI1IDM3MS40Njk0LDQ1OS4wMDMxIFEzNzAuNzgxOSw0NjAuMDY1NiAzNzAuNzgxOSw0NjIuMTU5NCBRMzcwLjc4MTksNDY0LjI1MzEgMzcxLjQ2OTQsNDY1LjMzMTIgUTM3Mi4xNTY5LDQ2Ni4zOTM3IDM3My41MDA3LDQ2Ni4zOTM3IFEzNzQuMTI1Nyw0NjYuMzkzNyAzNzQuNzE5NCw0NjYuMTI4MSBRMzc1LjMxMzIsNDY1Ljg0NjkgMzc1LjkzODIsNDY1LjI2ODcgTDM3NS45MzgyLDQ2Ny45ODc1IFogIiBmaWxsPSIjMDAwMDAwIi8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNDMuNTY1NCIgeD0iMzkzLjQ2OTQiIHk9IjQ2Ny4xOTM2Ij5QbGF5ZXI8L3RleHQ+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB4MT0iMjkwLjgiIHgyPSI1MDcuMjA0MyIgeTE9IjQ3OC4zNDY5IiB5Mj0iNDc4LjM0NjkiLz48cmVjdCBmaWxsPSJub25lIiBoZWlnaHQ9IjYiIHN0eWxlPSJzdHJva2U6I0M4MjkzMDtzdHJva2Utd2lkdGg6MTsiIHdpZHRoPSI2IiB4PSIyOTcuOCIgeT0iNDg4Ljk5NTMiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI5Ni45MjY4IiB4PSIzMDkuOCIgeT0iNDk1LjM0MiI+Y29uZmlnOiBDb25maWc8L3RleHQ+PHJlY3QgZmlsbD0ibm9uZSIgaGVpZ2h0PSI2IiBzdHlsZT0ic3Ryb2tlOiNDODI5MzA7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iNiIgeD0iMjk3LjgiIHk9IjUwNS4yOTIyIi8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iODguNDg0NCIgeD0iMzA5LjgiIHk9IjUxMS42Mzg5Ij5zdGFnZTogU3RhZ2U8L3RleHQ+PHJlY3QgZmlsbD0ibm9uZSIgaGVpZ2h0PSI2IiBzdHlsZT0ic3Ryb2tlOiNDODI5MzA7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iNiIgeD0iMjk3LjgiIHk9IjUyMS41ODkxIi8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTY1LjYzNDgiIHg9IjMwOS44IiB5PSI1MjcuOTM1NyI+cHV5b0ltYWdlOiBQdXlvSW1hZ2U8L3RleHQ+PHJlY3QgZmlsbD0ibm9uZSIgaGVpZ2h0PSI2IiBzdHlsZT0ic3Ryb2tlOiNDODI5MzA7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iNiIgeD0iMjk3LjgiIHk9IjUzNy44ODU5Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTA4LjAwNzgiIHg9IjMwOS44IiB5PSI1NDQuMjMyNiI+cHV5b1g6IG51bWJlcjwvdGV4dD48cmVjdCBmaWxsPSJub25lIiBoZWlnaHQ9IjYiIHN0eWxlPSJzdHJva2U6I0M4MjkzMDtzdHJva2Utd2lkdGg6MTsiIHdpZHRoPSI2IiB4PSIyOTcuOCIgeT0iNTU0LjE4MjgiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMDYuOTY4OCIgeD0iMzA5LjgiIHk9IjU2MC41Mjk1Ij5wdXlvWTogbnVtYmVyPC90ZXh0PjxyZWN0IGZpbGw9Im5vbmUiIGhlaWdodD0iNiIgc3R5bGU9InN0cm9rZTojQzgyOTMwO3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9IjYiIHg9IjI5Ny44IiB5PSI1NzAuNDc5NyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjEzNC45Njg4IiB4PSIzMDkuOCIgeT0iNTc2LjgyNjQiPnB1eW9Db2xvcjogbnVtYmVyPC90ZXh0PjxyZWN0IGZpbGw9Im5vbmUiIGhlaWdodD0iNiIgc3R5bGU9InN0cm9rZTojQzgyOTMwO3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9IjYiIHg9IjI5Ny44IiB5PSI1ODYuNzc2NiIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjEzMy41OTQ3IiB4PSIzMDkuOCIgeT0iNTkzLjEyMzIiPmNoaWxkQ29sb3I6IG51bWJlcjwvdGV4dD48cmVjdCBmaWxsPSJub25lIiBoZWlnaHQ9IjYiIHN0eWxlPSJzdHJva2U6I0M4MjkzMDtzdHJva2Utd2lkdGg6MTsiIHdpZHRoPSI2IiB4PSIyOTcuOCIgeT0iNjAzLjA3MzQiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMTkuMDEzNyIgeD0iMzA5LjgiIHk9IjYwOS40MjAxIj5yb3RhdGlvbjogbnVtYmVyPC90ZXh0PjxyZWN0IGZpbGw9Im5vbmUiIGhlaWdodD0iNiIgc3R5bGU9InN0cm9rZTojQzgyOTMwO3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9IjYiIHg9IjI5Ny44IiB5PSI2MTkuMzcwMyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjExMi44NjgyIiB4PSIzMDkuOCIgeT0iNjI1LjcxNyI+bGFuZGVkOiBib29sZWFuPC90ZXh0PjxyZWN0IGZpbGw9Im5vbmUiIGhlaWdodD0iNiIgc3R5bGU9InN0cm9rZTojQzgyOTMwO3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9IjYiIHg9IjI5Ny44IiB5PSI2MzUuNjY3MiIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjE1NC4wNjE1IiB4PSIzMDkuOCIgeT0iNjQyLjAxMzkiPmlucHV0S2V5TGVmdDogYm9vbGVhbjwvdGV4dD48cmVjdCBmaWxsPSJub25lIiBoZWlnaHQ9IjYiIHN0eWxlPSJzdHJva2U6I0M4MjkzMDtzdHJva2Utd2lkdGg6MTsiIHdpZHRoPSI2IiB4PSIyOTcuOCIgeT0iNjUxLjk2NDEiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxNjQuMDk2NyIgeD0iMzA5LjgiIHk9IjY1OC4zMTA3Ij5pbnB1dEtleVJpZ2h0OiBib29sZWFuPC90ZXh0PjxyZWN0IGZpbGw9Im5vbmUiIGhlaWdodD0iNiIgc3R5bGU9InN0cm9rZTojQzgyOTMwO3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9IjYiIHg9IjI5Ny44IiB5PSI2NjguMjYwOSIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjE2Ni44OTk0IiB4PSIzMDkuOCIgeT0iNjc0LjYwNzYiPmlucHV0S2V5RG93bjogYm9vbGVhbjwvdGV4dD48cmVjdCBmaWxsPSJub25lIiBoZWlnaHQ9IjYiIHN0eWxlPSJzdHJva2U6I0M4MjkzMDtzdHJva2Utd2lkdGg6MTsiIHdpZHRoPSI2IiB4PSIyOTcuOCIgeT0iNjg0LjU1NzgiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMzYuMzQ5NiIgeD0iMzA5LjgiIHk9IjY5MC45MDQ1Ij5kcm9wVGltZXI6IG51bWJlcjwvdGV4dD48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHgxPSIyOTAuOCIgeDI9IjUwNy4yMDQzIiB5MT0iNjk4LjIwNjMiIHkyPSI2OTguMjA2MyIvPjxlbGxpcHNlIGN4PSIzMDAuOCIgY3k9IjcxMS44NTQ3IiBmaWxsPSIjODRCRTg0IiByeD0iMyIgcnk9IjMiIHN0eWxlPSJzdHJva2U6IzAzODA0ODtzdHJva2Utd2lkdGg6MTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxNTkuMTY4IiB4PSIzMDkuOCIgeT0iNzE1LjIwMTQiPmNyZWF0ZU5ld1B1eW8oKTogdm9pZDwvdGV4dD48ZWxsaXBzZSBjeD0iMzAwLjgiIGN5PSI3MjguMTUxNiIgZmlsbD0iIzg0QkU4NCIgcng9IjMiIHJ5PSIzIiBzdHlsZT0ic3Ryb2tlOiMwMzgwNDg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTY5LjE5NjMiIHg9IjMwOS44IiB5PSI3MzEuNDk4MiI+dXBkYXRlKGRlbHRhVGltZSk6IHZvaWQ8L3RleHQ+PGVsbGlwc2UgY3g9IjMwMC44IiBjeT0iNzQ0LjQ0ODQiIGZpbGw9IiM4NEJFODQiIHJ4PSIzIiByeT0iMyIgc3R5bGU9InN0cm9rZTojMDM4MDQ4O3N0cm9rZS13aWR0aDoxOyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjEwNS44NjEzIiB4PSIzMDkuOCIgeT0iNzQ3Ljc5NTEiPmRyYXcoY3R4KTogdm9pZDwvdGV4dD48ZWxsaXBzZSBjeD0iMzAwLjgiIGN5PSI3NjAuNzQ1MyIgZmlsbD0iIzg0QkU4NCIgcng9IjMiIHJ5PSIzIiBzdHlsZT0ic3Ryb2tlOiMwMzgwNDg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTM4Ljg4NTciIHg9IjMwOS44IiB5PSI3NjQuMDkyIj5pc0xhbmRlZCgpOiBib29sZWFuPC90ZXh0PjxlbGxpcHNlIGN4PSIzMDAuOCIgY3k9Ijc3Ny4wNDIyIiBmaWxsPSIjODRCRTg0IiByeD0iMyIgcnk9IjMiIHN0eWxlPSJzdHJva2U6IzAzODA0ODtzdHJva2Utd2lkdGg6MTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxOTIuNDA0MyIgeD0iMzA5LjgiIHk9Ijc4MC4zODg5Ij5jaGVja0dhbWVPdmVyKCk6IGJvb2xlYW48L3RleHQ+PGVsbGlwc2UgY3g9IjMwMC44IiBjeT0iNzkzLjMzOTEiIGZpbGw9IiM4NEJFODQiIHJ4PSIzIiByeT0iMyIgc3R5bGU9InN0cm9rZTojMDM4MDQ4O3N0cm9rZS13aWR0aDoxOyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjExNS42NTA0IiB4PSIzMDkuOCIgeT0iNzk2LjY4NTciPm1vdmVMZWZ0KCk6IHZvaWQ8L3RleHQ+PGVsbGlwc2UgY3g9IjMwMC44IiBjeT0iODA5LjYzNTkiIGZpbGw9IiM4NEJFODQiIHJ4PSIzIiByeT0iMyIgc3R5bGU9InN0cm9rZTojMDM4MDQ4O3N0cm9rZS13aWR0aDoxOyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjEyNS42ODU1IiB4PSIzMDkuOCIgeT0iODEyLjk4MjYiPm1vdmVSaWdodCgpOiB2b2lkPC90ZXh0PjxlbGxpcHNlIGN4PSIzMDAuOCIgY3k9IjgyNS45MzI4IiBmaWxsPSIjODRCRTg0IiByeD0iMyIgcnk9IjMiIHN0eWxlPSJzdHJva2U6IzAzODA0ODtzdHJva2Utd2lkdGg6MTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxNTQuODM0IiB4PSIzMDkuOCIgeT0iODI5LjI3OTUiPm1vdmVEb3duKCk6IGJvb2xlYW48L3RleHQ+PGVsbGlwc2UgY3g9IjMwMC44IiBjeT0iODQyLjIyOTciIGZpbGw9IiM4NEJFODQiIHJ4PSIzIiByeT0iMyIgc3R5bGU9InN0cm9rZTojMDM4MDQ4O3N0cm9rZS13aWR0aDoxOyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjEyOS4wNzYyIiB4PSIzMDkuOCIgeT0iODQ1LjU3NjQiPnJvdGF0ZVJpZ2h0KCk6IHZvaWQ8L3RleHQ+PGVsbGlwc2UgY3g9IjMwMC44IiBjeT0iODU4LjUyNjYiIGZpbGw9IiM4NEJFODQiIHJ4PSIzIiByeT0iMyIgc3R5bGU9InN0cm9rZTojMDM4MDQ4O3N0cm9rZS13aWR0aDoxOyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjExOS4wNDEiIHg9IjMwOS44IiB5PSI4NjEuODczMiI+cm90YXRlTGVmdCgpOiB2b2lkPC90ZXh0PjxlbGxpcHNlIGN4PSIzMDAuOCIgY3k9Ijg3NC44MjM0IiBmaWxsPSIjODRCRTg0IiByeD0iMyIgcnk9IjMiIHN0eWxlPSJzdHJva2U6IzAzODA0ODtzdHJva2Utd2lkdGg6MTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxNzUuNTk0NyIgeD0iMzA5LjgiIHk9Ijg3OC4xNzAxIj5nZXREcm9wU3BlZWQoKTogbnVtYmVyPC90ZXh0PjxyZWN0IGZpbGw9IiNGMjRENUMiIGhlaWdodD0iNiIgc3R5bGU9InN0cm9rZTojQzgyOTMwO3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9IjYiIHg9IjI5Ny44IiB5PSI4ODguMTIwMyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjEzOS4zNzc5IiB4PSIzMDkuOCIgeT0iODk0LjQ2NyI+YXBwbHlHcmF2aXR5KCk6IHZvaWQ8L3RleHQ+PHJlY3QgZmlsbD0iI0YyNEQ1QyIgaGVpZ2h0PSI2IiBzdHlsZT0ic3Ryb2tlOiNDODI5MzA7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iNiIgeD0iMjk3LjgiIHk9IjkwNC40MTcyIi8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTE4Ljc5NDkiIHg9IjMwOS44IiB5PSI5MTAuNzYzOSI+b25MYW5kZWQoKTogdm9pZDwvdGV4dD48cmVjdCBmaWxsPSIjRjI0RDVDIiBoZWlnaHQ9IjYiIHN0eWxlPSJzdHJva2U6I0M4MjkzMDtzdHJva2Utd2lkdGg6MTsiIHdpZHRoPSI2IiB4PSIyOTcuOCIgeT0iOTIwLjcxNDEiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxNTguNTU5NiIgeD0iMzA5LjgiIHk9IjkyNy4wNjA3Ij5maXhQdXlvVG9TdGFnZSgpOiB2b2lkPC90ZXh0PjxyZWN0IGZpbGw9IiNGMjRENUMiIGhlaWdodD0iNiIgc3R5bGU9InN0cm9rZTojQzgyOTMwO3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9IjYiIHg9IjI5Ny44IiB5PSI5MzcuMDEwOSIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjE2NS41ODY5IiB4PSIzMDkuOCIgeT0iOTQzLjM1NzYiPmNhbk1vdmVMZWZ0KCk6IGJvb2xlYW48L3RleHQ+PHJlY3QgZmlsbD0iI0YyNEQ1QyIgaGVpZ2h0PSI2IiBzdHlsZT0ic3Ryb2tlOiNDODI5MzA7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iNiIgeD0iMjk3LjgiIHk9Ijk1My4zMDc4Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTc1LjYyMjEiIHg9IjMwOS44IiB5PSI5NTkuNjU0NSI+Y2FuTW92ZVJpZ2h0KCk6IGJvb2xlYW48L3RleHQ+PHJlY3QgZmlsbD0iI0YyNEQ1QyIgaGVpZ2h0PSI2IiBzdHlsZT0ic3Ryb2tlOiNDODI5MzA7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iNiIgeD0iMjk3LjgiIHk9Ijk2OS42MDQ3Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTc4LjQyNDgiIHg9IjMwOS44IiB5PSI5NzUuOTUxNCI+Y2FuTW92ZURvd24oKTogYm9vbGVhbjwvdGV4dD48cmVjdCBmaWxsPSIjRjI0RDVDIiBoZWlnaHQ9IjYiIHN0eWxlPSJzdHJva2U6I0M4MjkzMDtzdHJva2Utd2lkdGg6MTsiIHdpZHRoPSI2IiB4PSIyOTcuOCIgeT0iOTg1LjkwMTYiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxNjEuMDI3MyIgeD0iMzA5LjgiIHk9Ijk5Mi4yNDgyIj5jYW5Sb3RhdGUoLi4uKTogYm9vbGVhbjwvdGV4dD48L2c+PCEtLWNsYXNzIFNjb3JlLS0+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1lbnRpdHk9IlNjb3JlIiBkYXRhLXNvdXJjZS1saW5lPSI5NiIgZGF0YS11aWQ9ImVudDAwMDciIGlkPSJlbnRpdHlfU2NvcmUiPjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iMTYyLjA3ODEiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjMwNi4xNjQxIiB4PSI3NTUuOTIiIHk9IjY0MS45MDY5Ii8+PGVsbGlwc2UgY3g9Ijg4NC45OTI4IiBjeT0iNjU3LjkwNjkiIGZpbGw9IiNBREQxQjIiIHJ4PSIxMSIgcnk9IjExIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHBhdGggZD0iTTg4Ny45NjE1LDY2My41NDc1IFE4ODcuMzgzNCw2NjMuODQ0NCA4ODYuNzQyOCw2NjMuOTg1IFE4ODYuMTAyMSw2NjQuMTQxMyA4ODUuMzk5LDY2NC4xNDEzIFE4ODIuODk5LDY2NC4xNDEzIDg4MS41NzA5LDY2Mi41MDA2IFE4ODAuMjU4NCw2NjAuODQ0NCA4ODAuMjU4NCw2NTcuNzE5NCBRODgwLjI1ODQsNjU0LjU5NDQgODgxLjU3MDksNjUyLjkzODEgUTg4Mi44OTksNjUxLjI4MTkgODg1LjM5OSw2NTEuMjgxOSBRODg2LjEwMjEsNjUxLjI4MTkgODg2Ljc0MjgsNjUxLjQzODEgUTg4Ny4zOTksNjUxLjU5NDQgODg3Ljk2MTUsNjUxLjg5MTMgTDg4Ny45NjE1LDY1NC42MSBRODg3LjMzNjUsNjU0LjAzMTkgODg2Ljc0MjgsNjUzLjc2NjMgUTg4Ni4xNDksNjUzLjQ4NSA4ODUuNTI0LDY1My40ODUgUTg4NC4xODAzLDY1My40ODUgODgzLjQ5MjgsNjU0LjU2MzEgUTg4Mi44MDUzLDY1NS42MjU2IDg4Mi44MDUzLDY1Ny43MTk0IFE4ODIuODA1Myw2NTkuODEzMSA4ODMuNDkyOCw2NjAuODkxMyBRODg0LjE4MDMsNjYxLjk1MzggODg1LjUyNCw2NjEuOTUzOCBRODg2LjE0OSw2NjEuOTUzOCA4ODYuNzQyOCw2NjEuNjg4MSBRODg3LjMzNjUsNjYxLjQwNjkgODg3Ljk2MTUsNjYwLjgyODggTDg4Ny45NjE1LDY2My41NDc1IFogIiBmaWxsPSIjMDAwMDAwIi8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMzkuNTE4NiIgeD0iOTA1LjQ5MjgiIHk9IjY2Mi43NTM2Ij5TY29yZTwvdGV4dD48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHgxPSI3NTYuOTIiIHgyPSIxMDYxLjA4NDEiIHkxPSI2NzMuOTA2OSIgeTI9IjY3My45MDY5Ii8+PHJlY3QgZmlsbD0ibm9uZSIgaGVpZ2h0PSI2IiBzdHlsZT0ic3Ryb2tlOiNDODI5MzA7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iNiIgeD0iNzYzLjkyIiB5PSI2ODQuNTU1MyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjEwMS43MzI0IiB4PSI3NzUuOTIiIHk9IjY5MC45MDIiPnNjb3JlOiBudW1iZXI8L3RleHQ+PHJlY3QgZmlsbD0ibm9uZSIgaGVpZ2h0PSI2IiBzdHlsZT0ic3Ryb2tlOiNDODI5MzA7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iNiIgeD0iNzYzLjkyIiB5PSI3MDAuODUyMiIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjE2My44MTY0IiB4PSI3NzUuOTIiIHk9IjcwNy4xOTg5Ij5lbGVtZW50OiBIVE1MRWxlbWVudDwvdGV4dD48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHgxPSI3NTYuOTIiIHgyPSIxMDYxLjA4NDEiIHkxPSI3MTQuNTAwNiIgeTI9IjcxNC41MDA2Ii8+PGVsbGlwc2UgY3g9Ijc2Ni45MiIgY3k9IjcyOC4xNDkxIiBmaWxsPSIjODRCRTg0IiByeD0iMyIgcnk9IjMiIHN0eWxlPSJzdHJva2U6IzAzODA0ODtzdHJva2Utd2lkdGg6MTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIyODAuMTY0MSIgeD0iNzc1LjkyIiB5PSI3MzEuNDk1NyI+YWRkU2NvcmUocHV5b0NvdW50LCBjaGFpbkNvdW50KTogdm9pZDwvdGV4dD48ZWxsaXBzZSBjeD0iNzY2LjkyIiBjeT0iNzQ0LjQ0NTkiIGZpbGw9IiM4NEJFODQiIHJ4PSIzIiByeT0iMyIgc3R5bGU9InN0cm9rZTojMDM4MDQ4O3N0cm9rZS13aWR0aDoxOyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjE4My4xMzQ4IiB4PSI3NzUuOTIiIHk9Ijc0Ny43OTI2Ij5hZGRaZW5rZXNoaUJvbnVzKCk6IHZvaWQ8L3RleHQ+PGVsbGlwc2UgY3g9Ijc2Ni45MiIgY3k9Ijc2MC43NDI4IiBmaWxsPSIjODRCRTg0IiByeD0iMyIgcnk9IjMiIHN0eWxlPSJzdHJva2U6IzAzODA0ODtzdHJva2Utd2lkdGg6MTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMzcuMjM4MyIgeD0iNzc1LjkyIiB5PSI3NjQuMDg5NSI+Z2V0U2NvcmUoKTogbnVtYmVyPC90ZXh0PjxlbGxpcHNlIGN4PSI3NjYuOTIiIGN5PSI3NzcuMDM5NyIgZmlsbD0iIzg0QkU4NCIgcng9IjMiIHJ5PSIzIiBzdHlsZT0ic3Ryb2tlOiMwMzgwNDg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iODUuNDgzNCIgeD0iNzc1LjkyIiB5PSI3ODAuMzg2NCI+cmVzZXQoKTogdm9pZDwvdGV4dD48cmVjdCBmaWxsPSIjRjI0RDVDIiBoZWlnaHQ9IjYiIHN0eWxlPSJzdHJva2U6I0M4MjkzMDtzdHJva2Utd2lkdGg6MTsiIHdpZHRoPSI2IiB4PSI3NjMuOTIiIHk9Ijc5MC4zMzY2Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTUwLjY1MDQiIHg9Ijc3NS45MiIgeT0iNzk2LjY4MzIiPnVwZGF0ZURpc3BsYXkoKTogdm9pZDwvdGV4dD48L2c+PCEtLWNsYXNzIEdhbWVNb2RlLS0+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1lbnRpdHk9IkdhbWVNb2RlIiBkYXRhLXNvdXJjZS1saW5lPSIxMDciIGRhdGEtdWlkPSJlbnQwMDA4IiBpZD0iZW50aXR5X0dhbWVNb2RlIj48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjE3OC4zNzUiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjExMS44MjMyIiB4PSIxMjQ0LjA5IiB5PSI2MzMuNzU2OSIvPjxlbGxpcHNlIGN4PSIxMjU5LjA5IiBjeT0iNjQ5Ljc1NjkiIGZpbGw9IiNFQjkzN0YiIHJ4PSIxMSIgcnk9IjExIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHBhdGggZD0iTTEyNjMuMTk5NCw2NTUuNzU2OSBMMTI1NS40ODA2LDY1NS43NTY5IEwxMjU1LjQ4MDYsNjQzLjM2NjMgTDEyNjMuMTk5NCw2NDMuMzY2MyBMMTI2My4xOTk0LDY0NS41MjI1IEwxMjU3LjkzMzgsNjQ1LjUyMjUgTDEyNTcuOTMzOCw2NDguMTk0NCBMMTI2Mi42OTk0LDY0OC4xOTQ0IEwxMjYyLjY5OTQsNjUwLjM1MDYgTDEyNTcuOTMzOCw2NTAuMzUwNiBMMTI1Ny45MzM4LDY1My42MDA2IEwxMjYzLjE5OTQsNjUzLjYwMDYgTDEyNjMuMTk5NCw2NTUuNzU2OSBaICIgZmlsbD0iIzAwMDAwMCIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9Ijc5LjgyMzIiIHg9IjEyNzMuMDkiIHk9IjY1NC42MDM2Ij5HYW1lTW9kZTwvdGV4dD48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHgxPSIxMjQ1LjA5IiB4Mj0iMTM1NC45MTMyIiB5MT0iNjY1Ljc1NjkiIHkyPSI2NjUuNzU2OSIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjMyLjYwNzQiIHg9IjEyNTAuMDkiIHk9IjY4Mi43NTIiPnN0YXJ0PC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjY1LjM5OTQiIHg9IjEyNTAuMDkiIHk9IjY5OS4wNDg5Ij5jaGVja0ZhbGw8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMjEuMjg3MSIgeD0iMTI1MC4wOSIgeT0iNzE1LjM0NTciPmZhbGw8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iODAuMDc2MiIgeD0iMTI1MC4wOSIgeT0iNzMxLjY0MjYiPmNoZWNrRXJhc2U8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNTEuODkxNiIgeD0iMTI1MC4wOSIgeT0iNzQ3LjkzOTUiPmVyYXNpbmc8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNjMuMTAyNSIgeD0iMTI1MC4wOSIgeT0iNzY0LjIzNjQiPm5ld1B1eW88L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNTEuMjkiIHg9IjEyNTAuMDkiIHk9Ijc4MC41MzMyIj5wbGF5aW5nPC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjczLjM5MDYiIHg9IjEyNTAuMDkiIHk9Ijc5Ni44MzAxIj5nYW1lT3ZlcjwvdGV4dD48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHgxPSIxMjQ1LjA5IiB4Mj0iMTM1NC45MTMyIiB5MT0iODA0LjEzMTkiIHkyPSI4MDQuMTMxOSIvPjwvZz48IS0tY2xhc3MgRXJhc2VJbmZvLS0+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1lbnRpdHk9IkVyYXNlSW5mbyIgZGF0YS1zb3VyY2UtbGluZT0iMTE4IiBkYXRhLXVpZD0iZW50MDAwOSIgaWQ9ImVudGl0eV9FcmFzZUluZm8iPjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iODAuNTkzOCIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iMjQ1LjM5MjYiIHg9IjM0OC4zIiB5PSIxNTAzLjAzNjkiLz48ZWxsaXBzZSBjeD0iNDMzLjk1NDMiIGN5PSIxNTE5LjAzNjkiIGZpbGw9IiNCNEE3RTUiIHJ4PSIxMSIgcnk9IjExIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHBhdGggZD0iTTQyOS44NzYyLDE1MTQuODAyNSBMNDI5Ljg3NjIsMTUxMi42NDYzIEw0MzcuMjY2OCwxNTEyLjY0NjMgTDQzNy4yNjY4LDE1MTQuODAyNSBMNDM0Ljc5OCwxNTE0LjgwMjUgTDQzNC43OTgsMTUyMi44ODA2IEw0MzcuMjY2OCwxNTIyLjg4MDYgTDQzNy4yNjY4LDE1MjUuMDM2OSBMNDI5Ljg3NjIsMTUyNS4wMzY5IEw0MjkuODc2MiwxNTIyLjg4MDYgTDQzMi4zNDQ5LDE1MjIuODgwNiBMNDMyLjM0NDksMTUxNC44MDI1IEw0MjkuODc2MiwxNTE0LjgwMjUgWiAiIGZpbGw9IiMwMDAwMDAiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgZm9udC1zdHlsZT0iaXRhbGljIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjY1LjU4NCIgeD0iNDU0LjQ1NDMiIHk9IjE1MjMuODgzNiI+RXJhc2VJbmZvPC90ZXh0PjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgeDE9IjM0OS4zIiB4Mj0iNTkyLjY5MjYiIHkxPSIxNTM1LjAzNjkiIHkyPSIxNTM1LjAzNjkiLz48ZWxsaXBzZSBjeD0iMzU5LjMiIGN5PSIxNTQ4LjY4NTMiIGZpbGw9Im5vbmUiIHJ4PSIzIiByeT0iMyIgc3R5bGU9InN0cm9rZTojMDM4MDQ4O3N0cm9rZS13aWR0aDoxOyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjE3OC40MDQzIiB4PSIzNjguMyIgeT0iMTU1Mi4wMzIiPmVyYXNlUHV5b0NvdW50OiBudW1iZXI8L3RleHQ+PGVsbGlwc2UgY3g9IjM1OS4zIiBjeT0iMTU2NC45ODIyIiBmaWxsPSJub25lIiByeD0iMyIgcnk9IjMiIHN0eWxlPSJzdHJva2U6IzAzODA0ODtzdHJva2Utd2lkdGg6MTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIyMTkuMzkyNiIgeD0iMzY4LjMiIHk9IjE1NjguMzI4OSI+ZXJhc2VJbmZvOiBBcnJheSZsdDt7eCwgeSwgdHlwZX0mZ3Q7PC90ZXh0PjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgeDE9IjM0OS4zIiB4Mj0iNTkyLjY5MjYiIHkxPSIxNTc1LjYzMDYiIHkyPSIxNTc1LjYzMDYiLz48L2c+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1lbnRpdHk9IkdNTjIzIiBkYXRhLXNvdXJjZS1saW5lPSIxNDEiIGRhdGEtdWlkPSJlbnQwMDI0IiBpZD0iZW50aXR5X0dNTjIzIj48cGF0aCBkPSJNNDQ5LDE3OS4xMjY5IEw0NDksMjAyLjgxNjkgTDQxNC4xNSwyMDYuODE2OSBMNDQ5LDIxMC44MTY5IEw0NDksMjM0LjUyNTMgQTAsMCAwIDAgMCA0NDksMjM0LjUyNTMgTDYxMy4wMDAyLDIzNC41MjUzIEEwLDAgMCAwIDAgNjEzLjAwMDIsMjM0LjUyNTMgTDYxMy4wMDAyLDE4OS4xMjY5IEw2MDMuMDAwMiwxNzkuMTI2OSBMNDQ5LDE3OS4xMjY5IEEwLDAgMCAwIDAgNDQ5LDE3OS4xMjY5IiBmaWxsPSIjRkVGRkREIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiLz48cGF0aCBkPSJNNjAzLjAwMDIsMTc5LjEyNjkgTDYwMy4wMDAyLDE4OS4xMjY5IEw2MTMuMDAwMiwxODkuMTI2OSBMNjAzLjAwMDIsMTc5LjEyNjkiIGZpbGw9IiNGRUZGREQiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjEwNC4wMDAxIiB4PSI0NTUiIHk9IjE5Ni4xOTM4Ij4mIzEyNDY2OyYjMTI1NDA7JiMxMjUxMjsmIzIwODQwOyYjMjAzMDc7JiMxMjQzNDsmIzMyMTEzOyYjMjUzMjQ7PC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjkxLjAwMDEiIHg9IjQ1NSIgeT0iMjExLjMyNjYiPiYjMjkzNjY7JiMyNDkwNzsmIzM2OTgzOyYjMzEyMjc7JiMxMjQzNDsmIzMxNjQ5OyYjMjk3MDI7PC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjE0My4wMDAyIiB4PSI0NTUiIHk9IjIyNi40NTk0Ij4mIzIxNTA4OyYjMTI0Njc7JiMxMjUzMTsmIzEyNTA5OyYjMTI1NDA7JiMxMjQ5MzsmIzEyNTMxOyYjMTI0ODg7JiMxMjQzNDsmIzIxMzMyOyYjMzU1MTk7PC90ZXh0PjwvZz48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLWVudGl0eT0iR01OMjYiIGRhdGEtc291cmNlLWxpbmU9IjE0NyIgZGF0YS11aWQ9ImVudDAwMjciIGlkPSJlbnRpdHlfR01OMjYiPjxwYXRoIGQ9Ik01ODcsMTIxMS4zNzY5IEw1ODcsMTIzNS4wNjY5IEw1NTIuNzMsMTIzOS4wNjY5IEw1ODcsMTI0My4wNjY5IEw1ODcsMTI2Ni43NzUzIEEwLDAgMCAwIDAgNTg3LDEyNjYuNzc1MyBMNjk5LjAwMDEsMTI2Ni43NzUzIEEwLDAgMCAwIDAgNjk5LjAwMDEsMTI2Ni43NzUzIEw2OTkuMDAwMSwxMjIxLjM3NjkgTDY4OS4wMDAxLDEyMTEuMzc2OSBMNTg3LDEyMTEuMzc2OSBBMCwwIDAgMCAwIDU4NywxMjExLjM3NjkiIGZpbGw9IiNGRUZGREQiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIvPjxwYXRoIGQ9Ik02ODkuMDAwMSwxMjExLjM3NjkgTDY4OS4wMDAxLDEyMjEuMzc2OSBMNjk5LjAwMDEsMTIyMS4zNzY5IEw2ODkuMDAwMSwxMjExLjM3NjkiIGZpbGw9IiNGRUZGREQiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjUyLjAwMDEiIHg9IjU5MyIgeT0iMTIyOC40NDM4Ij4mIzMwNDM2OyYjMzg3NTQ7JiMzMTY0OTsmIzI5NzAyOzwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI5MS4wMDAxIiB4PSI1OTMiIHk9IjEyNDMuNTc2NiI+JiMzMzg1MzsmIzE5OTc5OyYjMTI1Mzk7JiMyODA0MDsmIzIxNDM1OyYjMjEwMjg7JiMyMzQ1MDs8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNjUuMDAwMSIgeD0iNTkzIiB5PSIxMjU4LjcwOTQiPiYjMjA4NDA7JiMyODA0MDsmIzEyMzc1OyYjMjEwMjg7JiMyMzQ1MDs8L3RleHQ+PC9nPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtZW50aXR5PSJHTU4yOSIgZGF0YS1zb3VyY2UtbGluZT0iMTUzIiBkYXRhLXVpZD0iZW50MDAzMCIgaWQ9ImVudGl0eV9HTU4yOSI+PHBhdGggZD0iTTU0My41LDY5NS4yNDY5IEw1NDMuNSw3MTguOTQ2OSBMNTA4LjY3LDcyMi45NDY5IEw1NDMuNSw3MjYuOTQ2OSBMNTQzLjUsNzUwLjY0NTMgQTAsMCAwIDAgMCA1NDMuNSw3NTAuNjQ1MyBMNzIwLjUwMDIsNzUwLjY0NTMgQTAsMCAwIDAgMCA3MjAuNTAwMiw3NTAuNjQ1MyBMNzIwLjUwMDIsNzA1LjI0NjkgTDcxMC41MDAyLDY5NS4yNDY5IEw1NDMuNSw2OTUuMjQ2OSBBMCwwIDAgMCAwIDU0My41LDY5NS4yNDY5IiBmaWxsPSIjRkVGRkREIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiLz48cGF0aCBkPSJNNzEwLjUwMDIsNjk1LjI0NjkgTDcxMC41MDAyLDcwNS4yNDY5IEw3MjAuNTAwMiw3MDUuMjQ2OSBMNzEwLjUwMDIsNjk1LjI0NjkiIGZpbGw9IiNGRUZGREQiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjExNy4wMDAxIiB4PSI1NDkuNSIgeT0iNzEyLjMxMzgiPiYjMjU4MDU7JiMyMDMxNjsmIzIxNDg3OyYjMzMwMjE7JiMxMjM5NDsmIzEyNDA3OyYjMTI0MjQ7JiMzMTY0OTsmIzI5NzAyOzwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI3OC4wMDAxIiB4PSI1NDkuNSIgeT0iNzI3LjQ0NjYiPiYjMTI0NjE7JiMxMjU0MDsmIzIwODM3OyYjMjExNDc7JiMyMDk2NjsmIzI5NzAyOzwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxNTYuMDAwMiIgeD0iNTQ5LjUiIHk9Ijc0Mi41Nzk0Ij4mIzMwNTI4OyYjMjIzMjA7JiMxMjUzOTsmIzEyNDY2OyYjMTI1NDA7JiMxMjUxMjsmIzEyNDU4OyYjMTI1NDA7JiMxMjQ5NjsmIzEyNTQwOyYjMjEwMjg7JiMyMzQ1MDs8L3RleHQ+PC9nPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtZW50aXR5PSJHTU4zMiIgZGF0YS1zb3VyY2UtbGluZT0iMTU5IiBkYXRhLXVpZD0iZW50MDAzMyIgaWQ9ImVudGl0eV9HTU4zMiI+PHBhdGggZD0iTTEwOTcsNjk1LjI0NjkgTDEwOTcsNzE4Ljk0NjkgTDEwNjIuNDUsNzIyLjk0NjkgTDEwOTcsNzI2Ljk0NjkgTDEwOTcsNzUwLjY0NTMgQTAsMCAwIDAgMCAxMDk3LDc1MC42NDUzIEwxMjA5LjAwMDEsNzUwLjY0NTMgQTAsMCAwIDAgMCAxMjA5LjAwMDEsNzUwLjY0NTMgTDEyMDkuMDAwMSw3MDUuMjQ2OSBMMTE5OS4wMDAxLDY5NS4yNDY5IEwxMDk3LDY5NS4yNDY5IEEwLDAgMCAwIDAgMTA5Nyw2OTUuMjQ2OSIgZmlsbD0iI0ZFRkZERCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7Ii8+PHBhdGggZD0iTTExOTkuMDAwMSw2OTUuMjQ2OSBMMTE5OS4wMDAxLDcwNS4yNDY5IEwxMjA5LjAwMDEsNzA1LjI0NjkgTDExOTkuMDAwMSw2OTUuMjQ2OSIgZmlsbD0iI0ZFRkZERCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNjUuMDAwMSIgeD0iMTEwMyIgeT0iNzEyLjMxMzgiPiYjMTI0NzM7JiMxMjQ2NzsmIzEyNDUwOyYjMzUzMzY7JiMzMTYzOTs8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNzguMDAwMSIgeD0iMTEwMyIgeT0iNzI3LjQ0NjYiPiYjMzY4OTk7JiMzNzc4MjsmIzEyNTA4OyYjMTI1NDA7JiMxMjQ5MDsmIzEyNDczOzwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI5MS4wMDAxIiB4PSIxMTAzIiB5PSI3NDIuNTc5NCI+JiMyMDg0MDsmIzI4MDQwOyYjMTIzNzU7JiMxMjUwODsmIzEyNTQwOyYjMTI0OTA7JiMxMjQ3Mzs8L3RleHQ+PC9nPjwhLS1yZXZlcnNlIGxpbmsgR2FtZSB0byBDb25maWctLT48ZyBjbGFzcz0ibGluayIgZGF0YS1lbnRpdHktMT0iR2FtZSIgZGF0YS1lbnRpdHktMj0iQ29uZmlnIiBkYXRhLXNvdXJjZS1saW5lPSIxMjMiIGRhdGEtdWlkPSJsbmsxMCIgaWQ9ImxpbmtfR2FtZV9Db25maWciPjxwYXRoIGNvZGVMaW5lPSIxMjMiIGQ9Ik0xNzguMTY3MiwzMzQuNTM0NyBDOTUuNTI3Miw0MzIuMzg0NyA2LDU3MC41NDY5IDYsNzIxLjk0NjkgQzk3MSwxNzk4LjI2NjkgOTcxLDE3OTguMjY2OSA2LDE1NDQuMzM2OSBDNiwxNTc2LjY1NjkgMTUuNTMsMTU4OC4xODY5IDQxLDE2MDguMDc2OSBDMTYzLjIzLDE3MDMuNTY2OSAzNDcuODUsMTczMC42MTY5IDQ1Ni4xNCwxNzM4LjA2NjkiIGZpbGw9Im5vbmUiIGlkPSJHYW1lLWJhY2t0by1Db25maWciIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjE4NS45MSwzMjUuMzY2OSwxNzguOTgyNywzMjcuMzY5OSwxNzguMTY3MiwzMzQuNTM0NywxODUuMDk0NiwzMzIuNTMxNywxODUuOTEsMzI1LjM2NjkiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI1Mi4wMDAxIiB4PSI3IiB5PSIxMjQzLjYzMzgiPiYjMzUzNzM7JiMyMzQ1MDsmIzMxNjQ5OyYjMjk3MDI7PC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjguMjcxIiB4PSIxNjkuNjE2MyIgeT0iMzMwLjI0NjQiPjE8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iOC4yNzEiIHg9IjQzOS45NzEiIHk9IjE3MzQuMTUwOCI+MTwvdGV4dD48L2c+PCEtLXJldmVyc2UgbGluayBHYW1lIHRvIFB1eW9JbWFnZS0tPjxnIGNsYXNzPSJsaW5rIiBkYXRhLWVudGl0eS0xPSJHYW1lIiBkYXRhLWVudGl0eS0yPSJQdXlvSW1hZ2UiIGRhdGEtc291cmNlLWxpbmU9IjEyNCIgZGF0YS11aWQ9ImxuazExIiBpZD0ibGlua19HYW1lX1B1eW9JbWFnZSI+PHBhdGggY29kZUxpbmU9IjEyNCIgZD0iTTE4NS41MzY5LDM4MC40MTE2IEMxNzMuMjY2OSw0MDUuMjAxNiAxNjgsNDIwLjQzNjkgMTYxLDQ0Ni4zNDY5IEM1OC40NSw4MjUuOTk2OSAxMzcuNzMsMTMwNi43ODY5IDE3Mi4xMiwxNDc4LjEyNjkiIGZpbGw9Im5vbmUiIGlkPSJHYW1lLWJhY2t0by1QdXlvSW1hZ2UiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjE5MC44NiwzNjkuNjU2OSwxODQuNjEzNSwzNzMuMjU5OSwxODUuNTM2OSwzODAuNDExNiwxOTEuNzgzMywzNzYuODA4NiwxOTAuODYsMzY5LjY1NjkiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI1Mi4wMDAxIiB4PSIxMTYuNTYiIHk9IjEwNDIuNjEzOCI+JiMxMjQwNzsmIzEyNDI0OyYjMzAwMTE7JiMyMDY4Nzs8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iOC4yNzEiIHg9IjE3Ny43Mzk1IiB5PSIzODkuNDQ1MiI+MTwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI4LjI3MSIgeD0iMTYyLjI5IiB5PSIxNDY3LjcwMjIiPjE8L3RleHQ+PC9nPjwhLS1yZXZlcnNlIGxpbmsgR2FtZSB0byBTdGFnZS0tPjxnIGNsYXNzPSJsaW5rIiBkYXRhLWVudGl0eS0xPSJHYW1lIiBkYXRhLWVudGl0eS0yPSJTdGFnZSIgZGF0YS1zb3VyY2UtbGluZT0iMTI1IiBkYXRhLXVpZD0ibG5rMTIiIGlkPSJsaW5rX0dhbWVfU3RhZ2UiPjxwYXRoIGNvZGVMaW5lPSIxMjUiIGQ9Ik0yMzIuOTcxNCwzODEuMDQ3NyBDMjI1LjM0MTQsNDA2LjM5NzcgMjIyLjIyLDQyMS4wNzY5IDIxOCw0NDYuMzQ2OSBDMTc3LjQ4LDY4OC44NDY5IDEzMS45OSw3NjkuMjE2OSAyMTgsOTk5LjU0NjkgQzIyMi45NSwxMDEyLjgwNjkgMjU3LjU4LDEwNTQuMTY2OSAyOTcuMTQsMTA5OC44MDY5IiBmaWxsPSJub25lIiBpZD0iR2FtZS1iYWNrdG8tU3RhZ2UiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjIzNi40MywzNjkuNTU2OSwyMzAuODcwNSwzNzQuMTQ5NCwyMzIuOTcxNCwzODEuMDQ3NywyMzguNTMxLDM3Ni40NTUxLDIzNi40MywzNjkuNTU2OSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjUyLjAwMDEiIHg9IjIxOSIgeT0iNzI3LjUxMzgiPiYjMTI0NzM7JiMxMjQ4NjsmIzEyNTQwOyYjMTI0NzI7PC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjguMjcxIiB4PSIyMjUuMzc0NCIgeT0iMzg5LjM0MDYiPjE8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iOC4yNzEiIHg9IjI4MS4xMTMiIHk9IjEwODYuODczNSI+MTwvdGV4dD48L2c+PCEtLXJldmVyc2UgbGluayBHYW1lIHRvIFBsYXllci0tPjxnIGNsYXNzPSJsaW5rIiBkYXRhLWVudGl0eS0xPSJHYW1lIiBkYXRhLWVudGl0eS0yPSJQbGF5ZXIiIGRhdGEtc291cmNlLWxpbmU9IjEyNiIgZGF0YS11aWQ9ImxuazEzIiBpZD0ibGlua19HYW1lX1BsYXllciI+PHBhdGggY29kZUxpbmU9IjEyNiIgZD0iTTMzMy40NTcxLDM4MS41NzA4IEMzMzguMTU3MSw0MDYuMDAwOCAzNDAuODUsNDE5Ljk4NjkgMzQ1Ljg2LDQ0Ni4wMDY5IiBmaWxsPSJub25lIiBpZD0iR2FtZS1iYWNrdG8tUGxheWVyIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSIzMzEuMTksMzY5Ljc4NjksMzI4LjM5NTYsMzc2LjQzNDUsMzMzLjQ1NzEsMzgxLjU3MDgsMzM2LjI1MTUsMzc0LjkyMzEsMzMxLjE5LDM2OS43ODY5IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNjUuMDAwMSIgeD0iMzM4LjcyIiB5PSI0MTIuNDEzOCI+JiMxMjUwMzsmIzEyNTI0OyYjMTI0NTI7JiMxMjUxNjsmIzEyNTQwOzwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI4LjI3MSIgeD0iMzI0LjQyODIiIHk9IjM4OS41ODEiPjE8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iOC4yNzEiIHg9IjMzNi4zNDU4IiB5PSI0MzUuNTIwMSI+MTwvdGV4dD48L2c+PCEtLXJldmVyc2UgbGluayBHYW1lIHRvIFNjb3JlLS0+PGcgY2xhc3M9ImxpbmsiIGRhdGEtZW50aXR5LTE9IkdhbWUiIGRhdGEtZW50aXR5LTI9IlNjb3JlIiBkYXRhLXNvdXJjZS1saW5lPSIxMjciIGRhdGEtdWlkPSJsbmsxNCIgaWQ9ImxpbmtfR2FtZV9TY29yZSI+PHBhdGggY29kZUxpbmU9IjEyNyIgZD0iTTQyMy41MjM3LDM2NC43MTc5IEM0MjkuMDIzNywzNjkuMDE3OSA0MjUuMjIsMzY1LjY1NjkgNDMxLDM2OS4zNDY5IEM1NDkuNjIsNDQ0Ljk2NjkgNjI0LjM4LDM2My4zOTY5IDczOCw0NDYuMzQ2OSBDODA0Ljk3LDQ5NS4yMzY5IDg1MS40Nyw1NzkuMDY2OSA4NzguOSw2NDEuNDY2OSIgZmlsbD0ibm9uZSIgaWQ9IkdhbWUtYmFja3RvLVNjb3JlIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSI0MTQuMDcsMzU3LjMyNjksNDE2LjMzMzIsMzY0LjE3MzYsNDIzLjUyMzcsMzY0LjcxNzksNDIxLjI2MDUsMzU3Ljg3MTIsNDE0LjA3LDM1Ny4zMjY5IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMzkiIHg9IjY4MC45NCIgeT0iNDEyLjQxMzgiPiYjMTI0NzM7JiMxMjQ2NzsmIzEyNDUwOzwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI4LjI3MSIgeD0iNDIyLjAxMTkiIHk9IjM2NC4wMDY1Ij4xPC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjguMjcxIiB4PSI4NjcuOTgxIiB5PSI2MzAuODkyOCI+MTwvdGV4dD48L2c+PCEtLWxpbmsgR2FtZSB0byBHYW1lTW9kZS0tPjxnIGNsYXNzPSJsaW5rIiBkYXRhLWVudGl0eS0xPSJHYW1lIiBkYXRhLWVudGl0eS0yPSJHYW1lTW9kZSIgZGF0YS1zb3VyY2UtbGluZT0iMTI4IiBkYXRhLXVpZD0ibG5rMTUiIGlkPSJsaW5rX0dhbWVfR2FtZU1vZGUiPjxwYXRoIGNvZGVMaW5lPSIxMjgiIGQ9Ik00MTQuMywzNTkuMDg2OSBDNDE5LjcxLDM2Mi44MjY5IDQyNS4yNywzNjYuMjY2OSA0MzEsMzY5LjM0NjkgQzUwOS4yOCw0MTEuMzg2OSAxMTU5LjI4LDM4OC44MTY5IDEyMjcsNDQ2LjM0NjkgQzEyODAuNDgsNDkxLjc2NjkgMTI5Ni43MDQ2LDU2NS40MDA2IDEzMDAuOTA0Niw2MjcuNDIwNiIgZmlsbD0ibm9uZSIgaWQ9IkdhbWUtdG8tR2FtZU1vZGUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTtzdHJva2UtZGFzaGFycmF5OjcsNzsiLz48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjEzMDEuMzEsNjMzLjQwNjksMTMwNC42OTI4LDYyNC4xNTcyLDEzMDAuOTcyMiw2MjguNDE4MywxMjk2LjcxMTEsNjI0LjY5NzcsMTMwMS4zMSw2MzMuNDA2OSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjI2IiB4PSIxMDc3LjM3IiB5PSI0MTIuNDEzOCI+JiMyMDM1MTsmIzI5OTkyOzwvdGV4dD48L2c+PCEtLWxpbmsgUGxheWVyIHRvIENvbmZpZy0tPjxnIGNsYXNzPSJsaW5rIiBkYXRhLWVudGl0eS0xPSJQbGF5ZXIiIGRhdGEtZW50aXR5LTI9IkNvbmZpZyIgZGF0YS1zb3VyY2UtbGluZT0iMTMwIiBkYXRhLXVpZD0ibG5rMTYiIGlkPSJsaW5rX1BsYXllcl9Db25maWciPjxwYXRoIGNvZGVMaW5lPSIxMzAiIGQ9Ik01MDguNDgsOTgxLjEyNjkgQzUxNC4wNiw5ODcuNTY2OSA1MTkuOSw5OTMuNzM2OSA1MjYsOTk5LjU0NjkgQzU5Mi4yNywxMDYyLjY3NjkgNjY1Ljc5LDEwMDAuNjg2OSA3MTcsMTA3Ni41NDY5IEM4NDkuOTYsMTI3My41MDY5IDc2My44NSwxMzk0LjgyNjkgNjU5LDE2MDguMDc2OSBDNjQ1LjI5LDE2MzUuOTY2OSA2MjguMzA5MywxNjU4LjI3NzcgNjA3Ljk1OTMsMTY4MC4zMjc3IiBmaWxsPSJub25lIiBpZD0iUGxheWVyLXRvLUNvbmZpZyIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iNjAzLjg5LDE2ODQuNzM2OSw2MTIuOTMzNCwxNjgwLjgzNTksNjA3LjI4MTEsMTY4MS4wNjI1LDYwNy4wNTQ0LDE2NzUuNDEwMiw2MDMuODksMTY4NC43MzY5IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMjYiIHg9Ijc0NS42MyIgeT0iMTQ0NC42NjM4Ij4mIzIxNDQyOyYjMjkwMzE7PC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjguMjcxIiB4PSI1MTYuMTEzNCIgeT0iOTk1LjA0MDciPjE8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iOC4yNzEiIHg9IjYwMi43MTg0IiB5PSIxNjczLjk1OSI+MTwvdGV4dD48L2c+PCEtLWxpbmsgUGxheWVyIHRvIFN0YWdlLS0+PGcgY2xhc3M9ImxpbmsiIGRhdGEtZW50aXR5LTE9IlBsYXllciIgZGF0YS1lbnRpdHktMj0iU3RhZ2UiIGRhdGEtc291cmNlLWxpbmU9IjEzMSIgZGF0YS11aWQ9ImxuazE3IiBpZD0ibGlua19QbGF5ZXJfU3RhZ2UiPjxwYXRoIGNvZGVMaW5lPSIxMzEiIGQ9Ik00MTIuOTUsOTk5LjgyNjkgQzQxNC4yNywxMDI1LjkwNjkgNDE1LjI3OSwxMDQ1LjczNDQgNDE2LjUwOSwxMDcwLjIyNDQiIGZpbGw9Im5vbmUiIGlkPSJQbGF5ZXItdG8tU3RhZ2UiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjQxNi44MSwxMDc2LjIxNjksNDIwLjM1MzUsMTA2Ny4wMjc2LDQxNi41NTkyLDEwNzEuMjIzMiw0MTIuMzYzNiwxMDY3LjQyODksNDE2LjgxLDEwNzYuMjE2OSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjI2IiB4PSI0MTYuMDkiIHk9IjEwNDIuNjEzOCI+JiMyMTQ0MjsmIzI5MDMxOzwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI4LjI3MSIgeD0iNDA1LjIxNzgiIHk9IjEwMTkuNDQ5MyI+MTwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI4LjI3MSIgeD0iNDA4LjI2MzciIHk9IjEwNjUuNTY3NiI+MTwvdGV4dD48L2c+PCEtLWxpbmsgUGxheWVyIHRvIFB1eW9JbWFnZS0tPjxnIGNsYXNzPSJsaW5rIiBkYXRhLWVudGl0eS0xPSJQbGF5ZXIiIGRhdGEtZW50aXR5LTI9IlB1eW9JbWFnZSIgZGF0YS1zb3VyY2UtbGluZT0iMTMyIiBkYXRhLXVpZD0ibG5rMTgiIGlkPSJsaW5rX1BsYXllcl9QdXlvSW1hZ2UiPjxwYXRoIGNvZGVMaW5lPSIxMzIiIGQ9Ik0yODkuNCw5ODAuNjQ2OSBDMjcwLjMxLDEwMjYuNzE2OSAyNTUuNDEsMTA2NC4xMTY5IDI1MiwxMDc2LjU0NjkgQzIxMy40NywxMjE2LjkzNjkgMTk3LjA0MTgsMTM4MS42NjMyIDE5MC4zNDE4LDE0NzIuNDAzMiIgZmlsbD0ibm9uZSIgaWQ9IlBsYXllci10by1QdXlvSW1hZ2UiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjE4OS45LDE0NzguMzg2OSwxOTQuNTUxOSwxNDY5LjcwNTksMTkwLjI2ODIsMTQ3My40MDA0LDE4Ni41NzM2LDE0NjkuMTE2OCwxODkuOSwxNDc4LjM4NjkiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIyNiIgeD0iMjUzIiB5PSIxMjQzLjYzMzgiPiYjMjE0NDI7JiMyOTAzMTs8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iOC4yNzEiIHg9IjI3My40MjE5IiB5PSI5OTUuMzEwNSI+MTwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI4LjI3MSIgeD0iMTgxLjkwMzgiIHk9IjE0NjcuNTM2NiI+MTwvdGV4dD48L2c+PCEtLWxpbmsgU3RhZ2UgdG8gQ29uZmlnLS0+PGcgY2xhc3M9ImxpbmsiIGRhdGEtZW50aXR5LTE9IlN0YWdlIiBkYXRhLWVudGl0eS0yPSJDb25maWciIGRhdGEtc291cmNlLWxpbmU9IjEzNCIgZGF0YS11aWQ9ImxuazE5IiBpZD0ibGlua19TdGFnZV9Db25maWciPjxwYXRoIGNvZGVMaW5lPSIxMzQiIGQ9Ik01NTIuOSwxMzg4LjI5NjkgQzU4MC41MywxNDIzLjcwNjkgNjAzLjcsMTQ1Ny4zNjY5IDYxMSwxNDc4LjU5NjkgQzYyOS43MSwxNTMzLjAxNjkgNjI0LjM0LDE1NTIuMDk2OSA2MTEsMTYwOC4wNzY5IEM2MDQuNjYsMTYzNC42NzY5IDU5NC45OCwxNjU2LjcxODggNTgyLjQxLDE2NzkuNTg4OCIgZmlsbD0ibm9uZSIgaWQ9IlN0YWdlLXRvLUNvbmZpZyIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iNTc5LjUyLDE2ODQuODQ2OSw1ODcuMzYwNCwxNjc4Ljg4NjQsNTgxLjkyODMsMTY4MC40NjUxLDU4MC4zNDk2LDE2NzUuMDMzLDU3OS41MiwxNjg0Ljg0NjkiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIyNiIgeD0iNjI0LjEiIHk9IjE1NDcuOTAzOCI+JiMyMTQ0MjsmIzI5MDMxOzwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI4LjI3MSIgeD0iNTYwLjUzMzIiIHk9IjEzOTMuNTYxMiI+MTwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI4LjI3MSIgeD0iNTc1LjM3ODMiIHk9IjE2NzQuMDgyNCI+MTwvdGV4dD48L2c+PCEtLWxpbmsgU3RhZ2UgdG8gUHV5b0ltYWdlLS0+PGcgY2xhc3M9ImxpbmsiIGRhdGEtZW50aXR5LTE9IlN0YWdlIiBkYXRhLWVudGl0eS0yPSJQdXlvSW1hZ2UiIGRhdGEtc291cmNlLWxpbmU9IjEzNSIgZGF0YS11aWQ9ImxuazIwIiBpZD0ibGlua19TdGFnZV9QdXlvSW1hZ2UiPjxwYXRoIGNvZGVMaW5lPSIxMzUiIGQ9Ik0yOTgsMTQwMS44MjY5IEMyODUuNTEsMTQxNy42NDY5IDI3My4wMiwxNDMzLjQzNjkgMjYxLDE0NDguNTk2OSBDMjUzLjQyLDE0NTguMTQ2OSAyNDkuMTMzNSwxNDYzLjUzOCAyNDEuMjUzNSwxNDczLjQwOCIgZmlsbD0ibm9uZSIgaWQ9IlN0YWdlLXRvLVB1eW9JbWFnZSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iMjM3LjUxLDE0NzguMDk2OSwyNDYuMjUxMiwxNDczLjU1OTIsMjQwLjYyOTYsMTQ3NC4xODk0LDIzOS45OTk0LDE0NjguNTY3OCwyMzcuNTEsMTQ3OC4wOTY5IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMjYiIHg9IjI3NS4zNSIgeT0iMTQ0NC42NjM4Ij4mIzIxNDQyOyYjMjkwMzE7PC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjguMjcxIiB4PSIyODEuMjA3NSIgeT0iMTQwOS4zMjk1Ij4xPC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjguMjcxIiB4PSIyMzQuNDIzMyIgeT0iMTQ2Ny42NjkxIj4xPC90ZXh0PjwvZz48IS0tbGluayBTdGFnZSB0byBFcmFzZUluZm8tLT48ZyBjbGFzcz0ibGluayIgZGF0YS1lbnRpdHktMT0iU3RhZ2UiIGRhdGEtZW50aXR5LTI9IkVyYXNlSW5mbyIgZGF0YS1zb3VyY2UtbGluZT0iMTM2IiBkYXRhLXVpZD0ibG5rMjEiIGlkPSJsaW5rX1N0YWdlX0VyYXNlSW5mbyI+PHBhdGggY29kZUxpbmU9IjEzNiIgZD0iTTQ0OS42MiwxNDAxLjgyNjkgQzQ1NS4zNCwxNDM5LjQzNjkgNDYwLjAyNjksMTQ3MC4yNDUyIDQ2NC4wNTY5LDE0OTYuNzE1MiIgZmlsbD0ibm9uZSIgaWQ9IlN0YWdlLXRvLUVyYXNlSW5mbyIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxO3N0cm9rZS1kYXNoYXJyYXk6Nyw3OyIvPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iNDY0Ljk2LDE1MDIuNjQ2OSw0NjcuNTU5OCwxNDkzLjE0NzMsNDY0LjIwNzQsMTQ5Ny43MDM4LDQ1OS42NTA5LDE0OTQuMzUxNSw0NjQuOTYsMTUwMi42NDY5IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMjYiIHg9IjQ1Ny4xMiIgeT0iMTQ0NC42NjM4Ij4mIzI5OTgzOyYjMjUxMDQ7PC90ZXh0PjwvZz48IS0tbGluayBQdXlvSW1hZ2UgdG8gQ29uZmlnLS0+PGcgY2xhc3M9ImxpbmsiIGRhdGEtZW50aXR5LTE9IlB1eW9JbWFnZSIgZGF0YS1lbnRpdHktMj0iQ29uZmlnIiBkYXRhLXNvdXJjZS1saW5lPSIxMzgiIGRhdGEtdWlkPSJsbmsyMiIgaWQ9ImxpbmtfUHV5b0ltYWdlX0NvbmZpZyI+PHBhdGggY29kZUxpbmU9IjEzOCIgZD0iTTMwMi43MywxNjA4LjM1NjkgQzM1Mi41MSwxNjM1LjY1NjkgNDA0LjM3OTIsMTY2NC4xMDE4IDQ1MC41NDkyLDE2ODkuNDIxOCIgZmlsbD0ibm9uZSIgaWQ9IlB1eW9JbWFnZS10by1Db25maWciIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjQ1NS44MSwxNjkyLjMwNjksNDQ5Ljg0MjEsMTY4NC40NzIsNDUxLjQyNiwxNjg5LjkwMjYsNDQ1Ljk5NTQsMTY5MS40ODY1LDQ1NS44MSwxNjkyLjMwNjkiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIyNiIgeD0iMzg3LjQzIiB5PSIxNjUxLjE0MzgiPiYjMjE0NDI7JiMyOTAzMTs8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iOC4yNzEiIHg9IjMwNy4wNzQ2IiB5PSIxNjI4LjM2MjciPjE8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iOC4yNzEiIHg9IjQzOS44OTkzIiB5PSIxNjg0LjQ5MjciPjE8L3RleHQ+PC9nPjwhLS1TUkM9W2ZMUFJKbmo3NTd4Vk54N0FhckNtS2xqZUxLWjE5MmFnajE3bXEzUkFteDB4RFlGTUV3bFBpUzZEOGVOVGFiZVcwYWZHYTBnZVJLZVJZZDlmNnBLTjRQR1Zpb21CX3c5ZFBsUGttcWlib3Z4dnBmYnBsdldKUmM0enk1dTVfZi0xenB4U1VRcmZYZUxTTHgtOU1iWV9nck5yNVpMbkpMd2R1MEgwV3k2dmZqbGpyWG5jUzNUZVF1eE9ZMURncnNkUnZaYkkyb3RMdm43Zm1tcmdEcVlwZmpWYkJtMUVrcWlkTWdXOVNjeWJIdTFUQmc0UGhnd0VYUmdPME9seTVOSTNDYTRORnQwNW1fYWlBSGVkcjUtdFMwaUIweHdPZFBnQ0J2ZXNmMUVSUzg4aXlac2tOQXRmN0tmQzAyckFkT2hIUFdvT1hCMjRLak5SWmVhdWhmWk91Z1g4Q0hiUWg5R1BmVVZabjFMTUx1Z3k4ZmZWVHAxQnVOajlzNUw0OEYxM29sYmZra1ljeGlIT2RMZnZKQ0hrMWRwOEdJUVpwZUpEQ1VpV0F1TEo3TWM0UE54eFNjNFdrdURTNVFvd0YyU1gwbmZWMGF1OUpjRlJuOHBPSk5aOHlIQl9SNW9KY1k0SW0zTWltd1N4M0Q4am9laEUyX01MMGZ2UTlYQ3pzQWVCQWdIMWk2S2NCanctU19sRV90TVdZVmFEOExFYTlZVEw0Z0pibWctaC1QSmF5OUFfR3lOMjZEQUh1clpUY21ucjI5U2JDS1VmWFA0RDU2Q1U2bWxONk45YkFTaDNYRHNXR0M3WUY0T0hDenFBSmwxQ2Y3cHU3Uk9OaTNqRnlaOUxpQ1VHaVQxYXE3dmNrR0dQQUtGMjNKVTdrSFduT253WU9zRTNPckR3RUo4b3FmU3JyT3czcXJSa3VDNVA1RjB0a1F1THpzekJ6eGc4UkE2cFlNTU1HS1F2NzRHdm80QUdQWkNWNXM4eFJWdWJ4YXhZMVgtNEp2RmNfNDMyRTVzcVltNmNaWFc0Y0dLWThHbjN5dC01TFByZFlSZmVVY0d6YW83NGRQSE0zd1lIX0VaOEkydFFtU0FUZDN1MUlLekFjNzJZLTVXNmhPek5lSU1YcTBKWnVGSUNXdDZrR28wS3ZTZ0VJdVpRY0lDbnIyMUI4WkFwTERQNFpXMWpFdkxwOG1qcEo0V0R4QUVLTlBBNFFNYl9OQjA5OVBpcU9jTjhhZXJ0SUVlOWxjMVA4REVLWm9nZzY2NlgzUWxqOGktdjdaVkRmMXQ3Z0Ryc1l6NUo4bEJwV3M2Tzg3dEJleG10bTcwQ0p6OHozQVAzUXA2a29RQXVXSW5CUXVZbFI4dmVPYlowVEREaUxPZ1FhMlZrcFJZMlg0bVliYUczNkpXUkVOQnRvNDVwQXQ0cVBzcXdXTWh3RFNQR3pfRXhRa3huaGVGbFpHZ0h5ZV8zYkstbHc5ektnXzh0TmNhcl9VcFdIVlpvZi1aYmh6N2NXdHdzUjJsTHo2M3ZSVTNyZWdzWnFEX2V2ckhSMGhZeXp1N184RjBfMUR3eDBWQktMMDhzVnBsbWRtVlVWazMzdnlDMFVSOE1iM3BsVFUwekxJbVo4d0RQazZsd29WNzdRRWowcXNBdnVjNnJFYmhxQ0RwbWVmTGRXcldJY29fY29GaVZTc2Rnck1NZy1aYTZvNTVDbWZ5aW9wS3pzbGh2akJTOTNnS0ZCYkVhc1BIWmRPYVVyNmIzMWFPQmw3ejR6RnJWbWZNM2EtRjdXVlNlLWxWbHF4TmRNaEp3dmRIYnhOcHZSVkppSUEwZ3ZVN2Mzb0EtRmRwc3ZCanJVVXUxSHhZLVROUnU0S2hTcjhNVWlaUXJGZ0FUX1ZFemZ4Nm1peXRaYXRUaFdOenEtZ09ORlptQVVfakdNbmVPMGxUV1VKay1Ob0dtX1dUdi1kWnp2N1d0dDdYcnZYeTdvdVRuc0lhNVdWUzJaMG5OVld6TlR5OFZfbjFHajdTX3RGcUJUQVFFMXp3WEY2bUFyaWpMZ1otZlFPc1Q3TzJZUlV0eV9jX2Qzdnk0X2d1S2ltaGFwOFMyY2VaejNtMDBdLS0+PC9nPjwvc3ZnPg==" class="uml" alt="uml diagram" title="" /></p>
<h3 id="_97">シーケンス図（通常プレイ）<a class="headerlink" href="#_97" title="Permanent link">&para;</a></h3>
<p>通常のプレイフローを示します。</p>
<p><img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBjb250ZW50U3R5bGVUeXBlPSJ0ZXh0L2NzcyIgZGF0YS1kaWFncmFtLXR5cGU9IlNFUVVFTkNFIiBoZWlnaHQ9IjIzMjNweCIgcHJlc2VydmVBc3BlY3RSYXRpbz0ibm9uZSIgc3R5bGU9IndpZHRoOjc4NXB4O2hlaWdodDoyMzIzcHg7YmFja2dyb3VuZDojRkZGRkZGOyIgdmVyc2lvbj0iMS4xIiB2aWV3Qm94PSIwIDAgNzg1IDIzMjMiIHdpZHRoPSI3ODVweCIgem9vbUFuZFBhbj0ibWFnbmlmeSI+PHRpdGxlPiYjMzY4OTA7JiMyNDEyMDsmIzEyNTAzOyYjMTI1MjQ7JiMxMjQ1MjsmIzEyMzk4OyYjMTI0NzE7JiMxMjU0MDsmIzEyNDY1OyYjMTI1MzE7JiMxMjQ3MzsmIzIyMjU5OzwvdGl0bGU+PGRlZnMvPjxnPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBmb250LXdlaWdodD0iYm9sZCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxNjcuOTk5MyIgeD0iMzA0LjgxNjciIHk9IjI3Ljk5NTEiPiYjMzY4OTA7JiMyNDEyMDsmIzEyNTAzOyYjMTI1MjQ7JiMxMjQ1MjsmIzEyMzk4OyYjMTI0NzE7JiMxMjU0MDsmIzEyNDY1OyYjMTI1MzE7JiMxMjQ3MzsmIzIyMjU5OzwvdGV4dD48Zz48dGl0bGU+R2FtZTwvdGl0bGU+PHJlY3QgZmlsbD0iI0ZGRkZGRiIgaGVpZ2h0PSIyMDM5LjkxNDEiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHdpZHRoPSIxMCIgeD0iMTEzLjc4MjgiIHk9IjE5Mi44NTk0Ii8+PC9nPjxnPjx0aXRsZT5QbGF5ZXI8L3RpdGxlPjxyZWN0IGZpbGw9IiNGRkZGRkYiIGhlaWdodD0iNTYuMTMyOCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9IjEwIiB4PSIyOTQuNTUzMyIgeT0iMjY0LjEyNSIvPjwvZz48Zz48dGl0bGU+UGxheWVyPC90aXRsZT48cmVjdCBmaWxsPSIjRkZGRkZGIiBoZWlnaHQ9IjIxNC42NjQxIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iMTAiIHg9IjI5NC41NTMzIiB5PSI1MjUuMDU0NyIvPjwvZz48Zz48dGl0bGU+UGxheWVyPC90aXRsZT48cmVjdCBmaWxsPSIjRkZGRkZGIiBoZWlnaHQ9IjE0IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iMTAiIHg9IjI5NC41NTMzIiB5PSIxOTA3LjkwNjMiLz48L2c+PGc+PHRpdGxlPlBsYXllcjwvdGl0bGU+PHJlY3QgZmlsbD0iI0ZGRkZGRiIgaGVpZ2h0PSI4Ny4zOTg0IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iMTAiIHg9IjI5NC41NTMzIiB5PSIxOTUxLjAzOTEiLz48L2c+PGc+PHRpdGxlPlN0YWdlPC90aXRsZT48cmVjdCBmaWxsPSIjRkZGRkZGIiBoZWlnaHQ9IjE0IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iMTAiIHg9IjQ0OS4yMTc4IiB5PSI2NjIuNTg1OSIvPjwvZz48Zz48dGl0bGU+U3RhZ2U8L3RpdGxlPjxyZWN0IGZpbGw9IiNGRkZGRkYiIGhlaWdodD0iNzEuMjY1NiIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9IjEwIiB4PSI0NDkuMjE3OCIgeT0iODk3LjM4MjgiLz48L2c+PGc+PHRpdGxlPlN0YWdlPC90aXRsZT48cmVjdCBmaWxsPSIjRkZGRkZGIiBoZWlnaHQ9IjcxLjI2NTYiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHdpZHRoPSIxMCIgeD0iNDQ5LjIxNzgiIHk9IjEwNzguMDQ2OSIvPjwvZz48Zz48dGl0bGU+U3RhZ2U8L3RpdGxlPjxyZWN0IGZpbGw9IiNGRkZGRkYiIGhlaWdodD0iNTYuMTMyOCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9IjEwIiB4PSI0NDkuMjE3OCIgeT0iMTM0NS4xMDk0Ii8+PC9nPjxnPjx0aXRsZT5TdGFnZTwvdGl0bGU+PHJlY3QgZmlsbD0iI0ZGRkZGRiIgaGVpZ2h0PSI3MS4yNjU2IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iMTAiIHg9IjQ0OS4yMTc4IiB5PSIxNDg3LjMxMjUiLz48L2c+PGc+PHRpdGxlPlN0YWdlPC90aXRsZT48cmVjdCBmaWxsPSIjRkZGRkZGIiBoZWlnaHQ9IjI5LjEzMjgiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHdpZHRoPSIxMCIgeD0iNDQ5LjIxNzgiIHk9IjE5ODAuMTcxOSIvPjwvZz48Zz48dGl0bGU+U2NvcmU8L3RpdGxlPjxyZWN0IGZpbGw9IiNGRkZGRkYiIGhlaWdodD0iNzEuMjY1NiIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9IjEwIiB4PSI1OTUuNDg5IiB5PSIxMjQ0LjcxMDkiLz48L2c+PGc+PHRpdGxlPlNjb3JlPC90aXRsZT48cmVjdCBmaWxsPSIjRkZGRkZGIiBoZWlnaHQ9IjU2LjEzMjgiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHdpZHRoPSIxMCIgeD0iNTk1LjQ4OSIgeT0iMTYxMS44NDM4Ii8+PC9nPjxyZWN0IGZpbGw9Im5vbmUiIGhlaWdodD0iMTgwNS4yNSIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxLjU7IiB3aWR0aD0iNzE3LjY4OTIiIHg9IjUwLjk0MzQiIHk9IjQyMC41MjM0Ii8+PHJlY3QgZmlsbD0ibm9uZSIgaGVpZ2h0PSIzMzQuMTk1MyIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxLjU7IiB3aWR0aD0iNDMwLjUwMiIgeD0iNzAuOTQzNCIgeT0iNDg2Ljc4OTEiLz48cmVjdCBmaWxsPSJub25lIiBoZWlnaHQ9IjE0NC41MzEzIiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjEuNTsiIHdpZHRoPSIyMzAuNjc0OCIgeD0iMjYwLjc3MDYiIHk9IjU4Mi4xODc1Ii8+PHJlY3QgZmlsbD0ibm9uZSIgaGVpZ2h0PSI1OS4yNjU2IiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjEuNTsiIHdpZHRoPSIxOTUuNzM5MyIgeD0iODAuOTQzNCIgeT0iNzU0LjcxODgiLz48cmVjdCBmaWxsPSJub25lIiBoZWlnaHQ9IjE5MC43OTY5IiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjEuNTsiIHdpZHRoPSI1MzkuNTQ1NSIgeD0iNzAuOTQzNCIgeT0iODM0Ljk4NDQiLz48cmVjdCBmaWxsPSJub25lIiBoZWlnaHQ9IjExNy41MzEzIiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjEuNTsiIHdpZHRoPSI1MTkuNTQ1NSIgeD0iODAuOTQzNCIgeT0iODU5LjExNzIiLz48cmVjdCBmaWxsPSJub25lIiBoZWlnaHQ9IjczNC40NjA5IiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjEuNTsiIHdpZHRoPSI2OTcuNjg5MiIgeD0iNjAuOTQzNCIgeT0iMTAzOS43ODEzIi8+PHJlY3QgZmlsbD0ibm9uZSIgaGVpZ2h0PSI2MDIuOTI5NyIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxLjU7IiB3aWR0aD0iNjc3LjY4OTIiIHg9IjcwLjk0MzQiIHk9IjExNjQuMzEyNSIvPjxyZWN0IGZpbGw9Im5vbmUiIGhlaWdodD0iMTAyLjM5ODQiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MS41OyIgd2lkdGg9IjYyNS42Mjk2IiB4PSI4MC45NDM0IiB5PSIxNTczLjU3ODEiLz48cmVjdCBmaWxsPSJub25lIiBoZWlnaHQ9IjY3LjM5ODQiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MS41OyIgd2lkdGg9IjM0MC43Mzk0IiB4PSI4MC45NDM0IiB5PSIxNzg4LjI0MjIiLz48cmVjdCBmaWxsPSJub25lIiBoZWlnaHQ9IjMwNyIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxLjU7IiB3aWR0aD0iNDIwLjUwMiIgeD0iNzAuOTQzNCIgeT0iMTg2OS42NDA2Ii8+PHJlY3QgZmlsbD0ibm9uZSIgaGVpZ2h0PSIxMTYuMjAzMSIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxLjU7IiB3aWR0aD0iMjAzLjE1OTciIHg9IjgwLjk0MzQiIHk9IjIwNTMuNDM3NSIvPjxnPjx0aXRsZT5QbGF5ZXI8L3RpdGxlPjxyZWN0IGZpbGw9IiMwMDAwMDAiIGZpbGwtb3BhY2l0eT0iMC4wMDAwMCIgaGVpZ2h0PSIyMTI0LjE3OTciIHdpZHRoPSI4IiB4PSIyNS43ODI3IiB5PSIxMTguNTkzOCIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41O3N0cm9rZS1kYXNoYXJyYXk6NSw1OyIgeDE9IjI5IiB4Mj0iMjkiIHkxPSIxMTguNTkzOCIgeTI9IjIyNDIuNzczNCIvPjwvZz48Zz48dGl0bGU+R2FtZTwvdGl0bGU+PHJlY3QgZmlsbD0iIzAwMDAwMCIgZmlsbC1vcGFjaXR5PSIwLjAwMDAwIiBoZWlnaHQ9IjIxMjQuMTc5NyIgd2lkdGg9IjgiIHg9IjExNC43ODI4IiB5PSIxMTguNTkzOCIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41O3N0cm9rZS1kYXNoYXJyYXk6NSw1OyIgeDE9IjExNy45NDM0IiB4Mj0iMTE3Ljk0MzQiIHkxPSIxMTguNTkzOCIgeTI9IjIyNDIuNzczNCIvPjwvZz48Zz48dGl0bGU+UGxheWVyPC90aXRsZT48cmVjdCBmaWxsPSIjMDAwMDAwIiBmaWxsLW9wYWNpdHk9IjAuMDAwMDAiIGhlaWdodD0iMjEyNC4xNzk3IiB3aWR0aD0iOCIgeD0iMjk1LjU1MzMiIHk9IjExOC41OTM4Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7c3Ryb2tlLWRhc2hhcnJheTo1LDU7IiB4MT0iMjk4Ljc3MDYiIHgyPSIyOTguNzcwNiIgeTE9IjExOC41OTM4IiB5Mj0iMjI0Mi43NzM0Ii8+PC9nPjxnPjx0aXRsZT5TdGFnZTwvdGl0bGU+PHJlY3QgZmlsbD0iIzAwMDAwMCIgZmlsbC1vcGFjaXR5PSIwLjAwMDAwIiBoZWlnaHQ9IjIxMjQuMTc5NyIgd2lkdGg9IjgiIHg9IjQ1MC4yMTc4IiB5PSIxMTguNTkzOCIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41O3N0cm9rZS1kYXNoYXJyYXk6NSw1OyIgeDE9IjQ1My45OTAzIiB4Mj0iNDUzLjk5MDMiIHkxPSIxMTguNTkzOCIgeTI9IjIyNDIuNzczNCIvPjwvZz48Zz48dGl0bGU+U2NvcmU8L3RpdGxlPjxyZWN0IGZpbGw9IiMwMDAwMDAiIGZpbGwtb3BhY2l0eT0iMC4wMDAwMCIgaGVpZ2h0PSIyMTI0LjE3OTciIHdpZHRoPSI4IiB4PSI1OTYuNDg5IiB5PSIxMTguNTkzOCIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41O3N0cm9rZS1kYXNoYXJyYXk6NSw1OyIgeDE9IjU5OS43Mjk3IiB4Mj0iNTk5LjcyOTciIHkxPSIxMTguNTkzOCIgeTI9IjIyNDIuNzczNCIvPjwvZz48ZyBjbGFzcz0icGFydGljaXBhbnQgcGFydGljaXBhbnQtaGVhZCIgZGF0YS1wYXJ0aWNpcGFudD0icGxheWVyIj48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI0My41NjU0IiB4PSI1IiB5PSIxMTUuMjkyIj5QbGF5ZXI8L3RleHQ+PGVsbGlwc2UgY3g9IjI5Ljc4MjciIGN5PSI1MC43OTY5IiBmaWxsPSIjRTJFMkYwIiByeD0iOCIgcnk9IjgiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIvPjxwYXRoIGQ9Ik0yOS43ODI3LDU4Ljc5NjkgTDI5Ljc4MjcsODUuNzk2OSBNMTYuNzgyNyw2Ni43OTY5IEw0Mi43ODI3LDY2Ljc5NjkgTTI5Ljc4MjcsODUuNzk2OSBMMTYuNzgyNywxMDAuNzk2OSBNMjkuNzgyNyw4NS43OTY5IEw0Mi43ODI3LDEwMC43OTY5IiBmaWxsPSJub25lIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiLz48L2c+PGcgY2xhc3M9InBhcnRpY2lwYW50IHBhcnRpY2lwYW50LXRhaWwiIGRhdGEtcGFydGljaXBhbnQ9InBsYXllciI+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNDMuNTY1NCIgeD0iNSIgeT0iMjI1NC43Njg2Ij5QbGF5ZXI8L3RleHQ+PGVsbGlwc2UgY3g9IjI5Ljc4MjciIGN5PSIyMjY2LjU3MDMiIGZpbGw9IiNFMkUyRjAiIHJ4PSI4IiByeT0iOCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7Ii8+PHBhdGggZD0iTTI5Ljc4MjcsMjI3NC41NzAzIEwyOS43ODI3LDIzMDEuNTcwMyBNMTYuNzgyNywyMjgyLjU3MDMgTDQyLjc4MjcsMjI4Mi41NzAzIE0yOS43ODI3LDIzMDEuNTcwMyBMMTYuNzgyNywyMzE2LjU3MDMgTTI5Ljc4MjcsMjMwMS41NzAzIEw0Mi43ODI3LDIzMTYuNTcwMyIgZmlsbD0ibm9uZSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7Ii8+PC9nPjxnIGNsYXNzPSJwYXJ0aWNpcGFudCBwYXJ0aWNpcGFudC1oZWFkIiBkYXRhLXBhcnRpY2lwYW50PSJHYW1lIj48cmVjdCBmaWxsPSIjRTJFMkYwIiBoZWlnaHQ9IjMwLjI5NjkiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjU1LjY3ODciIHg9IjkwLjk0MzQiIHk9Ijg3LjI5NjkiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI0MS42Nzg3IiB4PSI5Ny45NDM0IiB5PSIxMDcuMjkyIj5HYW1lPC90ZXh0PjwvZz48ZyBjbGFzcz0icGFydGljaXBhbnQgcGFydGljaXBhbnQtdGFpbCIgZGF0YS1wYXJ0aWNpcGFudD0iR2FtZSI+PHJlY3QgZmlsbD0iI0UyRTJGMCIgaGVpZ2h0PSIzMC4yOTY5IiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSI1NS42Nzg3IiB4PSI5MC45NDM0IiB5PSIyMjQxLjc3MzQiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI0MS42Nzg3IiB4PSI5Ny45NDM0IiB5PSIyMjYxLjc2ODYiPkdhbWU8L3RleHQ+PC9nPjxnIGNsYXNzPSJwYXJ0aWNpcGFudCBwYXJ0aWNpcGFudC1oZWFkIiBkYXRhLXBhcnRpY2lwYW50PSJwbGF5ZXJPYmoiPjxyZWN0IGZpbGw9IiNFMkUyRjAiIGhlaWdodD0iMzAuMjk2OSIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iNTcuNTY1NCIgeD0iMjcwLjc3MDYiIHk9Ijg3LjI5NjkiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI0My41NjU0IiB4PSIyNzcuNzcwNiIgeT0iMTA3LjI5MiI+UGxheWVyPC90ZXh0PjwvZz48ZyBjbGFzcz0icGFydGljaXBhbnQgcGFydGljaXBhbnQtdGFpbCIgZGF0YS1wYXJ0aWNpcGFudD0icGxheWVyT2JqIj48cmVjdCBmaWxsPSIjRTJFMkYwIiBoZWlnaHQ9IjMwLjI5NjkiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjU3LjU2NTQiIHg9IjI3MC43NzA2IiB5PSIyMjQxLjc3MzQiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI0My41NjU0IiB4PSIyNzcuNzcwNiIgeT0iMjI2MS43Njg2Ij5QbGF5ZXI8L3RleHQ+PC9nPjxnIGNsYXNzPSJwYXJ0aWNpcGFudCBwYXJ0aWNpcGFudC1oZWFkIiBkYXRhLXBhcnRpY2lwYW50PSJTdGFnZSI+PHJlY3QgZmlsbD0iI0UyRTJGMCIgaGVpZ2h0PSIzMC4yOTY5IiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSI1NC40NTUxIiB4PSI0MjYuOTkwMyIgeT0iODcuMjk2OSIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjQwLjQ1NTEiIHg9IjQzMy45OTAzIiB5PSIxMDcuMjkyIj5TdGFnZTwvdGV4dD48L2c+PGcgY2xhc3M9InBhcnRpY2lwYW50IHBhcnRpY2lwYW50LXRhaWwiIGRhdGEtcGFydGljaXBhbnQ9IlN0YWdlIj48cmVjdCBmaWxsPSIjRTJFMkYwIiBoZWlnaHQ9IjMwLjI5NjkiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjU0LjQ1NTEiIHg9IjQyNi45OTAzIiB5PSIyMjQxLjc3MzQiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI0MC40NTUxIiB4PSI0MzMuOTkwMyIgeT0iMjI2MS43Njg2Ij5TdGFnZTwvdGV4dD48L2c+PGcgY2xhc3M9InBhcnRpY2lwYW50IHBhcnRpY2lwYW50LWhlYWQiIGRhdGEtcGFydGljaXBhbnQ9IlNjb3JlIj48cmVjdCBmaWxsPSIjRTJFMkYwIiBoZWlnaHQ9IjMwLjI5NjkiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjUzLjUxODYiIHg9IjU3My43Mjk3IiB5PSI4Ny4yOTY5Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMzkuNTE4NiIgeD0iNTgwLjcyOTciIHk9IjEwNy4yOTIiPlNjb3JlPC90ZXh0PjwvZz48ZyBjbGFzcz0icGFydGljaXBhbnQgcGFydGljaXBhbnQtdGFpbCIgZGF0YS1wYXJ0aWNpcGFudD0iU2NvcmUiPjxyZWN0IGZpbGw9IiNFMkUyRjAiIGhlaWdodD0iMzAuMjk2OSIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iNTMuNTE4NiIgeD0iNTczLjcyOTciIHk9IjIyNDEuNzczNCIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjM5LjUxODYiIHg9IjU4MC43Mjk3IiB5PSIyMjYxLjc2ODYiPlNjb3JlPC90ZXh0PjwvZz48Zz48dGl0bGU+R2FtZTwvdGl0bGU+PHJlY3QgZmlsbD0iI0ZGRkZGRiIgaGVpZ2h0PSIyMDM5LjkxNDEiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHdpZHRoPSIxMCIgeD0iMTEzLjc4MjgiIHk9IjE5Mi44NTk0Ii8+PC9nPjxnPjx0aXRsZT5QbGF5ZXI8L3RpdGxlPjxyZWN0IGZpbGw9IiNGRkZGRkYiIGhlaWdodD0iNTYuMTMyOCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9IjEwIiB4PSIyOTQuNTUzMyIgeT0iMjY0LjEyNSIvPjwvZz48Zz48dGl0bGU+UGxheWVyPC90aXRsZT48cmVjdCBmaWxsPSIjRkZGRkZGIiBoZWlnaHQ9IjIxNC42NjQxIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iMTAiIHg9IjI5NC41NTMzIiB5PSI1MjUuMDU0NyIvPjwvZz48Zz48dGl0bGU+UGxheWVyPC90aXRsZT48cmVjdCBmaWxsPSIjRkZGRkZGIiBoZWlnaHQ9IjE0IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iMTAiIHg9IjI5NC41NTMzIiB5PSIxOTA3LjkwNjMiLz48L2c+PGc+PHRpdGxlPlBsYXllcjwvdGl0bGU+PHJlY3QgZmlsbD0iI0ZGRkZGRiIgaGVpZ2h0PSI4Ny4zOTg0IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iMTAiIHg9IjI5NC41NTMzIiB5PSIxOTUxLjAzOTEiLz48L2c+PGc+PHRpdGxlPlN0YWdlPC90aXRsZT48cmVjdCBmaWxsPSIjRkZGRkZGIiBoZWlnaHQ9IjE0IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iMTAiIHg9IjQ0OS4yMTc4IiB5PSI2NjIuNTg1OSIvPjwvZz48Zz48dGl0bGU+U3RhZ2U8L3RpdGxlPjxyZWN0IGZpbGw9IiNGRkZGRkYiIGhlaWdodD0iNzEuMjY1NiIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9IjEwIiB4PSI0NDkuMjE3OCIgeT0iODk3LjM4MjgiLz48L2c+PGc+PHRpdGxlPlN0YWdlPC90aXRsZT48cmVjdCBmaWxsPSIjRkZGRkZGIiBoZWlnaHQ9IjcxLjI2NTYiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHdpZHRoPSIxMCIgeD0iNDQ5LjIxNzgiIHk9IjEwNzguMDQ2OSIvPjwvZz48Zz48dGl0bGU+U3RhZ2U8L3RpdGxlPjxyZWN0IGZpbGw9IiNGRkZGRkYiIGhlaWdodD0iNTYuMTMyOCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9IjEwIiB4PSI0NDkuMjE3OCIgeT0iMTM0NS4xMDk0Ii8+PC9nPjxnPjx0aXRsZT5TdGFnZTwvdGl0bGU+PHJlY3QgZmlsbD0iI0ZGRkZGRiIgaGVpZ2h0PSI3MS4yNjU2IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iMTAiIHg9IjQ0OS4yMTc4IiB5PSIxNDg3LjMxMjUiLz48L2c+PGc+PHRpdGxlPlN0YWdlPC90aXRsZT48cmVjdCBmaWxsPSIjRkZGRkZGIiBoZWlnaHQ9IjI5LjEzMjgiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHdpZHRoPSIxMCIgeD0iNDQ5LjIxNzgiIHk9IjE5ODAuMTcxOSIvPjwvZz48Zz48dGl0bGU+U2NvcmU8L3RpdGxlPjxyZWN0IGZpbGw9IiNGRkZGRkYiIGhlaWdodD0iNzEuMjY1NiIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9IjEwIiB4PSI1OTUuNDg5IiB5PSIxMjQ0LjcxMDkiLz48L2c+PGc+PHRpdGxlPlNjb3JlPC90aXRsZT48cmVjdCBmaWxsPSIjRkZGRkZGIiBoZWlnaHQ9IjU2LjEzMjgiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHdpZHRoPSIxMCIgeD0iNTk1LjQ4OSIgeT0iMTYxMS44NDM4Ii8+PC9nPjxyZWN0IGZpbGw9IiNFRUVFRUUiIGhlaWdodD0iMyIgc3R5bGU9InN0cm9rZTojRUVFRUVFO3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9Ijc3OC42MzI2IiB4PSIwIiB5PSIxNDkuMTYwMiIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiIHgxPSIwIiB4Mj0iNzc4LjYzMjYiIHkxPSIxNDkuMTYwMiIgeTI9IjE0OS4xNjAyIi8+PGxpbmUgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIgeDE9IjAiIHgyPSI3NzguNjMyNiIgeTE9IjE1Mi4xNjAyIiB5Mj0iMTUyLjE2MDIiLz48cmVjdCBmaWxsPSIjRUVFRUVFIiBoZWlnaHQ9IjIzLjEzMjgiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MjsiIHdpZHRoPSI4My41MjYiIHg9IjM0Ny41NTMzIiB5PSIxMzguNTkzOCIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBmb250LXdlaWdodD0iYm9sZCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI2NS4wMDAxIiB4PSIzNTMuNTUzMyIgeT0iMTU0LjY2MDYiPiYjMTI0NjY7JiMxMjU0MDsmIzEyNTEyOyYjMzgyODM7JiMyMjk4Nzs8L3RleHQ+PGcgY2xhc3M9Im1lc3NhZ2UiIGRhdGEtcGFydGljaXBhbnQtMT0icGxheWVyIiBkYXRhLXBhcnRpY2lwYW50LTI9IkdhbWUiPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iMTAxLjc4MjgsMTg4Ljg1OTQsMTExLjc4MjgsMTkyLjg1OTQsMTAxLjc4MjgsMTk2Ljg1OTQsMTA1Ljc4MjgsMTkyLjg1OTQiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iMjkuNzgyNyIgeDI9IjEwNy43ODI4IiB5MT0iMTkyLjg1OTQiIHkyPSIxOTIuODU5NCIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjY1LjAwMDEiIHg9IjM2Ljc4MjciIHk9IjE4Ny43OTM1Ij4mIzEyNDY2OyYjMTI1NDA7JiMxMjUxMjsmIzM4MjgzOyYjMjI5ODc7PC90ZXh0PjwvZz48ZyBjbGFzcz0ibWVzc2FnZSIgZGF0YS1wYXJ0aWNpcGFudC0xPSJHYW1lIiBkYXRhLXBhcnRpY2lwYW50LTI9IkdhbWUiPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSIxMjMuNzgyOCIgeDI9IjE2NS43ODI4IiB5MT0iMjIxLjk5MjIiIHkyPSIyMjEuOTkyMiIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSIxNjUuNzgyOCIgeDI9IjE2NS43ODI4IiB5MT0iMjIxLjk5MjIiIHkyPSIyMzQuOTkyMiIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSIxMjQuNzgyOCIgeDI9IjE2NS43ODI4IiB5MT0iMjM0Ljk5MjIiIHkyPSIyMzQuOTkyMiIvPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iMTM0Ljc4MjgsMjMwLjk5MjIsMTI0Ljc4MjgsMjM0Ljk5MjIsMTM0Ljc4MjgsMjM4Ljk5MjIsMTMwLjc4MjgsMjM0Ljk5MjIiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI2NC4zMjcxIiB4PSIxMzAuNzgyOCIgeT0iMjE2LjkyNjMiPmluaXRpYWxpemUoKTwvdGV4dD48L2c+PGcgY2xhc3M9Im1lc3NhZ2UiIGRhdGEtcGFydGljaXBhbnQtMT0iR2FtZSIgZGF0YS1wYXJ0aWNpcGFudC0yPSJwbGF5ZXJPYmoiPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iMjgyLjU1MzMsMjYwLjEyNSwyOTIuNTUzMywyNjQuMTI1LDI4Mi41NTMzLDI2OC4xMjUsMjg2LjU1MzMsMjY0LjEyNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSIxMjMuNzgyOCIgeDI9IjI4OC41NTMzIiB5MT0iMjY0LjEyNSIgeTI9IjI2NC4xMjUiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMTEuNzc1OSIgeD0iMTMwLjc4MjgiIHk9IjI1OS4wNTkxIj5jcmVhdGVOZXdQdXlvKCk8L3RleHQ+PC9nPjxnIGNsYXNzPSJtZXNzYWdlIiBkYXRhLXBhcnRpY2lwYW50LTE9InBsYXllck9iaiIgZGF0YS1wYXJ0aWNpcGFudC0yPSJwbGF5ZXJPYmoiPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSIzMDQuNTUzMyIgeDI9IjM0Ni41NTMzIiB5MT0iMjkzLjI1NzgiIHkyPSIyOTMuMjU3OCIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSIzNDYuNTUzMyIgeDI9IjM0Ni41NTMzIiB5MT0iMjkzLjI1NzgiIHkyPSIzMDYuMjU3OCIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSIzMDUuNTUzMyIgeDI9IjM0Ni41NTMzIiB5MT0iMzA2LjI1NzgiIHkyPSIzMDYuMjU3OCIvPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iMzE1LjU1MzMsMzAyLjI1NzgsMzA1LjU1MzMsMzA2LjI1NzgsMzE1LjU1MzMsMzEwLjI1NzgsMzExLjU1MzMsMzA2LjI1NzgiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI5MS4wMDAxIiB4PSIzMTEuNTUzMyIgeT0iMjg4LjE5MTkiPiYjMjYwMzI7JiMxMjM3NTsmIzEyMzU2OyYjMTI0MDc7JiMxMjQyNDsmIzI5OTgzOyYjMjUxMDQ7PC90ZXh0PjwvZz48ZyBjbGFzcz0ibWVzc2FnZSIgZGF0YS1wYXJ0aWNpcGFudC0xPSJwbGF5ZXJPYmoiIGRhdGEtcGFydGljaXBhbnQtMj0iR2FtZSI+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSIxMzQuNzgyOCwzMTYuMjU3OCwxMjQuNzgyOCwzMjAuMjU3OCwxMzQuNzgyOCwzMjQuMjU3OCwxMzAuNzgyOCwzMjAuMjU3OCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTtzdHJva2UtZGFzaGFycmF5OjIsMjsiIHgxPSIxMjguNzgyOCIgeDI9IjI5OC41NTMzIiB5MT0iMzIwLjI1NzgiIHkyPSIzMjAuMjU3OCIvPjwvZz48ZyBjbGFzcz0ibWVzc2FnZSIgZGF0YS1wYXJ0aWNpcGFudC0xPSJHYW1lIiBkYXRhLXBhcnRpY2lwYW50LTI9IkdhbWUiPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSIxMjMuNzgyOCIgeDI9IjE2NS43ODI4IiB5MT0iMzQ5LjM5MDYiIHkyPSIzNDkuMzkwNiIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSIxNjUuNzgyOCIgeDI9IjE2NS43ODI4IiB5MT0iMzQ5LjM5MDYiIHkyPSIzNjIuMzkwNiIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSIxMjQuNzgyOCIgeDI9IjE2NS43ODI4IiB5MT0iMzYyLjM5MDYiIHkyPSIzNjIuMzkwNiIvPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iMTM0Ljc4MjgsMzU4LjM5MDYsMTI0Ljc4MjgsMzYyLjM5MDYsMTM0Ljc4MjgsMzY2LjM5MDYsMTMwLjc4MjgsMzYyLjM5MDYiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMTAuNzk4MyIgeD0iMTMwLjc4MjgiIHk9IjM0NC4zMjQ3Ij5tb2RlID0gJ3BsYXlpbmcnPC90ZXh0PjwvZz48cmVjdCBmaWxsPSIjRUVFRUVFIiBoZWlnaHQ9IjMiIHN0eWxlPSJzdHJva2U6I0VFRUVFRTtzdHJva2Utd2lkdGg6MTsiIHdpZHRoPSI3NzguNjMyNiIgeD0iMCIgeT0iMzkwLjk1NyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiIHgxPSIwIiB4Mj0iNzc4LjYzMjYiIHkxPSIzOTAuOTU3IiB5Mj0iMzkwLjk1NyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiIHgxPSIwIiB4Mj0iNzc4LjYzMjYiIHkxPSIzOTMuOTU3IiB5Mj0iMzkzLjk1NyIvPjxyZWN0IGZpbGw9IiNFRUVFRUUiIGhlaWdodD0iMjMuMTMyOCIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoyOyIgd2lkdGg9IjcwLjUyNTkiIHg9IjM1NC4wNTM0IiB5PSIzODAuMzkwNiIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBmb250LXdlaWdodD0iYm9sZCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI1Mi4wMDAxIiB4PSIzNjAuMDUzNCIgeT0iMzk2LjQ1NzUiPiYjMTI1MDM7JiMxMjUyNDsmIzEyNDUyOyYjMjAwMTM7PC90ZXh0PjxwYXRoIGQ9Ik01MC45NDM0LDQyMC41MjM0IEwxMjcuNTY3NSw0MjAuNTIzNCBMMTI3LjU2NzUsNDI3LjY1NjMgTDExNy41Njc1LDQzNy42NTYzIEw1MC45NDM0LDQzNy42NTYzIEw1MC45NDM0LDQyMC41MjM0IiBmaWxsPSIjRUVFRUVFIiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjEuNTsiLz48cmVjdCBmaWxsPSJub25lIiBoZWlnaHQ9IjE4MDUuMjUiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MS41OyIgd2lkdGg9IjcxNy42ODkyIiB4PSI1MC45NDM0IiB5PSI0MjAuNTIzNCIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBmb250LXdlaWdodD0iYm9sZCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIzMS42MjQiIHg9IjY1Ljk0MzQiIHk9IjQzMy41OTAzIj5sb29wPC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjExIiBmb250LXdlaWdodD0iYm9sZCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI3Ni4wNTQyIiB4PSIxNDIuNTY3NSIgeT0iNDMyLjczMzkiPlsmIzEyNDY2OyYjMTI1NDA7JiMxMjUxMjsmIzEyNTIzOyYjMTI1NDA7JiMxMjUwMztdPC90ZXh0PjxnIGNsYXNzPSJtZXNzYWdlIiBkYXRhLXBhcnRpY2lwYW50LTE9IkdhbWUiIGRhdGEtcGFydGljaXBhbnQtMj0iR2FtZSI+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjEyMy43ODI4IiB4Mj0iMTY1Ljc4MjgiIHkxPSI0NTguNzg5MSIgeTI9IjQ1OC43ODkxIi8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjE2NS43ODI4IiB4Mj0iMTY1Ljc4MjgiIHkxPSI0NTguNzg5MSIgeTI9IjQ3MS43ODkxIi8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjEyNC43ODI4IiB4Mj0iMTY1Ljc4MjgiIHkxPSI0NzEuNzg5MSIgeTI9IjQ3MS43ODkxIi8+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSIxMzQuNzgyOCw0NjcuNzg5MSwxMjQuNzgyOCw0NzEuNzg5MSwxMzQuNzgyOCw0NzUuNzg5MSwxMzAuNzgyOCw0NzEuNzg5MSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjM3LjkxNDYiIHg9IjEzMC43ODI4IiB5PSI0NTMuNzIzMSI+bG9vcCgpPC90ZXh0PjwvZz48cGF0aCBkPSJNNzAuOTQzNCw0ODYuNzg5MSBMMTM1LjM4NjMsNDg2Ljc4OTEgTDEzNS4zODYzLDQ5My45MjE5IEwxMjUuMzg2Myw1MDMuOTIxOSBMNzAuOTQzNCw1MDMuOTIxOSBMNzAuOTQzNCw0ODYuNzg5MSIgZmlsbD0iI0VFRUVFRSIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxLjU7Ii8+PHJlY3QgZmlsbD0ibm9uZSIgaGVpZ2h0PSIzMzQuMTk1MyIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxLjU7IiB3aWR0aD0iNDMwLjUwMiIgeD0iNzAuOTQzNCIgeT0iNDg2Ljc4OTEiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgZm9udC13ZWlnaHQ9ImJvbGQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTkuNDQyOSIgeD0iODUuOTQzNCIgeT0iNDk5Ljg1NiI+YWx0PC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjExIiBmb250LXdlaWdodD0iYm9sZCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMjIuOTQ5NyIgeD0iMTUwLjM4NjMiIHk9IjQ5OC45OTk1Ij5bbW9kZSA9PSAncGxheWluZyddPC90ZXh0PjxnIGNsYXNzPSJtZXNzYWdlIiBkYXRhLXBhcnRpY2lwYW50LTE9IkdhbWUiIGRhdGEtcGFydGljaXBhbnQtMj0icGxheWVyT2JqIj48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjI4Mi41NTMzLDUyMS4wNTQ3LDI5Mi41NTMzLDUyNS4wNTQ3LDI4Mi41NTMzLDUyOS4wNTQ3LDI4Ni41NTMzLDUyNS4wNTQ3IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjEyMy43ODI4IiB4Mj0iMjg4LjU1MzMiIHkxPSI1MjUuMDU0NyIgeTI9IjUyNS4wNTQ3Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTIxLjA4NzkiIHg9IjEzMC43ODI4IiB5PSI1MTkuOTg4OCI+dXBkYXRlKGRlbHRhVGltZSk8L3RleHQ+PC9nPjxnIGNsYXNzPSJtZXNzYWdlIiBkYXRhLXBhcnRpY2lwYW50LTE9InBsYXllck9iaiIgZGF0YS1wYXJ0aWNpcGFudC0yPSJwbGF5ZXJPYmoiPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSIzMDQuNTUzMyIgeDI9IjM0Ni41NTMzIiB5MT0iNTU0LjE4NzUiIHkyPSI1NTQuMTg3NSIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSIzNDYuNTUzMyIgeDI9IjM0Ni41NTMzIiB5MT0iNTU0LjE4NzUiIHkyPSI1NjcuMTg3NSIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSIzMDUuNTUzMyIgeDI9IjM0Ni41NTMzIiB5MT0iNTY3LjE4NzUiIHkyPSI1NjcuMTg3NSIvPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iMzE1LjU1MzMsNTYzLjE4NzUsMzA1LjU1MzMsNTY3LjE4NzUsMzE1LjU1MzMsNTcxLjE4NzUsMzExLjU1MzMsNTY3LjE4NzUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI5My4zOTk0IiB4PSIzMTEuNTUzMyIgeT0iNTQ5LjEyMTYiPmFwcGx5R3Jhdml0eSgpPC90ZXh0PjwvZz48cGF0aCBkPSJNMjYwLjc3MDYsNTgyLjE4NzUgTDMyNS4yMTM1LDU4Mi4xODc1IEwzMjUuMjEzNSw1ODkuMzIwMyBMMzE1LjIxMzUsNTk5LjMyMDMgTDI2MC43NzA2LDU5OS4zMjAzIEwyNjAuNzcwNiw1ODIuMTg3NSIgZmlsbD0iI0VFRUVFRSIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxLjU7Ii8+PHJlY3QgZmlsbD0ibm9uZSIgaGVpZ2h0PSIxNDQuNTMxMyIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxLjU7IiB3aWR0aD0iMjMwLjY3NDgiIHg9IjI2MC43NzA2IiB5PSI1ODIuMTg3NSIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBmb250LXdlaWdodD0iYm9sZCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxOS40NDI5IiB4PSIyNzUuNzcwNiIgeT0iNTk1LjI1NDQiPmFsdDwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMSIgZm9udC13ZWlnaHQ9ImJvbGQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNTQuMDU0NCIgeD0iMzQwLjIxMzUiIHk9IjU5NC4zOTc5Ij5bJiMxMjQwNzsmIzEyNDI0OyYjMzA1Mjg7JiMyMjMyMDtdPC90ZXh0PjxnIGNsYXNzPSJtZXNzYWdlIiBkYXRhLXBhcnRpY2lwYW50LTE9InBsYXllck9iaiIgZGF0YS1wYXJ0aWNpcGFudC0yPSJwbGF5ZXJPYmoiPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSIzMDQuNTUzMyIgeDI9IjM0Ni41NTMzIiB5MT0iNjIwLjQ1MzEiIHkyPSI2MjAuNDUzMSIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSIzNDYuNTUzMyIgeDI9IjM0Ni41NTMzIiB5MT0iNjIwLjQ1MzEiIHkyPSI2MzMuNDUzMSIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSIzMDUuNTUzMyIgeDI9IjM0Ni41NTMzIiB5MT0iNjMzLjQ1MzEiIHkyPSI2MzMuNDUzMSIvPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iMzE1LjU1MzMsNjI5LjQ1MzEsMzA1LjU1MzMsNjMzLjQ1MzEsMzE1LjU1MzMsNjM3LjQ1MzEsMzExLjU1MzMsNjMzLjQ1MzEiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI3NC4yODY2IiB4PSIzMTEuNTUzMyIgeT0iNjE1LjM4NzIiPm9uTGFuZGVkKCk8L3RleHQ+PC9nPjxnIGNsYXNzPSJtZXNzYWdlIiBkYXRhLXBhcnRpY2lwYW50LTE9InBsYXllck9iaiIgZGF0YS1wYXJ0aWNpcGFudC0yPSJTdGFnZSI+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSI0MzcuMjE3OCw2NTguNTg1OSw0NDcuMjE3OCw2NjIuNTg1OSw0MzcuMjE3OCw2NjYuNTg1OSw0NDEuMjE3OCw2NjIuNTg1OSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSIzMDQuNTUzMyIgeDI9IjQ0My4yMTc4IiB5MT0iNjYyLjU4NTkiIHkyPSI2NjIuNTg1OSIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjEyNS42NjQ2IiB4PSIzMTEuNTUzMyIgeT0iNjU3LjUyIj5zZXRQdXlvKHgsIHksIGNvbG9yKTwvdGV4dD48L2c+PGcgY2xhc3M9Im1lc3NhZ2UiIGRhdGEtcGFydGljaXBhbnQtMT0iU3RhZ2UiIGRhdGEtcGFydGljaXBhbnQtMj0icGxheWVyT2JqIj48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjMxNS41NTMzLDY3Mi41ODU5LDMwNS41NTMzLDY3Ni41ODU5LDMxNS41NTMzLDY4MC41ODU5LDMxMS41NTMzLDY3Ni41ODU5IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxO3N0cm9rZS1kYXNoYXJyYXk6MiwyOyIgeDE9IjMwOS41NTMzIiB4Mj0iNDUzLjIxNzgiIHkxPSI2NzYuNTg1OSIgeTI9IjY3Ni41ODU5Ii8+PC9nPjxnIGNsYXNzPSJtZXNzYWdlIiBkYXRhLXBhcnRpY2lwYW50LTE9InBsYXllck9iaiIgZGF0YS1wYXJ0aWNpcGFudC0yPSJwbGF5ZXJPYmoiPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSIzMDQuNTUzMyIgeDI9IjM0Ni41NTMzIiB5MT0iNzA1LjcxODgiIHkyPSI3MDUuNzE4OCIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSIzNDYuNTUzMyIgeDI9IjM0Ni41NTMzIiB5MT0iNzA1LjcxODgiIHkyPSI3MTguNzE4OCIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSIzMDUuNTUzMyIgeDI9IjM0Ni41NTMzIiB5MT0iNzE4LjcxODgiIHkyPSI3MTguNzE4OCIvPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iMzE1LjU1MzMsNzE0LjcxODgsMzA1LjU1MzMsNzE4LjcxODgsMzE1LjU1MzMsNzIyLjcxODgsMzExLjU1MzMsNzE4LjcxODgiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI5MC4xNTU4IiB4PSIzMTEuNTUzMyIgeT0iNzAwLjY1MjgiPmxhbmRlZCA9IHRydWU8L3RleHQ+PC9nPjxnIGNsYXNzPSJtZXNzYWdlIiBkYXRhLXBhcnRpY2lwYW50LTE9InBsYXllck9iaiIgZGF0YS1wYXJ0aWNpcGFudC0yPSJHYW1lIj48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjEzNC43ODI4LDczNS43MTg4LDEyNC43ODI4LDczOS43MTg4LDEzNC43ODI4LDc0My43MTg4LDEzMC43ODI4LDczOS43MTg4IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxO3N0cm9rZS1kYXNoYXJyYXk6MiwyOyIgeDE9IjEyOC43ODI4IiB4Mj0iMjk4LjU1MzMiIHkxPSI3MzkuNzE4OCIgeTI9IjczOS43MTg4Ii8+PC9nPjxwYXRoIGQ9Ik04MC45NDM0LDc1NC43MTg4IEwxNDUuMzg2Myw3NTQuNzE4OCBMMTQ1LjM4NjMsNzYxLjg1MTYgTDEzNS4zODYzLDc3MS44NTE2IEw4MC45NDM0LDc3MS44NTE2IEw4MC45NDM0LDc1NC43MTg4IiBmaWxsPSIjRUVFRUVFIiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjEuNTsiLz48cmVjdCBmaWxsPSJub25lIiBoZWlnaHQ9IjU5LjI2NTYiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MS41OyIgd2lkdGg9IjE5NS43MzkzIiB4PSI4MC45NDM0IiB5PSI3NTQuNzE4OCIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBmb250LXdlaWdodD0iYm9sZCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxOS40NDI5IiB4PSI5NS45NDM0IiB5PSI3NjcuNzg1NiI+YWx0PC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjExIiBmb250LXdlaWdodD0iYm9sZCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI3Ni4wNTQyIiB4PSIxNjAuMzg2MyIgeT0iNzY2LjkyOTIiPlsmIzEyNDA3OyYjMTI0MjQ7JiMzMDUyODsmIzIyMzIwOyYjMTIzNzU7JiMxMjM4MztdPC90ZXh0PjxnIGNsYXNzPSJtZXNzYWdlIiBkYXRhLXBhcnRpY2lwYW50LTE9IkdhbWUiIGRhdGEtcGFydGljaXBhbnQtMj0iR2FtZSI+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjEyMy43ODI4IiB4Mj0iMTY1Ljc4MjgiIHkxPSI3OTIuOTg0NCIgeTI9Ijc5Mi45ODQ0Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjE2NS43ODI4IiB4Mj0iMTY1Ljc4MjgiIHkxPSI3OTIuOTg0NCIgeTI9IjgwNS45ODQ0Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjEyNC43ODI4IiB4Mj0iMTY1Ljc4MjgiIHkxPSI4MDUuOTg0NCIgeTI9IjgwNS45ODQ0Ii8+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSIxMzQuNzgyOCw4MDEuOTg0NCwxMjQuNzgyOCw4MDUuOTg0NCwxMzQuNzgyOCw4MDkuOTg0NCwxMzAuNzgyOCw4MDUuOTg0NCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjEyMy44OTk5IiB4PSIxMzAuNzgyOCIgeT0iNzg3LjkxODUiPm1vZGUgPSAnY2hlY2tGYWxsJzwvdGV4dD48L2c+PHBhdGggZD0iTTcwLjk0MzQsODM0Ljk4NDQgTDEzNS4zODYzLDgzNC45ODQ0IEwxMzUuMzg2Myw4NDIuMTE3MiBMMTI1LjM4NjMsODUyLjExNzIgTDcwLjk0MzQsODUyLjExNzIgTDcwLjk0MzQsODM0Ljk4NDQiIGZpbGw9IiNFRUVFRUUiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MS41OyIvPjxyZWN0IGZpbGw9Im5vbmUiIGhlaWdodD0iMTkwLjc5NjkiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MS41OyIgd2lkdGg9IjUzOS41NDU1IiB4PSI3MC45NDM0IiB5PSI4MzQuOTg0NCIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBmb250LXdlaWdodD0iYm9sZCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxOS40NDI5IiB4PSI4NS45NDM0IiB5PSI4NDguMDUxMyI+YWx0PC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjExIiBmb250LXdlaWdodD0iYm9sZCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMzUuMzYyMyIgeD0iMTUwLjM4NjMiIHk9Ijg0Ny4xOTQ4Ij5bbW9kZSA9PSAnY2hlY2tGYWxsJ108L3RleHQ+PHBhdGggZD0iTTgwLjk0MzQsODU5LjExNzIgTDE1Ny41Njc1LDg1OS4xMTcyIEwxNTcuNTY3NSw4NjYuMjUgTDE0Ny41Njc1LDg3Ni4yNSBMODAuOTQzNCw4NzYuMjUgTDgwLjk0MzQsODU5LjExNzIiIGZpbGw9IiNFRUVFRUUiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MS41OyIvPjxyZWN0IGZpbGw9Im5vbmUiIGhlaWdodD0iMTE3LjUzMTMiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MS41OyIgd2lkdGg9IjUxOS41NDU1IiB4PSI4MC45NDM0IiB5PSI4NTkuMTE3MiIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBmb250LXdlaWdodD0iYm9sZCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIzMS42MjQiIHg9Ijk1Ljk0MzQiIHk9Ijg3Mi4xODQxIj5sb29wPC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjExIiBmb250LXdlaWdodD0iYm9sZCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI0My4wNTQ1IiB4PSIxNzIuNTY3NSIgeT0iODcxLjMyNzYiPlsmIzMzODUzOyYjMTk5Nzk7JiMyMDAxMztdPC90ZXh0PjxnIGNsYXNzPSJtZXNzYWdlIiBkYXRhLXBhcnRpY2lwYW50LTE9IkdhbWUiIGRhdGEtcGFydGljaXBhbnQtMj0iU3RhZ2UiPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iNDM3LjIxNzgsODkzLjM4MjgsNDQ3LjIxNzgsODk3LjM4MjgsNDM3LjIxNzgsOTAxLjM4MjgsNDQxLjIxNzgsODk3LjM4MjgiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iMTIzLjc4MjgiIHgyPSI0NDMuMjE3OCIgeTE9Ijg5Ny4zODI4IiB5Mj0iODk3LjM4MjgiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI5My4zOTk0IiB4PSIxMzAuNzgyOCIgeT0iODkyLjMxNjkiPmFwcGx5R3Jhdml0eSgpPC90ZXh0PjwvZz48ZyBjbGFzcz0ibWVzc2FnZSIgZGF0YS1wYXJ0aWNpcGFudC0xPSJTdGFnZSIgZGF0YS1wYXJ0aWNpcGFudC0yPSJTdGFnZSI+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjQ1OS4yMTc4IiB4Mj0iNTAxLjIxNzgiIHkxPSI5MjYuNTE1NiIgeTI9IjkyNi41MTU2Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjUwMS4yMTc4IiB4Mj0iNTAxLjIxNzgiIHkxPSI5MjYuNTE1NiIgeTI9IjkzOS41MTU2Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjQ2MC4yMTc4IiB4Mj0iNTAxLjIxNzgiIHkxPSI5MzkuNTE1NiIgeTI9IjkzOS41MTU2Ii8+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSI0NzAuMjE3OCw5MzUuNTE1Niw0NjAuMjE3OCw5MzkuNTE1Niw0NzAuMjE3OCw5NDMuNTE1Niw0NjYuMjE3OCw5MzkuNTE1NiIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjExMi4yNzExIiB4PSI0NjYuMjE3OCIgeT0iOTIxLjQ0OTciPiYjMjA4NDA7JiMxMjQwNzsmIzEyNDI0OyYjMTI0MzQ7MSYjMTI1MTA7JiMxMjQ3MzsmIzMzODUzOyYjMTk5Nzk7PC90ZXh0PjwvZz48ZyBjbGFzcz0ibWVzc2FnZSIgZGF0YS1wYXJ0aWNpcGFudC0xPSJTdGFnZSIgZGF0YS1wYXJ0aWNpcGFudC0yPSJHYW1lIj48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjEzNC43ODI4LDk2NC42NDg0LDEyNC43ODI4LDk2OC42NDg0LDEzNC43ODI4LDk3Mi42NDg0LDEzMC43ODI4LDk2OC42NDg0IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxO3N0cm9rZS1kYXNoYXJyYXk6MiwyOyIgeDE9IjEyOC43ODI4IiB4Mj0iNDUzLjIxNzgiIHkxPSI5NjguNjQ4NCIgeTI9Ijk2OC42NDg0Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNjEuODgzMyIgeD0iMTQwLjc4MjgiIHk9Ijk2My41ODI1Ij5oYXNGYWxsZW48L3RleHQ+PC9nPjxnIGNsYXNzPSJtZXNzYWdlIiBkYXRhLXBhcnRpY2lwYW50LTE9IkdhbWUiIGRhdGEtcGFydGljaXBhbnQtMj0iR2FtZSI+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjEyMy43ODI4IiB4Mj0iMTY1Ljc4MjgiIHkxPSIxMDA0Ljc4MTMiIHkyPSIxMDA0Ljc4MTMiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iMTY1Ljc4MjgiIHgyPSIxNjUuNzgyOCIgeTE9IjEwMDQuNzgxMyIgeTI9IjEwMTcuNzgxMyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSIxMjQuNzgyOCIgeDI9IjE2NS43ODI4IiB5MT0iMTAxNy43ODEzIiB5Mj0iMTAxNy43ODEzIi8+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSIxMzQuNzgyOCwxMDEzLjc4MTMsMTI0Ljc4MjgsMTAxNy43ODEzLDEzNC43ODI4LDEwMjEuNzgxMywxMzAuNzgyOCwxMDE3Ljc4MTMiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMzcuNTI4MyIgeD0iMTMwLjc4MjgiIHk9Ijk5OS43MTUzIj5tb2RlID0gJ2NoZWNrRXJhc2UnPC90ZXh0PjwvZz48cGF0aCBkPSJNNjAuOTQzNCwxMDM5Ljc4MTMgTDEyNS4zODYzLDEwMzkuNzgxMyBMMTI1LjM4NjMsMTA0Ni45MTQxIEwxMTUuMzg2MywxMDU2LjkxNDEgTDYwLjk0MzQsMTA1Ni45MTQxIEw2MC45NDM0LDEwMzkuNzgxMyIgZmlsbD0iI0VFRUVFRSIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxLjU7Ii8+PHJlY3QgZmlsbD0ibm9uZSIgaGVpZ2h0PSI3MzQuNDYwOSIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxLjU7IiB3aWR0aD0iNjk3LjY4OTIiIHg9IjYwLjk0MzQiIHk9IjEwMzkuNzgxMyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBmb250LXdlaWdodD0iYm9sZCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxOS40NDI5IiB4PSI3NS45NDM0IiB5PSIxMDUyLjg0ODEiPmFsdDwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMSIgZm9udC13ZWlnaHQ9ImJvbGQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTQ3LjI1MzkiIHg9IjE0MC4zODYzIiB5PSIxMDUxLjk5MTciPlttb2RlID09ICdjaGVja0VyYXNlJ108L3RleHQ+PGcgY2xhc3M9Im1lc3NhZ2UiIGRhdGEtcGFydGljaXBhbnQtMT0iR2FtZSIgZGF0YS1wYXJ0aWNpcGFudC0yPSJTdGFnZSI+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSI0MzcuMjE3OCwxMDc0LjA0NjksNDQ3LjIxNzgsMTA3OC4wNDY5LDQzNy4yMTc4LDEwODIuMDQ2OSw0NDEuMjE3OCwxMDc4LjA0NjkiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iMTIzLjc4MjgiIHgyPSI0NDMuMjE3OCIgeTE9IjEwNzguMDQ2OSIgeTI9IjEwNzguMDQ2OSIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9Ijg0LjUiIHg9IjEzMC43ODI4IiB5PSIxMDcyLjk4MSI+Y2hlY2tFcmFzZSgpPC90ZXh0PjwvZz48ZyBjbGFzcz0ibWVzc2FnZSIgZGF0YS1wYXJ0aWNpcGFudC0xPSJTdGFnZSIgZGF0YS1wYXJ0aWNpcGFudC0yPSJTdGFnZSI+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjQ1OS4yMTc4IiB4Mj0iNTAxLjIxNzgiIHkxPSIxMTA3LjE3OTciIHkyPSIxMTA3LjE3OTciLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iNTAxLjIxNzgiIHgyPSI1MDEuMjE3OCIgeTE9IjExMDcuMTc5NyIgeTI9IjExMjAuMTc5NyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSI0NjAuMjE3OCIgeDI9IjUwMS4yMTc4IiB5MT0iMTEyMC4xNzk3IiB5Mj0iMTEyMC4xNzk3Ii8+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSI0NzAuMjE3OCwxMTE2LjE3OTcsNDYwLjIxNzgsMTEyMC4xNzk3LDQ3MC4yMTc4LDExMjQuMTc5Nyw0NjYuMjE3OCwxMTIwLjE3OTciIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMTIuMjcxMSIgeD0iNDY2LjIxNzgiIHk9IjExMDIuMTEzOCI+NCYjMjA0OTE7JiMyMDE5NzsmIzE5OTc4OyYjMTIzOTg7JiMyMTUxNjsmIzMzMzk0OyYjMjEwMjg7JiMyMzQ1MDs8L3RleHQ+PC9nPjxnIGNsYXNzPSJtZXNzYWdlIiBkYXRhLXBhcnRpY2lwYW50LTE9IlN0YWdlIiBkYXRhLXBhcnRpY2lwYW50LTI9IkdhbWUiPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iMTM0Ljc4MjgsMTE0NS4zMTI1LDEyNC43ODI4LDExNDkuMzEyNSwxMzQuNzgyOCwxMTUzLjMxMjUsMTMwLjc4MjgsMTE0OS4zMTI1IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxO3N0cm9rZS1kYXNoYXJyYXk6MiwyOyIgeDE9IjEyOC43ODI4IiB4Mj0iNDUzLjIxNzgiIHkxPSIxMTQ5LjMxMjUiIHkyPSIxMTQ5LjMxMjUiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI2MC42ODM2IiB4PSIxNDAuNzgyOCIgeT0iMTE0NC4yNDY2Ij5lcmFzZUluZm88L3RleHQ+PC9nPjxwYXRoIGQ9Ik03MC45NDM0LDExNjQuMzEyNSBMMTM1LjM4NjMsMTE2NC4zMTI1IEwxMzUuMzg2MywxMTcxLjQ0NTMgTDEyNS4zODYzLDExODEuNDQ1MyBMNzAuOTQzNCwxMTgxLjQ0NTMgTDcwLjk0MzQsMTE2NC4zMTI1IiBmaWxsPSIjRUVFRUVFIiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjEuNTsiLz48cmVjdCBmaWxsPSJub25lIiBoZWlnaHQ9IjYwMi45Mjk3IiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjEuNTsiIHdpZHRoPSI2NzcuNjg5MiIgeD0iNzAuOTQzNCIgeT0iMTE2NC4zMTI1Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGZvbnQtd2VpZ2h0PSJib2xkIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjE5LjQ0MjkiIHg9Ijg1Ljk0MzQiIHk9IjExNzcuMzc5NCI+YWx0PC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjExIiBmb250LXdlaWdodD0iYm9sZCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI1NC4wNTQ0IiB4PSIxNTAuMzg2MyIgeT0iMTE3Ni41MjI5Ij5bJiMyODA0MDsmIzIxNDM1OyYjMTIzNTQ7JiMxMjQyNjtdPC90ZXh0PjxnIGNsYXNzPSJtZXNzYWdlIiBkYXRhLXBhcnRpY2lwYW50LTE9IkdhbWUiIGRhdGEtcGFydGljaXBhbnQtMj0iR2FtZSI+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjEyMy43ODI4IiB4Mj0iMTY1Ljc4MjgiIHkxPSIxMjAyLjU3ODEiIHkyPSIxMjAyLjU3ODEiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iMTY1Ljc4MjgiIHgyPSIxNjUuNzgyOCIgeTE9IjEyMDIuNTc4MSIgeTI9IjEyMTUuNTc4MSIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSIxMjQuNzgyOCIgeDI9IjE2NS43ODI4IiB5MT0iMTIxNS41NzgxIiB5Mj0iMTIxNS41NzgxIi8+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSIxMzQuNzgyOCwxMjExLjU3ODEsMTI0Ljc4MjgsMTIxNS41NzgxLDEzNC43ODI4LDEyMTkuNTc4MSwxMzAuNzgyOCwxMjE1LjU3ODEiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxNDEuMTI3NCIgeD0iMTMwLjc4MjgiIHk9IjExOTcuNTEyMiI+Y29tYmluYXRpb25Db3VudCsrPC90ZXh0PjwvZz48ZyBjbGFzcz0ibWVzc2FnZSIgZGF0YS1wYXJ0aWNpcGFudC0xPSJHYW1lIiBkYXRhLXBhcnRpY2lwYW50LTI9IlNjb3JlIj48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjU4My40ODksMTI0MC43MTA5LDU5My40ODksMTI0NC43MTA5LDU4My40ODksMTI0OC43MTA5LDU4Ny40ODksMTI0NC43MTA5IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjEyMy43ODI4IiB4Mj0iNTg5LjQ4OSIgeTE9IjEyNDQuNzEwOSIgeTI9IjEyNDQuNzEwOSIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjE1MS40NTUxIiB4PSIxMzAuNzgyOCIgeT0iMTIzOS42NDUiPmFkZFNjb3JlKGNvdW50LCBjaGFpbik8L3RleHQ+PC9nPjxnIGNsYXNzPSJtZXNzYWdlIiBkYXRhLXBhcnRpY2lwYW50LTE9IlNjb3JlIiBkYXRhLXBhcnRpY2lwYW50LTI9IlNjb3JlIj48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iNjA1LjQ4OSIgeDI9IjY0Ny40ODkiIHkxPSIxMjg4Ljk3NjYiIHkyPSIxMjg4Ljk3NjYiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iNjQ3LjQ4OSIgeDI9IjY0Ny40ODkiIHkxPSIxMjg4Ljk3NjYiIHkyPSIxMzAxLjk3NjYiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iNjA2LjQ4OSIgeDI9IjY0Ny40ODkiIHkxPSIxMzAxLjk3NjYiIHkyPSIxMzAxLjk3NjYiLz48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjYxNi40ODksMTI5Ny45NzY2LDYwNi40ODksMTMwMS45NzY2LDYxNi40ODksMTMwNS45NzY2LDYxMi40ODksMTMwMS45NzY2IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNjUuMDAwMSIgeD0iNjEyLjQ4OSIgeT0iMTI2OC43Nzc4Ij4mIzEyNDczOyYjMTI0Njc7JiMxMjQ1MDsmIzM1MzM2OyYjMzE2Mzk7PC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjExNC4xNDM3IiB4PSI2MTIuNDg5IiB5PSIxMjgzLjkxMDYiPigmIzM2ODk5OyYjMzc3ODI7JiMxMjUwODsmIzEyNTQwOyYjMTI0OTA7JiMxMjQ3MzsmIzIxNTQ3OyYjMTI0MTY7KTwvdGV4dD48L2c+PGcgY2xhc3M9Im1lc3NhZ2UiIGRhdGEtcGFydGljaXBhbnQtMT0iU2NvcmUiIGRhdGEtcGFydGljaXBhbnQtMj0iR2FtZSI+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSIxMzQuNzgyOCwxMzExLjk3NjYsMTI0Ljc4MjgsMTMxNS45NzY2LDEzNC43ODI4LDEzMTkuOTc2NiwxMzAuNzgyOCwxMzE1Ljk3NjYiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7c3Ryb2tlLWRhc2hhcnJheToyLDI7IiB4MT0iMTI4Ljc4MjgiIHgyPSI1OTkuNDg5IiB5MT0iMTMxNS45NzY2IiB5Mj0iMTMxNS45NzY2Ii8+PC9nPjxnIGNsYXNzPSJtZXNzYWdlIiBkYXRhLXBhcnRpY2lwYW50LTE9IkdhbWUiIGRhdGEtcGFydGljaXBhbnQtMj0iU3RhZ2UiPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iNDM3LjIxNzgsMTM0MS4xMDk0LDQ0Ny4yMTc4LDEzNDUuMTA5NCw0MzcuMjE3OCwxMzQ5LjEwOTQsNDQxLjIxNzgsMTM0NS4xMDk0IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjEyMy43ODI4IiB4Mj0iNDQzLjIxNzgiIHkxPSIxMzQ1LjEwOTQiIHkyPSIxMzQ1LjEwOTQiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxNTIuMTE1MiIgeD0iMTMwLjc4MjgiIHk9IjEzNDAuMDQzNSI+ZXJhc2VCb2FyZHMoZXJhc2VJbmZvKTwvdGV4dD48L2c+PGcgY2xhc3M9Im1lc3NhZ2UiIGRhdGEtcGFydGljaXBhbnQtMT0iU3RhZ2UiIGRhdGEtcGFydGljaXBhbnQtMj0iU3RhZ2UiPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSI0NTkuMjE3OCIgeDI9IjUwMS4yMTc4IiB5MT0iMTM3NC4yNDIyIiB5Mj0iMTM3NC4yNDIyIi8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjUwMS4yMTc4IiB4Mj0iNTAxLjIxNzgiIHkxPSIxMzc0LjI0MjIiIHkyPSIxMzg3LjI0MjIiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iNDYwLjIxNzgiIHgyPSI1MDEuMjE3OCIgeTE9IjEzODcuMjQyMiIgeTI9IjEzODcuMjQyMiIvPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iNDcwLjIxNzgsMTM4My4yNDIyLDQ2MC4yMTc4LDEzODcuMjQyMiw0NzAuMjE3OCwxMzkxLjI0MjIsNDY2LjIxNzgsMTM4Ny4yNDIyIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNjUuMDAwMSIgeD0iNDY2LjIxNzgiIHk9IjEzNjkuMTc2MyI+JiMxMjQwNzsmIzEyNDI0OyYjMTI0MzQ7JiMyODA0MDsmIzIxNDM1OzwvdGV4dD48L2c+PGcgY2xhc3M9Im1lc3NhZ2UiIGRhdGEtcGFydGljaXBhbnQtMT0iU3RhZ2UiIGRhdGEtcGFydGljaXBhbnQtMj0iR2FtZSI+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSIxMzQuNzgyOCwxMzk3LjI0MjIsMTI0Ljc4MjgsMTQwMS4yNDIyLDEzNC43ODI4LDE0MDUuMjQyMiwxMzAuNzgyOCwxNDAxLjI0MjIiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7c3Ryb2tlLWRhc2hhcnJheToyLDI7IiB4MT0iMTI4Ljc4MjgiIHgyPSI0NTMuMjE3OCIgeTE9IjE0MDEuMjQyMiIgeTI9IjE0MDEuMjQyMiIvPjwvZz48ZyBjbGFzcz0ibWVzc2FnZSIgZGF0YS1wYXJ0aWNpcGFudC0xPSJHYW1lIiBkYXRhLXBhcnRpY2lwYW50LTI9IkdhbWUiPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSIxMjMuNzgyOCIgeDI9IjE2NS43ODI4IiB5MT0iMTQzMC4zNzUiIHkyPSIxNDMwLjM3NSIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSIxNjUuNzgyOCIgeDI9IjE2NS43ODI4IiB5MT0iMTQzMC4zNzUiIHkyPSIxNDQzLjM3NSIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSIxMjQuNzgyOCIgeDI9IjE2NS43ODI4IiB5MT0iMTQ0My4zNzUiIHkyPSIxNDQzLjM3NSIvPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iMTM0Ljc4MjgsMTQzOS4zNzUsMTI0Ljc4MjgsMTQ0My4zNzUsMTM0Ljc4MjgsMTQ0Ny4zNzUsMTMwLjc4MjgsMTQ0My4zNzUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMTEuMzU2OSIgeD0iMTMwLjc4MjgiIHk9IjE0MjUuMzA5MSI+bW9kZSA9ICdlcmFzaW5nJzwvdGV4dD48L2c+PGxpbmUgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxO3N0cm9rZS1kYXNoYXJyYXk6MiwyOyIgeDE9IjcwLjk0MzQiIHgyPSI3NDguNjMyNiIgeTE9IjE0NTIuMzc1IiB5Mj0iMTQ1Mi4zNzUiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMSIgZm9udC13ZWlnaHQ9ImJvbGQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNTQuMDU0NCIgeD0iNzUuOTQzNCIgeT0iMTQ2Mi41ODU0Ij5bJiMyODA0MDsmIzIxNDM1OyYjMTIzOTQ7JiMxMjM3NTtdPC90ZXh0PjxnIGNsYXNzPSJtZXNzYWdlIiBkYXRhLXBhcnRpY2lwYW50LTE9IkdhbWUiIGRhdGEtcGFydGljaXBhbnQtMj0iU3RhZ2UiPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iNDM3LjIxNzgsMTQ4My4zMTI1LDQ0Ny4yMTc4LDE0ODcuMzEyNSw0MzcuMjE3OCwxNDkxLjMxMjUsNDQxLjIxNzgsMTQ4Ny4zMTI1IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjEyMy43ODI4IiB4Mj0iNDQzLjIxNzgiIHkxPSIxNDg3LjMxMjUiIHkyPSIxNDg3LjMxMjUiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMDcuNDk3NiIgeD0iMTMwLjc4MjgiIHk9IjE0ODIuMjQ2NiI+Y2hlY2taZW5rZXNoaSgpPC90ZXh0PjwvZz48ZyBjbGFzcz0ibWVzc2FnZSIgZGF0YS1wYXJ0aWNpcGFudC0xPSJTdGFnZSIgZGF0YS1wYXJ0aWNpcGFudC0yPSJTdGFnZSI+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjQ1OS4yMTc4IiB4Mj0iNTAxLjIxNzgiIHkxPSIxNTE2LjQ0NTMiIHkyPSIxNTE2LjQ0NTMiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iNTAxLjIxNzgiIHgyPSI1MDEuMjE3OCIgeTE9IjE1MTYuNDQ1MyIgeTI9IjE1MjkuNDQ1MyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSI0NjAuMjE3OCIgeDI9IjUwMS4yMTc4IiB5MT0iMTUyOS40NDUzIiB5Mj0iMTUyOS40NDUzIi8+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSI0NzAuMjE3OCwxNTI1LjQ0NTMsNDYwLjIxNzgsMTUyOS40NDUzLDQ3MC4yMTc4LDE1MzMuNDQ1Myw0NjYuMjE3OCwxNTI5LjQ0NTMiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMDQuMDAwMSIgeD0iNDY2LjIxNzgiIHk9IjE1MTEuMzc5NCI+JiMyMDg0MDsmIzEyNTEwOyYjMTI0NzM7JiMzMTM1NDsmIzEyNDgxOyYjMTI0NTU7JiMxMjQ4MzsmIzEyNDYzOzwvdGV4dD48L2c+PGcgY2xhc3M9Im1lc3NhZ2UiIGRhdGEtcGFydGljaXBhbnQtMT0iU3RhZ2UiIGRhdGEtcGFydGljaXBhbnQtMj0iR2FtZSI+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSIxMzQuNzgyOCwxNTU0LjU3ODEsMTI0Ljc4MjgsMTU1OC41NzgxLDEzNC43ODI4LDE1NjIuNTc4MSwxMzAuNzgyOCwxNTU4LjU3ODEiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7c3Ryb2tlLWRhc2hhcnJheToyLDI7IiB4MT0iMTI4Ljc4MjgiIHgyPSI0NTMuMjE3OCIgeTE9IjE1NTguNTc4MSIgeTI9IjE1NTguNTc4MSIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjY5LjY3ODIiIHg9IjE0MC43ODI4IiB5PSIxNTUzLjUxMjIiPmlzWmVua2VzaGk8L3RleHQ+PC9nPjxwYXRoIGQ9Ik04MC45NDM0LDE1NzMuNTc4MSBMMTQ1LjM4NjMsMTU3My41NzgxIEwxNDUuMzg2MywxNTgwLjcxMDkgTDEzNS4zODYzLDE1OTAuNzEwOSBMODAuOTQzNCwxNTkwLjcxMDkgTDgwLjk0MzQsMTU3My41NzgxIiBmaWxsPSIjRUVFRUVFIiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjEuNTsiLz48cmVjdCBmaWxsPSJub25lIiBoZWlnaHQ9IjEwMi4zOTg0IiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjEuNTsiIHdpZHRoPSI2MjUuNjI5NiIgeD0iODAuOTQzNCIgeT0iMTU3My41NzgxIi8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGZvbnQtd2VpZ2h0PSJib2xkIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjE5LjQ0MjkiIHg9Ijk1Ljk0MzQiIHk9IjE1ODYuNjQ1Ij5hbHQ8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTEiIGZvbnQtd2VpZ2h0PSJib2xkIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjQzLjA1NDUiIHg9IjE2MC4zODYzIiB5PSIxNTg1Ljc4ODYiPlsmIzIwODQwOyYjMjgwNDA7JiMxMjM3NTtdPC90ZXh0PjxnIGNsYXNzPSJtZXNzYWdlIiBkYXRhLXBhcnRpY2lwYW50LTE9IkdhbWUiIGRhdGEtcGFydGljaXBhbnQtMj0iU2NvcmUiPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iNTgzLjQ4OSwxNjA3Ljg0MzgsNTkzLjQ4OSwxNjExLjg0MzgsNTgzLjQ4OSwxNjE1Ljg0MzgsNTg3LjQ4OSwxNjExLjg0MzgiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iMTIzLjc4MjgiIHgyPSI1ODkuNDg5IiB5MT0iMTYxMS44NDM4IiB5Mj0iMTYxMS44NDM4Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTM0LjAzMDgiIHg9IjEzMC43ODI4IiB5PSIxNjA2Ljc3NzgiPmFkZFplbmtlc2hpQm9udXMoKTwvdGV4dD48L2c+PGcgY2xhc3M9Im1lc3NhZ2UiIGRhdGEtcGFydGljaXBhbnQtMT0iU2NvcmUiIGRhdGEtcGFydGljaXBhbnQtMj0iU2NvcmUiPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSI2MDUuNDg5IiB4Mj0iNjQ3LjQ4OSIgeTE9IjE2NDAuOTc2NiIgeTI9IjE2NDAuOTc2NiIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSI2NDcuNDg5IiB4Mj0iNjQ3LjQ4OSIgeTE9IjE2NDAuOTc2NiIgeTI9IjE2NTMuOTc2NiIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSI2MDYuNDg5IiB4Mj0iNjQ3LjQ4OSIgeTE9IjE2NTMuOTc2NiIgeTI9IjE2NTMuOTc2NiIvPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iNjE2LjQ4OSwxNjQ5Ljk3NjYsNjA2LjQ4OSwxNjUzLjk3NjYsNjE2LjQ4OSwxNjU3Ljk3NjYsNjEyLjQ4OSwxNjUzLjk3NjYiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI3Mi4wODQiIHg9IjYxMi40ODkiIHk9IjE2MzUuOTEwNiI+MzYwMCYjMjg4NTc7JiMyMTE1MjsmIzMxNjM5OzwvdGV4dD48L2c+PGcgY2xhc3M9Im1lc3NhZ2UiIGRhdGEtcGFydGljaXBhbnQtMT0iU2NvcmUiIGRhdGEtcGFydGljaXBhbnQtMj0iR2FtZSI+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSIxMzQuNzgyOCwxNjYzLjk3NjYsMTI0Ljc4MjgsMTY2Ny45NzY2LDEzNC43ODI4LDE2NzEuOTc2NiwxMzAuNzgyOCwxNjY3Ljk3NjYiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7c3Ryb2tlLWRhc2hhcnJheToyLDI7IiB4MT0iMTI4Ljc4MjgiIHgyPSI1OTkuNDg5IiB5MT0iMTY2Ny45NzY2IiB5Mj0iMTY2Ny45NzY2Ii8+PC9nPjxnIGNsYXNzPSJtZXNzYWdlIiBkYXRhLXBhcnRpY2lwYW50LTE9IkdhbWUiIGRhdGEtcGFydGljaXBhbnQtMj0iR2FtZSI+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjEyMy43ODI4IiB4Mj0iMTY1Ljc4MjgiIHkxPSIxNzA0LjEwOTQiIHkyPSIxNzA0LjEwOTQiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iMTY1Ljc4MjgiIHgyPSIxNjUuNzgyOCIgeTE9IjE3MDQuMTA5NCIgeTI9IjE3MTcuMTA5NCIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSIxMjQuNzgyOCIgeDI9IjE2NS43ODI4IiB5MT0iMTcxNy4xMDk0IiB5Mj0iMTcxNy4xMDk0Ii8+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSIxMzQuNzgyOCwxNzEzLjEwOTQsMTI0Ljc4MjgsMTcxNy4xMDk0LDEzNC43ODI4LDE3MjEuMTA5NCwxMzAuNzgyOCwxNzE3LjEwOTQiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxNDYuNzcwNSIgeD0iMTMwLjc4MjgiIHk9IjE2OTkuMDQzNSI+Y29tYmluYXRpb25Db3VudCA9IDA8L3RleHQ+PC9nPjxnIGNsYXNzPSJtZXNzYWdlIiBkYXRhLXBhcnRpY2lwYW50LTE9IkdhbWUiIGRhdGEtcGFydGljaXBhbnQtMj0iR2FtZSI+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjEyMy43ODI4IiB4Mj0iMTY1Ljc4MjgiIHkxPSIxNzQ2LjI0MjIiIHkyPSIxNzQ2LjI0MjIiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iMTY1Ljc4MjgiIHgyPSIxNjUuNzgyOCIgeTE9IjE3NDYuMjQyMiIgeTI9IjE3NTkuMjQyMiIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSIxMjQuNzgyOCIgeDI9IjE2NS43ODI4IiB5MT0iMTc1OS4yNDIyIiB5Mj0iMTc1OS4yNDIyIi8+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSIxMzQuNzgyOCwxNzU1LjI0MjIsMTI0Ljc4MjgsMTc1OS4yNDIyLDEzNC43ODI4LDE3NjMuMjQyMiwxMzAuNzgyOCwxNzU5LjI0MjIiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMjEuNzY3MSIgeD0iMTMwLjc4MjgiIHk9IjE3NDEuMTc2MyI+bW9kZSA9ICduZXdQdXlvJzwvdGV4dD48L2c+PHBhdGggZD0iTTgwLjk0MzQsMTc4OC4yNDIyIEwxNDUuMzg2MywxNzg4LjI0MjIgTDE0NS4zODYzLDE3OTUuMzc1IEwxMzUuMzg2MywxODA1LjM3NSBMODAuOTQzNCwxODA1LjM3NSBMODAuOTQzNCwxNzg4LjI0MjIiIGZpbGw9IiNFRUVFRUUiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MS41OyIvPjxyZWN0IGZpbGw9Im5vbmUiIGhlaWdodD0iNjcuMzk4NCIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxLjU7IiB3aWR0aD0iMzQwLjczOTQiIHg9IjgwLjk0MzQiIHk9IjE3ODguMjQyMiIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBmb250LXdlaWdodD0iYm9sZCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxOS40NDI5IiB4PSI5NS45NDM0IiB5PSIxODAxLjMwOTEiPmFsdDwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMSIgZm9udC13ZWlnaHQ9ImJvbGQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTIzLjU2NzQiIHg9IjE2MC4zODYzIiB5PSIxODAwLjQ1MjYiPlttb2RlID09ICdlcmFzaW5nJ108L3RleHQ+PGcgY2xhc3M9Im1lc3NhZ2UiIGRhdGEtcGFydGljaXBhbnQtMT0iR2FtZSIgZGF0YS1wYXJ0aWNpcGFudC0yPSJHYW1lIj48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iMTIzLjc4MjgiIHgyPSIxNjUuNzgyOCIgeTE9IjE4MzAuNTc0MiIgeTI9IjE4MzAuNTc0MiIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSIxNjUuNzgyOCIgeDI9IjE2NS43ODI4IiB5MT0iMTgzMC41NzQyIiB5Mj0iMTg0My41NzQyIi8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjEyNC43ODI4IiB4Mj0iMTY1Ljc4MjgiIHkxPSIxODQzLjU3NDIiIHkyPSIxODQzLjU3NDIiLz48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjEzNC43ODI4LDE4MzkuNTc0MiwxMjQuNzgyOCwxODQzLjU3NDIsMTM0Ljc4MjgsMTg0Ny41NzQyLDEzMC43ODI4LDE4NDMuNTc0MiIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjEyMy44OTk5IiB4PSIxMzAuNzgyOCIgeT0iMTgyNS41MDgzIj5tb2RlID0gJ2NoZWNrRmFsbCc8L3RleHQ+PC9nPjxwYXRoIGQ9Ik0yNzUuODk5OSwxODEwLjM3NSBMMjc1Ljg5OTksMTg1MC4zNzUgTDQwMC44OTk5LDE4NTAuMzc1IEw0MDAuODk5OSwxODIwLjM3NSBMMzkwLjg5OTksMTgxMC4zNzUgTDI3NS44OTk5LDE4MTAuMzc1IiBmaWxsPSIjRkVGRkREIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiLz48cGF0aCBkPSJNMzkwLjg5OTksMTgxMC4zNzUgTDM5MC44OTk5LDE4MjAuMzc1IEw0MDAuODk5OSwxODIwLjM3NSBMMzkwLjg5OTksMTgxMC4zNzUiIGZpbGw9IiNGRUZGREQiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjkxLjAwMDEiIHg9IjI4MS44OTk5IiB5PSIxODI3LjQ0MTkiPiYjMzY4OTk7JiMzNzc4MjsmIzIxMDI4OyYjMjM0NTA7JiMxMjM5ODsmIzEyMzgzOyYjMTI0MTc7PC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjEwNC4wMDAxIiB4PSIyODEuODk5OSIgeT0iMTg0Mi41NzQ3Ij4mIzIwODc3OyYjMjQyMzA7JiMzMzg1MzsmIzE5OTc5OyYjMTI0ODE7JiMxMjQ1NTsmIzEyNDgzOyYjMTI0NjM7PC90ZXh0PjxwYXRoIGQ9Ik03MC45NDM0LDE4NjkuNjQwNiBMMTM1LjM4NjMsMTg2OS42NDA2IEwxMzUuMzg2MywxODc2Ljc3MzQgTDEyNS4zODYzLDE4ODYuNzczNCBMNzAuOTQzNCwxODg2Ljc3MzQgTDcwLjk0MzQsMTg2OS42NDA2IiBmaWxsPSIjRUVFRUVFIiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjEuNTsiLz48cmVjdCBmaWxsPSJub25lIiBoZWlnaHQ9IjMwNyIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxLjU7IiB3aWR0aD0iNDIwLjUwMiIgeD0iNzAuOTQzNCIgeT0iMTg2OS42NDA2Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGZvbnQtd2VpZ2h0PSJib2xkIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjE5LjQ0MjkiIHg9Ijg1Ljk0MzQiIHk9IjE4ODIuNzA3NSI+YWx0PC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjExIiBmb250LXdlaWdodD0iYm9sZCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMzMuMzEwNSIgeD0iMTUwLjM4NjMiIHk9IjE4ODEuODUxMSI+W21vZGUgPT0gJ25ld1B1eW8nXTwvdGV4dD48ZyBjbGFzcz0ibWVzc2FnZSIgZGF0YS1wYXJ0aWNpcGFudC0xPSJHYW1lIiBkYXRhLXBhcnRpY2lwYW50LTI9InBsYXllck9iaiI+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSIyODIuNTUzMywxOTAzLjkwNjMsMjkyLjU1MzMsMTkwNy45MDYzLDI4Mi41NTMzLDE5MTEuOTA2MywyODYuNTUzMywxOTA3LjkwNjMiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iMTIzLjc4MjgiIHgyPSIyODguNTUzMyIgeTE9IjE5MDcuOTA2MyIgeTI9IjE5MDcuOTA2MyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjExMS43NzU5IiB4PSIxMzAuNzgyOCIgeT0iMTkwMi44NDAzIj5jcmVhdGVOZXdQdXlvKCk8L3RleHQ+PC9nPjxnIGNsYXNzPSJtZXNzYWdlIiBkYXRhLXBhcnRpY2lwYW50LTE9InBsYXllck9iaiIgZGF0YS1wYXJ0aWNpcGFudC0yPSJHYW1lIj48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjEzNC43ODI4LDE5MTcuOTA2MywxMjQuNzgyOCwxOTIxLjkwNjMsMTM0Ljc4MjgsMTkyNS45MDYzLDEzMC43ODI4LDE5MjEuOTA2MyIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTtzdHJva2UtZGFzaGFycmF5OjIsMjsiIHgxPSIxMjguNzgyOCIgeDI9IjI5OC41NTMzIiB5MT0iMTkyMS45MDYzIiB5Mj0iMTkyMS45MDYzIi8+PC9nPjxnIGNsYXNzPSJtZXNzYWdlIiBkYXRhLXBhcnRpY2lwYW50LTE9IkdhbWUiIGRhdGEtcGFydGljaXBhbnQtMj0icGxheWVyT2JqIj48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjI4Mi41NTMzLDE5NDcuMDM5MSwyOTIuNTUzMywxOTUxLjAzOTEsMjgyLjU1MzMsMTk1NS4wMzkxLDI4Ni41NTMzLDE5NTEuMDM5MSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSIxMjMuNzgyOCIgeDI9IjI4OC41NTMzIiB5MT0iMTk1MS4wMzkxIiB5Mj0iMTk1MS4wMzkxIi8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTE4LjE3NDMiIHg9IjEzMC43ODI4IiB5PSIxOTQ1Ljk3MzEiPmNoZWNrR2FtZU92ZXIoKTwvdGV4dD48L2c+PGcgY2xhc3M9Im1lc3NhZ2UiIGRhdGEtcGFydGljaXBhbnQtMT0icGxheWVyT2JqIiBkYXRhLXBhcnRpY2lwYW50LTI9IlN0YWdlIj48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjQzNy4yMTc4LDE5NzYuMTcxOSw0NDcuMjE3OCwxOTgwLjE3MTksNDM3LjIxNzgsMTk4NC4xNzE5LDQ0MS4yMTc4LDE5ODAuMTcxOSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSIzMDQuNTUzMyIgeDI9IjQ0My4yMTc4IiB5MT0iMTk4MC4xNzE5IiB5Mj0iMTk4MC4xNzE5Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iODYuODY3NyIgeD0iMzExLjU1MzMiIHk9IjE5NzUuMTA2Ij5nZXRQdXlvKHgsIHkpPC90ZXh0PjwvZz48ZyBjbGFzcz0ibWVzc2FnZSIgZGF0YS1wYXJ0aWNpcGFudC0xPSJTdGFnZSIgZGF0YS1wYXJ0aWNpcGFudC0yPSJwbGF5ZXJPYmoiPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iMzE1LjU1MzMsMjAwNS4zMDQ3LDMwNS41NTMzLDIwMDkuMzA0NywzMTUuNTUzMywyMDEzLjMwNDcsMzExLjU1MzMsMjAwOS4zMDQ3IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxO3N0cm9rZS1kYXNoYXJyYXk6MiwyOyIgeDE9IjMwOS41NTMzIiB4Mj0iNDUzLjIxNzgiIHkxPSIyMDA5LjMwNDciIHkyPSIyMDA5LjMwNDciLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI2Ni4wNzkxIiB4PSIzMjEuNTUzMyIgeT0iMjAwNC4yMzg4Ij5wdXlvQ29sb3I8L3RleHQ+PC9nPjxnIGNsYXNzPSJtZXNzYWdlIiBkYXRhLXBhcnRpY2lwYW50LTE9InBsYXllck9iaiIgZGF0YS1wYXJ0aWNpcGFudC0yPSJHYW1lIj48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjEzNC43ODI4LDIwMzQuNDM3NSwxMjQuNzgyOCwyMDM4LjQzNzUsMTM0Ljc4MjgsMjA0Mi40Mzc1LDEzMC43ODI4LDIwMzguNDM3NSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTtzdHJva2UtZGFzaGFycmF5OjIsMjsiIHgxPSIxMjguNzgyOCIgeDI9IjI5OC41NTMzIiB5MT0iMjAzOC40Mzc1IiB5Mj0iMjAzOC40Mzc1Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iODAuMzU1IiB4PSIxNDAuNzgyOCIgeT0iMjAzMy4zNzE2Ij5pc0dhbWVPdmVyPC90ZXh0PjwvZz48cGF0aCBkPSJNODAuOTQzNCwyMDUzLjQzNzUgTDE0NS4zODYzLDIwNTMuNDM3NSBMMTQ1LjM4NjMsMjA2MC41NzAzIEwxMzUuMzg2MywyMDcwLjU3MDMgTDgwLjk0MzQsMjA3MC41NzAzIEw4MC45NDM0LDIwNTMuNDM3NSIgZmlsbD0iI0VFRUVFRSIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxLjU7Ii8+PHJlY3QgZmlsbD0ibm9uZSIgaGVpZ2h0PSIxMTYuMjAzMSIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxLjU7IiB3aWR0aD0iMjAzLjE1OTciIHg9IjgwLjk0MzQiIHk9IjIwNTMuNDM3NSIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBmb250LXdlaWdodD0iYm9sZCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxOS40NDI5IiB4PSI5NS45NDM0IiB5PSIyMDY2LjUwNDQiPmFsdDwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMSIgZm9udC13ZWlnaHQ9ImJvbGQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iODcuMDU0MiIgeD0iMTYwLjM4NjMiIHk9IjIwNjUuNjQ3OSI+WyYjMTI0NjY7JiMxMjU0MDsmIzEyNTEyOyYjMTI0NTg7JiMxMjU0MDsmIzEyNDk2OyYjMTI1NDA7XTwvdGV4dD48ZyBjbGFzcz0ibWVzc2FnZSIgZGF0YS1wYXJ0aWNpcGFudC0xPSJHYW1lIiBkYXRhLXBhcnRpY2lwYW50LTI9IkdhbWUiPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSIxMjMuNzgyOCIgeDI9IjE2NS43ODI4IiB5MT0iMjA5MS43MDMxIiB5Mj0iMjA5MS43MDMxIi8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjE2NS43ODI4IiB4Mj0iMTY1Ljc4MjgiIHkxPSIyMDkxLjcwMzEiIHkyPSIyMTA0LjcwMzEiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iMTI0Ljc4MjgiIHgyPSIxNjUuNzgyOCIgeTE9IjIxMDQuNzAzMSIgeTI9IjIxMDQuNzAzMSIvPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iMTM0Ljc4MjgsMjEwMC43MDMxLDEyNC43ODI4LDIxMDQuNzAzMSwxMzQuNzgyOCwyMTA4LjcwMzEsMTMwLjc4MjgsMjEwNC43MDMxIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTMxLjMyMDMiIHg9IjEzMC43ODI4IiB5PSIyMDg2LjYzNzIiPm1vZGUgPSAnZ2FtZU92ZXInPC90ZXh0PjwvZz48bGluZSBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7c3Ryb2tlLWRhc2hhcnJheToyLDI7IiB4MT0iODAuOTQzNCIgeDI9IjI4NC4xMDMxIiB5MT0iMjExMy43MDMxIiB5Mj0iMjExMy43MDMxIi8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTEiIGZvbnQtd2VpZ2h0PSJib2xkIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjU0LjA1NDQiIHg9Ijg1Ljk0MzQiIHk9IjIxMjMuOTEzNiI+WyYjMzIxNTQ7JiMzNDg5MjsmIzIxNDg3OyYjMzMwMjE7XTwvdGV4dD48ZyBjbGFzcz0ibWVzc2FnZSIgZGF0YS1wYXJ0aWNpcGFudC0xPSJHYW1lIiBkYXRhLXBhcnRpY2lwYW50LTI9IkdhbWUiPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSIxMjMuNzgyOCIgeDI9IjE2NS43ODI4IiB5MT0iMjE0OC42NDA2IiB5Mj0iMjE0OC42NDA2Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjE2NS43ODI4IiB4Mj0iMTY1Ljc4MjgiIHkxPSIyMTQ4LjY0MDYiIHkyPSIyMTYxLjY0MDYiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iMTI0Ljc4MjgiIHgyPSIxNjUuNzgyOCIgeTE9IjIxNjEuNjQwNiIgeTI9IjIxNjEuNjQwNiIvPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iMTM0Ljc4MjgsMjE1Ny42NDA2LDEyNC43ODI4LDIxNjEuNjQwNiwxMzQuNzgyOCwyMTY1LjY0MDYsMTMwLjc4MjgsMjE2MS42NDA2IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTEwLjc5ODMiIHg9IjEzMC43ODI4IiB5PSIyMTQzLjU3NDciPm1vZGUgPSAncGxheWluZyc8L3RleHQ+PC9nPjxnIGNsYXNzPSJtZXNzYWdlIiBkYXRhLXBhcnRpY2lwYW50LTE9IkdhbWUiIGRhdGEtcGFydGljaXBhbnQtMj0iR2FtZSI+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjEyMy43ODI4IiB4Mj0iMTY1Ljc4MjgiIHkxPSIyMjA0Ljc3MzQiIHkyPSIyMjA0Ljc3MzQiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iMTY1Ljc4MjgiIHgyPSIxNjUuNzgyOCIgeTE9IjIyMDQuNzczNCIgeTI9IjIyMTcuNzczNCIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSIxMjQuNzgyOCIgeDI9IjE2NS43ODI4IiB5MT0iMjIxNy43NzM0IiB5Mj0iMjIxNy43NzM0Ii8+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSIxMzQuNzgyOCwyMjEzLjc3MzQsMTI0Ljc4MjgsMjIxNy43NzM0LDEzNC43ODI4LDIyMjEuNzczNCwxMzAuNzgyOCwyMjE3Ljc3MzQiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI0Mi4zMzg5IiB4PSIxMzAuNzgyOCIgeT0iMjE5OS43MDc1Ij5kcmF3KCk8L3RleHQ+PC9nPjwhLS1TUkM9W2ZMUlZKekRHNTd4bE56NHRIaTA0ZV81WG9ObzBBMzRuR2U5RlhmVEJVenNrVEJUQnN1N3BRTWxMcDBybkNPT2JZOEFBV2cyMGFDMDQtTWxrb2hSX21kamxrd3hqcmN0NmItUGN2eVZ6cGxVVFV5dUNQMlhHUkVOTnhMZ0RNNUxZX0kzY0RZYVM0RkVDTTctOC1Pak85eUp5UlJ5XzRHR1c2UWVjcFllVzFwS0h3NkE2ZHVHQ3EwbWFlR3AwWFpXRHFaM21Helh4UGs1OW0zdmRXNkdtT2F2SURJVzhZT0g4cDZFNm1UZmdoUE5qZFJBT0kwWEU0bDdRUk52SkZFcDI4QThiTzQwNzJGanFWMTU2MVc4QVVXUFpldng5R25LTjlHdElvMFRtVUpRUkt3Y0JieWs3bDdxQVhMd2o3UDUyYkhJVWF5OFBDT2tEVHZqTm5PaFZrbXIyYTY2Rmo0NlNRTE02T2E4U09OUTRhb0NFNXNyandoTVZaMFg1TEpFVHdlY3JwbV9MSzJoY0hJaUhXNkF1UVZydlV0MkdwU1dLTWFvNllXNFVlWkp5OW5QMDlnRmFmWk1tWDhuUy1yUU5hMHp2VS1DZUNiMzV6bTZNZUtvMzBZd3lFVUFZM1dxa29URG5DSlNrSWdnWVFadlNKV1ZuQi1VdmF6VEZqampkNEcwS1ZacWJ0VDJvSzgxTzVlT05od2pDdFdjUjRROUFBSVdqdFdNQUNpQWx1TFM1ckY0dlM4c1JiU2p3aEtuTHpuQXdoOEpPeGlzN3Zzc19zN0ttNGxGalRNOXpmNl9Rb1VuWnBhNlEwWmd4N2s5ay1YWlFGY05UcU8wRUh3OWdTZ3NYQVpnY21KTlNqRkZiLWlOTlVncjQxdkhUTU1jLUVoUUJzX1IxVWJTRGEyTXlYbi1odEpMbVA1VWRITmxyV1hIQ09mUDI1S2JnVVc1WE8yMExKd2JQUjhvRFRJMnBvS0k5YnNMLVlhZENKWGlvMUgzc1ctUzNaN3p6S1BIbU9qOUgtaGN2TXNtU0xFVG5oOU5fcWJmVDh6TzZWeGViRGNLaC15SkNaeFBaVV9NVEVucjNCRjl3OXJNV29OaENndHFXZHJ2M0U3STRNVXAxTk1fbnNPcnllNDE1WG53dFVfR1R6NUp4NFNJQks0LVh1UGdNanNoWi1wY24yaUpTOFBQNXBDQ2tsUDdVSlhlWEVDcjRTR0tHVU1Bc0dvVExkRExaMHVNeVNNalllYTZyQWNySDZHVEJuTHozX25RWjc0djRLOGtUUkhHckIzcGMxbXVSaDU5NDZhZ2NaQlplRDl4cFREWWdCc21JaXAyRnhQVWx4VkRscGJHOGlEcnpobVZobHpWZVdEZFFBcHloWWxxLWltSXI4VFFxc3FqOXRuOFBRZGs4NlVlLW5QUER0cHRZd3k0c2c3dnhtamxPdlh1X0xFV3RHaHNhY3l2ekx1dEp6VVFkNVZsRE9URXc3RklGbVVrTWU5LWlXTU5BNkJWdUMzQlpObTAwXS0tPjwvZz48L3N2Zz4=" class="uml" alt="uml diagram" title="" /></p>
<h3 id="_98">シーケンス図（連鎖発生時）<a class="headerlink" href="#_98" title="Permanent link">&para;</a></h3>
<p>連鎖が発生した場合の詳細フローを示します。</p>
<p><img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBjb250ZW50U3R5bGVUeXBlPSJ0ZXh0L2NzcyIgZGF0YS1kaWFncmFtLXR5cGU9IlNFUVVFTkNFIiBoZWlnaHQ9IjE1NDlweCIgcHJlc2VydmVBc3BlY3RSYXRpbz0ibm9uZSIgc3R5bGU9IndpZHRoOjYxMnB4O2hlaWdodDoxNTQ5cHg7YmFja2dyb3VuZDojRkZGRkZGOyIgdmVyc2lvbj0iMS4xIiB2aWV3Qm94PSIwIDAgNjEyIDE1NDkiIHdpZHRoPSI2MTJweCIgem9vbUFuZFBhbj0ibWFnbmlmeSI+PHRpdGxlPiYjMzY4OTk7JiMzNzc4MjsmIzMwMzMwOyYjMjk5ODM7JiMyNjE3ODsmIzEyMzk4OyYjMTI0NzE7JiMxMjU0MDsmIzEyNDY1OyYjMTI1MzE7JiMxMjQ3MzsmIzIyMjU5OzwvdGl0bGU+PGRlZnMvPjxnPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBmb250LXdlaWdodD0iYm9sZCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxNjcuOTk5MyIgeD0iMjE4LjQ0MDYiIHk9IjI3Ljk5NTEiPiYjMzY4OTk7JiMzNzc4MjsmIzMwMzMwOyYjMjk5ODM7JiMyNjE3ODsmIzEyMzk4OyYjMTI0NzE7JiMxMjU0MDsmIzEyNDY1OyYjMTI1MzE7JiMxMjQ3MzsmIzIyMjU5OzwvdGV4dD48Zz48dGl0bGU+U3RhZ2U8L3RpdGxlPjxyZWN0IGZpbGw9IiNGRkZGRkYiIGhlaWdodD0iNzEuMjY1NiIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9IjEwIiB4PSIyMTguOTU0NiIgeT0iMTg5Ljk5MjIiLz48L2c+PGc+PHRpdGxlPlN0YWdlPC90aXRsZT48cmVjdCBmaWxsPSIjRkZGRkZGIiBoZWlnaHQ9IjU2LjEzMjgiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHdpZHRoPSIxMCIgeD0iMjE4Ljk1NDYiIHk9IjUwMi4wNTQ3Ii8+PC9nPjxnPjx0aXRsZT5TdGFnZTwvdGl0bGU+PHJlY3QgZmlsbD0iI0ZGRkZGRiIgaGVpZ2h0PSI3MS4yNjU2IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iMTAiIHg9IjIxOC45NTQ2IiB5PSI3MzguODUxNiIvPjwvZz48Zz48dGl0bGU+U3RhZ2U8L3RpdGxlPjxyZWN0IGZpbGw9IiNGRkZGRkYiIGhlaWdodD0iNzEuMjY1NiIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9IjEwIiB4PSIyMTguOTU0NiIgeT0iOTMxLjUxNTYiLz48L2c+PGc+PHRpdGxlPlN0YWdlPC90aXRsZT48cmVjdCBmaWxsPSIjRkZGRkZGIiBoZWlnaHQ9IjE0IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iMTAiIHg9IjIxOC45NTQ2IiB5PSIxMjY3LjcxMDkiLz48L2c+PGc+PHRpdGxlPlN0YWdlPC90aXRsZT48cmVjdCBmaWxsPSIjRkZGRkZGIiBoZWlnaHQ9IjI5LjEzMjgiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHdpZHRoPSIxMCIgeD0iMjE4Ljk1NDYiIHk9IjEzNzUuOTE0MSIvPjwvZz48Zz48dGl0bGU+U2NvcmU8L3RpdGxlPjxyZWN0IGZpbGw9IiNGRkZGRkYiIGhlaWdodD0iMTQwLjM5ODQiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHdpZHRoPSIxMCIgeD0iMzc4LjIyNTciIHk9IjMzMi41MjM0Ii8+PC9nPjxnPjx0aXRsZT5TY29yZTwvdGl0bGU+PHJlY3QgZmlsbD0iI0ZGRkZGRiIgaGVpZ2h0PSIxNDAuMzk4NCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9IjEwIiB4PSIzNzguMjI1NyIgeT0iMTA5OC4xNzk3Ii8+PC9nPjxyZWN0IGZpbGw9Im5vbmUiIGhlaWdodD0iMTE3LjUzMTMiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MS41OyIgd2lkdGg9IjMwOC4yMjU2IiB4PSIxMCIgeT0iNzAwLjU4NTkiLz48cmVjdCBmaWxsPSJub25lIiBoZWlnaHQ9IjQ3OS41MzEzIiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjEuNTsiIHdpZHRoPSI1ODUuODgwNSIgeD0iMTAiIHk9IjEwMTcuNzgxMyIvPjxnPjx0aXRsZT5HYW1lPC90aXRsZT48cmVjdCBmaWxsPSIjMDAwMDAwIiBmaWxsLW9wYWNpdHk9IjAuMDAwMDAiIGhlaWdodD0iMTQ0MC43MTg4IiB3aWR0aD0iOCIgeD0iNDMuODM5NCIgeT0iNzMuNTkzOCIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41O3N0cm9rZS1kYXNoYXJyYXk6NSw1OyIgeDE9IjQ3IiB4Mj0iNDciIHkxPSI3My41OTM4IiB5Mj0iMTUxNC4zMTI1Ii8+PC9nPjxnPjx0aXRsZT5TdGFnZTwvdGl0bGU+PHJlY3QgZmlsbD0iIzAwMDAwMCIgZmlsbC1vcGFjaXR5PSIwLjAwMDAwIiBoZWlnaHQ9IjE0NDAuNzE4OCIgd2lkdGg9IjgiIHg9IjIxOS45NTQ2IiB5PSI3My41OTM4Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7c3Ryb2tlLWRhc2hhcnJheTo1LDU7IiB4MT0iMjIzLjcyNzEiIHgyPSIyMjMuNzI3MSIgeTE9IjczLjU5MzgiIHkyPSIxNTE0LjMxMjUiLz48L2c+PGc+PHRpdGxlPlNjb3JlPC90aXRsZT48cmVjdCBmaWxsPSIjMDAwMDAwIiBmaWxsLW9wYWNpdHk9IjAuMDAwMDAiIGhlaWdodD0iMTQ0MC43MTg4IiB3aWR0aD0iOCIgeD0iMzc5LjIyNTciIHk9IjczLjU5MzgiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTtzdHJva2UtZGFzaGFycmF5OjUsNTsiIHgxPSIzODIuNDY2NCIgeDI9IjM4Mi40NjY0IiB5MT0iNzMuNTkzOCIgeTI9IjE1MTQuMzEyNSIvPjwvZz48ZyBjbGFzcz0icGFydGljaXBhbnQgcGFydGljaXBhbnQtaGVhZCIgZGF0YS1wYXJ0aWNpcGFudD0iR2FtZSI+PHJlY3QgZmlsbD0iI0UyRTJGMCIgaGVpZ2h0PSIzMC4yOTY5IiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSI1NS42Nzg3IiB4PSIyMCIgeT0iNDIuMjk2OSIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjQxLjY3ODciIHg9IjI3IiB5PSI2Mi4yOTIiPkdhbWU8L3RleHQ+PC9nPjxnIGNsYXNzPSJwYXJ0aWNpcGFudCBwYXJ0aWNpcGFudC10YWlsIiBkYXRhLXBhcnRpY2lwYW50PSJHYW1lIj48cmVjdCBmaWxsPSIjRTJFMkYwIiBoZWlnaHQ9IjMwLjI5NjkiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjU1LjY3ODciIHg9IjIwIiB5PSIxNTEzLjMxMjUiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI0MS42Nzg3IiB4PSIyNyIgeT0iMTUzMy4zMDc2Ij5HYW1lPC90ZXh0PjwvZz48ZyBjbGFzcz0icGFydGljaXBhbnQgcGFydGljaXBhbnQtaGVhZCIgZGF0YS1wYXJ0aWNpcGFudD0iU3RhZ2UiPjxyZWN0IGZpbGw9IiNFMkUyRjAiIGhlaWdodD0iMzAuMjk2OSIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iNTQuNDU1MSIgeD0iMTk2LjcyNzEiIHk9IjQyLjI5NjkiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI0MC40NTUxIiB4PSIyMDMuNzI3MSIgeT0iNjIuMjkyIj5TdGFnZTwvdGV4dD48L2c+PGcgY2xhc3M9InBhcnRpY2lwYW50IHBhcnRpY2lwYW50LXRhaWwiIGRhdGEtcGFydGljaXBhbnQ9IlN0YWdlIj48cmVjdCBmaWxsPSIjRTJFMkYwIiBoZWlnaHQ9IjMwLjI5NjkiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjU0LjQ1NTEiIHg9IjE5Ni43MjcxIiB5PSIxNTEzLjMxMjUiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI0MC40NTUxIiB4PSIyMDMuNzI3MSIgeT0iMTUzMy4zMDc2Ij5TdGFnZTwvdGV4dD48L2c+PGcgY2xhc3M9InBhcnRpY2lwYW50IHBhcnRpY2lwYW50LWhlYWQiIGRhdGEtcGFydGljaXBhbnQ9IlNjb3JlIj48cmVjdCBmaWxsPSIjRTJFMkYwIiBoZWlnaHQ9IjMwLjI5NjkiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjUzLjUxODYiIHg9IjM1Ni40NjY0IiB5PSI0Mi4yOTY5Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMzkuNTE4NiIgeD0iMzYzLjQ2NjQiIHk9IjYyLjI5MiI+U2NvcmU8L3RleHQ+PC9nPjxnIGNsYXNzPSJwYXJ0aWNpcGFudCBwYXJ0aWNpcGFudC10YWlsIiBkYXRhLXBhcnRpY2lwYW50PSJTY29yZSI+PHJlY3QgZmlsbD0iI0UyRTJGMCIgaGVpZ2h0PSIzMC4yOTY5IiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSI1My41MTg2IiB4PSIzNTYuNDY2NCIgeT0iMTUxMy4zMTI1Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMzkuNTE4NiIgeD0iMzYzLjQ2NjQiIHk9IjE1MzMuMzA3NiI+U2NvcmU8L3RleHQ+PC9nPjxnPjx0aXRsZT5TdGFnZTwvdGl0bGU+PHJlY3QgZmlsbD0iI0ZGRkZGRiIgaGVpZ2h0PSI3MS4yNjU2IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iMTAiIHg9IjIxOC45NTQ2IiB5PSIxODkuOTkyMiIvPjwvZz48Zz48dGl0bGU+U3RhZ2U8L3RpdGxlPjxyZWN0IGZpbGw9IiNGRkZGRkYiIGhlaWdodD0iNTYuMTMyOCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9IjEwIiB4PSIyMTguOTU0NiIgeT0iNTAyLjA1NDciLz48L2c+PGc+PHRpdGxlPlN0YWdlPC90aXRsZT48cmVjdCBmaWxsPSIjRkZGRkZGIiBoZWlnaHQ9IjcxLjI2NTYiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHdpZHRoPSIxMCIgeD0iMjE4Ljk1NDYiIHk9IjczOC44NTE2Ii8+PC9nPjxnPjx0aXRsZT5TdGFnZTwvdGl0bGU+PHJlY3QgZmlsbD0iI0ZGRkZGRiIgaGVpZ2h0PSI3MS4yNjU2IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iMTAiIHg9IjIxOC45NTQ2IiB5PSI5MzEuNTE1NiIvPjwvZz48Zz48dGl0bGU+U3RhZ2U8L3RpdGxlPjxyZWN0IGZpbGw9IiNGRkZGRkYiIGhlaWdodD0iMTQiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHdpZHRoPSIxMCIgeD0iMjE4Ljk1NDYiIHk9IjEyNjcuNzEwOSIvPjwvZz48Zz48dGl0bGU+U3RhZ2U8L3RpdGxlPjxyZWN0IGZpbGw9IiNGRkZGRkYiIGhlaWdodD0iMjkuMTMyOCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9IjEwIiB4PSIyMTguOTU0NiIgeT0iMTM3NS45MTQxIi8+PC9nPjxnPjx0aXRsZT5TY29yZTwvdGl0bGU+PHJlY3QgZmlsbD0iI0ZGRkZGRiIgaGVpZ2h0PSIxNDAuMzk4NCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9IjEwIiB4PSIzNzguMjI1NyIgeT0iMzMyLjUyMzQiLz48L2c+PGc+PHRpdGxlPlNjb3JlPC90aXRsZT48cmVjdCBmaWxsPSIjRkZGRkZGIiBoZWlnaHQ9IjE0MC4zOTg0IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iMTAiIHg9IjM3OC4yMjU3IiB5PSIxMDk4LjE3OTciLz48L2c+PHJlY3QgZmlsbD0iI0VFRUVFRSIgaGVpZ2h0PSIzIiBzdHlsZT0ic3Ryb2tlOiNFRUVFRUU7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iNjA1Ljg4MDUiIHg9IjAiIHk9IjEwNC4xNjAyIi8+PGxpbmUgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIgeDE9IjAiIHgyPSI2MDUuODgwNSIgeTE9IjEwNC4xNjAyIiB5Mj0iMTA0LjE2MDIiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iMCIgeDI9IjYwNS44ODA1IiB5MT0iMTA3LjE2MDIiIHkyPSIxMDcuMTYwMiIvPjxyZWN0IGZpbGw9IiNFRUVFRUUiIGhlaWdodD0iMjMuMTMyOCIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoyOyIgd2lkdGg9IjY2LjU3MTMiIHg9IjI2OS42NTQ2IiB5PSI5My41OTM4Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGZvbnQtd2VpZ2h0PSJib2xkIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjQ4LjA0NTUiIHg9IjI3NS42NTQ2IiB5PSIxMDkuNjYwNiI+MSYjMzY4OTk7JiMzNzc4MjsmIzMwNDQ2OzwvdGV4dD48ZyBjbGFzcz0ibWVzc2FnZSIgZGF0YS1wYXJ0aWNpcGFudC0xPSJHYW1lIiBkYXRhLXBhcnRpY2lwYW50LTI9IkdhbWUiPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSI0Ny44Mzk0IiB4Mj0iODkuODM5NCIgeTE9IjE0Ny44NTk0IiB5Mj0iMTQ3Ljg1OTQiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iODkuODM5NCIgeDI9Ijg5LjgzOTQiIHkxPSIxNDcuODU5NCIgeTI9IjE2MC44NTk0Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjQ4LjgzOTQiIHgyPSI4OS44Mzk0IiB5MT0iMTYwLjg1OTQiIHkyPSIxNjAuODU5NCIvPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iNTguODM5NCwxNTYuODU5NCw0OC44Mzk0LDE2MC44NTk0LDU4LjgzOTQsMTY0Ljg1OTQsNTQuODM5NCwxNjAuODU5NCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjEzNy41MjgzIiB4PSI1NC44Mzk0IiB5PSIxNDIuNzkzNSI+bW9kZSA9ICdjaGVja0VyYXNlJzwvdGV4dD48L2c+PGcgY2xhc3M9Im1lc3NhZ2UiIGRhdGEtcGFydGljaXBhbnQtMT0iR2FtZSIgZGF0YS1wYXJ0aWNpcGFudC0yPSJTdGFnZSI+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSIyMDYuOTU0NiwxODUuOTkyMiwyMTYuOTU0NiwxODkuOTkyMiwyMDYuOTU0NiwxOTMuOTkyMiwyMTAuOTU0NiwxODkuOTkyMiIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSI0Ny44Mzk0IiB4Mj0iMjEyLjk1NDYiIHkxPSIxODkuOTkyMiIgeTI9IjE4OS45OTIyIi8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iODQuNSIgeD0iNTQuODM5NCIgeT0iMTg0LjkyNjMiPmNoZWNrRXJhc2UoKTwvdGV4dD48L2c+PGcgY2xhc3M9Im1lc3NhZ2UiIGRhdGEtcGFydGljaXBhbnQtMT0iU3RhZ2UiIGRhdGEtcGFydGljaXBhbnQtMj0iU3RhZ2UiPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSIyMjguOTU0NiIgeDI9IjI3MC45NTQ2IiB5MT0iMjE5LjEyNSIgeTI9IjIxOS4xMjUiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iMjcwLjk1NDYiIHgyPSIyNzAuOTU0NiIgeTE9IjIxOS4xMjUiIHkyPSIyMzIuMTI1Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjIyOS45NTQ2IiB4Mj0iMjcwLjk1NDYiIHkxPSIyMzIuMTI1IiB5Mj0iMjMyLjEyNSIvPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iMjM5Ljk1NDYsMjI4LjEyNSwyMjkuOTU0NiwyMzIuMTI1LDIzOS45NTQ2LDIzNi4xMjUsMjM1Ljk1NDYsMjMyLjEyNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjEyNS4yNzExIiB4PSIyMzUuOTU0NiIgeT0iMjE0LjA1OTEiPjQmIzIwNDkxOyYjMjAxOTc7JiMxOTk3ODsmIzEyMzk4OyYjMjE1MTY7JiMzMzM5NDsmIzEyNDM0OyYjMjY5MDg7JiMzMjAzNDs8L3RleHQ+PC9nPjxnIGNsYXNzPSJtZXNzYWdlIiBkYXRhLXBhcnRpY2lwYW50LTE9IlN0YWdlIiBkYXRhLXBhcnRpY2lwYW50LTI9IkdhbWUiPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iNTguODM5NCwyNTcuMjU3OCw0OC44Mzk0LDI2MS4yNTc4LDU4LjgzOTQsMjY1LjI1NzgsNTQuODM5NCwyNjEuMjU3OCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTtzdHJva2UtZGFzaGFycmF5OjIsMjsiIHgxPSI1Mi44Mzk0IiB4Mj0iMjIyLjk1NDYiIHkxPSIyNjEuMjU3OCIgeTI9IjI2MS4yNTc4Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iOTIuMDk4MiIgeD0iNjQuODM5NCIgeT0iMjU2LjE5MTkiPmVyYXNlSW5mbyg0JiMyMDQ5MTspPC90ZXh0PjwvZz48ZyBjbGFzcz0ibWVzc2FnZSIgZGF0YS1wYXJ0aWNpcGFudC0xPSJHYW1lIiBkYXRhLXBhcnRpY2lwYW50LTI9IkdhbWUiPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSI0Ny44Mzk0IiB4Mj0iODkuODM5NCIgeTE9IjI5MC4zOTA2IiB5Mj0iMjkwLjM5MDYiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iODkuODM5NCIgeDI9Ijg5LjgzOTQiIHkxPSIyOTAuMzkwNiIgeTI9IjMwMy4zOTA2Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjQ4LjgzOTQiIHgyPSI4OS44Mzk0IiB5MT0iMzAzLjM5MDYiIHkyPSIzMDMuMzkwNiIvPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iNTguODM5NCwyOTkuMzkwNiw0OC44Mzk0LDMwMy4zOTA2LDU4LjgzOTQsMzA3LjM5MDYsNTQuODM5NCwzMDMuMzkwNiIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjE0Ni43NzA1IiB4PSI1NC44Mzk0IiB5PSIyODUuMzI0NyI+Y29tYmluYXRpb25Db3VudCA9IDE8L3RleHQ+PC9nPjxnIGNsYXNzPSJtZXNzYWdlIiBkYXRhLXBhcnRpY2lwYW50LTE9IkdhbWUiIGRhdGEtcGFydGljaXBhbnQtMj0iU2NvcmUiPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iMzY2LjIyNTcsMzI4LjUyMzQsMzc2LjIyNTcsMzMyLjUyMzQsMzY2LjIyNTcsMzM2LjUyMzQsMzcwLjIyNTcsMzMyLjUyMzQiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iNDcuODM5NCIgeDI9IjM3Mi4yMjU3IiB5MT0iMzMyLjUyMzQiIHkyPSIzMzIuNTIzNCIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9Ijk2LjExNjIiIHg9IjU0LjgzOTQiIHk9IjMyNy40NTc1Ij5hZGRTY29yZSg0LCAxKTwvdGV4dD48L2c+PGcgY2xhc3M9Im1lc3NhZ2UiIGRhdGEtcGFydGljaXBhbnQtMT0iU2NvcmUiIGRhdGEtcGFydGljaXBhbnQtMj0iU2NvcmUiPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSIzODguMjI1NyIgeDI9IjQzMC4yMjU3IiB5MT0iMzYxLjY1NjMiIHkyPSIzNjEuNjU2MyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSI0MzAuMjI1NyIgeDI9IjQzMC4yMjU3IiB5MT0iMzYxLjY1NjMiIHkyPSIzNzQuNjU2MyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSIzODkuMjI1NyIgeDI9IjQzMC4yMjU3IiB5MT0iMzc0LjY1NjMiIHkyPSIzNzQuNjU2MyIvPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iMzk5LjIyNTcsMzcwLjY1NjMsMzg5LjIyNTcsMzc0LjY1NjMsMzk5LjIyNTcsMzc4LjY1NjMsMzk1LjIyNTcsMzc0LjY1NjMiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxNjYuNTExNyIgeD0iMzk1LjIyNTciIHk9IjM1Ni41OTAzIj5iYXNlU2NvcmUgPSA0ICYjMjE1OyAxMCA9IDQwPC90ZXh0PjwvZz48ZyBjbGFzcz0ibWVzc2FnZSIgZGF0YS1wYXJ0aWNpcGFudC0xPSJTY29yZSIgZGF0YS1wYXJ0aWNpcGFudC0yPSJTY29yZSI+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjM4OC4yMjU3IiB4Mj0iNDMwLjIyNTciIHkxPSI0MDMuNzg5MSIgeTI9IjQwMy43ODkxIi8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjQzMC4yMjU3IiB4Mj0iNDMwLjIyNTciIHkxPSI0MDMuNzg5MSIgeTI9IjQxNi43ODkxIi8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjM4OS4yMjU3IiB4Mj0iNDMwLjIyNTciIHkxPSI0MTYuNzg5MSIgeTI9IjQxNi43ODkxIi8+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSIzOTkuMjI1Nyw0MTIuNzg5MSwzODkuMjI1Nyw0MTYuNzg5MSwzOTkuMjI1Nyw0MjAuNzg5MSwzOTUuMjI1Nyw0MTYuNzg5MSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjE1MS4zMDI4IiB4PSIzOTUuMjI1NyIgeT0iMzk4LjcyMzEiPmNoYWluQm9udXMgPSAwICgxJiMzNjg5OTsmIzM3NzgyOyk8L3RleHQ+PC9nPjxnIGNsYXNzPSJtZXNzYWdlIiBkYXRhLXBhcnRpY2lwYW50LTE9IlNjb3JlIiBkYXRhLXBhcnRpY2lwYW50LTI9IlNjb3JlIj48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iMzg4LjIyNTciIHgyPSI0MzAuMjI1NyIgeTE9IjQ0NS45MjE5IiB5Mj0iNDQ1LjkyMTkiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iNDMwLjIyNTciIHgyPSI0MzAuMjI1NyIgeTE9IjQ0NS45MjE5IiB5Mj0iNDU4LjkyMTkiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iMzg5LjIyNTciIHgyPSI0MzAuMjI1NyIgeTE9IjQ1OC45MjE5IiB5Mj0iNDU4LjkyMTkiLz48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjM5OS4yMjU3LDQ1NC45MjE5LDM4OS4yMjU3LDQ1OC45MjE5LDM5OS4yMjU3LDQ2Mi45MjE5LDM5NS4yMjU3LDQ1OC45MjE5IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTAyLjEyMTEiIHg9IjM5NS4yMjU3IiB5PSI0NDAuODU2Ij50b3RhbFNjb3JlID0gNDA8L3RleHQ+PC9nPjxnIGNsYXNzPSJtZXNzYWdlIiBkYXRhLXBhcnRpY2lwYW50LTE9IlNjb3JlIiBkYXRhLXBhcnRpY2lwYW50LTI9IkdhbWUiPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iNTguODM5NCw0NjguOTIxOSw0OC44Mzk0LDQ3Mi45MjE5LDU4LjgzOTQsNDc2LjkyMTksNTQuODM5NCw0NzIuOTIxOSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTtzdHJva2UtZGFzaGFycmF5OjIsMjsiIHgxPSI1Mi44Mzk0IiB4Mj0iMzgyLjIyNTciIHkxPSI0NzIuOTIxOSIgeTI9IjQ3Mi45MjE5Ii8+PC9nPjxnIGNsYXNzPSJtZXNzYWdlIiBkYXRhLXBhcnRpY2lwYW50LTE9IkdhbWUiIGRhdGEtcGFydGljaXBhbnQtMj0iU3RhZ2UiPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iMjA2Ljk1NDYsNDk4LjA1NDcsMjE2Ljk1NDYsNTAyLjA1NDcsMjA2Ljk1NDYsNTA2LjA1NDcsMjEwLjk1NDYsNTAyLjA1NDciIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iNDcuODM5NCIgeDI9IjIxMi45NTQ2IiB5MT0iNTAyLjA1NDciIHkyPSI1MDIuMDU0NyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjE1Mi4xMTUyIiB4PSI1NC44Mzk0IiB5PSI0OTYuOTg4OCI+ZXJhc2VCb2FyZHMoZXJhc2VJbmZvKTwvdGV4dD48L2c+PGcgY2xhc3M9Im1lc3NhZ2UiIGRhdGEtcGFydGljaXBhbnQtMT0iU3RhZ2UiIGRhdGEtcGFydGljaXBhbnQtMj0iU3RhZ2UiPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSIyMjguOTU0NiIgeDI9IjI3MC45NTQ2IiB5MT0iNTMxLjE4NzUiIHkyPSI1MzEuMTg3NSIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSIyNzAuOTU0NiIgeDI9IjI3MC45NTQ2IiB5MT0iNTMxLjE4NzUiIHkyPSI1NDQuMTg3NSIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSIyMjkuOTU0NiIgeDI9IjI3MC45NTQ2IiB5MT0iNTQ0LjE4NzUiIHkyPSI1NDQuMTg3NSIvPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iMjM5Ljk1NDYsNTQwLjE4NzUsMjI5Ljk1NDYsNTQ0LjE4NzUsMjM5Ljk1NDYsNTQ4LjE4NzUsMjM1Ljk1NDYsNTQ0LjE4NzUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI4Ni4yNzExIiB4PSIyMzUuOTU0NiIgeT0iNTI2LjEyMTYiPiYjMjUzNTE7JiMyMzQ1MDsmIzIwMzAxOyYjMzI2MjI7JiMxMjQzNDswJiMxMjM5NTs8L3RleHQ+PC9nPjxnIGNsYXNzPSJtZXNzYWdlIiBkYXRhLXBhcnRpY2lwYW50LTE9IlN0YWdlIiBkYXRhLXBhcnRpY2lwYW50LTI9IkdhbWUiPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iNTguODM5NCw1NTQuMTg3NSw0OC44Mzk0LDU1OC4xODc1LDU4LjgzOTQsNTYyLjE4NzUsNTQuODM5NCw1NTguMTg3NSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTtzdHJva2UtZGFzaGFycmF5OjIsMjsiIHgxPSI1Mi44Mzk0IiB4Mj0iMjIyLjk1NDYiIHkxPSI1NTguMTg3NSIgeTI9IjU1OC4xODc1Ii8+PC9nPjxnIGNsYXNzPSJtZXNzYWdlIiBkYXRhLXBhcnRpY2lwYW50LTE9IkdhbWUiIGRhdGEtcGFydGljaXBhbnQtMj0iR2FtZSI+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjQ3LjgzOTQiIHgyPSI4OS44Mzk0IiB5MT0iNTg3LjMyMDMiIHkyPSI1ODcuMzIwMyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSI4OS44Mzk0IiB4Mj0iODkuODM5NCIgeTE9IjU4Ny4zMjAzIiB5Mj0iNjAwLjMyMDMiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iNDguODM5NCIgeDI9Ijg5LjgzOTQiIHkxPSI2MDAuMzIwMyIgeTI9IjYwMC4zMjAzIi8+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSI1OC44Mzk0LDU5Ni4zMjAzLDQ4LjgzOTQsNjAwLjMyMDMsNTguODM5NCw2MDQuMzIwMyw1NC44Mzk0LDYwMC4zMjAzIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTExLjM1NjkiIHg9IjU0LjgzOTQiIHk9IjU4Mi4yNTQ0Ij5tb2RlID0gJ2VyYXNpbmcnPC90ZXh0PjwvZz48cmVjdCBmaWxsPSIjRUVFRUVFIiBoZWlnaHQ9IjMiIHN0eWxlPSJzdHJva2U6I0VFRUVFRTtzdHJva2Utd2lkdGg6MTsiIHdpZHRoPSI2MDUuODgwNSIgeD0iMCIgeT0iNjI4Ljg4NjciLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iMCIgeDI9IjYwNS44ODA1IiB5MT0iNjI4Ljg4NjciIHkyPSI2MjguODg2NyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiIHgxPSIwIiB4Mj0iNjA1Ljg4MDUiIHkxPSI2MzEuODg2NyIgeTI9IjYzMS44ODY3Ii8+PHJlY3QgZmlsbD0iI0VFRUVFRSIgaGVpZ2h0PSIyMy4xMzI4IiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjI7IiB3aWR0aD0iNzAuNTI1OSIgeD0iMjY3LjY3NzMiIHk9IjYxOC4zMjAzIi8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGZvbnQtd2VpZ2h0PSJib2xkIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjUyLjAwMDEiIHg9IjI3My42NzczIiB5PSI2MzQuMzg3MiI+JiMzMzg1MzsmIzE5OTc5OyYjMjA5NjY7JiMyOTcwMjs8L3RleHQ+PGcgY2xhc3M9Im1lc3NhZ2UiIGRhdGEtcGFydGljaXBhbnQtMT0iR2FtZSIgZGF0YS1wYXJ0aWNpcGFudC0yPSJHYW1lIj48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iNDcuODM5NCIgeDI9Ijg5LjgzOTQiIHkxPSI2NzIuNTg1OSIgeTI9IjY3Mi41ODU5Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9Ijg5LjgzOTQiIHgyPSI4OS44Mzk0IiB5MT0iNjcyLjU4NTkiIHkyPSI2ODUuNTg1OSIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSI0OC44Mzk0IiB4Mj0iODkuODM5NCIgeTE9IjY4NS41ODU5IiB5Mj0iNjg1LjU4NTkiLz48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjU4LjgzOTQsNjgxLjU4NTksNDguODM5NCw2ODUuNTg1OSw1OC44Mzk0LDY4OS41ODU5LDU0LjgzOTQsNjg1LjU4NTkiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMjMuODk5OSIgeD0iNTQuODM5NCIgeT0iNjY3LjUyIj5tb2RlID0gJ2NoZWNrRmFsbCc8L3RleHQ+PC9nPjxwYXRoIGQ9Ik0xMCw3MDAuNTg1OSBMODYuNjI0LDcwMC41ODU5IEw4Ni42MjQsNzA3LjcxODggTDc2LjYyNCw3MTcuNzE4OCBMMTAsNzE3LjcxODggTDEwLDcwMC41ODU5IiBmaWxsPSIjRUVFRUVFIiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjEuNTsiLz48cmVjdCBmaWxsPSJub25lIiBoZWlnaHQ9IjExNy41MzEzIiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjEuNTsiIHdpZHRoPSIzMDguMjI1NiIgeD0iMTAiIHk9IjcwMC41ODU5Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGZvbnQtd2VpZ2h0PSJib2xkIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjMxLjYyNCIgeD0iMjUiIHk9IjcxMy42NTI4Ij5sb29wPC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjExIiBmb250LXdlaWdodD0iYm9sZCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI3Ni4wNTQyIiB4PSIxMDEuNjI0IiB5PSI3MTIuNzk2NCI+WyYjMzM4NTM7JiMxOTk3OTsmIzIzNDM2OyYjMjAxMDI7JiMxMjQxNDsmIzEyMzkxO108L3RleHQ+PGcgY2xhc3M9Im1lc3NhZ2UiIGRhdGEtcGFydGljaXBhbnQtMT0iR2FtZSIgZGF0YS1wYXJ0aWNpcGFudC0yPSJTdGFnZSI+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSIyMDYuOTU0Niw3MzQuODUxNiwyMTYuOTU0Niw3MzguODUxNiwyMDYuOTU0Niw3NDIuODUxNiwyMTAuOTU0Niw3MzguODUxNiIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSI0Ny44Mzk0IiB4Mj0iMjEyLjk1NDYiIHkxPSI3MzguODUxNiIgeTI9IjczOC44NTE2Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iOTMuMzk5NCIgeD0iNTQuODM5NCIgeT0iNzMzLjc4NTYiPmFwcGx5R3Jhdml0eSgpPC90ZXh0PjwvZz48ZyBjbGFzcz0ibWVzc2FnZSIgZGF0YS1wYXJ0aWNpcGFudC0xPSJTdGFnZSIgZGF0YS1wYXJ0aWNpcGFudC0yPSJTdGFnZSI+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjIyOC45NTQ2IiB4Mj0iMjcwLjk1NDYiIHkxPSI3NjcuOTg0NCIgeTI9Ijc2Ny45ODQ0Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjI3MC45NTQ2IiB4Mj0iMjcwLjk1NDYiIHkxPSI3NjcuOTg0NCIgeTI9Ijc4MC45ODQ0Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjIyOS45NTQ2IiB4Mj0iMjcwLjk1NDYiIHkxPSI3ODAuOTg0NCIgeTI9Ijc4MC45ODQ0Ii8+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSIyMzkuOTU0Niw3NzYuOTg0NCwyMjkuOTU0Niw3ODAuOTg0NCwyMzkuOTU0Niw3ODQuOTg0NCwyMzUuOTU0Niw3ODAuOTg0NCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjYwLjI3MTEiIHg9IjIzNS45NTQ2IiB5PSI3NjIuOTE4NSI+MSYjMTI1MTA7JiMxMjQ3MzsmIzMzODUzOyYjMTk5Nzk7PC90ZXh0PjwvZz48ZyBjbGFzcz0ibWVzc2FnZSIgZGF0YS1wYXJ0aWNpcGFudC0xPSJTdGFnZSIgZGF0YS1wYXJ0aWNpcGFudC0yPSJHYW1lIj48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjU4LjgzOTQsODA2LjExNzIsNDguODM5NCw4MTAuMTE3Miw1OC44Mzk0LDgxNC4xMTcyLDU0LjgzOTQsODEwLjExNzIiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7c3Ryb2tlLWRhc2hhcnJheToyLDI7IiB4MT0iNTIuODM5NCIgeDI9IjIyMi45NTQ2IiB5MT0iODEwLjExNzIiIHkyPSI4MTAuMTE3MiIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjYxLjk4NDkiIHg9IjY0LjgzOTQiIHk9IjgwNS4wNTEzIj50cnVlL2ZhbHNlPC90ZXh0PjwvZz48cmVjdCBmaWxsPSIjRUVFRUVFIiBoZWlnaHQ9IjMiIHN0eWxlPSJzdHJva2U6I0VFRUVFRTtzdHJva2Utd2lkdGg6MTsiIHdpZHRoPSI2MDUuODgwNSIgeD0iMCIgeT0iODQ1LjY4MzYiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iMCIgeDI9IjYwNS44ODA1IiB5MT0iODQ1LjY4MzYiIHkyPSI4NDUuNjgzNiIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiIHgxPSIwIiB4Mj0iNjA1Ljg4MDUiIHkxPSI4NDguNjgzNiIgeTI9Ijg0OC42ODM2Ii8+PHJlY3QgZmlsbD0iI0VFRUVFRSIgaGVpZ2h0PSIyMy4xMzI4IiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjI7IiB3aWR0aD0iOTIuNTcxNCIgeD0iMjU2LjY1NDYiIHk9IjgzNS4xMTcyIi8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGZvbnQtd2VpZ2h0PSJib2xkIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9Ijc0LjA0NTUiIHg9IjI2Mi42NTQ2IiB5PSI4NTEuMTg0MSI+MiYjMzY4OTk7JiMzNzc4MjsmIzMwNDQ2OyYjMjEwMjg7JiMyMzQ1MDs8L3RleHQ+PGcgY2xhc3M9Im1lc3NhZ2UiIGRhdGEtcGFydGljaXBhbnQtMT0iR2FtZSIgZGF0YS1wYXJ0aWNpcGFudC0yPSJHYW1lIj48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iNDcuODM5NCIgeDI9Ijg5LjgzOTQiIHkxPSI4ODkuMzgyOCIgeTI9Ijg4OS4zODI4Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9Ijg5LjgzOTQiIHgyPSI4OS44Mzk0IiB5MT0iODg5LjM4MjgiIHkyPSI5MDIuMzgyOCIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSI0OC44Mzk0IiB4Mj0iODkuODM5NCIgeTE9IjkwMi4zODI4IiB5Mj0iOTAyLjM4MjgiLz48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjU4LjgzOTQsODk4LjM4MjgsNDguODM5NCw5MDIuMzgyOCw1OC44Mzk0LDkwNi4zODI4LDU0LjgzOTQsOTAyLjM4MjgiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMzcuNTI4MyIgeD0iNTQuODM5NCIgeT0iODg0LjMxNjkiPm1vZGUgPSAnY2hlY2tFcmFzZSc8L3RleHQ+PC9nPjxnIGNsYXNzPSJtZXNzYWdlIiBkYXRhLXBhcnRpY2lwYW50LTE9IkdhbWUiIGRhdGEtcGFydGljaXBhbnQtMj0iU3RhZ2UiPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iMjA2Ljk1NDYsOTI3LjUxNTYsMjE2Ljk1NDYsOTMxLjUxNTYsMjA2Ljk1NDYsOTM1LjUxNTYsMjEwLjk1NDYsOTMxLjUxNTYiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iNDcuODM5NCIgeDI9IjIxMi45NTQ2IiB5MT0iOTMxLjUxNTYiIHkyPSI5MzEuNTE1NiIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9Ijg0LjUiIHg9IjU0LjgzOTQiIHk9IjkyNi40NDk3Ij5jaGVja0VyYXNlKCk8L3RleHQ+PC9nPjxnIGNsYXNzPSJtZXNzYWdlIiBkYXRhLXBhcnRpY2lwYW50LTE9IlN0YWdlIiBkYXRhLXBhcnRpY2lwYW50LTI9IlN0YWdlIj48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iMjI4Ljk1NDYiIHgyPSIyNzAuOTU0NiIgeTE9Ijk2MC42NDg0IiB5Mj0iOTYwLjY0ODQiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iMjcwLjk1NDYiIHgyPSIyNzAuOTU0NiIgeTE9Ijk2MC42NDg0IiB5Mj0iOTczLjY0ODQiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iMjI5Ljk1NDYiIHgyPSIyNzAuOTU0NiIgeTE9Ijk3My42NDg0IiB5Mj0iOTczLjY0ODQiLz48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjIzOS45NTQ2LDk2OS42NDg0LDIyOS45NTQ2LDk3My42NDg0LDIzOS45NTQ2LDk3Ny42NDg0LDIzNS45NTQ2LDk3My42NDg0IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTEyLjI3MTEiIHg9IjIzNS45NTQ2IiB5PSI5NTUuNTgyNSI+JiMyMDg3NzsmIzI0MjMwOzQmIzIwNDkxOyYjMjAxOTc7JiMxOTk3ODsmIzEyNDM0OyYjMjY5MDg7JiMzMjAzNDs8L3RleHQ+PC9nPjxnIGNsYXNzPSJtZXNzYWdlIiBkYXRhLXBhcnRpY2lwYW50LTE9IlN0YWdlIiBkYXRhLXBhcnRpY2lwYW50LTI9IkdhbWUiPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iNTguODM5NCw5OTguNzgxMyw0OC44Mzk0LDEwMDIuNzgxMyw1OC44Mzk0LDEwMDYuNzgxMyw1NC44Mzk0LDEwMDIuNzgxMyIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTtzdHJva2UtZGFzaGFycmF5OjIsMjsiIHgxPSI1Mi44Mzk0IiB4Mj0iMjIyLjk1NDYiIHkxPSIxMDAyLjc4MTMiIHkyPSIxMDAyLjc4MTMiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI5Mi4wOTgyIiB4PSI2NC44Mzk0IiB5PSI5OTcuNzE1MyI+ZXJhc2VJbmZvKDQmIzIwNDkxOyk8L3RleHQ+PC9nPjxwYXRoIGQ9Ik0xMCwxMDE3Ljc4MTMgTDc0LjQ0MjksMTAxNy43ODEzIEw3NC40NDI5LDEwMjQuOTE0MSBMNjQuNDQyOSwxMDM0LjkxNDEgTDEwLDEwMzQuOTE0MSBMMTAsMTAxNy43ODEzIiBmaWxsPSIjRUVFRUVFIiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjEuNTsiLz48cmVjdCBmaWxsPSJub25lIiBoZWlnaHQ9IjQ3OS41MzEzIiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjEuNTsiIHdpZHRoPSI1ODUuODgwNSIgeD0iMTAiIHk9IjEwMTcuNzgxMyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBmb250LXdlaWdodD0iYm9sZCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxOS40NDI5IiB4PSIyNSIgeT0iMTAzMC44NDgxIj5hbHQ8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTEiIGZvbnQtd2VpZ2h0PSJib2xkIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjU0LjA1NDQiIHg9Ijg5LjQ0MjkiIHk9IjEwMjkuOTkxNyI+WyYjMzY4OTk7JiMzNzc4MjsmIzMwMzMwOyYjMjk5ODM7XTwvdGV4dD48ZyBjbGFzcz0ibWVzc2FnZSIgZGF0YS1wYXJ0aWNpcGFudC0xPSJHYW1lIiBkYXRhLXBhcnRpY2lwYW50LTI9IkdhbWUiPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSI0Ny44Mzk0IiB4Mj0iODkuODM5NCIgeTE9IjEwNTYuMDQ2OSIgeTI9IjEwNTYuMDQ2OSIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSI4OS44Mzk0IiB4Mj0iODkuODM5NCIgeTE9IjEwNTYuMDQ2OSIgeTI9IjEwNjkuMDQ2OSIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSI0OC44Mzk0IiB4Mj0iODkuODM5NCIgeTE9IjEwNjkuMDQ2OSIgeTI9IjEwNjkuMDQ2OSIvPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iNTguODM5NCwxMDY1LjA0NjksNDguODM5NCwxMDY5LjA0NjksNTguODM5NCwxMDczLjA0NjksNTQuODM5NCwxMDY5LjA0NjkiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxNDYuNzcwNSIgeD0iNTQuODM5NCIgeT0iMTA1MC45ODEiPmNvbWJpbmF0aW9uQ291bnQgPSAyPC90ZXh0PjwvZz48ZyBjbGFzcz0ibWVzc2FnZSIgZGF0YS1wYXJ0aWNpcGFudC0xPSJHYW1lIiBkYXRhLXBhcnRpY2lwYW50LTI9IlNjb3JlIj48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjM2Ni4yMjU3LDEwOTQuMTc5NywzNzYuMjI1NywxMDk4LjE3OTcsMzY2LjIyNTcsMTEwMi4xNzk3LDM3MC4yMjU3LDEwOTguMTc5NyIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSI0Ny44Mzk0IiB4Mj0iMzcyLjIyNTciIHkxPSIxMDk4LjE3OTciIHkyPSIxMDk4LjE3OTciLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI5Ni4xMTYyIiB4PSI1NC44Mzk0IiB5PSIxMDkzLjExMzgiPmFkZFNjb3JlKDQsIDIpPC90ZXh0PjwvZz48ZyBjbGFzcz0ibWVzc2FnZSIgZGF0YS1wYXJ0aWNpcGFudC0xPSJTY29yZSIgZGF0YS1wYXJ0aWNpcGFudC0yPSJTY29yZSI+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjM4OC4yMjU3IiB4Mj0iNDMwLjIyNTciIHkxPSIxMTI3LjMxMjUiIHkyPSIxMTI3LjMxMjUiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iNDMwLjIyNTciIHgyPSI0MzAuMjI1NyIgeTE9IjExMjcuMzEyNSIgeTI9IjExNDAuMzEyNSIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSIzODkuMjI1NyIgeDI9IjQzMC4yMjU3IiB5MT0iMTE0MC4zMTI1IiB5Mj0iMTE0MC4zMTI1Ii8+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSIzOTkuMjI1NywxMTM2LjMxMjUsMzg5LjIyNTcsMTE0MC4zMTI1LDM5OS4yMjU3LDExNDQuMzEyNSwzOTUuMjI1NywxMTQwLjMxMjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMDMuMzg0MyIgeD0iMzk1LjIyNTciIHk9IjExMjIuMjQ2NiI+YmFzZVNjb3JlID0gNDA8L3RleHQ+PC9nPjxnIGNsYXNzPSJtZXNzYWdlIiBkYXRhLXBhcnRpY2lwYW50LTE9IlNjb3JlIiBkYXRhLXBhcnRpY2lwYW50LTI9IlNjb3JlIj48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iMzg4LjIyNTciIHgyPSI0MzAuMjI1NyIgeTE9IjExNjkuNDQ1MyIgeTI9IjExNjkuNDQ1MyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSI0MzAuMjI1NyIgeDI9IjQzMC4yMjU3IiB5MT0iMTE2OS40NDUzIiB5Mj0iMTE4Mi40NDUzIi8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjM4OS4yMjU3IiB4Mj0iNDMwLjIyNTciIHkxPSIxMTgyLjQ0NTMiIHkyPSIxMTgyLjQ0NTMiLz48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjM5OS4yMjU3LDExNzguNDQ1MywzODkuMjI1NywxMTgyLjQ0NTMsMzk5LjIyNTcsMTE4Ni40NDUzLDM5NS4yMjU3LDExODIuNDQ1MyIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjE3OC42NTQ4IiB4PSIzOTUuMjI1NyIgeT0iMTE2NC4zNzk0Ij5jaGFpbkJvbnVzID0gMl4oMisxKSA9IDg8L3RleHQ+PC9nPjxnIGNsYXNzPSJtZXNzYWdlIiBkYXRhLXBhcnRpY2lwYW50LTE9IlNjb3JlIiBkYXRhLXBhcnRpY2lwYW50LTI9IlNjb3JlIj48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iMzg4LjIyNTciIHgyPSI0MzAuMjI1NyIgeTE9IjEyMTEuNTc4MSIgeTI9IjEyMTEuNTc4MSIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSI0MzAuMjI1NyIgeDI9IjQzMC4yMjU3IiB5MT0iMTIxMS41NzgxIiB5Mj0iMTIyNC41NzgxIi8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjM4OS4yMjU3IiB4Mj0iNDMwLjIyNTciIHkxPSIxMjI0LjU3ODEiIHkyPSIxMjI0LjU3ODEiLz48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjM5OS4yMjU3LDEyMjAuNTc4MSwzODkuMjI1NywxMjI0LjU3ODEsMzk5LjIyNTcsMTIyOC41NzgxLDM5NS4yMjU3LDEyMjQuNTc4MSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjE3My41MTk1IiB4PSIzOTUuMjI1NyIgeT0iMTIwNi41MTIyIj50b3RhbFNjb3JlID0gNDAgJiMyMTU7IDkgPSAzNjA8L3RleHQ+PC9nPjxnIGNsYXNzPSJtZXNzYWdlIiBkYXRhLXBhcnRpY2lwYW50LTE9IlNjb3JlIiBkYXRhLXBhcnRpY2lwYW50LTI9IkdhbWUiPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iNTguODM5NCwxMjM0LjU3ODEsNDguODM5NCwxMjM4LjU3ODEsNTguODM5NCwxMjQyLjU3ODEsNTQuODM5NCwxMjM4LjU3ODEiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7c3Ryb2tlLWRhc2hhcnJheToyLDI7IiB4MT0iNTIuODM5NCIgeDI9IjM4Mi4yMjU3IiB5MT0iMTIzOC41NzgxIiB5Mj0iMTIzOC41NzgxIi8+PC9nPjxnIGNsYXNzPSJtZXNzYWdlIiBkYXRhLXBhcnRpY2lwYW50LTE9IkdhbWUiIGRhdGEtcGFydGljaXBhbnQtMj0iU3RhZ2UiPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iMjA2Ljk1NDYsMTI2My43MTA5LDIxNi45NTQ2LDEyNjcuNzEwOSwyMDYuOTU0NiwxMjcxLjcxMDksMjEwLjk1NDYsMTI2Ny43MTA5IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjQ3LjgzOTQiIHgyPSIyMTIuOTU0NiIgeTE9IjEyNjcuNzEwOSIgeTI9IjEyNjcuNzEwOSIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjE1Mi4xMTUyIiB4PSI1NC44Mzk0IiB5PSIxMjYyLjY0NSI+ZXJhc2VCb2FyZHMoZXJhc2VJbmZvKTwvdGV4dD48L2c+PGcgY2xhc3M9Im1lc3NhZ2UiIGRhdGEtcGFydGljaXBhbnQtMT0iU3RhZ2UiIGRhdGEtcGFydGljaXBhbnQtMj0iR2FtZSI+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSI1OC44Mzk0LDEyNzcuNzEwOSw0OC44Mzk0LDEyODEuNzEwOSw1OC44Mzk0LDEyODUuNzEwOSw1NC44Mzk0LDEyODEuNzEwOSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTtzdHJva2UtZGFzaGFycmF5OjIsMjsiIHgxPSI1Mi44Mzk0IiB4Mj0iMjIyLjk1NDYiIHkxPSIxMjgxLjcxMDkiIHkyPSIxMjgxLjcxMDkiLz48L2c+PGcgY2xhc3M9Im1lc3NhZ2UiIGRhdGEtcGFydGljaXBhbnQtMT0iR2FtZSIgZGF0YS1wYXJ0aWNpcGFudC0yPSJHYW1lIj48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iNDcuODM5NCIgeDI9Ijg5LjgzOTQiIHkxPSIxMzE0LjkxMDIiIHkyPSIxMzE0LjkxMDIiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iODkuODM5NCIgeDI9Ijg5LjgzOTQiIHkxPSIxMzE0LjkxMDIiIHkyPSIxMzI3LjkxMDIiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iNDguODM5NCIgeDI9Ijg5LjgzOTQiIHkxPSIxMzI3LjkxMDIiIHkyPSIxMzI3LjkxMDIiLz48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjU4LjgzOTQsMTMyMy45MTAyLDQ4LjgzOTQsMTMyNy45MTAyLDU4LjgzOTQsMTMzMS45MTAyLDU0LjgzOTQsMTMyNy45MTAyIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTExLjM1NjkiIHg9IjU0LjgzOTQiIHk9IjEzMDkuODQ0MiI+bW9kZSA9ICdlcmFzaW5nJzwvdGV4dD48L2c+PHBhdGggZD0iTTE3Ny4zNTY5LDEyOTQuNzEwOSBMMTc3LjM1NjksMTMzNC43MTA5IEwzMTUuMzU2OSwxMzM0LjcxMDkgTDMxNS4zNTY5LDEzMDQuNzEwOSBMMzA1LjM1NjksMTI5NC43MTA5IEwxNzcuMzU2OSwxMjk0LjcxMDkiIGZpbGw9IiNGRUZGREQiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIvPjxwYXRoIGQ9Ik0zMDUuMzU2OSwxMjk0LjcxMDkgTDMwNS4zNTY5LDEzMDQuNzEwOSBMMzE1LjM1NjksMTMwNC43MTA5IEwzMDUuMzU2OSwxMjk0LjcxMDkiIGZpbGw9IiNGRUZGREQiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9Ijk5LjcyODEiIHg9IjE4My4zNTY5IiB5PSIxMzExLjc3NzgiPiYjMjA4Nzc7JiMyNDIzMDtjaGVja0ZhbGwmIzEyNDA4OzwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMTcuMDAwMSIgeD0iMTgzLjM1NjkiIHk9IjEzMjYuOTEwNiI+JiMxMjM3MzsmIzEyNDI1OyYjMTIzOTU7JiMzNjg5OTsmIzM3NzgyOyYjMTI0ODE7JiMxMjQ1NTsmIzEyNDgzOyYjMTI0NjM7PC90ZXh0PjxsaW5lIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTtzdHJva2UtZGFzaGFycmF5OjIsMjsiIHgxPSIxMCIgeDI9IjU5NS44ODA1IiB5MT0iMTM0MC45NzY2IiB5Mj0iMTM0MC45NzY2Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTEiIGZvbnQtd2VpZ2h0PSJib2xkIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjU0LjA1NDQiIHg9IjE1IiB5PSIxMzUxLjE4NyI+WyYjMzY4OTk7JiMzNzc4MjsmIzMyMDY2OyYjMjAxMDI7XTwvdGV4dD48ZyBjbGFzcz0ibWVzc2FnZSIgZGF0YS1wYXJ0aWNpcGFudC0xPSJHYW1lIiBkYXRhLXBhcnRpY2lwYW50LTI9IlN0YWdlIj48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjIwNi45NTQ2LDEzNzEuOTE0MSwyMTYuOTU0NiwxMzc1LjkxNDEsMjA2Ljk1NDYsMTM3OS45MTQxLDIxMC45NTQ2LDEzNzUuOTE0MSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSI0Ny44Mzk0IiB4Mj0iMjEyLjk1NDYiIHkxPSIxMzc1LjkxNDEiIHkyPSIxMzc1LjkxNDEiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMDcuNDk3NiIgeD0iNTQuODM5NCIgeT0iMTM3MC44NDgxIj5jaGVja1plbmtlc2hpKCk8L3RleHQ+PC9nPjxnIGNsYXNzPSJtZXNzYWdlIiBkYXRhLXBhcnRpY2lwYW50LTE9IlN0YWdlIiBkYXRhLXBhcnRpY2lwYW50LTI9IkdhbWUiPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iNTguODM5NCwxNDAxLjA0NjksNDguODM5NCwxNDA1LjA0NjksNTguODM5NCwxNDA5LjA0NjksNTQuODM5NCwxNDA1LjA0NjkiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7c3Ryb2tlLWRhc2hhcnJheToyLDI7IiB4MT0iNTIuODM5NCIgeDI9IjIyMi45NTQ2IiB5MT0iMTQwNS4wNDY5IiB5Mj0iMTQwNS4wNDY5Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMzAuOTI1OCIgeD0iNjQuODM5NCIgeT0iMTM5OS45ODEiPmZhbHNlPC90ZXh0PjwvZz48ZyBjbGFzcz0ibWVzc2FnZSIgZGF0YS1wYXJ0aWNpcGFudC0xPSJHYW1lIiBkYXRhLXBhcnRpY2lwYW50LTI9IkdhbWUiPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSI0Ny44Mzk0IiB4Mj0iODkuODM5NCIgeTE9IjE0MzQuMTc5NyIgeTI9IjE0MzQuMTc5NyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSI4OS44Mzk0IiB4Mj0iODkuODM5NCIgeTE9IjE0MzQuMTc5NyIgeTI9IjE0NDcuMTc5NyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSI0OC44Mzk0IiB4Mj0iODkuODM5NCIgeTE9IjE0NDcuMTc5NyIgeTI9IjE0NDcuMTc5NyIvPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iNTguODM5NCwxNDQzLjE3OTcsNDguODM5NCwxNDQ3LjE3OTcsNTguODM5NCwxNDUxLjE3OTcsNTQuODM5NCwxNDQ3LjE3OTciIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxNDYuNzcwNSIgeD0iNTQuODM5NCIgeT0iMTQyOS4xMTM4Ij5jb21iaW5hdGlvbkNvdW50ID0gMDwvdGV4dD48L2c+PGcgY2xhc3M9Im1lc3NhZ2UiIGRhdGEtcGFydGljaXBhbnQtMT0iR2FtZSIgZGF0YS1wYXJ0aWNpcGFudC0yPSJHYW1lIj48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iNDcuODM5NCIgeDI9Ijg5LjgzOTQiIHkxPSIxNDc2LjMxMjUiIHkyPSIxNDc2LjMxMjUiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iODkuODM5NCIgeDI9Ijg5LjgzOTQiIHkxPSIxNDc2LjMxMjUiIHkyPSIxNDg5LjMxMjUiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iNDguODM5NCIgeDI9Ijg5LjgzOTQiIHkxPSIxNDg5LjMxMjUiIHkyPSIxNDg5LjMxMjUiLz48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjU4LjgzOTQsMTQ4NS4zMTI1LDQ4LjgzOTQsMTQ4OS4zMTI1LDU4LjgzOTQsMTQ5My4zMTI1LDU0LjgzOTQsMTQ4OS4zMTI1IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTIxLjc2NzEiIHg9IjU0LjgzOTQiIHk9IjE0NzEuMjQ2NiI+bW9kZSA9ICduZXdQdXlvJzwvdGV4dD48L2c+PCEtLVNSQz1bakxIMVJ6Q202QnRkTF9ZTUw4MWVJZUxPZk4wT1dlYVI0WlU0YUJwNFF3c2JUZk13R3hxallUR25yZzVnV2c0bjExQUN4TzFLMTBESDJrTjJKdDdJUkZ5Mjlzc29EY0w0Q0VxSU1WUmR2LSAtenh4cW1wNG00WmJWVjdaX1AzZFJ3bVRGTm1uczdzcnRrVkVOazMtdnl2RXVYVHh4dmt1VUlMOENNbXBna0dTQjAwZ29ZZ09zeDM5UEpFcGdyYTJIZjZiMzctQmpUZTZiSVUxTFNrWHYxYjQyTDZXWGVHRE9oSTUtIC1RUzR3YWZFQTJCQzRKZXdLZDBIclhiU1dHLUM3ZS16NFJUNVZ0VjItbF9Ed1ptSzlsekMtTWxfNGRRdFh0aWxXeXZrdUU3YVJYUFl0b0g5TG1jaXZvSzBmejVJbEVncWtPVzhQZmtHNlJHWUFXamY5aW83VDRlMjY0UXNLdWFNV0poT1JnSDV6OXdlTkhHRVpGR3FLbVFfZEdDczdnX25DZUx3MWNDbkpxZ1lCeXBuR25mQmNQV2VQUFQxQzgxRVdjQ0NLbno2MEtjZjdlaW5KUTFicjlINGVLX1RYVXl0bGxsMDZjeTUwVTZTaHAtdHRRUmFwdk9zajRCd0FJTGNFbDdGSzZOWXozTnpqRi1ZcUNqbnAydmdjQjljS3JrOVJ0UlJOUnQ3eDl4U0ZxWkhYaE1PczVvb3VXYmFwc3JPZ1RyLTk2OG5XUHRwNGgwUXdsMEpERWZoYlk4V0h5SVdhNlYwVnhHY2ZwWnE5VmNsSngtekZ2RTRDQ08wY2NfZjdQRVVZeUJUUzVGdWo1bmJmQTNuRzJYVktkNVhUb3FmM2NCMHZpUmZvelJvM3lWLWM5cklLTWhYU09WNEM0dERwa3RVVlNGaVBUelA1bGFPM3VReERkR0Zra2pwdjgyNVhtTlhHTm5wWF9KeVF3MXVZb3dYVW1LZk15LTBLSnNVRkZ0eUFJdThVdGNhcWdIcDZ1WlMwXS0tPjwvZz48L3N2Zz4=" class="uml" alt="uml diagram" title="" /></p>
<p>これらの図を参照することで、ゲーム全体のアーキテクチャと動作フローが理解しやすくなります。</p>
<h2 id="_99">参考資料<a class="headerlink" href="#_99" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="https://amzn.asia/d/6425grx">テスト駆動開発入門</a></li>
<li><a href="https://www.amazon.co.jp/dp/4798124583">実践テスト駆動開発</a></li>
<li><a href="https://puyo.sega.jp/program/">ぷよぷよプログラミング</a></li>
<li><a href="https://www.typescriptlang.org/docs/">TypeScriptハンドブック</a></li>
<li><a href="https://vitest.dev/">Vitest公式ドキュメント</a></li>
</ul>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        
<div class="md-social">
  
    
    
    
    
    <a href="https://github.com/k2works" target="_blank" rel="noopener" title="GitHub Repository/claude-code-booster" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../../..", "features": ["navigation.tabs", "navigation.sections", "toc.integrate", "search.suggest", "search.highlight"], "search": "../../../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../../assets/javascripts/bundle.f55a23d4.min.js"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js"></script>
      
        <script src="../../../docs/assets/js/extra.js"></script>
      
    
  </body>
</html>