---
title: ã·ã‚ˆã·ã‚ˆã‹ã‚‰å§‹ã‚ã‚‹ãƒ†ã‚¹ãƒˆé§†å‹•é–‹ç™º C# WPFç‰ˆ
description: ãƒ†ã‚¹ãƒˆé§†å‹•é–‹ç™ºã®æ‰‹æ³•ã‚’ç”¨ã„ã¦C# WPFã§ã·ã‚ˆã·ã‚ˆã‚²ãƒ¼ãƒ ã‚’å®Ÿè£…ã™ã‚‹éç¨‹ã‚’è§£èª¬
published: true
date: 2025-10-10T00:00:00.000Z
tags: tdd, csharp, wpf, ã·ã‚ˆã·ã‚ˆ, dotnet
editor: markdown
dateCreated: 2025-10-10T00:00:00.000Z
---

# ã·ã‚ˆã·ã‚ˆã‹ã‚‰å§‹ã‚ã‚‹ãƒ†ã‚¹ãƒˆé§†å‹•é–‹ç™º C# WPFç‰ˆ

## ã¯ã˜ã‚ã«

ã¿ãªã•ã‚“ã€ã“ã‚“ã«ã¡ã¯ï¼ä»Šæ—¥ã¯ç§ã¨ä¸€ç·’ã«ãƒ†ã‚¹ãƒˆé§†å‹•é–‹ç™ºï¼ˆTDDï¼‰ã‚’ä½¿ã£ã¦ã€C# WPFï¼ˆWindows Presentation Foundationï¼‰ã§ã·ã‚ˆã·ã‚ˆã‚²ãƒ¼ãƒ ã‚’ä½œã£ã¦ã„ãã¾ã—ã‚‡ã†ã€‚ã•ã¦ã€ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã®æ—…ã«å‡ºã‚‹å‰ã«ã€çš†ã•ã‚“ã¯ã€Œãƒ†ã‚¹ãƒˆé§†å‹•é–‹ç™ºã€ã«ã¤ã„ã¦èã„ãŸã“ã¨ãŒã‚ã‚Šã¾ã™ã‹ï¼Ÿã‚‚ã—ã‹ã—ãŸã‚‰ã€Œãƒ†ã‚¹ãƒˆã£ã¦ã€ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ã„ãŸå¾Œã«ã™ã‚‹ã‚‚ã®ã˜ã‚ƒãªã„ã®ï¼Ÿã€ã¨æ€ã‚ã‚Œã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã­ã€‚

> ãƒ†ã‚¹ãƒˆé§†å‹•é–‹ç™ºã¨ã¯ã€ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã®æ‰‹æ³•ã®ä¸€ç¨®ã§ã€ã€Œãƒ†ã‚¹ãƒˆãƒ•ã‚¡ãƒ¼ã‚¹ãƒˆã€ã®åŸå‰‡ã«å¾“ã„ã€å®Ÿè£…å‰ã«ãƒ†ã‚¹ãƒˆã‚’æ›¸ãã“ã¨ã§ã€ã‚³ãƒ¼ãƒ‰ã®å“è³ªã‚’é«˜ã‚ã€è¨­è¨ˆã‚’æ”¹å–„ã—ã¦ã„ãé–‹ç™ºæ‰‹æ³•ã§ã™ã€‚
> 
> â€” Kent Beck ã€ãƒ†ã‚¹ãƒˆé§†å‹•é–‹ç™ºã€

ã“ã®è¨˜äº‹ã§ã¯ã€ç§ãŸã¡ãŒä¸€ç·’ã«ã·ã‚ˆã·ã‚ˆã‚²ãƒ¼ãƒ ã‚’å®Ÿè£…ã—ãªãŒã‚‰ã€ãƒ†ã‚¹ãƒˆé§†å‹•é–‹ç™ºã®åŸºæœ¬çš„ãªæµã‚Œã¨è€ƒãˆæ–¹ã‚’å­¦ã‚“ã§ã„ãã¾ã™ã€‚ã¾ã‚‹ã§ãƒ¢ãƒ–ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã®ã‚»ãƒƒã‚·ãƒ§ãƒ³ã®ã‚ˆã†ã«ã€ã‚ãªãŸã¨ç§ãŒä¸€ç·’ã«è€ƒãˆã€ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ãã€æ”¹å–„ã—ã¦ã„ãéç¨‹ã‚’ä½“é¨“ã—ã¾ã—ã‚‡ã†ã€‚ã€Œã§ã‚‚ã€ã·ã‚ˆã·ã‚ˆã£ã¦çµæ§‹è¤‡é›‘ãªã‚²ãƒ¼ãƒ ã˜ã‚ƒãªã„ã®ï¼Ÿã€ã¨æ€ã‚ã‚Œã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ãŒã€å¿ƒé…ã„ã‚Šã¾ã›ã‚“ã€‚å„ç« ã§ã¯ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¹ãƒˆãƒ¼ãƒªãƒ¼ã«åŸºã¥ã„ãŸæ©Ÿèƒ½ã‚’ã€ãƒ†ã‚¹ãƒˆã€å®Ÿè£…ã€è§£èª¬ã®é †ã«å°‘ã—ãšã¤é€²ã‚ã¦ã„ãã¾ã™ã‚ˆã€‚ä¸€æ­©ä¸€æ­©ã€ç€å®Ÿã«é€²ã‚“ã§ã„ãã¾ã—ã‚‡ã†ï¼

### ãƒ†ã‚¹ãƒˆé§†å‹•é–‹ç™ºã®ã‚µã‚¤ã‚¯ãƒ«

ã•ã¦ã€ãƒ†ã‚¹ãƒˆé§†å‹•é–‹ç™ºã§ã¯ã€ã©ã®ã‚ˆã†ã«é€²ã‚ã¦ã„ã‘ã°ã„ã„ã®ã§ã—ã‚‡ã†ã‹ï¼Ÿã€Œãƒ†ã‚¹ãƒˆã‚’æ›¸ã„ã¦ã‹ã‚‰å®Ÿè£…ã™ã‚‹ã€ã¨ã„ã†ã®ã¯åˆ†ã‹ã‚Šã¾ã—ãŸãŒã€å…·ä½“çš„ã«ã¯ã©ã‚“ãªæ‰‹é †ã§é€²ã‚ã‚‹ã®ã§ã—ã‚‡ã†ã‹ï¼Ÿ

ç§ãŒã„ã¤ã‚‚å®Ÿè·µã—ã¦ã„ã‚‹ã®ã¯ã€ä»¥ä¸‹ã®3ã¤ã®ã‚¹ãƒ†ãƒƒãƒ—ã‚’ç¹°ã‚Šè¿”ã™ã‚µã‚¤ã‚¯ãƒ«ã§ã™ã€‚çš†ã•ã‚“ã‚‚ä¸€ç·’ã«ã‚„ã£ã¦ã¿ã¾ã—ã‚‡ã†ï¼š

1. **Redï¼ˆèµ¤ï¼‰**: ã¾ãšå¤±æ•—ã™ã‚‹ãƒ†ã‚¹ãƒˆã‚’æ›¸ãã¾ã™ã€‚ã€Œãˆï¼Ÿã‚ã–ã¨å¤±æ•—ã™ã‚‹ãƒ†ã‚¹ãƒˆã‚’ï¼Ÿã€ã¨æ€ã‚ã‚Œã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ãŒã€ã“ã‚Œã«ã¯é‡è¦ãªæ„å‘³ãŒã‚ã‚‹ã‚“ã§ã™ã€‚ã“ã‚Œã‹ã‚‰å®Ÿè£…ã™ã‚‹æ©Ÿèƒ½ãŒä½•ã‚’ã™ã¹ãã‹ã‚’æ˜ç¢ºã«ã™ã‚‹ãŸã‚ãªã‚“ã§ã™ã‚ˆã€‚
2. **Greenï¼ˆç·‘ï¼‰**: æ¬¡ã«ã€ãƒ†ã‚¹ãƒˆãŒé€šã‚‹ã‚ˆã†ã«ã€æœ€å°é™ã®ã‚³ãƒ¼ãƒ‰ã‚’å®Ÿè£…ã—ã¾ã™ã€‚ã“ã®æ®µéšã§ã¯ã€ãã‚Œã„ãªã‚³ãƒ¼ãƒ‰ã‚ˆã‚Šã‚‚ã€Œã¨ã«ã‹ãå‹•ãã“ã¨ã€ã‚’å„ªå…ˆã—ã¾ã™ã€‚ã€Œæœ€å°é™ã€ã¨ã„ã†ã®ãŒãƒã‚¤ãƒ³ãƒˆã§ã™ã€‚å¿…è¦ä»¥ä¸Šã®ã“ã¨ã¯ã—ãªã„ã‚ˆã†ã«ã—ã¾ã—ã‚‡ã†ã€‚
3. **Refactorï¼ˆãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°ï¼‰**: æœ€å¾Œã«ã€ã‚³ãƒ¼ãƒ‰ã®å“è³ªã‚’æ”¹å–„ã—ã¾ã™ã€‚ãƒ†ã‚¹ãƒˆãŒé€šã‚‹ã“ã¨ã‚’ç¢ºèªã—ãªãŒã‚‰ã€é‡è¤‡ã‚’å–ã‚Šé™¤ã„ãŸã‚Šã€ã‚ã‹ã‚Šã‚„ã™ã„åå‰ã‚’ã¤ã‘ãŸã‚Šã—ã¾ã™ã€‚ã€Œå‹•ãã‘ã©æ±šã„ã‚³ãƒ¼ãƒ‰ã€ã‹ã‚‰ã€Œå‹•ã„ã¦ãã‚Œã„ãªã‚³ãƒ¼ãƒ‰ã€ã¸ã¨é€²åŒ–ã•ã›ã‚‹ã‚“ã§ã™ã€‚

> ãƒ†ã‚¹ãƒˆé§†å‹•é–‹ç™ºã®ãƒªã‚ºãƒ ï¼šèµ¤ã€ç·‘ã€ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°ã€‚ã¾ãšå¤±æ•—ã™ã‚‹ãƒ†ã‚¹ãƒˆã‚’æ›¸ãï¼ˆèµ¤ï¼‰ã€æ¬¡ã«ãƒ†ã‚¹ãƒˆãŒé€šã‚‹ã‚ˆã†ã«ã™ã‚‹ï¼ˆç·‘ï¼‰ã€ãã—ã¦é‡è¤‡ã‚’é™¤å»ã™ã‚‹ï¼ˆãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°ï¼‰ã€‚
> 
> â€” Kent Beck ã€ãƒ†ã‚¹ãƒˆé§†å‹•é–‹ç™ºã€

ã“ã®ã‚µã‚¤ã‚¯ãƒ«ã‚’ã€ŒRed-Green-Refactorã€ã‚µã‚¤ã‚¯ãƒ«ã¨å‘¼ã³ã¾ã™ã€‚ã€Œèµ¤ãƒ»ç·‘ãƒ»ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°ã€ã®ãƒªã‚ºãƒ ã‚’åˆ»ã‚€ã‚ˆã†ã«ã€ã“ã®ã‚µã‚¤ã‚¯ãƒ«ã‚’ç¹°ã‚Šè¿”ã—ã¦ã„ãã‚“ã§ã™ã€‚ã“ã‚Œã«ã‚ˆã£ã¦ã€å°‘ã—ãšã¤æ©Ÿèƒ½ã‚’è¿½åŠ ã—ã€ã‚³ãƒ¼ãƒ‰ã®å“è³ªã‚’é«˜ã‚ã¦ã„ãã¾ã—ã‚‡ã†ã€‚çš†ã•ã‚“ã‚‚ä¸€ç·’ã«ã“ã®ãƒªã‚ºãƒ ã‚’ä½“æ„Ÿã—ã¦ã¿ã¦ãã ã•ã„ï¼

```plantuml
@startuml
[*] --> ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã¨ãƒ†ã‚¹ãƒˆ
ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã¨ãƒ†ã‚¹ãƒˆ --> TODO : TODOãƒªã‚¹ãƒˆã‚’ä½œæˆ
TODO --> Red : ãƒ†ã‚¹ãƒˆã‚’æ›¸ã
Red --> Green : æœ€å°é™ã®å®Ÿè£…
Green --> Refactor : ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°
Refactor --> Red : æ¬¡ã®ãƒ†ã‚¹ãƒˆã‚’æ›¸ã
Red : ãƒ†ã‚¹ãƒˆã«å¤±æ•—
Green : ãƒ†ã‚¹ãƒˆã«é€šã‚‹æœ€å°é™ã®å®Ÿè£…
Refactor : ã‚³ãƒ¼ãƒ‰ã®é‡è¤‡ã‚’é™¤å»ã—ã¦ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°
Refactor --> TODO : ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°ãŒå®Œäº†ã—ãŸã‚‰TODOãƒªã‚¹ãƒˆã«æˆ»ã‚‹
TODO --> ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã¨ãƒ†ã‚¹ãƒˆ : TODOãƒªã‚¹ãƒˆãŒç©ºã«ãªã‚‹ã¾ã§ç¹°ã‚Šè¿”ã™
ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã¨ãƒ†ã‚¹ãƒˆ --> ã‚¤ãƒ†ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãƒ¬ãƒ“ãƒ¥ãƒ¼
@enduml
```

### é–‹ç™ºç’°å¢ƒ

ã•ã¦ã€å®Ÿéš›ã«ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ãå‰ã«ã€ç§ãŸã¡ãŒä½¿ç”¨ã™ã‚‹é–‹ç™ºç’°å¢ƒã«ã¤ã„ã¦å°‘ã—ãŠè©±ã—ã—ã¦ãŠãã¾ã—ã‚‡ã†ã€‚çš†ã•ã‚“ã¯ã€Œé“å…·é¸ã³ã¯ä»•äº‹ã®åŠåˆ†ã€ã¨ã„ã†è¨€è‘‰ã‚’èã„ãŸã“ã¨ãŒã‚ã‚Šã¾ã™ã‹ï¼Ÿãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã§ã‚‚åŒã˜ã“ã¨ãŒè¨€ãˆã‚‹ã‚“ã§ã™ã€‚

> è‰¯ã„ãƒ„ãƒ¼ãƒ«ã¯è‰¯ã„ä»•äº‹ã®ç¬¬ä¸€æ­©ã§ã™ã€‚é©åˆ‡ãªé“å…·ã‚’é¸ã¶ã“ã¨ã§ã€é–‹ç™ºã®åŠ¹ç‡ã¨å“è³ªãŒå¤§ããå‘ä¸Šã—ã¾ã™ã€‚
> 
> â€” Andrew Hunt & David Thomas ã€é”äººãƒ—ãƒ­ã‚°ãƒ©ãƒãƒ¼ã€

ã€Œã©ã‚“ãªãƒ„ãƒ¼ãƒ«ã‚’ä½¿ãˆã°ã„ã„ã®ï¼Ÿã€ã¨æ€ã‚ã‚Œã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã­ã€‚ä»Šå›ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã¯ã€ä»¥ä¸‹ã®ãƒ„ãƒ¼ãƒ«ã‚’ä½¿ç”¨ã—ã¦ã„ãã¾ã™ï¼š

- **è¨€èª**: C# â€” ã€Œ.NETã£ã¦é›£ã—ãã†...ã€ã¨æ€ã‚ã‚Œã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ãŒã€C#ã¯å¼·åŠ›ãªå‹ã‚·ã‚¹ãƒ†ãƒ ã¨è±Šå¯Œãªãƒ©ã‚¤ãƒ–ãƒ©ãƒªã«ã‚ˆã‚Šã€å¤§è¦æ¨¡ãªé–‹ç™ºã§ã‚‚ãƒã‚°ã‚’æ¸›ã‚‰ã—ã‚„ã™ããªã‚‹ã‚“ã§ã™ã€‚
- **ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯**: WPFï¼ˆWindows Presentation Foundationï¼‰â€” ã€Œãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—ã‚¢ãƒ—ãƒªã£ã¦ä»Šæ›´ï¼Ÿã€ã¨æ€ã‚ã‚Œã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ãŒã€WPFã¯å¼·åŠ›ãªãƒ‡ãƒ¼ã‚¿ãƒã‚¤ãƒ³ãƒ‡ã‚£ãƒ³ã‚°ã¨XAMLã«ã‚ˆã‚‹å®£è¨€çš„UIå®šç¾©ã«ã‚ˆã‚Šã€ä¿å®ˆæ€§ã®é«˜ã„ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ä½œæˆã§ãã¾ã™ã€‚
- **ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ãƒ‘ã‚¿ãƒ¼ãƒ³**: MVVMï¼ˆModel-View-ViewModelï¼‰â€” WPFã®å¼·åŠ›ãªãƒ‡ãƒ¼ã‚¿ãƒã‚¤ãƒ³ãƒ‡ã‚£ãƒ³ã‚°æ©Ÿèƒ½ã‚’æœ€å¤§é™ã«æ´»ç”¨ã™ã‚‹ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ãƒ‘ã‚¿ãƒ¼ãƒ³ã§ã™ã€‚
- **ãƒ†ã‚¹ãƒˆãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯**: xUnit â€” .NETã‚¨ã‚³ã‚·ã‚¹ãƒ†ãƒ ã§åºƒãä½¿ã‚ã‚Œã¦ã„ã‚‹ä¿¡é ¼æ€§ã®é«˜ã„ãƒ†ã‚¹ãƒˆãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã§ã™ã€‚ãƒ†ã‚¹ãƒˆé§†å‹•é–‹ç™ºã«ã¯æ¬ ã‹ã›ãªã„ãƒ„ãƒ¼ãƒ«ã§ã™ã­ã€‚
- **ã‚³ãƒ¼ãƒ‰ã‚«ãƒãƒ¬ãƒƒã‚¸**: Coverlet â€” ãƒ†ã‚¹ãƒˆãŒã©ã‚Œã ã‘ã‚³ãƒ¼ãƒ‰ã‚’ã‚«ãƒãƒ¼ã—ã¦ã„ã‚‹ã‹ã‚’å¯è¦–åŒ–ã—ã¦ãã‚Œã¾ã™ã€‚ã€Œã©ã“ã‚’ãƒ†ã‚¹ãƒˆã™ã¹ãï¼Ÿã€ã¨ã„ã†ç–‘å•ã«ç­”ãˆã¦ãã‚Œã¾ã™ã‚ˆã€‚
- **é™çš„ã‚³ãƒ¼ãƒ‰è§£æ**: Microsoft.CodeAnalysis.Analyzers â€” ã‚³ãƒ¼ãƒ‰ã®å“è³ªã‚’è‡ªå‹•çš„ã«ãƒã‚§ãƒƒã‚¯ã—ã€æ½œåœ¨çš„ãªå•é¡Œã‚’æ—©æœŸã«ç™ºè¦‹ã—ã¦ãã‚Œã¾ã™ã€‚
- **ã‚³ãƒ¼ãƒ‰ãƒ•ã‚©ãƒ¼ãƒãƒƒã‚¿**: dotnet format â€” ã€Œãƒãƒ¼ãƒ å†…ã§ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã‚¹ã‚¿ã‚¤ãƒ«ãŒçµ±ä¸€ã•ã‚Œã¦ã„ãªã„...ã€ãã‚“ãªæ‚©ã¿ã‚’è§£æ±ºã—ã¦ãã‚Œã¾ã™ã€‚
- **ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†**: Git â€” ã‚³ãƒ¼ãƒ‰ã®å¤‰æ›´å±¥æ­´ã‚’è¿½è·¡ã—ã€ã€Œã‚ã‚Œï¼Ÿæ˜¨æ—¥ã¾ã§ã¡ã‚ƒã‚“ã¨å‹•ã„ã¦ãŸã®ã«...ã€ã¨ã„ã†ã¨ãã«éå»ã®çŠ¶æ…‹ã«æˆ»ã‚Œã‚‹é­”æ³•ã®ãƒ„ãƒ¼ãƒ«ã§ã™ã€‚

ã“ã‚Œã‚‰ã®ãƒ„ãƒ¼ãƒ«ã‚’ä½¿ã£ã¦ã€ãƒ†ã‚¹ãƒˆé§†å‹•é–‹ç™ºã®æµã‚Œã«æ²¿ã£ã¦ã·ã‚ˆã·ã‚ˆã‚²ãƒ¼ãƒ ã‚’å®Ÿè£…ã—ã¦ã„ãã¾ã—ã‚‡ã†ã€‚ã€Œç’°å¢ƒæ§‹ç¯‰ã£ã¦é›£ã—ãã†...ã€ã¨å¿ƒé…ã•ã‚Œã‚‹æ–¹ã‚‚ã„ã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ãŒã€ä»Šå›ã®ã‚¤ãƒ†ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³0ã§ã¯ã€ãã®ç’°å¢ƒæ§‹ç¯‰ã«ã¤ã„ã¦ã—ã£ã‹ã‚Šè§£èª¬ã—ã¦ã„ãã¾ã™ã­ï¼

## è¦ä»¶

### ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¹ãƒˆãƒ¼ãƒªãƒ¼

ã•ã¦ã€å®Ÿéš›ã«ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ãå§‹ã‚ã‚‹å‰ã«ã€å°‘ã—ç«‹ã¡æ­¢ã¾ã£ã¦è€ƒãˆã¦ã¿ã¾ã—ã‚‡ã†ã€‚ã€Œä½•ã‚’ä½œã‚‹ã®ã‹ï¼Ÿã€ã¨ã„ã†åŸºæœ¬çš„ãªå•ã„ã‹ã‘ã§ã™ã€‚ç§ãŸã¡ãŒä½œã‚‹ã·ã‚ˆã·ã‚ˆã‚²ãƒ¼ãƒ ã¯ã€ã©ã®ã‚ˆã†ãªæ©Ÿèƒ½ã‚’æŒã¤ã¹ãã§ã—ã‚‡ã†ã‹ï¼Ÿ

ã‚¢ã‚¸ãƒ£ã‚¤ãƒ«é–‹ç™ºã§ã¯ã€ã“ã®ã€Œä½•ã‚’ä½œã‚‹ã®ã‹ï¼Ÿã€ã¨ã„ã†å•ã„ã«å¯¾ã—ã¦ã€ã€Œãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¹ãƒˆãƒ¼ãƒªãƒ¼ã€ã¨ã„ã†å½¢ã§ç­”ãˆã‚’å‡ºã—ã¾ã™ã€‚çš†ã•ã‚“ã¯ã€Œãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¹ãƒˆãƒ¼ãƒªãƒ¼ã€ã¨ã„ã†è¨€è‘‰ã‚’èã„ãŸã“ã¨ãŒã‚ã‚Šã¾ã™ã‹ï¼Ÿ

> ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¹ãƒˆãƒ¼ãƒªãƒ¼ã¨ã¯ã€ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ã®æ©Ÿèƒ½ã‚’ã€Œèª°ãŒã€ã€Œä½•ã‚’ã€ã€Œãªãœã€ã—ãŸã„ã®ã‹ã¨ã„ã†å½¢å¼ã§è¡¨ç¾ã—ãŸã‚‚ã®ã§ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€é–‹ç™ºãƒãƒ¼ãƒ ã¯å¸¸ã«ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®è¦–ç‚¹ã‚’å¿˜ã‚Œãšã«é–‹ç™ºã‚’é€²ã‚ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚
> 
> â€” Mike Cohn ã€User Stories Appliedã€

ã¤ã¾ã‚Šã€ã€Œãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã¨ã—ã¦ã€ã€‡ã€‡ãŒã§ãã‚‹ï¼ˆã€‡ã€‡ã—ãŸã„ã‹ã‚‰ï¼‰ã€ã¨ã„ã†å½¢å¼ã§æ©Ÿèƒ½ã‚’è¡¨ç¾ã™ã‚‹ã‚“ã§ã™ã€‚ã“ã‚Œã«ã‚ˆã£ã¦ã€ã€Œèª°ã®ãŸã‚ã€ã®ã€Œã©ã‚“ãªæ©Ÿèƒ½ã€ã‚’ã€Œãªãœã€ä½œã‚‹ã®ã‹ãŒæ˜ç¢ºã«ãªã‚Šã¾ã™ã€‚ç´ æ™´ã‚‰ã—ã„ã§ã™ã‚ˆã­ï¼

ã§ã¯ã€ç§ãŸã¡ã®ã·ã‚ˆã·ã‚ˆã‚²ãƒ¼ãƒ ã§ã¯ã€ã©ã‚“ãªãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¹ãƒˆãƒ¼ãƒªãƒ¼ãŒè€ƒãˆã‚‰ã‚Œã‚‹ã§ã—ã‚‡ã†ã‹ï¼Ÿä¸€ç·’ã«è€ƒãˆã¦ã¿ã¾ã—ã‚‡ã†ï¼š

- ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã¨ã—ã¦ã€æ–°ã—ã„ã‚²ãƒ¼ãƒ ã‚’é–‹å§‹ã§ãã‚‹ï¼ˆã‚²ãƒ¼ãƒ ã®åŸºæœ¬æ©Ÿèƒ½ã¨ã—ã¦å¿…è¦ã§ã™ã‚ˆã­ï¼ï¼‰
- ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã¨ã—ã¦ã€è½ã¡ã¦ãã‚‹ã·ã‚ˆã‚’å·¦å³ã«ç§»å‹•ã§ãã‚‹ï¼ˆã·ã‚ˆã‚’é©åˆ‡ãªä½ç½®ã«é…ç½®ã—ãŸã„ã§ã™ã‚ˆã­ï¼‰
- ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã¨ã—ã¦ã€è½ã¡ã¦ãã‚‹ã·ã‚ˆã‚’å›è»¢ã§ãã‚‹ï¼ˆæˆ¦ç•¥çš„ã«ã·ã‚ˆã‚’é…ç½®ã™ã‚‹ãŸã‚ã«å¿…è¦ã§ã™ï¼‰
- ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã¨ã—ã¦ã€ã·ã‚ˆã‚’ç´ æ—©ãè½ä¸‹ã•ã›ã‚‹ã“ã¨ãŒã§ãã‚‹ï¼ˆã€Œæ—©ãæ¬¡ã®ã·ã‚ˆã‚’è½ã¨ã—ãŸã„ï¼ã€ã¨ã„ã†ã¨ãã®ãŸã‚ã«ï¼‰
- ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã¨ã—ã¦ã€åŒã˜è‰²ã®ã·ã‚ˆã‚’4ã¤ä»¥ä¸Šã¤ãªã’ã‚‹ã¨æ¶ˆå»ã§ãã‚‹ï¼ˆã“ã‚ŒãŒã·ã‚ˆã·ã‚ˆã®é†é†å‘³ã§ã™ã‚ˆã­ï¼ï¼‰
- ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã¨ã—ã¦ã€é€£é–åå¿œã‚’èµ·ã“ã—ã¦ã‚ˆã‚Šé«˜ã„ã‚¹ã‚³ã‚¢ã‚’ç²å¾—ã§ãã‚‹ï¼ˆã€Œã‚Œã€œã‚“ã•ã€œã‚“ï¼ã€ã¨å«ã³ãŸããªã‚Šã¾ã™ã‚ˆã­ï¼‰
- ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã¨ã—ã¦ã€å…¨æ¶ˆã—ï¼ˆãœã‚“ã‘ã—ï¼‰ãƒœãƒ¼ãƒŠã‚¹ã‚’ç²å¾—ã§ãã‚‹ï¼ˆã€Œã‚„ã£ãŸï¼å…¨éƒ¨æ¶ˆãˆãŸï¼ã€ã¨ã„ã†é”æˆæ„Ÿã‚’å‘³ã‚ã„ãŸã„ã§ã™ã‚ˆã­ï¼‰
- ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã¨ã—ã¦ã€ã‚²ãƒ¼ãƒ ã‚ªãƒ¼ãƒãƒ¼ã«ãªã‚‹ã¨ã‚²ãƒ¼ãƒ çµ‚äº†ã®æ¼”å‡ºã‚’è¦‹ã‚‹ã“ã¨ãŒã§ãã‚‹ï¼ˆçµ‚ã‚ã‚ŠãŒæ˜ç¢ºã§ãªã„ã¨ãƒ¢ãƒ¤ãƒ¢ãƒ¤ã—ã¾ã™ã‚ˆã­ï¼‰
- ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã¨ã—ã¦ã€ç¾åœ¨ã®ã‚¹ã‚³ã‚¢ã‚’ç¢ºèªã§ãã‚‹ï¼ˆã€Œä»Šã©ã‚Œãã‚‰ã„ç‚¹æ•°å–ã‚Œã¦ã‚‹ã‹ãªï¼Ÿã€ã¨æ°—ã«ãªã‚Šã¾ã™ã‚ˆã­ï¼‰
- ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã¨ã—ã¦ã€ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ã§ã·ã‚ˆã‚’æ“ä½œã§ãã‚‹ï¼ˆPCã§ãƒ—ãƒ¬ã‚¤ã™ã‚‹ãªã‚‰å¿…é ˆã§ã™ã‚ˆã­ï¼‰

ã€Œã†ã‚ã€çµæ§‹ãŸãã•ã‚“ã‚ã‚‹ãª...ã€ã¨æ€ã‚ã‚Œã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ãŒã€å¿ƒé…ã„ã‚Šã¾ã›ã‚“ï¼ã“ã‚Œã‚‰ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¹ãƒˆãƒ¼ãƒªãƒ¼ã‚’ä¸€ã¤ãšã¤å®Ÿè£…ã—ã¦ã„ãã“ã¨ã§ã€å¾ã€…ã«ã‚²ãƒ¼ãƒ ã‚’å®Œæˆã•ã›ã¦ã„ãã¾ã—ã‚‡ã†ã€‚ãƒ†ã‚¹ãƒˆé§†å‹•é–‹ç™ºã®ç´ æ™´ã‚‰ã—ã„ã¨ã“ã‚ã¯ã€å„ã‚¹ãƒˆãƒ¼ãƒªãƒ¼ã‚’å°ã•ãªã‚¿ã‚¹ã‚¯ã«åˆ†è§£ã—ã€ãƒ†ã‚¹ãƒˆâ†’å®Ÿè£…â†’ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°ã®ã‚µã‚¤ã‚¯ãƒ«ã§å°‘ã—ãšã¤é€²ã‚ã‚‰ã‚Œã‚‹ã“ã¨ãªã‚“ã§ã™ã€‚ä¸€æ­©ä¸€æ­©ã€ç€å®Ÿã«é€²ã‚“ã§ã„ãã¾ã—ã‚‡ã†ï¼

### ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹å›³

ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¹ãƒˆãƒ¼ãƒªãƒ¼ã‚’æ•´ç†ã—ãŸã¨ã“ã‚ã§ã€ã€Œã“ã‚Œã‚‰ã®æ©Ÿèƒ½ãŒã©ã®ã‚ˆã†ã«é–¢é€£ã—ã¦ã„ã‚‹ã®ã‹ã€å…¨ä½“åƒãŒè¦‹ãˆã‚‹ã¨ã„ã„ãªã€ã¨æ€ã„ã¾ã›ã‚“ã‹ï¼Ÿãã‚“ãªã¨ãã«å½¹ç«‹ã¤ã®ãŒã€Œãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹å›³ã€ã§ã™ã€‚

ã€Œãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹å›³ã£ã¦ä½•ï¼Ÿã€ã¨æ€ã‚ã‚Œã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã­ã€‚ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹å›³ã¯ã€ã‚·ã‚¹ãƒ†ãƒ ã¨å¤–éƒ¨ã‚¢ã‚¯ã‚¿ãƒ¼ï¼ˆã“ã“ã§ã¯ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã¨ã‚·ã‚¹ãƒ†ãƒ è‡ªä½“ï¼‰ã®ç›¸äº’ä½œç”¨ã‚’è¦–è¦šçš„ã«è¡¨ç¾ã™ã‚‹ãŸã‚ã®å›³ã§ã™ã€‚ã€Œçµµã«æã„ã¦æ•´ç†ã™ã‚‹ã¨åˆ†ã‹ã‚Šã‚„ã™ã„ã€ã¨ã„ã†ã‚„ã¤ã§ã™ã­ã€‚

> ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹å›³ã¯ã€ã‚·ã‚¹ãƒ†ãƒ ãŒå¤–éƒ¨ã«æä¾›ã™ã‚‹æ©Ÿèƒ½ã¨ã€ãã‚Œã‚’åˆ©ç”¨ã™ã‚‹ã‚¢ã‚¯ã‚¿ãƒ¼ã¨ã®é–¢ä¿‚ã‚’è¡¨ç¾ã—ã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€ã‚·ã‚¹ãƒ†ãƒ ã®å¢ƒç•Œã¨è²¬ä»»ç¯„å›²ãŒæ˜ç¢ºã«ãªã‚Šã¾ã™ã€‚
> 
> â€” Martin Fowler ã€UMLãƒ¢ãƒ‡ãƒªãƒ³ã‚°ã®ã‚¨ãƒƒã‚»ãƒ³ã‚¹ã€

ã€Œç™¾èã¯ä¸€è¦‹ã«ã—ã‹ãšã€ã¨ã„ã†ã‚ˆã†ã«ã€å®Ÿéš›ã«è¦‹ã¦ã¿ã‚‹ã®ãŒä¸€ç•ªåˆ†ã‹ã‚Šã‚„ã™ã„ã§ã™ã‚ˆã­ã€‚ã§ã¯ã€ç§ãŸã¡ã®ã·ã‚ˆã·ã‚ˆã‚²ãƒ¼ãƒ ã®ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹å›³ã‚’è¦‹ã¦ã¿ã¾ã—ã‚‡ã†ï¼š

```plantuml
@startuml "ã·ã‚ˆã·ã‚ˆã‚²ãƒ¼ãƒ ã‚·ã‚¹ãƒ†ãƒ ã®ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹å›³"
left to right direction
skinparam packageStyle rectangle
skinparam linetype ortho

' ã‚¢ã‚¯ã‚¿ãƒ¼ã®å®šç¾©
actor "ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼" as Player
actor "ã‚·ã‚¹ãƒ†ãƒ " as System

rectangle "ã·ã‚ˆã·ã‚ˆã‚²ãƒ¼ãƒ ã‚·ã‚¹ãƒ†ãƒ " {
  together {
    ' ã‚²ãƒ¼ãƒ ç®¡ç†é–¢é€£ã®ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹
    usecase "æ–°ã—ã„ã‚²ãƒ¼ãƒ ã‚’é–‹å§‹" as StartNewGame
    usecase "ã‚²ãƒ¼ãƒ ã‚’ãƒªã‚¹ã‚¿ãƒ¼ãƒˆ" as RestartGame
  }

  together {
    ' ã·ã‚ˆæ“ä½œé–¢é€£ã®ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹
    usecase "ã·ã‚ˆã‚’å·¦å³ã«ç§»å‹•" as MovePuyo
    usecase "ã·ã‚ˆã‚’å›è»¢" as RotatePuyo
    usecase "ã·ã‚ˆã‚’ç´ æ—©ãè½ä¸‹" as QuickDropPuyo
  }

  together {
    ' ã‚²ãƒ¼ãƒ ãƒ—ãƒ¬ã‚¤é–¢é€£ã®ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹
    usecase "ã·ã‚ˆã‚’æ¶ˆå»" as ErasePuyo
    usecase "é€£é–åå¿œã‚’ç™ºç”Ÿ" as ChainReaction
    usecase "å…¨æ¶ˆã—ãƒœãƒ¼ãƒŠã‚¹ã‚’ç²å¾—" as ZenkeshiBonus
    usecase "ã‚¹ã‚³ã‚¢ã‚’è¡¨ç¤º" as DisplayScore
  }

  together {
    ' å…¥åŠ›é–¢é€£ã®ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹
    usecase "ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ã§æ“ä½œ" as KeyboardControl
  }

  together {
    ' ã‚·ã‚¹ãƒ†ãƒ é–¢é€£ã®ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹
    usecase "ã‚²ãƒ¼ãƒ ã‚ªãƒ¼ãƒãƒ¼åˆ¤å®š" as GameOverCheck
    usecase "ã‚²ãƒ¼ãƒ ã‚ªãƒ¼ãƒãƒ¼æ¼”å‡º" as GameOverAnimation
  }
}

' ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã®é–¢é€£
Player --> StartNewGame
Player --> RestartGame
Player --> MovePuyo
Player --> RotatePuyo
Player --> QuickDropPuyo
Player --> KeyboardControl

' ã‚·ã‚¹ãƒ†ãƒ ã®é–¢é€£
ErasePuyo <-- System
ChainReaction <-- System
ZenkeshiBonus <-- System
DisplayScore <-- System
GameOverCheck <-- System
GameOverAnimation <-- System

' åŒ…å«é–¢ä¿‚
MovePuyo ..> KeyboardControl : <<extend>>
RotatePuyo ..> KeyboardControl : <<extend>>
QuickDropPuyo ..> KeyboardControl : <<extend>>

' ãã®ä»–ã®é–¢ä¿‚
ErasePuyo ..> ChainReaction : <<include>>
ChainReaction ..> DisplayScore : <<include>>
ZenkeshiBonus ..> DisplayScore : <<include>>
GameOverCheck ..> GameOverAnimation : <<include>>

@enduml
```

ã“ã®å›³ã‚’è¦‹ã‚‹ã¨ã€ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã¨ã‚·ã‚¹ãƒ†ãƒ ã®å½¹å‰²åˆ†æ‹…ãŒã‚ˆãã‚ã‹ã‚Šã¾ã™ã­ã€‚ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã¯ã‚²ãƒ¼ãƒ ã®é–‹å§‹ã‚„æ“ä½œã‚’æ‹…å½“ã—ã€ã‚·ã‚¹ãƒ†ãƒ ã¯ã·ã‚ˆã®æ¶ˆå»åˆ¤å®šã‚„ã‚¹ã‚³ã‚¢è¨ˆç®—ãªã©ã®å†…éƒ¨å‡¦ç†ã‚’æ‹…å½“ã—ã¦ã„ã¾ã™ã€‚ã¾ãŸã€ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰æ“ä½œã¯ã€Œæ‹¡å¼µï¼ˆextendï¼‰ã€é–¢ä¿‚ã«ã‚ã‚Šã€ã·ã‚ˆã®ç§»å‹•ã‚„å›è»¢ãªã©ã®åŸºæœ¬æ“ä½œã‚’å®Ÿç¾ã—ã¦ã„ã‚‹ã“ã¨ãŒã‚ã‹ã‚Šã¾ã™ã€‚

ã“ã®ã‚ˆã†ã«ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹å›³ã‚’ä½œæˆã™ã‚‹ã“ã¨ã§ã€ã‚·ã‚¹ãƒ†ãƒ ã®å…¨ä½“åƒã‚’æŠŠæ¡ã—ã€å®Ÿè£…ã™ã¹ãæ©Ÿèƒ½ã®é–¢é€£æ€§ã‚’æ˜ç¢ºã«ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ãã‚Œã§ã¯ã€å®Ÿéš›ã®ã‚³ãƒ¼ãƒ‰å®Ÿè£…ã«é€²ã‚“ã§ã„ãã¾ã—ã‚‡ã†ï¼

## ã‚¤ãƒ†ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³0: é–‹ç™ºç’°å¢ƒã®æº–å‚™

ã€Œã„ããªã‚Šã‚³ãƒ¼ãƒ‰ã‚’æ›¸ãå§‹ã‚ã‚‹å‰ã«ã€ã¾ãšç’°å¢ƒã‚’æ•´ãˆã¾ã—ã‚‡ã†ï¼ã€å®Ÿã¯ã€ã“ã®æº–å‚™ãŒã¨ã¦ã‚‚é‡è¦ãªã‚“ã§ã™ã€‚è‰¯ã„é“å…·ã‚’æƒãˆã¦ãŠãã“ã¨ã§ã€å¾Œã®ä½œæ¥­ãŒã¨ã¦ã‚‚ã‚¹ãƒ ãƒ¼ã‚ºã«ãªã‚Šã¾ã™ã‚ˆã€‚

### è‡ªå‹•åŒ–ã‹ã‚‰å§‹ã‚ã‚‹ãƒ†ã‚¹ãƒˆé§†å‹•é–‹ç™º

ã‚¨ãƒ”ã‚½ãƒ¼ãƒ‰1ã§ã¯ãƒ†ã‚¹ãƒˆé§†å‹•é–‹ç™ºã®ã‚´ãƒ¼ãƒ«ãŒ **å‹•ä½œã™ã‚‹ãã‚Œã„ãªã‚³ãƒ¼ãƒ‰** ã§ã‚ã‚‹ã“ã¨ã‚’å­¦ã³ã¾ã—ãŸã€‚ã§ã¯ã€è‰¯ã„ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ãç¶šã‘ã‚‹ãŸã‚ã«ã¯ä½•ãŒå¿…è¦ã«ãªã‚‹ã§ã—ã‚‡ã†ã‹ï¼Ÿãã‚Œã¯[ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢é–‹ç™ºã®ä¸‰ç¨®ã®ç¥å™¨](https://t-wada.hatenablog.jp/entry/clean-code-that-works)ã¨å‘¼ã°ã‚Œã‚‹ã‚‚ã®ã§ã™ã€‚

> ä»Šæ—¥ã®ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢é–‹ç™ºã®ä¸–ç•Œã«ãŠã„ã¦çµ¶å¯¾ã«ãªã‘ã‚Œã°ãªã‚‰ãªã„3ã¤ã®æŠ€è¡“çš„ãªæŸ±ãŒã‚ã‚Šã¾ã™ã€‚
> ä¸‰æœ¬æŸ±ã¨è¨€ã£ãŸã‚Šã€ä¸‰ç¨®ã®ç¥å™¨ã¨è¨€ã£ãŸã‚Šã—ã¦ã„ã¾ã™ãŒã€ãã‚Œã‚‰ã¯
> 
>   - ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†
> 
>   - ãƒ†ã‚¹ãƒ†ã‚£ãƒ³ã‚°
> 
>   - è‡ªå‹•åŒ–
> 
> ã®3ã¤ã§ã™ã€‚
> 
> â€”  https://t-wada.hatenablog.jp/entry/clean-code-that-works 

ã“ã‚Œã‹ã‚‰ã€ã“ã‚Œã‚‰3ã¤ã®ç¥å™¨ã‚’ä¸€ã¤ãšã¤æº–å‚™ã—ã¦ã„ãã¾ã™ã€‚ã€Œãªã‚“ã ã‹å¤§å¤‰ãã†...ã€ã¨æ€ã‚ã‚Œã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ãŒã€ä¸€åº¦æº–å‚™ã—ã¦ã—ã¾ãˆã°ã€å¾Œã¯è‡ªå‹•ã§å‹•ã„ã¦ãã‚Œã‚‹ã®ã§æ¥½ã«ãªã‚Šã¾ã™ã‚ˆï¼

### ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ä½œæˆ

ã¾ãšã¯ã€WPFãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œæˆã—ã¾ã—ã‚‡ã†ã€‚ã€Œã©ã†ã‚„ã£ã¦ä½œã‚‹ã®ï¼Ÿã€ã¨ã„ã†ã¨ã€.NET CLIã‚’ä½¿ã„ã¾ã™ã€‚ã‚³ãƒãƒ³ãƒ‰ä¸€ã¤ã§ç°¡å˜ã«ä½œã‚Œã‚‹ã‚“ã§ã™ã‚ˆï¼

```bash
# ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ç§»å‹•
cd /workspaces/case-study-game-dev/app/csharp

# WPFãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œæˆ
dotnet new wpf -n PuyoPuyoWPF -o PuyoPuyoWPF

# ãƒ†ã‚¹ãƒˆãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œæˆ
dotnet new xunit -n PuyoPuyoWPF.Tests -o PuyoPuyoWPF.Tests

# ã‚½ãƒªãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆ
dotnet new sln -n PuyoPuyoWPF

# ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ã‚½ãƒªãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ã«è¿½åŠ 
dotnet sln add PuyoPuyoWPF/PuyoPuyoWPF.csproj
dotnet sln add PuyoPuyoWPF.Tests/PuyoPuyoWPF.Tests.csproj

# ãƒ†ã‚¹ãƒˆãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‹ã‚‰ãƒ¡ã‚¤ãƒ³ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¸ã®å‚ç…§ã‚’è¿½åŠ 
cd PuyoPuyoWPF.Tests
dotnet add reference ../PuyoPuyoWPF/PuyoPuyoWPF.csproj
cd ..
```

ã€ŒãŸãã•ã‚“ã‚³ãƒãƒ³ãƒ‰ãŒã‚ã‚‹ãªã...ã€ã¨æ€ã‚ã‚Œã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ãŒã€ä¸€ã¤ãšã¤è¦‹ã¦ã„ãã¾ã—ã‚‡ã†ï¼š

1. `dotnet new wpf` - WPFã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œæˆã—ã¾ã™
2. `dotnet new xunit` - xUnitã®ãƒ†ã‚¹ãƒˆãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œæˆã—ã¾ã™
3. `dotnet new sln` - ã‚½ãƒªãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã—ã¾ã™ï¼ˆè¤‡æ•°ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ã¾ã¨ã‚ã¦ç®¡ç†ã™ã‚‹ãŸã‚ï¼‰
4. `dotnet sln add` - ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ã‚½ãƒªãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ã«è¿½åŠ ã—ã¾ã™
5. `dotnet add reference` - ãƒ†ã‚¹ãƒˆãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‹ã‚‰ãƒ¡ã‚¤ãƒ³ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’å‚ç…§ã§ãã‚‹ã‚ˆã†ã«ã—ã¾ã™

ã“ã‚Œã§ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®åŸºæœ¬æ§‹é€ ãŒã§ãã¾ã—ãŸï¼

### ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†

#### Gitãƒªãƒã‚¸ãƒˆãƒªã®åˆæœŸåŒ–

æ¬¡ã«ã€ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†ã®æº–å‚™ã‚’ã—ã¾ã—ã‚‡ã†ã€‚ã€Œãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†ã£ã¦ä½•ï¼Ÿã€ã¨ã„ã†æ–¹ã‚‚ã„ã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã­ã€‚ç°¡å˜ã«è¨€ã†ã¨ã€ã€Œã‚³ãƒ¼ãƒ‰ã®å¤‰æ›´å±¥æ­´ã‚’è¨˜éŒ²ã—ã¦ã€ã„ã¤ã§ã‚‚éå»ã®çŠ¶æ…‹ã«æˆ»ã‚Œã‚‹ã‚ˆã†ã«ã™ã‚‹ä»•çµ„ã¿ã€ãªã‚“ã§ã™ã€‚

```bash
# Gitãƒªãƒã‚¸ãƒˆãƒªã‚’åˆæœŸåŒ–ï¼ˆã¾ã ã®å ´åˆï¼‰
# æ—¢ã«ãƒªãƒã‚¸ãƒˆãƒªãŒã‚ã‚‹å ´åˆã¯ã‚¹ã‚­ãƒƒãƒ—

# .gitignoreãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆ
cat > .gitignore << 'EOF'
## Ignore Visual Studio temporary files, build results, and
## files generated by popular Visual Studio add-ons.

# User-specific files
*.suo
*.user
*.userosscache
*.sln.docstates

# Build results
[Dd]ebug/
[Dd]ebugPublic/
[Rr]elease/
[Rr]eleases/
x64/
x86/
[Bb]in/
[Oo]bj/

# Visual Studio cache/options directory
.vs/

# Test results
[Tt]est[Rr]esult*/
[Bb]uild[Ll]og.*

# Coverage reports
coverage/
TestResults/

# NuGet Packages
*.nupkg
.nuget/
EOF
```

`.gitignore`ãƒ•ã‚¡ã‚¤ãƒ«ã¯ã€ã€Œã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ã¯Gitã§ç®¡ç†ã—ãªãã¦ã„ã„ã‚ˆã€ã¨æŒ‡å®šã™ã‚‹ãŸã‚ã®ãƒ•ã‚¡ã‚¤ãƒ«ã§ã™ã€‚ãƒ“ãƒ«ãƒ‰çµæœã‚„ãƒ†ã‚¹ãƒˆçµæœãªã©ã€è‡ªå‹•ç”Ÿæˆã•ã‚Œã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ã¯ç®¡ç†ã™ã‚‹å¿…è¦ãŒãªã„ã§ã™ã‹ã‚‰ã­ã€‚

#### ã‚³ãƒŸãƒƒãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®è¦ç´„

Gitã§ã‚³ãƒ¼ãƒ‰ã‚’è¨˜éŒ²ã™ã‚‹ã¨ãã€ã€Œã‚³ãƒŸãƒƒãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã€ã¨ã„ã†ã‚‚ã®ã‚’æ›¸ãã¾ã™ã€‚ã€Œã©ã‚“ãªãµã†ã«æ›¸ã‘ã°ã„ã„ã®ï¼Ÿã€ã¨ã„ã†ç–‘å•ãŒã‚ã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã­ã€‚å®Ÿã¯ã€ã‚ã‹ã‚Šã‚„ã™ã„ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’æ›¸ããŸã‚ã®è¦ç´„ãŒã‚ã‚‹ã‚“ã§ã™ã€‚

ã“ã‚Œã¾ã§ä½œæ¥­ã®åŒºåˆ‡ã‚Šã”ã¨ã«ãƒªãƒã‚¸ãƒˆãƒªã«ã‚³ãƒŸãƒƒãƒˆã—ã¦ã„ã¾ã—ãŸãŒã€ãã®éš›ã«ä»¥ä¸‹ã®ã‚ˆã†ãªæ›¸å¼ã§ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’æ›¸ã„ã¦ã„ãã¾ã™ï¼š

```bash
git commit -m 'feat: æ–°æ©Ÿèƒ½ã‚’è¿½åŠ '
git commit -m 'fix: ãƒã‚°ã‚’ä¿®æ­£'
git commit -m 'refactor: ã‚³ãƒ¼ãƒ‰ã‚’ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°'
git commit -m 'test: ãƒ†ã‚¹ãƒˆã‚’è¿½åŠ '
git commit -m 'chore: ãƒ“ãƒ«ãƒ‰è¨­å®šã‚’å¤‰æ›´'
```

ã“ã®æ›¸å¼ã¯ [Angularãƒ«ãƒ¼ãƒ«](https://github.com/angular/angular.js/blob/master/DEVELOPERS.md#type)ã«å¾“ã£ã¦ã„ã¾ã™ã€‚å…·ä½“çš„ã«ã¯ã€ãã‚Œãã‚Œã®ã‚³ãƒŸãƒƒãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã¯ãƒ˜ãƒƒãƒ€ã€ãƒœãƒ‡ã‚£ã€ãƒ•ãƒƒã‚¿ã§æ§‹æˆã•ã‚Œã¦ã„ã¾ã™ã€‚ãƒ˜ãƒƒãƒ€ã¯ã‚¿ã‚¤ãƒ—ã€ã‚¹ã‚³ãƒ¼ãƒ—ã€ã‚¿ã‚¤ãƒˆãƒ«ã¨ã„ã†ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã§æ§‹æˆã•ã‚Œã¦ã„ã¾ã™ã€‚

```
<ã‚¿ã‚¤ãƒ—>(<ã‚¹ã‚³ãƒ¼ãƒ—>): <ã‚¿ã‚¤ãƒˆãƒ«>
<ç©ºè¡Œ>
<ãƒœãƒ‡ã‚£>
<ç©ºè¡Œ>
<ãƒ•ãƒƒã‚¿>
```

ãƒ˜ãƒƒãƒ€ã¯å¿…é ˆã§ã™ã€‚ãƒ˜ãƒƒãƒ€ã®ã‚¹ã‚³ãƒ¼ãƒ—ã¯ä»»æ„ã§ã™ã€‚ã‚³ãƒŸãƒƒãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®é•·ã•ã¯50æ–‡å­—ã¾ã§ã«ã—ã¦ãã ã•ã„ï¼ˆãã†ã™ã‚‹ã“ã¨ã§ãã®ä»–ã®Gitãƒ„ãƒ¼ãƒ«ã¨åŒæ§˜ã«GitHubä¸Šã§èª­ã¿ã‚„ã™ããªã‚Šã¾ã™ï¼‰ã€‚

ã‚³ãƒŸãƒƒãƒˆã®ã‚¿ã‚¤ãƒ—ã¯æ¬¡ã‚’ç”¨ã„ã¦ä¸‹ã•ã„ï¼š

- **feat**: æ–°ã—ã„æ©Ÿèƒ½ã®è¿½åŠ 
- **fix**: ãƒã‚°ä¿®æ­£
- **docs**: ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆå¤‰æ›´ã®ã¿
- **style**: ã‚³ãƒ¼ãƒ‰ã«å½±éŸ¿ã‚’ä¸ãˆãªã„å¤‰æ›´ï¼ˆãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã€ã‚»ãƒŸã‚³ãƒ­ãƒ³ã®æ¬ è½ãªã©ï¼‰
- **refactor**: æ©Ÿèƒ½è¿½åŠ ã§ã‚‚ãƒã‚°ä¿®æ­£ã§ã‚‚ãªã„ã‚³ãƒ¼ãƒ‰å¤‰æ›´
- **perf**: ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã‚’æ”¹å–„ã™ã‚‹ã‚³ãƒ¼ãƒ‰å¤‰æ›´
- **test**: å­˜åœ¨ã—ãªã„ãƒ†ã‚¹ãƒˆã®è¿½åŠ ã€ã¾ãŸã¯æ—¢å­˜ã®ãƒ†ã‚¹ãƒˆã®ä¿®æ­£
- **chore**: ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆç”Ÿæˆã®ã‚ˆã†ãªã€è£œåŠ©ãƒ„ãƒ¼ãƒ«ã‚„ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚„ãƒ“ãƒ«ãƒ‰ãƒ—ãƒ­ã‚»ã‚¹ã®å¤‰æ›´

ã€Œãªã‚‹ã»ã©ã€ã“ã†ã‚„ã£ã¦æ›¸ã‘ã°ã€å¾Œã‹ã‚‰è¦‹ãŸã¨ãã«ä½•ã‚’ã—ãŸã‹ãŒã™ãã‚ã‹ã‚Šã¾ã™ã­ï¼ã€ãã®é€šã‚Šã§ã™ï¼

ã§ã¯ã€æœ€åˆã®ã‚³ãƒŸãƒƒãƒˆã‚’ã—ã¦ã¿ã¾ã—ã‚‡ã†ï¼š

```bash
cd PuyoPuyoWPF
git add .
git commit -m 'chore: ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®åˆæœŸè¨­å®š'
```

### ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãƒãƒãƒ¼ã‚¸ãƒ£

ã§ã¯ **è‡ªå‹•åŒ–** ã®æº–å‚™ã«å…¥ã‚ŠãŸã„ã®ã§ã™ãŒã€ãã®ãŸã‚ã«ã¯ã„ãã¤ã‹ã®å¤–éƒ¨ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’åˆ©ç”¨ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚.NETã§ã¯ **NuGet** ãŒãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãƒãƒãƒ¼ã‚¸ãƒ£ã¨ã—ã¦ã®å½¹å‰²ã‚’æœãŸã—ã¾ã™ã€‚

> NuGetã¨ã¯ã€.NETç”¨ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼ã§ã™ã€‚é–‹ç™ºè€…ãŒä½œæˆãƒ»å…±æœ‰ã—ãŸãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚„ãƒ„ãƒ¼ãƒ«ã‚’ã€Œãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã€ã¨ã—ã¦é…å¸ƒãƒ»åˆ©ç”¨ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

**NuGet**ã‚’ä½¿ã£ã¦ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã®ã¯ç°¡å˜ã§ã™ï¼š

```bash
# WPFãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«å¿…è¦ãªãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’è¿½åŠ 
cd PuyoPuyoWPF
# MVVMãƒ©ã‚¤ãƒ–ãƒ©ãƒªï¼ˆCommunityToolkit.Mvvmï¼‰ã‚’è¿½åŠ 
dotnet add package CommunityToolkit.Mvvm
cd ..

# ãƒ†ã‚¹ãƒˆãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«å¿…è¦ãªãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’è¿½åŠ 
cd PuyoPuyoWPF.Tests
dotnet add package Microsoft.NET.Test.Sdk
dotnet add package xunit
dotnet add package xunit.runner.visualstudio
dotnet add package Moq  # ãƒ¢ãƒƒã‚¯ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯
cd ..
```

ã€ŒCommunityToolkit.Mvvmã£ã¦ä½•ï¼Ÿã€ã¨æ€ã‚ã‚Œã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã­ã€‚ã“ã‚Œã¯Microsoftå…¬å¼ã®MVVMãƒ©ã‚¤ãƒ–ãƒ©ãƒªã§ã€WPFã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³é–‹ç™ºã‚’å¼·åŠ›ã«ã‚µãƒãƒ¼ãƒˆã—ã¦ãã‚Œã¾ã™ã€‚ã€ŒWPFã§MVVMã‚„ã‚‹ãªã‚‰CommunityToolkit.Mvvmã€ã¨è¦šãˆã¦ãŠãã¨ã„ã„ã§ã™ã‚ˆï¼

C#/.NETãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã¯ã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆ`.csproj`ï¼‰ã«ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ä¾å­˜é–¢ä¿‚ãŒè¨˜è¿°ã•ã‚Œã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ã‚¯ãƒ­ãƒ¼ãƒ³ã—ãŸéš›ã« `dotnet restore` ã‚’å®Ÿè¡Œã™ã‚‹ã ã‘ã§å¿…è¦ãªãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãŒè‡ªå‹•çš„ã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¾ã™ã€‚ä¾¿åˆ©ã§ã™ã‚ˆã­ï¼

å®Ÿéš›ã«ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã‚’è¦‹ã¦ã¿ã¾ã—ã‚‡ã†ï¼š

```bash
cat PuyoPuyoWPF.Tests/PuyoPuyoWPF.Tests.csproj
```

```xml
<Project Sdk="Microsoft.NET.Sdk">

  <PropertyGroup>
    <TargetFramework>net8.0</TargetFramework>
    <ImplicitUsings>enable</ImplicitUsings>
    <Nullable>enable</Nullable>
    <IsPackable>false</IsPackable>
  </PropertyGroup>

  <ItemGroup>
    <PackageReference Include="Microsoft.NET.Test.Sdk" Version="17.8.0" />
    <PackageReference Include="Moq" Version="4.20.70" />
    <PackageReference Include="xunit" Version="2.6.2" />
    <PackageReference Include="xunit.runner.visualstudio" Version="2.5.4">
      <IncludeAssets>runtime; build; native; contentfiles; analyzers; buildtransitive</IncludeAssets>
      <PrivateAssets>all</PrivateAssets>
    </PackageReference>
  </ItemGroup>

  <ItemGroup>
    <ProjectReference Include="..\PuyoPuyoWPF\PuyoPuyoWPF.csproj" />
  </ItemGroup>

</Project>
```

ã€Œã“ã†ã‚„ã£ã¦è¦‹ã‚‹ã¨ã€ã©ã‚“ãªãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ä½¿ã£ã¦ã„ã‚‹ã‹ãŒä¸€ç›®ç­ç„¶ã§ã™ã­ï¼ã€ãã®é€šã‚Šã§ã™ï¼

```bash
git add .
git commit -m 'chore: ãƒ†ã‚¹ãƒˆç”¨ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®è¿½åŠ '
```

### é™çš„ã‚³ãƒ¼ãƒ‰è§£æ

è‰¯ã„ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ãç¶šã‘ã‚‹ãŸã‚ã«ã¯ã€ã‚³ãƒ¼ãƒ‰ã®å“è³ªã‚’ç¶­æŒã—ã¦ã„ãå¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚**ãƒ†ã‚¹ãƒˆé§†å‹•é–‹ç™º**ã«ã‚ˆã‚Šãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚’å‹•ã‹ã—ãªãŒã‚‰å“è³ªã‚’æ”¹å–„ã—ã¦ã„ãã¾ã™ãŒã€å‡ºæ¥ä¸ŠãŒã£ãŸã‚³ãƒ¼ãƒ‰ã«å¯¾ã™ã‚‹å“è³ªãƒã‚§ãƒƒã‚¯ã®æ–¹æ³•ã¨ã—ã¦**é™çš„ã‚³ãƒ¼ãƒ‰è§£æ**ãŒã‚ã‚Šã¾ã™ã€‚

C#/.NETç”¨ã®**é™çš„ã‚³ãƒ¼ãƒ‰è§£æ**ãƒ„ãƒ¼ãƒ«ã¨ã—ã¦[Microsoft.CodeAnalysis.Analyzers](https://github.com/dotnet/roslyn-analyzers)ã‚’ä½¿ã£ã¦ç¢ºèªã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚

```bash
# ã‚¢ãƒŠãƒ©ã‚¤ã‚¶ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
cd PuyoPuyoWPF
dotnet add package Microsoft.CodeAnalysis.Analyzers
cd ..
```

æ¬¡ã«ã€ã‚³ãƒ¼ãƒ‰åˆ†æã®è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã—ã¾ã™ã€‚`.editorconfig`ãƒ•ã‚¡ã‚¤ãƒ«ã§ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã‚¹ã‚¿ã‚¤ãƒ«ã‚’å®šç¾©ã§ãã¾ã™ï¼š

```bash
# PuyoPuyoWPFãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«.editorconfigã‚’ä½œæˆ
cat > .editorconfig << 'EOF'
root = true

[*]
indent_style = space
indent_size = 4
end_of_line = crlf
charset = utf-8
trim_trailing_whitespace = true
insert_final_newline = true

[*.cs]
# C# coding conventions
dotnet_sort_using_directives = true
dotnet_separate_import_directive_groups = false

# Language rules
csharp_prefer_var = false:suggestion
csharp_prefer_braces = true:warning

# Code quality rules
dotnet_diagnostic.CA1502.severity = warning
# CA1502: ãƒ¡ã‚½ãƒƒãƒ‰ã®å¾ªç’°çš„è¤‡é›‘åº¦ã‚’7ä»¥ä¸‹ã«åˆ¶é™
dotnet_code_quality.CA1502.cyclomatic_complexity = 7

# Naming conventions
dotnet_naming_rule.interface_should_be_begins_with_i.severity = warning
dotnet_naming_rule.interface_should_be_begins_with_i.symbols = interface
dotnet_naming_rule.interface_should_be_begins_with_i.style = begins_with_i

dotnet_naming_rule.types_should_be_pascal_case.severity = warning
dotnet_naming_rule.types_should_be_pascal_case.symbols = types
dotnet_naming_rule.types_should_be_pascal_case.style = pascal_case

dotnet_naming_symbols.interface.applicable_kinds = interface
dotnet_naming_symbols.interface.applicable_accessibilities = public, internal, private, protected, protected_internal, private_protected

dotnet_naming_symbols.types.applicable_kinds = class, struct, interface, enum
dotnet_naming_symbols.types.applicable_accessibilities = public, internal, private, protected, protected_internal, private_protected

dotnet_naming_style.begins_with_i.required_prefix = I
dotnet_naming_style.begins_with_i.capitalization = pascal_case

dotnet_naming_style.pascal_case.capitalization = pascal_case
EOF
```

ã€Œ.editorconfigã£ã¦ä½•ï¼Ÿã€ã¨æ€ã‚ã‚Œã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã­ã€‚ã“ã‚Œã¯ã€ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã‚¹ã‚¿ã‚¤ãƒ«ï¼ˆã‚¤ãƒ³ãƒ‡ãƒ³ãƒˆã®å¹…ã‚„å‘½åè¦å‰‡ãªã©ï¼‰ã‚’å®šç¾©ã™ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ã§ã™ã€‚ãƒãƒ¼ãƒ å…¨ä½“ã§åŒã˜ã‚¹ã‚¿ã‚¤ãƒ«ã‚’å…±æœ‰ã§ãã‚‹ã®ã§ã€ã€Œã“ã®äººã®ã‚³ãƒ¼ãƒ‰ã¯èª­ã¿ã«ãã„ãª...ã€ã¨ã„ã†å•é¡ŒãŒæ¸›ã‚Šã¾ã™ã‚ˆï¼

**å¾ªç’°è¤‡é›‘åº¦ã«ã¤ã„ã¦**

ã“ã“ã§è¨­å®šã—ã¦ã„ã‚‹`cyclomatic_complexity = 7`ã«ã¤ã„ã¦å°‘ã—èª¬æ˜ã—ã¾ã—ã‚‡ã†ã€‚å¾ªç’°è¤‡é›‘åº¦ï¼ˆCyclomatic Complexityï¼‰ã¨ã¯ã€ã‚³ãƒ¼ãƒ‰ã®è¤‡é›‘ã•ã‚’æ¸¬ã‚‹æŒ‡æ¨™ã®ä¸€ã¤ã§ã™ã€‚

> å¾ªç’°è¤‡é›‘åº¦ã¨ã¯ã€ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã®åˆ¶å¾¡ãƒ•ãƒ­ãƒ¼ã®è¤‡é›‘ã•ã‚’æ¸¬ã‚‹æŒ‡æ¨™ã§ã™ã€‚ifæ–‡ã€foræ–‡ã€whileæ–‡ãªã©ã®åˆ†å²ã‚„ç¹°ã‚Šè¿”ã—ãŒå¢—ãˆã‚‹ã»ã©ã€ã“ã®å€¤ã¯å¤§ãããªã‚Šã¾ã™ã€‚å€¤ãŒé«˜ã„ã»ã©ã‚³ãƒ¼ãƒ‰ã®ç†è§£ãŒé›£ã—ãã€ãƒã‚°ãŒæ··å…¥ã—ã‚„ã™ããªã‚Šã¾ã™ã€‚
> 
> â€” Thomas J. McCabe ã€A Complexity Measureã€

ä¸€èˆ¬çš„ãªç›®å®‰ã¨ã—ã¦ï¼š
- **1-7**: ã‚·ãƒ³ãƒ—ãƒ«ã§ç†è§£ã—ã‚„ã™ã„ï¼ˆæ¨å¥¨ï¼‰
- **8-10**: ã‚„ã‚„è¤‡é›‘ã€æ³¨æ„ãŒå¿…è¦
- **11ä»¥ä¸Š**: è¤‡é›‘ã™ãã‚‹ã€ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°æ¨å¥¨

ã€Œãªãœ7ãªã®ï¼Ÿã€ã¨æ€ã‚ã‚Œã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã­ã€‚ã“ã‚Œã¯ã€äººé–“ãŒä¸€åº¦ã«ç†è§£ã§ãã‚‹æƒ…å ±ã®é‡ï¼ˆãƒã‚¸ã‚«ãƒ«ãƒŠãƒ³ãƒãƒ¼7Â±2ï¼‰ã«åŸºã¥ã„ãŸçµŒé¨“å‰‡ã§ã™ã€‚ãƒ¡ã‚½ãƒƒãƒ‰ã®å¾ªç’°è¤‡é›‘åº¦ã‚’7ä»¥ä¸‹ã«ä¿ã¤ã“ã¨ã§ã€ã‚³ãƒ¼ãƒ‰ã®ç†è§£ã—ã‚„ã™ã•ã¨ãƒ†ã‚¹ãƒˆã®ã—ã‚„ã™ã•ã‚’ç¶­æŒã§ãã¾ã™ã€‚

ã‚³ãƒ¼ãƒ‰åˆ†æã‚’å®Ÿè¡Œã—ã¦ã¿ã¾ã—ã‚‡ã†ï¼š

```bash
dotnet build
```

ã€Œãƒ“ãƒ«ãƒ‰ã™ã‚‹ã ã‘ã§é™çš„ã‚³ãƒ¼ãƒ‰è§£æã‚‚ã—ã¦ãã‚Œã‚‹ã‚“ã§ã™ã­ï¼ã€ãã®é€šã‚Šã§ã™ã€‚ãã—ã¦ã€ã‚‚ã—ãƒ¡ã‚½ãƒƒãƒ‰ãŒè¤‡é›‘ã™ãã‚‹å ´åˆï¼ˆå¾ªç’°è¤‡é›‘åº¦ãŒ7ã‚’è¶…ãˆã‚‹å ´åˆï¼‰ã€è­¦å‘ŠãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã‚ˆï¼

```bash
git add .
git commit -m 'chore: é™çš„ã‚³ãƒ¼ãƒ‰è§£æã®è¨­å®š'
```

### Lintãƒ„ãƒ¼ãƒ«

**Lintãƒ„ãƒ¼ãƒ«**ã¯ã€ã‚³ãƒ¼ãƒ‰ã®å“è³ªã‚’ã•ã‚‰ã«é«˜ã‚ã‚‹ãŸã‚ã®é™çš„è§£æãƒ„ãƒ¼ãƒ«ã§ã™ã€‚ã€Œ.editorconfigã®è¨­å®šã ã‘ã˜ã‚ƒä¸ååˆ†ãªã®ï¼Ÿã€ã¨æ€ã‚ã‚Œã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ãŒã€Lintãƒ„ãƒ¼ãƒ«ã¯ã‚ˆã‚Šè©³ç´°ãªãƒ«ãƒ¼ãƒ«ãƒã‚§ãƒƒã‚¯ã‚„ã€C#å›ºæœ‰ã®ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹ã‚’æ¤œè¨¼ã—ã¦ãã‚Œã¾ã™ã€‚

C#/.NETã§ã¯**StyleCop Analyzers**ãŒäººæ°—ã§ã™ã€‚StyleCopã¯ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¦ç´„é•åã‚’ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«æ™‚ã«æ¤œå‡ºã—ã€è­¦å‘Šã‚„ã‚¨ãƒ©ãƒ¼ã¨ã—ã¦é€šçŸ¥ã—ã¦ãã‚Œã¾ã™ã€‚

```bash
cd PuyoPuyoWPF
dotnet add package StyleCop.Analyzers
dotnet add package Microsoft.CodeAnalysis.NetAnalyzers
cd ..
```

ã€ŒMicrosoft.CodeAnalysis.NetAnalyzersã£ã¦ä½•ã§ã™ã‹?ã€ ã“ã‚Œã¯.NETã®å…¬å¼ã‚³ãƒ¼ãƒ‰ã‚¢ãƒŠãƒ©ã‚¤ã‚¶ãƒ¼ã§ã€ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã®å•é¡Œã‚„ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã®æ‡¸å¿µã€APIä½¿ç”¨æ–¹æ³•ã®èª¤ã‚Šãªã©ã‚’æ¤œå‡ºã—ã¦ãã‚Œã¾ã™ã€‚StyleCopã¨çµ„ã¿åˆã‚ã›ã‚‹ã“ã¨ã§ã€åŒ…æ‹¬çš„ãªã‚³ãƒ¼ãƒ‰å“è³ªãƒã‚§ãƒƒã‚¯ãŒå¯èƒ½ã«ãªã‚Šã¾ã™ã€‚

æ¬¡ã«ã€StyleCopã®è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«`stylecop.json`ã‚’ä½œæˆã—ã¾ã™ï¼š

```bash
cat > PuyoPuyoWPF/stylecop.json << 'EOF'
{
  "$schema": "https://raw.githubusercontent.com/DotNetAnalyzers/StyleCopAnalyzers/master/StyleCop.Analyzers/StyleCop.Analyzers/Settings/stylecop.schema.json",
  "settings": {
    "documentationRules": {
      "companyName": "PuyoPuyo",
      "copyrightText": "Copyright (c) {companyName}. All rights reserved.",
      "xmlHeader": false,
      "fileNamingConvention": "stylecop"
    },
    "namingRules": {
      "allowCommonHungarianPrefixes": false,
      "allowedHungarianPrefixes": []
    },
    "orderingRules": {
      "systemUsingDirectivesFirst": true,
      "usingDirectivesPlacement": "outsideNamespace",
      "blankLinesBetweenUsingGroups": "require"
    },
    "layoutRules": {
      "newlineAtEndOfFile": "require"
    },
    "maintainabilityRules": {
      "topLevelTypes": []
    }
  }
}
EOF
```

ã€Œã“ã‚Œã¯ä½•ã‚’è¨­å®šã—ã¦ã„ã‚‹ã‚“ã§ã™ã‹ï¼Ÿã€è‰¯ã„è³ªå•ã§ã™ï¼å„ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’è¦‹ã¦ã„ãã¾ã—ã‚‡ã†ï¼š

- **documentationRules**: XMLãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚³ãƒ¡ãƒ³ãƒˆã®ãƒ«ãƒ¼ãƒ«
  - `companyName`: ä¼šç¤¾åã‚’è¨­å®šï¼ˆè‘—ä½œæ¨©è¡¨ç¤ºã§ä½¿ç”¨ï¼‰
  - `xmlHeader`: ãƒ•ã‚¡ã‚¤ãƒ«ãƒ˜ãƒƒãƒ€ãƒ¼ã®XMLã‚³ãƒ¡ãƒ³ãƒˆã‚’è¦æ±‚ã™ã‚‹ã‹ã©ã†ã‹
- **namingRules**: å‘½åè¦å‰‡
  - `allowCommonHungarianPrefixes`: ãƒãƒ³ã‚¬ãƒªã‚¢ãƒ³è¨˜æ³•ã‚’è¨±å¯ã™ã‚‹ã‹
- **orderingRules**: usingæ–‡ã®é †åºã«é–¢ã™ã‚‹ãƒ«ãƒ¼ãƒ«
  - `systemUsingDirectivesFirst`: System.*ã®usingæ–‡ã‚’æœ€åˆã«é…ç½®
  - `usingDirectivesPlacement`: usingæ–‡ã‚’namespaceã®å¤–å´ã«é…ç½®
- **layoutRules**: ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã®ãƒ«ãƒ¼ãƒ«
  - `newlineAtEndOfFile`: ãƒ•ã‚¡ã‚¤ãƒ«æœ«å°¾ã«æ”¹è¡Œã‚’è¦æ±‚

ã•ã‚‰ã«ã€`.editorconfig`ã«ã‚‚StyleCopå›ºæœ‰ã®ãƒ«ãƒ¼ãƒ«ã‚’è¿½åŠ ã—ã¾ã—ã‚‡ã†ï¼š

```bash
cat >> .editorconfig << 'EOF'

# StyleCop Analyzers ã®è¨­å®š

# SA1600: è¦ç´ ã«XMLãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚³ãƒ¡ãƒ³ãƒˆãŒå¿…è¦
dotnet_diagnostic.SA1600.severity = none

# SA1633: ãƒ•ã‚¡ã‚¤ãƒ«ãƒ˜ãƒƒãƒ€ãƒ¼ãŒå¿…è¦
dotnet_diagnostic.SA1633.severity = none

# SA1101: ä¿®é£¾åã‚’ä½¿ç”¨ã™ã‚‹å¿…è¦ãŒã‚ã‚‹
dotnet_diagnostic.SA1101.severity = none

# SA1309: ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰åã¯ã‚¢ãƒ³ãƒ€ãƒ¼ã‚¹ã‚³ã‚¢ã§å§‹ã‚ã¦ã¯ã„ã‘ãªã„
dotnet_diagnostic.SA1309.severity = none

# SA1200: Using ãƒ‡ã‚£ãƒ¬ã‚¯ãƒ†ã‚£ãƒ–ã¯åå‰ç©ºé–“å†…ã«é…ç½®ã™ã‚‹
dotnet_diagnostic.SA1200.severity = none

# SA1413: æœ«å°¾ã®ã‚³ãƒ³ãƒã‚’ä½¿ç”¨ã™ã‚‹
dotnet_diagnostic.SA1413.severity = suggestion

# SA1028: ã‚³ãƒ¼ãƒ‰ã®æœ«å°¾ã«ç©ºç™½ã‚’å«ã‚ãªã„
dotnet_diagnostic.SA1028.severity = warning
EOF
```

ã€Œã“ã‚Œã‚‰ã®ãƒ«ãƒ¼ãƒ«ã¯ä½•ã‚’æ„å‘³ã—ã¦ã„ã‚‹ã‚“ã§ã™ã‹ï¼Ÿã€é †ç•ªã«èª¬æ˜ã—ã¾ã—ã‚‡ã†ï¼š

- **SA1600 (none)**: ã™ã¹ã¦ã®è¦ç´ ã«ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚³ãƒ¡ãƒ³ãƒˆã‚’è¦æ±‚ã—ãªã„ï¼ˆå­¦ç¿’ç”¨ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ãŸã‚ç·©å’Œï¼‰
- **SA1633 (none)**: ãƒ•ã‚¡ã‚¤ãƒ«ãƒ˜ãƒƒãƒ€ãƒ¼ã®ã‚³ãƒ¡ãƒ³ãƒˆã‚’è¦æ±‚ã—ãªã„
- **SA1101 (none)**: `this.`ä¿®é£¾å­ã‚’å¼·åˆ¶ã—ãªã„ï¼ˆãƒ¢ãƒ€ãƒ³ãªC#ã‚¹ã‚¿ã‚¤ãƒ«ï¼‰
- **SA1309 (none)**: ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã«`_`ãƒ—ãƒ¬ãƒ•ã‚£ãƒƒã‚¯ã‚¹ã‚’è¨±å¯ï¼ˆãƒ¢ãƒ€ãƒ³ãªC#ã®æ…£ç¿’ï¼‰
- **SA1200 (none)**: usingæ–‡ã‚’namespaceã®å¤–å´ã«é…ç½®ã™ã‚‹ã“ã¨ã‚’è¨±å¯ï¼ˆ.NET 6+ã®ã‚¹ã‚¿ã‚¤ãƒ«ï¼‰
- **SA1413 (suggestion)**: é…åˆ—ã‚„ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã®æœ«å°¾ã«ã‚«ãƒ³ãƒã‚’ä½¿ã†ã“ã¨ã‚’æ¨å¥¨
- **SA1028 (warning)**: è¡Œæœ«ã®ç©ºç™½ã‚’è­¦å‘Š

ã“ã‚Œã‚‰ã®è¨­å®šã«ã‚ˆã‚Šã€ãƒ¢ãƒ€ãƒ³ãªC#ã®è¨˜è¿°ã‚¹ã‚¿ã‚¤ãƒ«ã‚’ç¶­æŒã—ã¤ã¤ã€é‡è¦ãªã‚³ãƒ¼ãƒ‰å“è³ªãƒã‚§ãƒƒã‚¯ã¯æœ‰åŠ¹ã«ã—ã¦ã„ã¾ã™ã€‚

Lintãƒã‚§ãƒƒã‚¯ã‚’å®Ÿè¡Œã—ã¦ã¿ã¾ã—ã‚‡ã†ï¼š

```bash
# ãƒ“ãƒ«ãƒ‰æ™‚ã«Lintãƒã‚§ãƒƒã‚¯ãŒè‡ªå‹•å®Ÿè¡Œã•ã‚Œã¾ã™
dotnet build

# è­¦å‘Šã‚’ã‚¨ãƒ©ãƒ¼ã¨ã—ã¦æ‰±ã†å ´åˆ
dotnet build /p:TreatWarningsAsErrors=true
```

ã€Œè­¦å‘Šã‚’ã‚¨ãƒ©ãƒ¼ã«ã™ã‚‹ã¨ã©ã†ãªã‚‹ã®ï¼Ÿã€è‰¯ã„è³ªå•ã§ã™ï¼é€šå¸¸ã€è­¦å‘ŠãŒã‚ã£ã¦ã‚‚ãƒ“ãƒ«ãƒ‰ã¯æˆåŠŸã—ã¾ã™ãŒã€`TreatWarningsAsErrors=true`ã‚’æŒ‡å®šã™ã‚‹ã¨ã€è­¦å‘ŠãŒã‚ã‚‹ã¨ãƒ“ãƒ«ãƒ‰ãŒå¤±æ•—ã—ã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€ãƒãƒ¼ãƒ å…¨ä½“ã§ã‚³ãƒ¼ãƒ‰å“è³ªåŸºæº–ã‚’å³æ ¼ã«å®ˆã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚CI/CDç’°å¢ƒã§ç‰¹ã«æœ‰åŠ¹ã§ã™ã‚ˆï¼

```bash
git add .
git commit -m 'chore: Lintãƒ„ãƒ¼ãƒ«ã®è¨­å®š'
```

### ã‚³ãƒ¼ãƒ‰ãƒ•ã‚©ãƒ¼ãƒãƒƒã‚¿

**ã‚³ãƒ¼ãƒ‰ãƒ•ã‚©ãƒ¼ãƒãƒƒã‚¿**ã¯é–‹ç™ºãƒãƒ¼ãƒ å†…ã§ã®ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã‚¹ã‚¿ã‚¤ãƒ«ã‚’çµ±ä¸€ã™ã‚‹ãŸã‚ã®ãƒ„ãƒ¼ãƒ«ã§ã™ã€‚C#/.NETã§ã¯`dotnet format`ã‚³ãƒãƒ³ãƒ‰ãŒæ¨™æº–ã§æä¾›ã•ã‚Œã¦ã„ã¾ã™ã€‚ã€Œã‚ã–ã‚ã–ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ãªãã¦ã„ã„ã‚“ã§ã™ã‹ï¼Ÿã€ã¯ã„ã€æœ€åˆã‹ã‚‰ä½¿ãˆã‚‹ã‚“ã§ã™ï¼

ã‚³ãƒ¼ãƒ‰ã®ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã‚’å®Ÿè¡Œã—ã¦ã¿ã¾ã—ã‚‡ã†ï¼š

```bash
dotnet format
```

ã“ã®ã‚³ãƒãƒ³ãƒ‰ã«ã‚ˆã‚Šã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå†…ã®ã™ã¹ã¦ã®C#ãƒ•ã‚¡ã‚¤ãƒ«ãŒ`.editorconfig`ã§å®šç¾©ã•ã‚ŒãŸãƒ«ãƒ¼ãƒ«ã«å¾“ã£ã¦ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã•ã‚Œã¾ã™ã€‚ã€Œè‡ªå‹•ã§æ•´å½¢ã—ã¦ãã‚Œã‚‹ãªã‚“ã¦æ¥½ã¡ã‚“ã§ã™ã­ï¼ã€

ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã®ç¢ºèªã®ã¿ã‚’è¡Œã„ãŸã„å ´åˆã¯ï¼š

```bash
dotnet format --verify-no-changes
```

ã€Œã“ã‚Œã£ã¦ä½•ã‚’ãƒã‚§ãƒƒã‚¯ã—ã¦ã‚‹ã‚“ã§ã™ã‹ï¼Ÿã€ã“ã®ã‚³ãƒãƒ³ãƒ‰ã¯ã€ã‚³ãƒ¼ãƒ‰ãŒãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆãƒ«ãƒ¼ãƒ«ã«å¾“ã£ã¦ã„ã‚‹ã‹ã‚’ç¢ºèªã ã‘ã—ã¦ã€å®Ÿéš›ã«ã¯å¤‰æ›´ã—ã¾ã›ã‚“ã€‚CI/CDç’°å¢ƒã§ä½¿ã†ã¨ä¾¿åˆ©ã§ã™ã‚ˆï¼

```bash
git add .
git commit -m 'chore: ã‚³ãƒ¼ãƒ‰ãƒ•ã‚©ãƒ¼ãƒãƒƒã‚¿ã®è¨­å®š'
```

### ã‚³ãƒ¼ãƒ‰ã‚«ãƒãƒ¬ãƒƒã‚¸

**ã‚³ãƒ¼ãƒ‰ã‚«ãƒãƒ¬ãƒƒã‚¸**ã¯ãƒ†ã‚¹ãƒˆãŒãƒ—ãƒ­ãƒ€ã‚¯ã‚·ãƒ§ãƒ³ã‚³ãƒ¼ãƒ‰ã‚’ã©ã®ãã‚‰ã„ã‚«ãƒãƒ¼ã—ã¦ã„ã‚‹ã‹ã‚’æ¸¬ã‚‹æŒ‡æ¨™ã§ã™ã€‚ã€Œãƒ†ã‚¹ãƒˆã‚’æ›¸ã„ãŸã¤ã‚‚ã‚Šã ã‘ã©ã€å®Ÿã¯é‡è¦ãªéƒ¨åˆ†ãŒãƒ†ã‚¹ãƒˆã•ã‚Œã¦ãªã‹ã£ãŸ...ã€ãã‚“ãªã“ã¨ã‚’é˜²ããŸã‚ã«å½¹ç«‹ã¡ã¾ã™ã€‚

C#/.NETã§ã¯`coverlet`ãŒã‚ˆãä½¿ã‚ã‚Œã¾ã™ï¼š

```bash
# ã‚«ãƒãƒ¬ãƒƒã‚¸ãƒ„ãƒ¼ãƒ«ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
cd PuyoPuyoWPF.Tests
dotnet add package coverlet.collector
dotnet add package coverlet.msbuild
cd ..

# ãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆãƒ„ãƒ¼ãƒ«ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
dotnet tool install -g dotnet-reportgenerator-globaltool
```

ã€Œdotnet toolã£ã¦ä½•ã§ã™ã‹ï¼Ÿã€è‰¯ã„è³ªå•ã§ã™ï¼dotnet toolã¯ã€.NET CLIç”¨ã®ã‚°ãƒ­ãƒ¼ãƒãƒ«ãƒ„ãƒ¼ãƒ«ã‚’ç®¡ç†ã™ã‚‹ä»•çµ„ã¿ã§ã™ã€‚ä¸€åº¦ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚Œã°ã€ã©ã“ã‹ã‚‰ã§ã‚‚ä½¿ãˆã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã‚ˆã€‚

ãƒ†ã‚¹ãƒˆã‚’ã‚«ãƒãƒ¬ãƒƒã‚¸ä»˜ãã§å®Ÿè¡Œã—ã¦ã¿ã¾ã—ã‚‡ã†ï¼š

```bash
# ã‚«ãƒãƒ¬ãƒƒã‚¸ã‚’åé›†ã—ãªãŒã‚‰ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
dotnet test --collect:"XPlat Code Coverage" --results-directory ./TestResults

# HTMLå½¢å¼ã®ãƒ¬ãƒãƒ¼ãƒˆã‚’ç”Ÿæˆ
reportgenerator -reports:"./TestResults/**/coverage.cobertura.xml" -targetdir:"coverage" -reporttypes:Html
```

ã€Œç”Ÿæˆã•ã‚ŒãŸ`coverage/index.html`ã‚’ãƒ–ãƒ©ã‚¦ã‚¶ã§é–‹ãã¨ã‚«ãƒãƒ¬ãƒƒã‚¸ãƒ¬ãƒãƒ¼ãƒˆã‚’ç¢ºèªã§ãã¾ã™ï¼ã€ã‚«ãƒ©ãƒ•ãƒ«ãªãƒ¬ãƒãƒ¼ãƒˆã§ã©ã“ãŒãƒ†ã‚¹ãƒˆã•ã‚Œã¦ã„ã‚‹ã‹ä¸€ç›®ç­ç„¶ã§ã™ã‚ˆã€‚

ãƒ¯ãƒ³ã‚³ãƒãƒ³ãƒ‰ã§ã‚«ãƒãƒ¬ãƒƒã‚¸ãƒ¬ãƒãƒ¼ãƒˆã‚’ç”Ÿæˆã™ã‚‹ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’ä½œæˆã—ã¾ã—ã‚‡ã†ï¼š

```bash
# PuyoPuyoWPFãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«coverage.shã‚’ä½œæˆ
cat > coverage.sh << 'EOF'
#!/bin/bash
# coverage.sh - ã‚³ãƒ¼ãƒ‰ã‚«ãƒãƒ¬ãƒƒã‚¸ãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆã‚¹ã‚¯ãƒªãƒ—ãƒˆ

echo "ğŸ§ª ãƒ†ã‚¹ãƒˆå®Ÿè¡Œã¨ã‚«ãƒãƒ¬ãƒƒã‚¸åé›†ä¸­..."
dotnet test --collect:"XPlat Code Coverage" --results-directory ./TestResults

echo "ğŸ“Š ã‚«ãƒãƒ¬ãƒƒã‚¸ãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆä¸­..."
reportgenerator -reports:"./TestResults/**/coverage.cobertura.xml" -targetdir:"coverage" -reporttypes:Html

echo "âœ… ã‚«ãƒãƒ¬ãƒƒã‚¸ãƒ¬ãƒãƒ¼ãƒˆãŒ coverage/index.html ã«ç”Ÿæˆã•ã‚Œã¾ã—ãŸ"
echo ""
echo "ãƒ–ãƒ©ã‚¦ã‚¶ã§ç¢ºèªã™ã‚‹ã«ã¯ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¦ãã ã•ã„:"
echo "  \$BROWSER coverage/index.html"
EOF

chmod +x coverage.sh
```

ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’å®Ÿè¡Œã—ã¦ã¿ã¾ã—ã‚‡ã†ï¼š

```bash
./coverage.sh
```

ã€Œã‚¹ã‚¯ãƒªãƒ—ãƒˆåŒ–ã™ã‚‹ã¨ã€æ¯å›é•·ã„ã‚³ãƒãƒ³ãƒ‰ã‚’æ‰“ãŸãªãã¦æ¸ˆã‚€ã‹ã‚‰ä¾¿åˆ©ã§ã™ã­ï¼ã€ãã®é€šã‚Šã§ã™ï¼

```bash
git add .
git commit -m 'chore: ã‚³ãƒ¼ãƒ‰ã‚«ãƒãƒ¬ãƒƒã‚¸ã®è¨­å®š'
```

### ã‚¿ã‚¹ã‚¯ãƒ©ãƒ³ãƒŠãƒ¼

è‰¯ã„ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ãç¶šã‘ã‚‹ãŸã‚ã«ä»Šã¾ã§è‰²ã€…ãªãƒ„ãƒ¼ãƒ«ã‚’å°å…¥ã—ã¦ãã¾ã—ãŸãŒã€æ¯å›å€‹åˆ¥ã«å®Ÿè¡Œã™ã‚‹ã®ã¯é¢å€’ã§ã™ã€‚ã€Œãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã—ã¦ã€ãƒ“ãƒ«ãƒ‰ã—ã¦ã€ãƒ†ã‚¹ãƒˆã—ã¦ã€ã‚«ãƒãƒ¬ãƒƒã‚¸ã‚‚ç¢ºèªã—ã¦...ã€ã†ã‚“ã–ã‚Šã—ã¡ã‚ƒã„ã¾ã™ã‚ˆã­ï¼Ÿ

ãã“ã§**ã‚¿ã‚¹ã‚¯ãƒ©ãƒ³ãƒŠãƒ¼**ã®å‡ºç•ªã§ã™ï¼C#/.NETãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã¯ã€**Cake**ã¨ã„ã†å¼·åŠ›ãªãƒ“ãƒ«ãƒ‰è‡ªå‹•åŒ–ã‚·ã‚¹ãƒ†ãƒ ã‚’ä½¿ã†ã“ã¨ãŒã§ãã¾ã™ã€‚

> Cakeã¨ã¯ã€C#ã‚’DSLï¼ˆãƒ‰ãƒ¡ã‚¤ãƒ³ç‰¹åŒ–è¨€èªï¼‰ã¨ã—ã¦ä½¿ç”¨ã™ã‚‹ã‚¯ãƒ­ã‚¹ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã®ãƒ“ãƒ«ãƒ‰ã‚ªãƒ¼ãƒˆãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã‚·ã‚¹ãƒ†ãƒ ã§ã™ã€‚Makeã€Rakeã€PSakeã¨åŒæ§˜ã®æ¦‚å¿µã§ã™ãŒã€C#ã®æ§‹æ–‡ã‚’æ´»ç”¨ã§ãã‚‹ãŸã‚ã€.NETé–‹ç™ºè€…ã«ã¨ã£ã¦è¦ªã—ã¿ã‚„ã™ã„ãƒ„ãƒ¼ãƒ«ã§ã™ã€‚

ã¾ãšã€Cakeã‚’ã‚°ãƒ­ãƒ¼ãƒãƒ«ãƒ„ãƒ¼ãƒ«ã¨ã—ã¦ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã—ã‚‡ã†ï¼š

```bash
# Cakeãƒ„ãƒ¼ãƒ«ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
dotnet tool install -g Cake.Tool
```

æ¬¡ã«ã€`build.cake`ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã—ã¦ã€ã‚ˆãä½¿ã†ã‚¿ã‚¹ã‚¯ã‚’å®šç¾©ã—ã¾ã—ã‚‡ã†ï¼š

```bash
cat > build.cake << 'EOF'
///////////////////////////////////////////////////////////////////////////////
// ARGUMENTS
///////////////////////////////////////////////////////////////////////////////

var target = Argument("target", "Default");
var configuration = Argument("configuration", "Release");

///////////////////////////////////////////////////////////////////////////////
// SETUP / TEARDOWN
///////////////////////////////////////////////////////////////////////////////

Setup(ctx =>
{
   Information("Running tasks...");
   Information("Target: {0}", target);
});

Teardown(ctx =>
{
   Information("Finished running tasks.");
});

///////////////////////////////////////////////////////////////////////////////
// TASKS
///////////////////////////////////////////////////////////////////////////////

Task("Clean")
    .Description("ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—")
    .Does(() =>
{
    Information("ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—ã‚’å®Ÿè¡Œä¸­...");
    DotNetClean("./PuyoPuyoWPF.sln");
    CleanDirectory("./coverage");
    CleanDirectory("./TestResults");
});

Task("Restore")
    .Description("NuGetãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®å¾©å…ƒ")
    .IsDependentOn("Clean")
    .Does(() =>
{
    Information("ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’å¾©å…ƒä¸­...");
    DotNetRestore("./PuyoPuyoWPF.sln");
});

Task("Format")
    .Description("ã‚³ãƒ¼ãƒ‰ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã®å®Ÿè¡Œ")
    .Does(() =>
{
    Information("ã‚³ãƒ¼ãƒ‰ã‚’ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆä¸­...");
    DotNetFormat("./PuyoPuyoWPF.sln");
});

Task("Build")
    .Description("ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ãƒ“ãƒ«ãƒ‰")
    .IsDependentOn("Restore")
    .Does(() =>
{
    Information("ãƒ“ãƒ«ãƒ‰ã‚’å®Ÿè¡Œä¸­...");
    DotNetBuild("./PuyoPuyoWPF.sln", new DotNetBuildSettings
    {
        Configuration = configuration,
        NoRestore = true
    });
});

Task("Lint")
    .Description("ã‚³ãƒ¼ãƒ‰ã®Lintãƒã‚§ãƒƒã‚¯")
    .IsDependentOn("Build")
    .Does(() =>
{
    Information("Lintãƒã‚§ãƒƒã‚¯ã‚’å®Ÿè¡Œä¸­...");
    
    // è­¦å‘Šã‚’ã‚¨ãƒ©ãƒ¼ã¨ã—ã¦æ‰±ã£ã¦ãƒ“ãƒ«ãƒ‰
    var lintSettings = new DotNetBuildSettings
    {
        Configuration = configuration,
        NoRestore = true,
        MSBuildSettings = new DotNetMSBuildSettings()
    };
    lintSettings.MSBuildSettings.TreatAllWarningsAs = MSBuildTreatAllWarningsAs.Error;
    
    try
    {
        DotNetBuild("./PuyoPuyoWPF.sln", lintSettings);
        Information("âœ… Lintãƒã‚§ãƒƒã‚¯ãŒæˆåŠŸã—ã¾ã—ãŸ");
    }
    catch
    {
        Warning("âš ï¸ Lintãƒã‚§ãƒƒã‚¯ã§è­¦å‘Šã¾ãŸã¯ã‚¨ãƒ©ãƒ¼ãŒè¦‹ã¤ã‹ã‚Šã¾ã—ãŸ");
        throw;
    }
});

Task("Test")
    .Description("ãƒ†ã‚¹ãƒˆã®å®Ÿè¡Œ")
    .IsDependentOn("Build")
    .Does(() =>
{
    Information("ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œä¸­...");
    DotNetTest("./PuyoPuyoWPF.Tests/PuyoPuyoWPF.Tests.csproj", new DotNetTestSettings
    {
        Configuration = configuration,
        NoBuild = true,
        NoRestore = true
    });
});

Task("Coverage")
    .Description("ã‚³ãƒ¼ãƒ‰ã‚«ãƒãƒ¬ãƒƒã‚¸ã®æ¸¬å®š")
    .IsDependentOn("Build")
    .Does(() =>
{
    Information("ã‚«ãƒãƒ¬ãƒƒã‚¸ã‚’æ¸¬å®šä¸­...");
    
    // ã‚«ãƒãƒ¬ãƒƒã‚¸ä»˜ããƒ†ã‚¹ãƒˆå®Ÿè¡Œ
    DotNetTest("./PuyoPuyoWPF.Tests/PuyoPuyoWPF.Tests.csproj", new DotNetTestSettings
    {
        Configuration = configuration,
        NoBuild = true,
        NoRestore = true,
        ArgumentCustomization = args => args
            .Append("--collect:\"XPlat Code Coverage\"")
            .Append("--results-directory ./TestResults")
    });
    
    // ãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆ
    Information("ã‚«ãƒãƒ¬ãƒƒã‚¸ãƒ¬ãƒãƒ¼ãƒˆã‚’ç”Ÿæˆä¸­...");
    StartProcess("reportgenerator", new ProcessSettings
    {
        Arguments = new ProcessArgumentBuilder()
            .Append("-reports:./TestResults/**/coverage.cobertura.xml")
            .Append("-targetdir:./coverage")
            .Append("-reporttypes:Html")
    });
    
    Information("âœ… ã‚«ãƒãƒ¬ãƒƒã‚¸ãƒ¬ãƒãƒ¼ãƒˆãŒ coverage/index.html ã«ç”Ÿæˆã•ã‚Œã¾ã—ãŸ");
});

Task("Quality")
    .Description("ã™ã¹ã¦ã®å“è³ªãƒã‚§ãƒƒã‚¯ã‚’å®Ÿè¡Œ")
    .IsDependentOn("Format")
    .IsDependentOn("Lint")
    .IsDependentOn("Build")
    .IsDependentOn("Test")
    .IsDependentOn("Coverage")
    .Does(() =>
{
    Information("âœ… ã™ã¹ã¦ã®å“è³ªãƒã‚§ãƒƒã‚¯ãŒå®Œäº†ã—ã¾ã—ãŸï¼");
});

Task("Watch")
    .Description("ãƒ•ã‚¡ã‚¤ãƒ«ç›£è¦–ã¨è‡ªå‹•ãƒ“ãƒ«ãƒ‰ãƒ»ãƒ†ã‚¹ãƒˆ")
    .Does(() =>
{
    Information("ãƒ•ã‚¡ã‚¤ãƒ«ç›£è¦–ã‚’é–‹å§‹ã—ã¾ã™...");
    Information("çµ‚äº†ã™ã‚‹ã«ã¯ Ctrl+C ã‚’æŠ¼ã—ã¦ãã ã•ã„");
    
    var settings = new DotNetWatchSettings
    {
        Project = "./PuyoPuyoWPF.Tests/PuyoPuyoWPF.Tests.csproj"
    };
    
    DotNetWatch("test", settings);
});

Task("Default")
    .Description("ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã‚¿ã‚¹ã‚¯ï¼ˆQualityï¼‰")
    .IsDependentOn("Quality");

///////////////////////////////////////////////////////////////////////////////
// EXECUTION
///////////////////////////////////////////////////////////////////////////////

RunTarget(target);
EOF
```

ã€Œã“ã®Cakeãƒ•ã‚¡ã‚¤ãƒ«ã¯ä½•ã‚’ã—ã¦ãã‚Œã‚‹ã‚“ã§ã™ã‹ï¼Ÿã€è‰¯ã„è³ªå•ã§ã™ï¼ã“ã®Cakeãƒ•ã‚¡ã‚¤ãƒ«ã§ã¯ã€ä»¥ä¸‹ã®ã‚¿ã‚¹ã‚¯ã‚’å®šç¾©ã—ã¦ã„ã¾ã™ï¼š

- **Clean**: ãƒ“ãƒ«ãƒ‰æˆæœç‰©ã¨ãƒ†ã‚¹ãƒˆçµæœã‚’ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—
- **Restore**: NuGetãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’å¾©å…ƒ
- **Format**: ã‚³ãƒ¼ãƒ‰ã‚’ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ
- **Build**: ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ãƒ“ãƒ«ãƒ‰
- **Lint**: ã‚³ãƒ¼ãƒ‰ã®Lintãƒã‚§ãƒƒã‚¯ï¼ˆè­¦å‘Šã‚’ã‚¨ãƒ©ãƒ¼ã¨ã—ã¦æ‰±ã†ï¼‰
- **Test**: ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œ
- **Coverage**: ã‚«ãƒãƒ¬ãƒƒã‚¸ã‚’æ¸¬å®šã—ã¦ãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆ
- **Quality**: ã™ã¹ã¦ã®å“è³ªãƒã‚§ãƒƒã‚¯ã‚’å®Ÿè¡Œï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆï¼‰
- **Watch**: ãƒ•ã‚¡ã‚¤ãƒ«ç›£è¦–ã¨è‡ªå‹•ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ

ã‚¿ã‚¹ã‚¯ã‚’å®Ÿè¡Œã—ã¦ã¿ã¾ã—ã‚‡ã†ï¼š

```bash
# ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã‚¿ã‚¹ã‚¯ï¼ˆQualityï¼‰ã‚’å®Ÿè¡Œ
dotnet cake

# ç‰¹å®šã®ã‚¿ã‚¹ã‚¯ã‚’å®Ÿè¡Œ
dotnet cake --target=Clean
dotnet cake --target=Format
dotnet cake --target=Build
dotnet cake --target=Lint
dotnet cake --target=Test
dotnet cake --target=Coverage

# ã™ã¹ã¦ã®å“è³ªãƒã‚§ãƒƒã‚¯ã‚’å®Ÿè¡Œ
dotnet cake --target=Quality
```

ã€ŒCakeã‚’ä½¿ã†ã¨ã€C#ã®æ§‹æ–‡ã§ãƒ“ãƒ«ãƒ‰ã‚¹ã‚¯ãƒªãƒ—ãƒˆãŒæ›¸ã‘ã‚‹ã®ã§ã€.NETé–‹ç™ºè€…ã«ã¨ã£ã¦ã¨ã¦ã‚‚è‡ªç„¶ã§ã™ã­ï¼ã€ãã®é€šã‚Šã§ã™ï¼

Cakeã®è‰¯ã„ã¨ã“ã‚ã¯ï¼š

1. **C#ã§æ›¸ã‘ã‚‹**: .NETé–‹ç™ºè€…ã«ã¨ã£ã¦è¦ªã—ã¿ã‚„ã™ã„
2. **ä¾å­˜é–¢ä¿‚ç®¡ç†**: ã‚¿ã‚¹ã‚¯é–“ã®ä¾å­˜é–¢ä¿‚ã‚’è‡ªå‹•ã§è§£æ±º
3. **ã‚¯ãƒ­ã‚¹ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ **: Windowsã€Linuxã€macOSã§å‹•ä½œ
4. **è±Šå¯Œãªã‚¨ã‚³ã‚·ã‚¹ãƒ†ãƒ **: å¤šãã®ã‚¢ãƒ‰ã‚¤ãƒ³ã¨ãƒ˜ãƒ«ãƒ‘ãƒ¼ãŒåˆ©ç”¨å¯èƒ½

```bash
git add .
git commit -m 'chore: Cakeã‚¿ã‚¹ã‚¯ãƒ©ãƒ³ãƒŠãƒ¼ã®è¨­å®š'
```

### ã‚¿ã‚¹ã‚¯ã®è‡ªå‹•åŒ–

**Cake**ã«ã‚ˆã‚Šå“è³ªã‚’ãƒã‚§ãƒƒã‚¯ã™ã‚‹ã‚¿ã‚¹ã‚¯ã¯ç”¨æ„ã•ã‚Œã¾ã—ãŸãŒã€ã¾ã æ‰‹å‹•ã§å®Ÿè¡Œã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ã€Œãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä¿å­˜ã™ã‚‹ãŸã³ã«è‡ªå‹•ã§ãƒ†ã‚¹ãƒˆãŒèµ°ã£ãŸã‚‰ä¾¿åˆ©ãªã®ã«ãª...ã€ã¨æ€ã„ã¾ã›ã‚“ã‹ï¼Ÿ

å®Ÿã¯ã€Cakeã«ã¯**Watch**ã‚¿ã‚¹ã‚¯ã‚’ä½¿ã£ã¦è‡ªå‹•å®Ÿè¡Œã™ã‚‹æ©Ÿèƒ½ãŒæ—¢ã«å«ã¾ã‚Œã¦ã„ã¾ã™ï¼

#### Cakeã®çµ„ã¿è¾¼ã¿Watchã‚¿ã‚¹ã‚¯ã‚’ä½¿ç”¨

æœ€ã‚‚ã‚·ãƒ³ãƒ—ãƒ«ãªæ–¹æ³•ã¯ã€`build.cake`ã§å®šç¾©ã—ãŸ`Watch`ã‚¿ã‚¹ã‚¯ã‚’ä½¿ã†ã“ã¨ã§ã™ï¼š

```bash
# Cakeã®watchã‚¿ã‚¹ã‚¯ã‚’å®Ÿè¡Œ
dotnet cake --target=Watch
```

ã€Œã“ã‚Œã ã‘ã§è‡ªå‹•ãƒ†ã‚¹ãƒˆãŒå‹•ãã‚“ã§ã™ã­ï¼ã€ãã†ãªã‚“ã§ã™ã€‚.NET CLIã®`dotnet watch`ã‚³ãƒãƒ³ãƒ‰ã‚’åˆ©ç”¨ã—ã¦ã„ã‚‹ã®ã§ã€ãƒ•ã‚¡ã‚¤ãƒ«ãŒå¤‰æ›´ã•ã‚Œã‚‹ãŸã³ã«è‡ªå‹•çš„ã«ãƒ†ã‚¹ãƒˆãŒå®Ÿè¡Œã•ã‚Œã¾ã™ã‚ˆã€‚

åˆ¥ã®ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã‚’é–‹ã„ã¦ã€ä½•ã‹ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å¤‰æ›´ã—ã¦ã¿ã¦ãã ã•ã„ã€‚å¤‰æ›´ãŒæ¤œå‡ºã•ã‚Œã¦è‡ªå‹•çš„ã«ã‚¿ã‚¹ã‚¯ãŒå®Ÿè¡Œã•ã‚Œã‚‹ã“ã¨ãŒç¢ºèªã§ãã‚‹ã¯ãšã§ã™ã€‚

ãƒ†ã‚¹ãƒˆãŒãƒ‘ã‚¹ã™ã‚‹ã“ã¨ãŒç¢ºèªã§ããŸã‚‰ã‚³ãƒŸãƒƒãƒˆã—ã¦ãŠãã¾ã—ã‚‡ã†ã€‚ã“ã®ã¨ãã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã§ã¯`Watch`ãŒå‹•ã„ã¦ã„ã‚‹ã®ã§ã€åˆ¥ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã‚’é–‹ã„ã¦ã‚³ãƒŸãƒƒãƒˆã‚’å®Ÿæ–½ã™ã‚‹ã¨è‰¯ã„ã§ã—ã‚‡ã†ã€‚

```bash
git add .
git commit -m 'chore: ã‚¿ã‚¹ã‚¯ã®è‡ªå‹•åŒ–'
```

### å‹•ä½œç¢ºèª

ã•ã¦ã€ã“ã“ã¾ã§ã§ç’°å¢ƒæ§‹ç¯‰ã¯å®Œäº†ã§ã™ï¼ã€Œæœ¬å½“ã«å‹•ãã‚“ã§ã—ã‚‡ã†ã‹ï¼Ÿã€è©¦ã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚

ã¾ãšã€ç°¡å˜ãªãƒ†ã‚¹ãƒˆã‚’æ›¸ã„ã¦ã€ã™ã¹ã¦ãŒæ­£ã—ãå‹•ä½œã™ã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¾ã™ï¼š

```bash
# ã‚µãƒ³ãƒ—ãƒ«ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç·¨é›†
cat > PuyoPuyoWPF.Tests/SampleTest.cs << 'EOF'
using Xunit;

namespace PuyoPuyoWPF.Tests;

public class SampleTest
{
    [Fact]
    public void åŸºæœ¬çš„ãªãƒ†ã‚¹ãƒˆãŒå‹•ä½œã™ã‚‹()
    {
        // Arrangeï¼ˆæº–å‚™ï¼‰
        int a = 1;
        int b = 2;

        // Actï¼ˆå®Ÿè¡Œï¼‰
        int result = a + b;

        // Assertï¼ˆæ¤œè¨¼ï¼‰
        Assert.Equal(3, result);
    }

    [Theory]
    [InlineData(1, 2, 3)]
    [InlineData(0, 0, 0)]
    [InlineData(-1, 1, 0)]
    public void è¤‡æ•°ã®ã‚±ãƒ¼ã‚¹ã‚’ãƒ†ã‚¹ãƒˆã§ãã‚‹(int a, int b, int expected)
    {
        // Act
        int result = a + b;

        // Assert
        Assert.Equal(expected, result);
    }
}
EOF
```

ã€Œã“ã®ãƒ†ã‚¹ãƒˆã¯ä½•ã‚’ãƒ†ã‚¹ãƒˆã—ã¦ã‚‹ã‚“ã§ã™ã‹ï¼Ÿã€è‰¯ã„è³ªå•ã§ã™ï¼ã“ã‚Œã¯å®Ÿéš›ã®ãƒ†ã‚¹ãƒˆã§ã¯ãªãã€ç’°å¢ƒãŒæ­£ã—ãå‹•ä½œã™ã‚‹ã“ã¨ã‚’ç¢ºèªã™ã‚‹ãŸã‚ã®ã‚µãƒ³ãƒ—ãƒ«ã§ã™ã€‚ã€Œ1+2=3ã€ã¨ã„ã†ç°¡å˜ãªè¨ˆç®—ã‚’ãƒ†ã‚¹ãƒˆã—ã¦ã„ã¾ã™ã€‚

ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œã—ã¦ã¿ã¾ã—ã‚‡ã†ï¼š

```bash
dotnet test
# ã¾ãŸã¯ã€Cakeã‚’ä½¿ã£ã¦
dotnet cake --target=Test
```

ã€Œãƒ†ã‚¹ãƒˆãŒé€šã‚Šã¾ã—ãŸã­ï¼ã€ç´ æ™´ã‚‰ã—ã„ï¼ã§ã¯ã€ã‚ã–ã¨å¤±æ•—ã™ã‚‹ãƒ†ã‚¹ãƒˆã‚’æ›¸ã„ã¦ã¿ã¾ã—ã‚‡ã†ï¼š

```bash
cat >> PuyoPuyoWPF.Tests/SampleTest.cs << 'EOF'

    [Fact]
    public void ã‚ã–ã¨å¤±æ•—ã™ã‚‹ãƒ†ã‚¹ãƒˆ()
    {
        // ã‚ã–ã¨é–“é•ã£ãŸæœŸå¾…å€¤ã‚’è¨­å®š
        Assert.Equal(5, 1 + 2);
    }
}
EOF
```

ã‚‚ã†ä¸€åº¦ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œã—ã¦ã¿ã¾ã—ã‚‡ã†ï¼š

```bash
dotnet test
# ã¾ãŸã¯ã€Cakeã‚’ä½¿ã£ã¦
dotnet cake --target=Test
```

ã€Œãƒ†ã‚¹ãƒˆãŒå¤±æ•—ã—ã¾ã—ãŸã­ï¼ã€ãã†ã§ã™ã€‚ã“ã‚Œã¯æœŸå¾…é€šã‚Šã®å‹•ä½œã§ã™ã€‚ãƒ†ã‚¹ãƒˆãŒå¤±æ•—ã™ã‚‹ã“ã¨ã‚‚æ­£ã—ãæ¤œå‡ºã§ãã‚‹ã“ã¨ãŒç¢ºèªã§ãã¾ã—ãŸã€‚

ã§ã¯ã€å¤±æ•—ã™ã‚‹ãƒ†ã‚¹ãƒˆã‚’å‰Šé™¤ã—ã¦ã€ã‚‚ã†ä¸€åº¦ç¢ºèªã—ã¾ã—ã‚‡ã†ï¼š

```bash
# å¤±æ•—ã™ã‚‹ãƒ†ã‚¹ãƒˆã‚’å‰Šé™¤ï¼ˆãƒ•ã‚¡ã‚¤ãƒ«ã‚’å…ƒã«æˆ»ã™ï¼‰
cat > PuyoPuyoWPF.Tests/SampleTest.cs << 'EOF'
using Xunit;

namespace PuyoPuyoWPF.Tests;

public class SampleTest
{
    [Fact]
    public void åŸºæœ¬çš„ãªãƒ†ã‚¹ãƒˆãŒå‹•ä½œã™ã‚‹()
    {
        // Arrangeï¼ˆæº–å‚™ï¼‰
        int a = 1;
        int b = 2;

        // Actï¼ˆå®Ÿè¡Œï¼‰
        int result = a + b;

        // Assertï¼ˆæ¤œè¨¼ï¼‰
        Assert.Equal(3, result);
    }

    [Theory]
    [InlineData(1, 2, 3)]
    [InlineData(0, 0, 0)]
    [InlineData(-1, 1, 0)]
    public void è¤‡æ•°ã®ã‚±ãƒ¼ã‚¹ã‚’ãƒ†ã‚¹ãƒˆã§ãã‚‹(int a, int b, int expected)
    {
        // Act
        int result = a + b;

        // Assert
        Assert.Equal(expected, result);
    }
}
EOF

dotnet test
# ã¾ãŸã¯ã€Cakeã‚’ä½¿ã£ã¦
dotnet cake --target=Test
```

ã€Œã™ã¹ã¦ã®ãƒ†ã‚¹ãƒˆãŒé€šã‚Šã¾ã—ãŸã­ï¼ã€å®Œç’§ã§ã™ï¼

æœ€å¾Œã«ã‚«ãƒãƒ¬ãƒƒã‚¸ãƒ¬ãƒãƒ¼ãƒˆã‚‚ç¢ºèªã—ã¦ã¿ã¾ã—ã‚‡ã†ï¼š

```bash
# Cakeã‚’ä½¿ã£ã¦ã‚«ãƒãƒ¬ãƒƒã‚¸ã‚’æ¸¬å®š
dotnet cake --target=Coverage
```

ã€Œcoverage/index.htmlãŒã§ãã¾ã—ãŸã­ï¼ã€ãƒ–ãƒ©ã‚¦ã‚¶ã§é–‹ã„ã¦ã¿ã¾ã—ã‚‡ã†ï¼š

```bash
$BROWSER coverage/index.html
```

ã€Œã‚«ãƒãƒ¬ãƒƒã‚¸ãƒ¬ãƒãƒ¼ãƒˆãŒè¦‹ã‚Œã¾ã—ãŸï¼ã€ç´ æ™´ã‚‰ã—ã„ï¼ã“ã‚Œã§ã€ã©ã®ã‚³ãƒ¼ãƒ‰ãŒãƒ†ã‚¹ãƒˆã•ã‚Œã¦ã„ã‚‹ã‹è¦–è¦šçš„ã«ç¢ºèªã§ãã¾ã™ã­ã€‚

Cakeã®ã™ã¹ã¦ã®ã‚¿ã‚¹ã‚¯ã‚’ä¸€åº¦ã«å®Ÿè¡Œã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ï¼š

```bash
# ã™ã¹ã¦ã®å“è³ªãƒã‚§ãƒƒã‚¯ã‚’å®Ÿè¡Œ
dotnet cake --target=Quality
# ã¾ãŸã¯
dotnet cake  # ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§Qualityã‚¿ã‚¹ã‚¯ãŒå®Ÿè¡Œã•ã‚Œã‚‹
```

ã€ŒFormatâ†’Buildâ†’Testâ†’CoverageãŒé †ç•ªã«å®Ÿè¡Œã•ã‚Œã¾ã—ãŸã­ï¼ã€ãã®é€šã‚Šã§ã™ã€‚Cakeã®ã‚¿ã‚¹ã‚¯ä¾å­˜é–¢ä¿‚ãŒè‡ªå‹•çš„ã«è§£æ±ºã•ã‚Œã¦ã€å¿…è¦ãªã‚¿ã‚¹ã‚¯ãŒé †ç•ªã«å®Ÿè¡Œã•ã‚Œã¾ã™ã€‚

ã™ã¹ã¦ã®ç¢ºèªãŒçµ‚ã‚ã£ãŸã‚‰ã€ã‚³ãƒŸãƒƒãƒˆã—ã¦ãŠãã¾ã—ã‚‡ã†ï¼š

```bash
git add .
git commit -m 'test: ã‚µãƒ³ãƒ—ãƒ«ãƒ†ã‚¹ãƒˆã®è¿½åŠ '
```

### ã‚¤ãƒ†ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³0ã®ã¾ã¨ã‚

ãŠç–²ã‚Œã•ã¾ã§ã—ãŸï¼ã‚¤ãƒ†ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³0ãŒå®Œäº†ã—ã¾ã—ãŸã€‚ã“ã“ã¾ã§ã§ã€ä»¥ä¸‹ã®ã“ã¨ãŒã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸï¼š

1. **ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ä½œæˆ**: WPFãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¨ãƒ†ã‚¹ãƒˆãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ä½œæˆ
2. **ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†**: Gitãƒªãƒã‚¸ãƒˆãƒªã®åˆæœŸåŒ–ã¨ã‚³ãƒŸãƒƒãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®è¦ç´„
3. **ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ç®¡ç†**: NuGetã‚’ä½¿ã£ãŸä¾å­˜é–¢ä¿‚ã®ç®¡ç†ï¼ˆCommunityToolkit.Mvvmã€Moqãªã©ï¼‰
4. **é™çš„ã‚³ãƒ¼ãƒ‰è§£æ**: Microsoft.CodeAnalysis.Analyzersã«ã‚ˆã‚‹ã‚³ãƒ¼ãƒ‰å“è³ªã®è‡ªå‹•ãƒã‚§ãƒƒã‚¯
5. **ã‚³ãƒ¼ãƒ‰ãƒ•ã‚©ãƒ¼ãƒãƒƒã‚¿**: dotnet formatã«ã‚ˆã‚‹ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã‚¹ã‚¿ã‚¤ãƒ«ã®çµ±ä¸€
6. **ã‚³ãƒ¼ãƒ‰ã‚«ãƒãƒ¬ãƒƒã‚¸**: Coverlet + ReportGeneratorã«ã‚ˆã‚‹ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸ã®æ¸¬å®šã¨å¯è¦–åŒ–
7. **ã‚¿ã‚¹ã‚¯ãƒ©ãƒ³ãƒŠãƒ¼**: Cakeã«ã‚ˆã‚‹C#ãƒ™ãƒ¼ã‚¹ã®ãƒ“ãƒ«ãƒ‰è‡ªå‹•åŒ–
8. **ã‚¿ã‚¹ã‚¯ã®è‡ªå‹•åŒ–**: dotnet watchã«ã‚ˆã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ç›£è¦–ã¨è‡ªå‹•å®Ÿè¡Œ

ã“ã‚Œã§[ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢é–‹ç™ºã®ä¸‰ç¨®ã®ç¥å™¨](https://t-wada.hatenablog.jp/entry/clean-code-that-works)ãŒæƒã„ã¾ã—ãŸï¼š

- âœ… **ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†**: Git + Angularãƒ«ãƒ¼ãƒ«ã®ã‚³ãƒŸãƒƒãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
- âœ… **ãƒ†ã‚¹ãƒ†ã‚£ãƒ³ã‚°**: xUnit + Moq + Coverlet
- âœ… **è‡ªå‹•åŒ–**: Cake + dotnet watch

**Cakeã‚’ä½¿ã†ãƒ¡ãƒªãƒƒãƒˆ**:
- C#ã§æ›¸ã‘ã‚‹ã®ã§.NETé–‹ç™ºè€…ã«ã¨ã£ã¦è‡ªç„¶
- ã‚¿ã‚¹ã‚¯ã®ä¾å­˜é–¢ä¿‚ã‚’å®£è¨€çš„ã«å®šç¾©ã§ãã‚‹
- ã‚¯ãƒ­ã‚¹ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã§å‹•ä½œ
- è±Šå¯Œãªã‚¢ãƒ‰ã‚¤ãƒ³ã¨ãƒ˜ãƒ«ãƒ‘ãƒ¼æ©Ÿèƒ½
- IDEçµ±åˆã¨ãƒ‡ãƒãƒƒã‚°ã‚µãƒãƒ¼ãƒˆ

ã€Œã“ã‚Œã§ãƒ†ã‚¹ãƒˆé§†å‹•é–‹ç™ºã‚’å§‹ã‚ã‚‹æº–å‚™ãŒæ•´ã„ã¾ã—ãŸã­ï¼ã€ãã®é€šã‚Šã§ã™ï¼æ¬¡ã®ã‚¤ãƒ†ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‹ã‚‰ã¯ã€å®Ÿéš›ã«ã·ã‚ˆã·ã‚ˆã‚²ãƒ¼ãƒ ã®æ©Ÿèƒ½ã‚’å®Ÿè£…ã—ã¦ã„ãã¾ã™ã‚ˆã€‚

é–‹ç™ºã‚’å§‹ã‚ã‚‹ã¨ãã¯ã€ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¦ãŠã‘ã°ã€ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä¿å­˜ã™ã‚‹ãŸã³ã«è‡ªå‹•ã§ãƒ†ã‚¹ãƒˆãŒå®Ÿè¡Œã•ã‚Œã‚‹ã®ã§ã€ãƒ†ã‚¹ãƒˆé§†å‹•é–‹ç™ºã®ãƒªã‚ºãƒ ï¼ˆRed-Green-Refactorï¼‰ã«é›†ä¸­ã§ãã¾ã™ã­ï¼

```bash
# Cakeã®çµ„ã¿è¾¼ã¿Watchã‚’ä½¿ã†
dotnet cake --target=Watch

# åˆ¥ã®ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã§ã‚³ãƒ¼ãƒ‰ã‚’ç·¨é›†
# ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä¿å­˜ã™ã‚‹ãŸã³ã«è‡ªå‹•ã§ãƒ†ã‚¹ãƒˆãŒå®Ÿè¡Œã•ã‚Œã‚‹ï¼
```

**ã‚ˆãä½¿ã†Cakeã‚³ãƒãƒ³ãƒ‰**:
```bash
dotnet cake                      # ã™ã¹ã¦ã®å“è³ªãƒã‚§ãƒƒã‚¯ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆï¼‰
dotnet cake --target=Clean       # ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—
dotnet cake --target=Format      # ã‚³ãƒ¼ãƒ‰ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ
dotnet cake --target=Build       # ãƒ“ãƒ«ãƒ‰
dotnet cake --target=Test        # ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
dotnet cake --target=Coverage    # ã‚«ãƒãƒ¬ãƒƒã‚¸æ¸¬å®š
dotnet cake --target=Watch       # è‡ªå‹•ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
```

ãã‚Œã§ã¯ã€æ¬¡ã®ã‚¤ãƒ†ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³1ã§å®Ÿéš›ã®ã‚²ãƒ¼ãƒ æ©Ÿèƒ½ã®å®Ÿè£…ã«å–ã‚Šçµ„ã‚“ã§ã„ãã¾ã—ã‚‡ã†ï¼
