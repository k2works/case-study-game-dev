# ユーザーインターフェース設計

## 概要

ぷよぷよゲームのユーザーインターフェースは、直感的で視覚的に楽しく、レスポンシブデザインに対応したものとします。

## 全体レイアウト

```plantuml
@startsalt
{
  {T
    + ぷよぷよゲーム
    ++ <&media-play> スタート | <&media-pause> ポーズ | <&reload> リスタート
  }
  |
  {
    {
      スコア: 0
      --
      連鎖: 0
      --
      レベル: 1
    } | {
      == ゲームフィールド ==
      {#
        . | . | . | . | . | .
        . | . | . | . | . | .
        . | . | . | . | . | .
        . | . | . | . | . | .
        . | . | . | . | . | .
        . | . | . | . | . | .
        . | . | . | . | . | .
        . | . | . | . | . | .
        . | . | . | . | . | .
        . | . | . | . | . | .
        . | . | . | . | . | .
        . | . | . | . | . | .
        X | X | X | X | X | X
      }
    } | {
      == NEXT ==
      {#
        R | R
        B | B
      }
      --
      {#
        G | G
        Y | Y
      }
    }
  }
  |
  {
    [<] 左移動 | [v] 落下 | [>] 右移動 | [^] 回転
  }
}
```

## 詳細UI設計

### 1. ゲームフィールド

```plantuml
@startsalt
{
  == ゲームフィールド (6×12表示) ==
  {#
    . | . | . | . | . | .
    . | . | . | . | . | .
    . | . | . | . | . | .
    . | . | G | G | . | .
    . | . | R | B | . | .
    . | R | R | B | B | .
    . | G | G | Y | Y | .
    R | R | B | B | Y | Y
    R | G | G | B | Y | B
    G | G | R | R | B | B
    B | B | Y | Y | R | R
    B | Y | Y | G | G | R
  }
  --
  ※ 各セル: 40×40px
  ※ 色: R=赤, G=緑, B=青, Y=黄, P=紫
  ※ ゴースト表示: 半透明
}
```

### 2. ぷよ表示

```plantuml
@startuml "ぷよデザイン"

skinparam object {
  BackgroundColor<<Red>> #FF6B6B
  BackgroundColor<<Green>> #51CF66
  BackgroundColor<<Blue>> #339AF0
  BackgroundColor<<Yellow>> #FFD43B
  BackgroundColor<<Purple>> #CC5DE8
}

object "赤ぷよ" as RedPuyo <<Red>> {
  サイズ: 40×40px
  形状: 丸角正方形
  目: ●●
  影: ドロップシャドウ
}

object "緑ぷよ" as GreenPuyo <<Green>> {
  サイズ: 40×40px
  形状: 丸角正方形
  目: ●●
  影: ドロップシャドウ
}

object "青ぷよ" as BluePuyo <<Blue>> {
  サイズ: 40×40px
  形状: 丸角正方形
  目: ●●
  影: ドロップシャドウ
}

object "黄ぷよ" as YellowPuyo <<Yellow>> {
  サイズ: 40×40px
  形状: 丸角正方形
  目: ●●
  影: ドロップシャドウ
}

object "紫ぷよ" as PurplePuyo <<Purple>> {
  サイズ: 40×40px
  形状: 丸角正方形
  目: ●●
  影: ドロップシャドウ
}

@enduml
```

### 3. コントロール

```plantuml
@startsalt
{
  == キーボード操作 ==
  {T
    + 移動
    ++ ← : 左移動
    ++ → : 右移動
    ++ ↓ : 高速落下
    + 回転
    ++ ↑ or Z : 時計回り
    + その他
    ++ Space : ハードドロップ
    ++ P : ポーズ
    ++ R : リスタート
  }
  --
  == タッチ操作 ==
  {T
    + ジェスチャー
    ++ 左スワイプ : 左移動
    ++ 右スワイプ : 右移動
    ++ 下スワイプ : 高速落下
    ++ タップ : 回転
    + ボタン
    ++ [<] [v] [>] [回転]
  }
}
```

## ゲーム状態別UI

### 1. タイトル画面

```plantuml
@startsalt
{
  {C
    == ぷよぷよ ==
    .
    .
    [ スタート ]
    .
    [ 設定 ]
    .
    [ ハイスコア ]
    .
    .
    "© 2024 Puyo Puyo Game"
  }
}
```

### 2. ゲーム中

```plantuml
@startsalt
{
  スコア: 12,450 | 連鎖: 3 | レベル: 2
  --
  {
    {#
      . | . | . | . | . | .
      . | . | [R] | [R] | . | .
      . | . | . | . | . | .
      . | . | G | G | . | .
      . | . | R | B | . | .
      . | R | R | B | B | .
      . | G | G | Y | Y | .
      R | R | B | B | Y | Y
      R | G | G | B | Y | B
      G | G | R | R | B | B
      B | B | Y | Y | R | R
      B | Y | Y | G | G | R
    } | {
      NEXT
      --
      {#
        B | B
        G | G
      }
    }
  }
}
```

### 3. ポーズ画面

```plantuml
@startsalt
{
  {C
    == ポーズ中 ==
    .
    [ 再開 ]
    .
    [ リスタート ]
    .
    [ タイトルに戻る ]
  }
}
```

### 4. ゲームオーバー画面

```plantuml
@startsalt
{
  {C
    == GAME OVER ==
    .
    最終スコア: 45,230
    最大連鎖: 7
    .
    [ もう一度 ]
    .
    [ タイトルに戻る ]
  }
}
```

## レスポンシブデザイン

### デスクトップ (1024px以上)
- ゲームフィールド: 中央配置
- サイドパネル: スコア表示とNEXT表示
- キーボード操作メイン

### タブレット (768px〜1023px)
- ゲームフィールド: 画面幅に合わせて調整
- コンパクトなUI配置
- タッチ操作ボタン表示

### モバイル (767px以下)
- ゲームフィールド: 画面幅いっぱい
- 縦長レイアウト
- 大きめのタッチ操作ボタン

```plantuml
@startuml "レスポンシブレイアウト"

skinparam rectangle {
  BackgroundColor #F0F0F0
  BorderColor #333333
}

rectangle "デスクトップ\n(1024px〜)" {
  rectangle "ヘッダー" #E0E0E0
  rectangle "サイドバー\n(スコア)" #D0D0D0
  rectangle "ゲーム\nフィールド" #FFFFFF
  rectangle "サイドバー\n(NEXT)" #D0D0D0
}

rectangle "タブレット\n(768px〜1023px)" {
  rectangle "ヘッダー " #E0E0E0
  rectangle "スコア・NEXT" #D0D0D0
  rectangle "ゲーム\nフィールド " #FFFFFF
  rectangle "タッチボタン" #C0C0C0
}

rectangle "モバイル\n(〜767px)" {
  rectangle "ヘッダー  " #E0E0E0
  rectangle "スコア" #D0D0D0
  rectangle "ゲーム\nフィールド  " #FFFFFF
  rectangle "NEXT" #D0D0D0
  rectangle "タッチボタン " #C0C0C0
}

@enduml
```

## タッチ操作UI

```plantuml
@startsalt
{
  == タッチ操作ボタン ==
  {
    . | [↑回転] | .
    [←左] | [↓落下] | [→右]
    . | [⬇ハード] | .
  }
  --
  ※ ボタンサイズ: 60×60px
  ※ 半透明背景
  ※ タップ時ハイライト
}
```

## アニメーション仕様

### 1. ぷよ落下
- イージング: ease-in
- 落下速度: レベルに応じて加速
- ゴースト表示: 不透明度 30%

### 2. ぷよ消去
- フェードアウト: 0.3秒
- パーティクルエフェクト
- 連鎖時は派手なエフェクト

### 3. 連鎖表示
- 数字がポップアップ
- スケールアニメーション
- 連鎖数に応じて色変化

### 4. 全消し
- 画面全体フラッシュ
- "全消し！"テキスト表示
- 星のパーティクル

## カラーパレット

```plantuml
@startuml "カラーパレット"

skinparam rectangle {
  BorderColor #000000
}

rectangle "メインカラー" {
  rectangle "赤ぷよ\n#FF6B6B" #FF6B6B
  rectangle "緑ぷよ\n#51CF66" #51CF66
  rectangle "青ぷよ\n#339AF0" #339AF0
  rectangle "黄ぷよ\n#FFD43B" #FFD43B
  rectangle "紫ぷよ\n#CC5DE8" #CC5DE8
}

rectangle "UIカラー" {
  rectangle "背景\n#F8F9FA" #F8F9FA
  rectangle "フィールド\n#FFFFFF" #FFFFFF
  rectangle "境界線\n#DEE2E6" #DEE2E6
  rectangle "テキスト\n#212529" #212529
  rectangle "アクセント\n#FF6B6B" #FF6B6B
}

@enduml
```

## アクセシビリティ対応

### 1. カラーユニバーサルデザイン
- 色だけでなく形状でも識別可能
- 高コントラストモード対応
- 色覚異常シミュレーション確認

### 2. キーボードナビゲーション
- すべての機能にキーボードでアクセス可能
- フォーカス表示の明確化
- ショートカットキーの提供

### 3. スクリーンリーダー対応
- 適切なARIAラベル
- ゲーム状態の音声読み上げ
- 重要なイベントの通知

### 4. モーション設定
- アニメーション無効化オプション
- 低モーションモード
- エフェクト強度調整