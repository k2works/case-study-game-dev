# ADR-0004: テスト駆動開発（TDD）アプローチの採用

## ステータス

承認済み

## コンテキスト

ぷよぷよゲームの開発において、複雑なゲームロジック（ぷよの移動、回転、消去判定、連鎖処理、スコア計算）を安全かつ効率的に実装する必要がある。
従来の開発手法では以下の課題がある：

- ゲームロジックの複雑性により、バグの混入リスクが高い
- 連鎖処理などの複雑な処理の正確性を保証するのが困難
- 後からのリファクタリングや機能追加の安全性が低い
- デバッグに時間がかかる

## 決定

テスト駆動開発（TDD）アプローチを開発手法として採用する。

## 理由

- **品質保証**: Red-Green-Refactorサイクルにより、すべての機能が必ずテストされ、高品質なコードが保証される
- **設計改善**: テストファーストにより、テスタブルで結合度の低い設計になる
- **安全なリファクタリング**: 包括的なテストスイートにより、リファクタリングが安全に実行できる
- **ドキュメント効果**: テストコードが実行可能な仕様書として機能する
- **複雑なロジックの理解**: 連鎖処理やスコア計算などの複雑なロジックをテストケースで明確化できる
- **デバッグ効率**: 問題が発生した際に、テストにより問題箇所を特定しやすい
- **継続的改善**: 各イテレーションでの安全な機能追加が可能

## 結果

### 良い結果
- ゲームロジックの正確性保証
- 安全なリファクタリングによるコード品質向上
- テストコードによる仕様の明確化
- バグの早期発見と修正
- 継続的な機能追加の安全性

### 悪い結果
- 開発初期の時間投資が必要
- テストコードの記述・維持コストが発生
- 学習コストが発生する可能性