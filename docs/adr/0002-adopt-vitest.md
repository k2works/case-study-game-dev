# ADR-0002: Vitestの採用

## ステータス

承認済み

## コンテキスト

TypeScriptプロジェクトにおいてテスト駆動開発を実践するため、適切なテスティングフレームワークを選定する必要がある。
ぷよぷよゲームのような複雑なゲームロジック（連鎖処理、消去判定、スコア計算等）を安全に実装するために、効果的なテスト環境が必要。

選定にあたっての要件：
- TypeScriptとの親和性
- 高速なテスト実行（TDDサイクルの高速化）
- 使いやすいAPI
- ウォッチモードのサポート
- ゲームロジックのテストに適した機能

## 決定

Vitestをテスティングフレームワークとして採用する。

## 理由

- **高速**: Viteベースで動作し、高速なテスト実行が可能。TDDのRed-Green-Refactorサイクルを高速で回せる
- **TypeScript対応**: TypeScriptを標準でサポートし、追加設定が最小限
- **Jest互換**: Jest互換のAPIを提供し、学習コストが低い
- **ウォッチモード**: ファイル変更を検知して自動的にテストを再実行。連続的な開発に適している
- **ESM対応**: ES Modulesを標準でサポート
- **ゲームテスト対応**: モック機能やスパイ機能により、ゲーム状態やイベントのテストが容易

## 結果

### 良い結果
- テスト実行速度の向上によるTDDサイクルの高速化
- 開発体験の向上
- 設定の簡素化
- ゲームロジックの安全な実装

### 悪い結果
- Jestからの移行が必要な場合がある
- 比較的新しいツールのため、一部のエコシステムが未成熟な可能性