# ゲーム開発のケーススタディ

## 概要

AI プログラミング学習の一環として、ゲーム開発を題材にしたケーススタディプロジェクトです。

本プロジェクトでは、よいソフトウェアの原則に従ってぷよぷよゲームを段階的に開発し、**全8イテレーション完了**により完全に動作するゲームを実装しました。

## 🎮 実装されたゲーム機能

### 完了した8つのイテレーション

| イテレーション | 機能 | 実装内容 |
|---|---|---|
| 1 | ゲーム基盤 | ゲーム開始・ぷよ生成・60FPSゲームループ |
| 2 | ぷよ移動 | 左右移動・自由落下・着地判定・高速落下 |
| 3 | ぷよ回転 | 時計回り回転・壁キック処理 |
| 4 | 高速落下 | 下キー入力による即座落下 |
| 5 | ぷよ消去 | 4つ以上連結判定・消去処理・重力適用 |
| 6 | 連鎖システム | 連続消去・連鎖カウント・ボーナススコア |
| 7 | 全消しボーナス | フィールド全消去時の特別ボーナス（+2000点） |
| 8 | ゲームオーバー | 判定・演出・リスタート（Rキー）・リセット機能 |

### 品質指標

- **テスト**: 76テスト、100%通過率
- **コードカバレッジ**: 包括的なテストによる高い網羅率  
- **アーキテクチャ**: ドメイン駆動設計（DDD）+ テスト駆動開発（TDD）
- **型安全性**: TypeScript厳密モード適用
- **自動化**: ESLint + Prettier + GitHub Actions + Vercel

### 操作方法

| キー | 動作 |
|------|------|
| ← → | ぷよの左右移動 |
| ↑ | ぷよの回転 |
| ↓ | 高速落下 |
| R | ゲームオーバー時のリスタート |

### スコアシステム

- **基本スコア**: 消去ぷよ数 × 10点
- **連鎖ボーナス**: 2^(連鎖数-1) 倍
- **全消しボーナス**: +2000点（連鎖発生時のみ）

### 技術的特徴

- **モジュール設計**: ドメイン・アプリケーション・インフラストラクチャ層の明確な分離
- **状態管理**: Gameクラスによる一元的なゲーム状態管理  
- **描画システム**: HTML5 Canvas APIを使用した効率的な描画
- **入力システム**: イベント駆動型のキーボード入力処理
- **テスト戦略**: 各層・各機能に対する包括的なユニットテスト

### 目的

- AIを活用したプログラミング手法の習得
- ゲーム開発における設計・実装・運用の実践
- ドキュメント駆動開発の体験
- テスト駆動開発とアジャイル開発の実践

### 前提

| ソフトウェア | バージョン   | 備考 |
| :----------- |:--------| :--- |
| Docker       | 最新     | 開発環境の構築に必要 |
| Docker Compose | 最新   | 複数コンテナの管理に必要 |
| Git          | 最新     | バージョン管理に必要 |
| Node.js      | 最新     | Gulpタスクの実行に必要 |
| npm          | 最新     | パッケージ管理に必要 |

## ぷよぷよゲーム

### 概要

TypeScriptとテスト駆動開発で実装するぷよぷよゲーム（`app/`ディレクトリ）

### 技術スタック

- **言語**: TypeScript
- **テスト**: Vitest + TDD
- **ビルド**: Vite
- **品質管理**: ESLint + Prettier
- **CI/CD**: GitHub Actions + Vercel

### クイックスタート

```bash
# ゲームアプリケーションディレクトリに移動
cd app

# 依存関係のインストール
npm install

# 開発サーバーの起動
npm run dev
```

ゲームは http://localhost:5173 でアクセス可能です。

🎮 **デモ**: [オンラインでプレイ](https://case-study-game-dev.vercel.app/) (デプロイ済み)

詳細は [アプリケーションREADME](./app/README.md) を参照してください。

## 構成

- [ぷよぷよゲーム](#ぷよぷよゲーム)
- [構築](#構築)
- [配置](#配置)
- [運用](#運用)
- [開発](#開発)

## 詳細

### 構築

#### Quick Start

```bash
# リポジトリのクローン
git clone https://github.com/k2works/ai-programing-exercise.git
cd case-study-game-dev

# 依存関係のインストール
npm install

# ドキュメントサーバーの起動
npm run docs:serve
```

ドキュメントは http://localhost:8000 でアクセス可能です。

詳細な手順は [セットアップドキュメント](./docs/operation/セットアップ.md) を参照してください。

**[⬆ back to top](#構成)**

### 配置

ドキュメントのビルドとデプロイ：

```bash
# ドキュメントのビルド
npm run docs:build

# 静的ファイルは site/ ディレクトリに生成されます
```

**[⬆ back to top](#構成)**

### 運用

プロジェクトの運用に関する情報は [運用ドキュメント](./docs/operation/) を参照してください。

**主要な運用ドキュメント：**
- [セットアップ](./docs/operation/セットアップ.md) - 開発環境のセットアップ
- [Vercel設定](./docs/operation/Vercel設定.md) - ぷよぷよゲームのデプロイ設定

利用可能なコマンド：

| コマンド | 説明 |
| :------- | :--- |
| `npm run journal` | 開発日誌の生成 |
| `npm run docs:serve` | ドキュメントサーバーの起動 |
| `npm run docs:stop` | ドキュメントサーバーの停止 |
| `npm run docs:build` | ドキュメントのビルド |

**[⬆ back to top](#構成)**

### 開発

開発に関する詳細は以下のドキュメントを参照してください：

- [まずこれを読もうリスト](./docs/index.md) - プロジェクト全体の理解に必要なドキュメント
- [開発ドキュメント](./docs/development/) - 開発の具体的な手順やガイドライン
- [要件定義](./docs/requirements/) - システムの要件とユーザーストーリー
- [アーキテクチャ決定ログ](./docs/adr/) - 重要な技術的決定の記録

**[⬆ back to top](#構成)**

## 参照

- [プロジェクトドキュメント](./docs/)
- [開発日誌](./docs/journal/)
- [GitHub Repository](https://github.com/k2works/ai-programing-exercise)