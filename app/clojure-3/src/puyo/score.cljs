(ns puyo.score)

(def 連鎖ボーナス
  "連鎖ボーナステーブル"
  [0 8 16 32 64 96 128 160 192 224 256])

(defn スコア計算
  "スコアを計算"
  [消去数 連鎖数]
  (let [連鎖インデックス (min 連鎖数 (dec (count 連鎖ボーナス)))
        ボーナス (nth 連鎖ボーナス 連鎖インデックス)]
    (* 消去数 10 (max 1 (+ 1 ボーナス)))))

(defn 全消し判定?
  "フィールドが空かチェック"
  [盤面]
  (every? zero? (flatten 盤面)))

(def 全消しボーナス 2100)
