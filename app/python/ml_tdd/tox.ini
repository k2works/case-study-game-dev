[tox]
env_list = py310, lint, type, test
isolated_build = True

[testenv]
description = Run tests with pytest
deps =
    pytest
    pytest-cov
commands = pytest {posargs}

[testenv:test]
description = Run tests with coverage
deps =
    pytest
    pytest-cov
commands = pytest --cov=src --cov-report=html --cov-report=term-missing --verbose {posargs}

[testenv:lint]
description = Run linting with ruff
deps = ruff
commands =
    ruff check .
    ruff format --check .

[testenv:format]
description = Format code with ruff
deps = ruff
commands = ruff format .

[testenv:type]
description = Run type checking with mypy
deps =
    mypy
    pytest
commands = mypy src test {posargs}

[testenv:coverage]
description = Run coverage report
deps =
    pytest
    pytest-cov
commands = pytest --cov=src --cov-report=html --cov-report=term-missing

[testenv:all]
description = Run all quality checks
deps =
    pytest
    pytest-cov
    ruff
    mypy
commands =
    ruff check .
    ruff format --check .
    mypy src test
    pytest --cov=src --cov-report=html --cov-report=term-missing --verbose
